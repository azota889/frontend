(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{fB2i:function(t,n,e){"use strict";e.d(n,"a",function(){return _}),e.d(n,"b",function(){return C});var o=e("fXoL"),i=e("ofXK"),s=e("3Pt+");function a(t,n){}const r=()=>{const t="undefined"!=typeof window?window:void 0;return t&&t.tinymce?t.tinymce:null};let c=(()=>{class t{constructor(){this.onBeforePaste=new o.o,this.onBlur=new o.o,this.onClick=new o.o,this.onContextMenu=new o.o,this.onCopy=new o.o,this.onCut=new o.o,this.onDblclick=new o.o,this.onDrag=new o.o,this.onDragDrop=new o.o,this.onDragEnd=new o.o,this.onDragGesture=new o.o,this.onDragOver=new o.o,this.onDrop=new o.o,this.onFocus=new o.o,this.onFocusIn=new o.o,this.onFocusOut=new o.o,this.onKeyDown=new o.o,this.onKeyPress=new o.o,this.onKeyUp=new o.o,this.onMouseDown=new o.o,this.onMouseEnter=new o.o,this.onMouseLeave=new o.o,this.onMouseMove=new o.o,this.onMouseOut=new o.o,this.onMouseOver=new o.o,this.onMouseUp=new o.o,this.onPaste=new o.o,this.onSelectionChange=new o.o,this.onActivate=new o.o,this.onAddUndo=new o.o,this.onBeforeAddUndo=new o.o,this.onBeforeExecCommand=new o.o,this.onBeforeGetContent=new o.o,this.onBeforeRenderUI=new o.o,this.onBeforeSetContent=new o.o,this.onChange=new o.o,this.onClearUndos=new o.o,this.onDeactivate=new o.o,this.onDirty=new o.o,this.onExecCommand=new o.o,this.onGetContent=new o.o,this.onHide=new o.o,this.onInit=new o.o,this.onInitNgModel=new o.o,this.onLoadContent=new o.o,this.onNodeChange=new o.o,this.onPostProcess=new o.o,this.onPostRender=new o.o,this.onPreInit=new o.o,this.onPreProcess=new o.o,this.onProgressState=new o.o,this.onRedo=new o.o,this.onRemove=new o.o,this.onReset=new o.o,this.onSaveContent=new o.o,this.onSetAttrib=new o.o,this.onObjectResizeStart=new o.o,this.onObjectResized=new o.o,this.onObjectSelected=new o.o,this.onSetContent=new o.o,this.onShow=new o.o,this.onSubmit=new o.o,this.onUndo=new o.o,this.onVisualAid=new o.o}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=o.Kb({type:t,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),t})();const l=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],d=(t,n)=>"string"==typeof t?t.split(",").map(t=>t.trim()):Array.isArray(t)?t:n;let u=0;const h=t=>{const n=(new Date).getTime(),e=Math.floor(1e9*Math.random());return u++,t+"_"+e+u+String(n)},b=t=>void 0!==t&&"textarea"===t.tagName.toLowerCase(),g=t=>void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" "),f=()=>{},p=t=>null==t,m=()=>({listeners:[],scriptId:h("tiny-script"),scriptLoaded:!1}),v=(()=>{let t=m();return{load:(n,e,o)=>{t.scriptLoaded?o():(t.listeners.push(o),n.getElementById(t.scriptId)||((n,e,o,i)=>{const s=e.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=n,s.src=o;const a=()=>{s.removeEventListener("load",a),t.listeners.forEach(t=>t()),t.scriptLoaded=!0};s.addEventListener("load",a),e.head&&e.head.appendChild(s)})(t.scriptId,n,e))},reinitialize:()=>{t=m()}}})(),w=new o.s("TINYMCE_SCRIPT_SRC"),x={provide:s.p,useExisting:Object(o.X)(()=>_),multi:!0};let _=(()=>{class t extends c{constructor(t,n,e,o){super(),this.platformId=e,this.tinymceScriptSrc=o,this.cloudChannel="5",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=f,this.onChangeCallback=f,this._elementRef=t,this.ngZone=n,this.initialise=this.initialise.bind(this)}set disabled(t){this._disabled=t,this._editor&&this._editor.initialized&&this._editor.setMode(t?"readonly":"design")}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(t){this._editor&&this._editor.initialized?this._editor.setContent(p(t)?"":t):this.initialValue=null===t?void 0:t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this._editor?this._editor.setMode(t?"readonly":"design"):t&&(this.init=Object.assign(Object.assign({},this.init),{readonly:!0}))}ngAfterViewInit(){Object(i.y)(this.platformId)&&(this.id=this.id||h("tiny-angular"),this.inline=void 0!==this.inline?"boolean"!=typeof this.inline||this.inline:this.init&&this.init.inline,this.createElement(),null!==r()?this.initialise():this._element&&this._element.ownerDocument&&v.load(this._element.ownerDocument,this.getScriptSrc(),this.initialise))}ngOnDestroy(){null!==r()&&r().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(this._element.id=this.id,b(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise(){const t=Object.assign(Object.assign({},this.init),{target:this._element,inline:this.inline,readonly:this.disabled,plugins:(n=this.init&&this.init.plugins,e=this.plugins,g(n).concat(g(e))),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:t=>{this._editor=t,t.on("init",n=>{this.initEditor(t)}),((t,n)=>{(t=>{const n=d(t.ignoreEvents,[]);return d(t.allowedEvents,l).filter(t=>l.includes(t)&&!n.includes(t))})(t).forEach(e=>{const o=t[e];n.on(e.substring(2),e=>t.ngZone.run(()=>o.emit({event:e,editor:n})))})})(this,t),this.init&&"function"==typeof this.init.setup&&this.init.setup(t)}});var n,e;b(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{r().init(t)})}getScriptSrc(){return p(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(t){t.on("blur",()=>this.ngZone.run(()=>this.onTouchedCallback())),t.on(this.modelEvents,()=>{this.ngZone.run(()=>this.onChangeCallback(t.getContent({format:this.outputFormat})))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{t.setContent(this.initialValue),t.getContent()!==this.initialValue&&this.onChangeCallback(t.getContent({format:this.outputFormat})),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(t)})}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(o.l),o.Pb(o.B),o.Pb(o.D),o.Pb(w,8))},t.\u0275cmp=o.Jb({type:t,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",id:"id",modelEvents:"modelEvents",disabled:"disabled",initialValue:"initialValue",init:"init",inline:"inline",outputFormat:"outputFormat",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents"},features:[o.Cb([x]),o.Ab],decls:1,vars:0,template:function(t,n){1&t&&o.Rc(0,a,0,0,"ng-template")},styles:["[_nghost-%COMP%] { display: block; }"]}),t})(),C=(()=>{class t{}return t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({factory:function(n){return new(n||t)},imports:[[i.c,s.m]]}),t})()},jtFE:function(t,n,e){"use strict";e.r(n),e.d(n,"PowerpointFrontModule",function(){return pt});var o=e("ofXK"),i=e("3Pt+"),s=e("0IaG"),a=e("tyNb"),r=e("fB2i"),c=e("Zhhu"),l=e("vvyD"),d=e("sOeQ"),u=e("quSY"),h=e("itXk"),b=e("W8E8"),g=e("gm2p"),f=e("fXoL"),p=e("PYj7"),m=e("oUVn"),v=e("o9K7"),w=e("luLc"),x=e("iWHX");function _(t,n){1&t&&f.Qb(0,"azt-loading-effect")}const C=function(){return{}};function O(t,n){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"azt-template-one",14),f.cc("chooseAnswer",function(n){return f.Ec(t),f.gc(2).setAnswerObjs(n)})("changeAnswerWithResult",function(){return f.Ec(t),f.gc(2).changeAnswerWithResult()}),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(1),f.nc("indexQuestion",null==t.curQuestionObj?null:t.curQuestionObj.index)("questionObj",t.curQuestionObj||f.sc(4,C))("isAnswer",!t.isResult)("studentAnswer",null!=t.curQuestionObj&&t.curQuestionObj.defaultStudentAnswer&&(null==t.curQuestionObj||null==t.curQuestionObj.defaultStudentAnswer?null:t.curQuestionObj.defaultStudentAnswer.answer)||"")}}function P(t,n){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"azt-template-two",14),f.cc("chooseAnswer",function(n){return f.Ec(t),f.gc(2).setAnswerObjs(n)})("changeAnswerWithResult",function(){return f.Ec(t),f.gc(2).changeAnswerWithResult()}),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(1),f.nc("indexQuestion",null==t.curQuestionObj?null:t.curQuestionObj.index)("questionObj",t.curQuestionObj||f.sc(4,C))("isAnswer",!t.isResult)("studentAnswer",null!=t.curQuestionObj&&t.curQuestionObj.defaultStudentAnswer&&(null==t.curQuestionObj||null==t.curQuestionObj.defaultStudentAnswer?null:t.curQuestionObj.defaultStudentAnswer.answer)||"")}}function y(t,n){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"azt-template-three",14),f.cc("chooseAnswer",function(n){return f.Ec(t),f.gc(2).setAnswerObjs(n)})("changeAnswerWithResult",function(){return f.Ec(t),f.gc(2).changeAnswerWithResult()}),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(1),f.nc("indexQuestion",null==t.curQuestionObj?null:t.curQuestionObj.index)("questionObj",t.curQuestionObj||f.sc(4,C))("isAnswer",!t.isResult)("studentAnswer",null!=t.curQuestionObj&&t.curQuestionObj.defaultStudentAnswer&&(null==t.curQuestionObj||null==t.curQuestionObj.defaultStudentAnswer?null:t.curQuestionObj.defaultStudentAnswer.answer)||"")}}function S(t,n){if(1&t){const t=f.Wb();f.Vb(0,"button",15),f.cc("click",function(){return f.Ec(t),f.gc(2).openDialog()}),f.Tc(1),f.hc(2,"mytranslate"),f.Ub()}2&t&&(f.Db(1),f.Vc(" ",f.ic(2,1,"lang_powerpoint_frontend_detail_submit")," "))}function k(t,n){if(1&t){const t=f.Wb();f.Vb(0,"button",15),f.cc("click",function(){return f.Ec(t),f.gc(2).redirectResult()}),f.Tc(1),f.hc(2,"mytranslate"),f.Ub()}2&t&&(f.Db(1),f.Vc(" ",f.ic(2,1,"lang_powerpoint_frontend_detail_view_result")," "))}function M(t,n){if(1&t){const t=f.Wb();f.Vb(0,"div",3),f.Rc(1,O,2,5,"div",4),f.Rc(2,P,2,5,"div",4),f.Rc(3,y,2,5,"div",4),f.Ub(),f.Vb(4,"div",5),f.Vb(5,"div",6),f.Vb(6,"div",7),f.Vb(7,"div",8),f.Vb(8,"span",9),f.Tc(9),f.Ub(),f.Ub(),f.Ub(),f.Vb(10,"div",10),f.Vb(11,"azt-next-back-btn",11),f.cc("goToPrevEmit",function(n){return f.Ec(t),f.gc().prevScreenPP(n)})("goToNextEmit",function(n){return f.Ec(t),f.gc().nextScreenPP(n)}),f.Ub(),f.Ub(),f.Vb(12,"div",12),f.Rc(13,S,3,3,"button",13),f.Rc(14,k,3,3,"button",13),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc();f.nc("ngSwitch",t.templateId),f.Db(1),f.nc("ngSwitchCase",1),f.Db(1),f.nc("ngSwitchCase",2),f.Db(1),f.nc("ngSwitchCase",3),f.Db(6),f.Uc(t.testName),f.Db(2),f.nc("curIndex",t.curIndex)("totalQuestion",t.totalQuestion)("disableBackBtn",t.disableBackBtn)("disableNextBtn",t.disableNextBtn),f.Db(2),f.nc("ngIf",!t.isResult),f.Db(1),f.nc("ngIf",t.isResult)}}const j=".app[_ngcontent-%COMP%]{overflow-x:hidden;padding-bottom:40px}.maxW1200[_ngcontent-%COMP%]{max-width:1200px}.block[_ngcontent-%COMP%]{margin-top:30px}.block-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.text-align[_ngcontent-%COMP%]{text-align:left}.control[_ngcontent-%COMP%]{display:flex;justify-content:center}.control-next[_ngcontent-%COMP%], .control-prev[_ngcontent-%COMP%]{margin:0 15px}.control-btn[_ngcontent-%COMP%]{color:#fff;background-color:#169bd5;padding:5px 15px}.control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;font-weight:700;width:30px;height:30px}.block-submit[_ngcontent-%COMP%]{text-align:right;display:flex;align-items:flex-end;justify-content:flex-end}.block-control[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn-submit[_ngcontent-%COMP%]{background-color:#f39c12;padding:5px 25px;color:#fff;transition:all .5s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#e09214}.padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}@media screen and (max-width:768px){.block-submit[_ngcontent-%COMP%]{text-align:center;display:flex;align-items:center;justify-content:center}.padding-bottom[_ngcontent-%COMP%]{padding-bottom:16px}.btn-submit[_ngcontent-%COMP%]{width:50%}.text-align[_ngcontent-%COMP%]{text-align:center}}";let U=(()=>{class t extends g.a{constructor(t,n,e,o,i,s){super(o),this.dialog=t,this.router=n,this.frontPowerPointLinkService=e,this.commonService=o,this.docxService=i,this.homeworkExamService=s,this.subscriptions=new u.a,this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.backLink="",this.testName="Nguy\u1ec5n V\u0103n A",this.dataSubmit={},this.answers=[],this.curIndex=0,this.totalQuestion=0,this.disableBackBtn=!1,this.disableNextBtn=!1,this.isResult=!1,this.templateId=1}prevScreenPP(t){var n;if(t){var e=this.curIndex>0?this.curIndex-1:0;this.curQuestionObj=null===(n=this.questionObjs)||void 0===n?void 0:n[e],this.curIndex=e,0==e?(this.disableBackBtn=!0,this.disableNextBtn=!1):(this.disableBackBtn=!1,this.disableNextBtn=!1)}}nextScreenPP(t){var n,e,o,i,s,a,r;if(t){var c=this.curIndex==(null!==(e=null===(n=this.questionObjs)||void 0===n?void 0:n.length)&&void 0!==e?e:0)-1?null!==(i=null===(o=this.questionObjs)||void 0===o?void 0:o.length)&&void 0!==i?i:0:this.curIndex+1;this.curQuestionObj=null===(s=this.questionObjs)||void 0===s?void 0:s[c],this.curIndex=c,c==(null!==(r=null===(a=this.questionObjs)||void 0===a?void 0:a.length)&&void 0!==r?r:0)-1?(this.disableNextBtn=!0,this.disableBackBtn=!1):(this.disableNextBtn=!1,this.disableBackBtn=!1)}}setAnswerObjs(t){var n,e,o,i,s,a=null===(n=this.answers)||void 0===n?void 0:n.filter(n=>n.questionId==t.id);if(null!=t.index&&(null===(e=this.curQuestionObj)||void 0===e?void 0:e.id)==t.id){var r={questionId:t.id,answerContent:[{index:t.index,content:null===(o=t.event)||void 0===o?void 0:o.key}]};a&&a.length>0?null===(i=this.answers)||void 0===i||i.forEach(t=>{t.questionId==r.questionId&&(t.answerContent=r.answerContent)}):null===(s=this.answers)||void 0===s||s.push(r),this.changeStatusAnswer(t.id,t.index)}}changeStatusAnswer(t,n){var e;null===(e=this.questionObjs)||void 0===e||e.forEach(e=>{if(e.id==t&&e.answerConfigParse&&e.answerConfigParse.length>0){for(var o=0;o<e.answerConfigParse.length;o++)e.answerConfigParse[o].checked=!1,e.answerConfig=JSON.stringify(e.answerConfigParse);e.answerConfigParse[null!=n?n:-1].checked=!0,e.answerConfig=JSON.stringify(e.answerConfigParse),this.curQuestionObj=e}})}changeAnswerWithResult(){this.showErrorSnack("Kh\xf4ng th\u1ec3 thay \u0111\u1ed5i \u0111\xe1p \xe1n sau khi n\u1ed9p b\xe0i.")}redirectResult(){var t,n;this.commonService.myNavigation("/powerpoint/result/"+(null===(t=this.resultObj)||void 0===t?void 0:t.id)+"/"+(null===(n=this.resultObj)||void 0===n?void 0:n.hashCode))}SaveAnswersObjs(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.frontPowerPointLinkService.apiFrontPowerPointLinkSaveAnswersObjsPost(this.dataSubmit).subscribe(t=>{var n,e;if(1==t.success){var o=null===(n=t.data)||void 0===n?void 0:n.id,i=null===(e=t.data)||void 0===e?void 0:e.hashCode;this.commonService.myNavigation("/powerpoint/result/"+o+"/"+i),this.status_obj={loading:!1,error:!1,error_obj:{message:""}}}else"lang_core_cannot_resend_answer"==t.message?(this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.commonService.snackError("B\u1ea1n kh\xf4ng th\u1ec3 g\u1eedi l\u1ea1i b\xe0i l\xe0m","\u0110\xf3ng")):(this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.commonService.snackError("L\u1ed7i: N\u1ed9p b\xe0i kh\xf4ng th\xe0nh c\xf4ng","\u0110\xf3ng"))})}submitTestPP(){this.dataSubmit={id:this.JoinLinkId,hashCode:this.hashCode,answers:this.answers},this.SaveAnswersObjs()}openDialog(){this.dialog.open(D,{width:"450px",data:{}}).afterClosed().subscribe(t=>{"next"==t&&this.submitTestPP()})}setupStudentAnswers(){var t,n,e,o,i,s,a,r;for(let l=0;l<(null!==(n=null===(t=this.questionObjs)||void 0===t?void 0:t.length)&&void 0!==n?n:0);l++)null===(e=this.defaultStudentAnswers)||void 0===e||e.push({questionId:null===(o=this.questionObjs)||void 0===o?void 0:o[l].id,answer:""});if(!0===this.isResult){var c=JSON.parse(null!==(s=null===(i=this.resultObj)||void 0===i?void 0:i.answers)&&void 0!==s?s:"");null===(a=this.defaultStudentAnswers)||void 0===a||a.forEach(t=>{for(let n=0;n<c.length;n++)t.questionId==c[n].QuestionId&&(t.answer=c[n].AnswerContent[0].Content)});for(let t=0;t<c.length;t++)null===(r=this.questionObjs)||void 0===r||r.forEach(n=>{c[t].QuestionId===n.id&&(n.defaultStudentAnswer={questionId:c[t].QuestionId,answer:c[t].AnswerContent[0].Content})})}}getData(){this.subscriptions.add(this.frontPowerPointLinkService.apiFrontPowerPointLinkGetQuestionObjsGet(this.JoinLinkId,this.hashCode).subscribe(t=>{var n,e,o,i,s,a,r,c,l,d,u,h,g,f;if(1==t.success){let f=this.commonService.castJsonToClassObjs(b.e,JSON.stringify(null===(n=t.data)||void 0===n?void 0:n.questionObjs));this.questionObjs=this.homeworkExamService.changeDataQuestions(null!=f?f:[]),this.resultObj=null===(e=t.data)||void 0===e?void 0:e.resultObj,this.testName=null!==(i=null===(o=this.resultObj)||void 0===o?void 0:o.fullName)&&void 0!==i?i:"",this.disableBackBtn=!0,this.totalQuestion=null!==(a=null===(s=this.questionObjs)||void 0===s?void 0:s.length)&&void 0!==a?a:0,this.isResult=null!==(null===(r=this.resultObj)||void 0===r?void 0:r.answers),this.templateId=null!==(l=null===(c=t.data)||void 0===c?void 0:c.templateId)&&void 0!==l?l:-1,(null!==(u=null===(d=this.questionObjs)||void 0===d?void 0:d.length)&&void 0!==u?u:0)<=1&&(this.disableBackBtn=!0,this.disableNextBtn=!0),this.docxService.replaceCanvasBackground(null!==(h=this.questionObjs)&&void 0!==h?h:[]),this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.setupStudentAnswers(),this.curQuestionObj=null===(g=this.questionObjs)||void 0===g?void 0:g[0]}else this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.showErrorSnack(null!==(f=t.message)&&void 0!==f?f:"")}))}ngOnInit(){Object(h.b)([this.router.params,this.router.queryParams]).subscribe(([])=>{var t;this.JoinLinkId=Number(this.commonService.getMyParam(this.router,"id")),this.hashCode=null===(t=this.commonService.getMyParam(this.router,"hash_code"))||void 0===t?void 0:t.toString(),this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.getData()}),super.ngOnInit()}}return t.\u0275fac=function(n){return new(n||t)(f.Pb(s.b),f.Pb(a.a),f.Pb(p.D),f.Pb(m.a),f.Pb(v.a),f.Pb(w.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-join-class"]],features:[f.Ab],decls:4,vars:2,consts:[[1,"app","maxW1200","mt-2","mt-md-3"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"container","mt-md-3"],[1,"row","pl-0","pr-0","ml-0","mr-0"],[1,"col-md-4","px-0","mt-2","padding-bottom"],[1,"block","text-align"],[1,"block-title"],[1,"col-md-4","px-0","mt-2","block-control","text-center","padding-bottom"],[3,"curIndex","totalQuestion","disableBackBtn","disableNextBtn","goToPrevEmit","goToNextEmit"],[1,"col-md-4","px-0","block-submit","mt-2","text-center"],["class","btn-submit","mat-flat-button","",3,"click",4,"ngIf"],[3,"indexQuestion","questionObj","isAnswer","studentAnswer","chooseAnswer","changeAnswerWithResult"],["mat-flat-button","",1,"btn-submit",3,"click"]],template:function(t,n){if(1&t&&(f.Vb(0,"div",0),f.Rc(1,_,1,0,"azt-loading-effect",1),f.Rc(2,M,15,11,"ng-template",null,2,f.Sc),f.Ub()),2&t){const t=f.Ac(3);f.Db(1),f.nc("ngIf",n.status_obj.loading)("ngIfElse",t)}},styles:[j]}),t})(),D=(()=>{class t{constructor(t,n){this.dialogRef=t,this.data=n}ngOnInit(){}onNoClick(t){this.dialogRef.close(t)}}return t.\u0275fac=function(n){return new(n||t)(f.Pb(s.g),f.Pb(s.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["dialog-overview-example-dialog"]],decls:10,vars:9,consts:[[2,"font-size","20px","font-weight","500","margin-bottom","20px"],[2,"float","right"],["type","button",1,"btn","btn-danger","mr-3",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(f.Vb(0,"div",0),f.Tc(1),f.hc(2,"mytranslate"),f.Ub(),f.Vb(3,"div",1),f.Vb(4,"button",2),f.cc("click",function(){return n.onNoClick("cencer")}),f.Tc(5),f.hc(6,"mytranslate"),f.Ub(),f.Vb(7,"button",3),f.cc("click",function(){return n.onNoClick("next")}),f.Tc(8),f.hc(9,"mytranslate"),f.Ub(),f.Ub()),2&t&&(f.Db(1),f.Vc(" ",f.ic(2,3,"lang_powerpoint_frontend_detail_dialog"),".\n"),f.Db(4),f.Uc(f.ic(6,5,"lang_powerpoint_frontend_detail_cancel")),f.Db(3),f.Uc(f.ic(9,7,"lang_powerpoint_frontend_detail_continue")))},pipes:[x.q],styles:[j]}),t})();var I=e("Avyq"),V=e("NFeN"),B=e("UXJo"),A=e("JXIY"),E=e("Td3n"),Q=e("jPUe"),T=e("1jcm"),R=e("bTqV");function q(t,n){if(1&t&&(f.Vb(0,"div",8),f.Vb(1,"span",9),f.Tc(2),f.Vb(3,"span",10),f.Tc(4),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(2),f.Vc("",t.curIndex+1,"/"),f.Db(2),f.Uc(t.totalQuestion)}}let N=(()=>{class t extends g.a{constructor(){super(...arguments),this.disableBackBtn=!1,this.disableNextBtn=!1,this.curIndex=1,this.totalQuestion=1,this.goToPrevEmit=new f.o,this.goToNextEmit=new f.o}nextScreenPP(){this.goToNextEmit.emit(!0)}prevScreenPP(){this.goToPrevEmit.emit(!0)}}return t.\u0275fac=function(n){return $(n||t)},t.\u0275cmp=f.Jb({type:t,selectors:[["azt-next-back-btn"]],inputs:{disableBackBtn:"disableBackBtn",disableNextBtn:"disableNextBtn",curIndex:"curIndex",totalQuestion:"totalQuestion"},outputs:{goToPrevEmit:"goToPrevEmit",goToNextEmit:"goToNextEmit"},features:[f.Ab],decls:9,vars:4,consts:[[1,"component",3,"hidden"],["class","total-question",4,"ngIf"],[1,"control"],[1,"control-prev"],["mat-flat-button","",1,"control-btn",3,"disabled","click"],[1,"fa","fa-arrow-left"],[1,"control-next"],[1,"fa","fa-arrow-right"],[1,"total-question"],[1,"total"],[1,"result"]],template:function(t,n){1&t&&(f.Vb(0,"div",0),f.Rc(1,q,5,2,"div",1),f.Vb(2,"div",2),f.Vb(3,"div",3),f.Vb(4,"button",4),f.cc("click",function(){return n.prevScreenPP()}),f.Qb(5,"i",5),f.Ub(),f.Ub(),f.Vb(6,"div",6),f.Vb(7,"button",4),f.cc("click",function(){return n.nextScreenPP()}),f.Qb(8,"i",7),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.nc("hidden",n.totalQuestion<=1),f.Db(1),f.nc("ngIf",n.totalQuestion>0),f.Db(3),f.nc("disabled",n.disableBackBtn),f.Db(3),f.nc("disabled",n.disableNextBtn))},directives:[o.m,R.b],styles:[".component[_ngcontent-%COMP%], .total-question[_ngcontent-%COMP%]{text-align:center}.total-question[_ngcontent-%COMP%]{margin-bottom:10px}.control-prev[_ngcontent-%COMP%]{margin-right:30px}.control-next[_ngcontent-%COMP%], .control-prev[_ngcontent-%COMP%]{display:inline-block}.control-btn[_ngcontent-%COMP%]{color:#fff;background-color:#169bd5;padding:5px 15px;transition:all .5s}.control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;font-weight:700;width:30px;height:30px}.control-btn[_ngcontent-%COMP%]:hover{background-color:#198abb}@media screen and (max-width:768px){.control-prev[_ngcontent-%COMP%]{margin-right:15px}}"]}),t})();const $=f.Xb(N);function L(t,n){if(1&t){const t=f.Wb();f.Vb(0,"a",3),f.cc("click",function(){return f.Ec(t),f.gc().backScreen()}),f.Vb(1,"mat-icon",4),f.Tc(2,"arrow_back"),f.Ub(),f.Tc(3,"Quay l\u1ea1i"),f.Ub()}}function J(t,n){1&t&&(f.Vb(0,"div",5),f.Vb(1,"span"),f.Qb(2,"span",6),f.Tc(3,"\xa0"),f.Ub(),f.Tc(4),f.hc(5,"mytranslate"),f.Ub()),2&t&&(f.Db(4),f.Vc(" ",f.ic(5,1,"lang_powerpoint_frontend_chart_loading_data"),"\n"))}function W(t,n){if(1&t){const t=f.Wb();f.Vb(0,"a",3),f.cc("click",function(){return f.Ec(t),f.gc(2).showStatistic()}),f.Tc(1),f.hc(2,"mytranslate"),f.Ub()}if(2&t){const t=f.gc(2);f.Db(1),f.Xc("",f.ic(2,3,"lang_powerpoint_frontend_chart_view_result")," ( ",null==t.numberStatistical?null:t.numberStatistical.answered," / ",null==t.numberStatistical?null:t.numberStatistical.total," )")}}function z(t,n){if(1&t){const t=f.Wb();f.Vb(0,"a",3),f.cc("click",function(){return f.Ec(t),f.gc(2).showStatistic()}),f.Tc(1),f.hc(2,"mytranslate"),f.Ub()}2&t&&(f.Db(1),f.Uc(f.ic(2,1,"lang_powerpoint_frontend_chart_back")))}const F=function(){return{}};function G(t,n){if(1&t&&(f.Vb(0,"div"),f.Qb(1,"azt-template-one",22),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("indexQuestion",null==t.curQuestionObj?null:t.curQuestionObj.index)("questionObj",t.curQuestionObj||f.sc(5,F))("isAnswer",!0)("isShowAnswer",t.isShowAnswer)("studentAnswer","")}}function K(t,n){if(1&t&&(f.Vb(0,"div"),f.Qb(1,"azt-template-two",22),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("indexQuestion",null==t.curQuestionObj?null:t.curQuestionObj.index)("questionObj",t.curQuestionObj||f.sc(5,F))("isAnswer",!0)("isShowAnswer",t.isShowAnswer)("studentAnswer","")}}function X(t,n){if(1&t&&(f.Vb(0,"div"),f.Qb(1,"azt-template-three",22),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("indexQuestion",null==t.curQuestionObj?null:t.curQuestionObj.index)("questionObj",t.curQuestionObj||f.sc(5,F))("isAnswer",!0)("isShowAnswer",t.isShowAnswer)("studentAnswer","")}}function Z(t,n){if(1&t&&(f.Vb(0,"span",35),f.Tc(1),f.Vb(2,"span"),f.Tc(3),f.Ub(),f.Ub()),2&t){const t=f.gc().$implicit;f.Db(1),f.Vc(" ",t.countTested," "),f.Db(2),f.Vc("(",t.countPercent+"%",")")}}function H(t,n){1&t&&(f.Vb(0,"div",36),f.Qb(1,"i",37),f.Ub())}const Y=function(t,n,e,o){return{"column-one":t,"column-two":n,"column-three":e,"column-four":o}},tt=function(t){return{height:t}};function nt(t,n){if(1&t&&(f.Vb(0,"div",31),f.Vb(1,"div",32),f.Rc(2,Z,4,2,"span",33),f.Rc(3,H,2,0,"div",34),f.Ub(),f.Ub()),2&t){const t=n.$implicit,e=n.index,o=f.gc(3);f.Db(1),f.nc("ngClass",f.wc(4,Y,0==e,1==e,2==e,3==e))("ngStyle",f.tc(9,tt,t.countPercent+"%")),f.Db(1),f.nc("ngIf",o.convertNumber(null==t?null:t.countTested)>0),f.Db(1),f.nc("ngIf",(null==t?null:t.keyLabel)==o.answerResultNew())}}function et(t,n){if(1&t&&(f.Vb(0,"div",23),f.Vb(1,"div",24),f.Vb(2,"div",25),f.Vb(3,"div",26),f.Rc(4,nt,4,11,"div",27),f.Ub(),f.Vb(5,"div",28),f.Vb(6,"div",29),f.Vb(7,"span",30),f.Tc(8,"A"),f.Ub(),f.Ub(),f.Vb(9,"div",29),f.Vb(10,"span",30),f.Tc(11,"B"),f.Ub(),f.Ub(),f.Vb(12,"div",29),f.Vb(13,"span",30),f.Tc(14,"C"),f.Ub(),f.Ub(),f.Vb(15,"div",29),f.Vb(16,"span",30),f.Tc(17,"D"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.gc(2);f.nc("hidden",t.isShowQuestion),f.Db(4),f.nc("ngForOf",null==t.curQuestionObj?null:t.curQuestionObj.statistic)}}function ot(t,n){if(1&t&&(f.Vb(0,"div",40),f.Vb(1,"div",26),f.Vb(2,"div",31),f.Vb(3,"div",32),f.Vb(4,"span",35),f.Tc(5),f.Vb(6,"span"),f.Tc(7),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(8,"div",28),f.Vb(9,"div",29),f.Vb(10,"span",30),f.Tc(11),f.hc(12,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t){const t=n.$implicit,e=n.index,o=f.gc(3);f.Db(3),f.nc("ngClass",f.wc(8,Y,0==o.calcIndex(e),1==o.calcIndex(e),2==o.calcIndex(e),3==o.calcIndex(e)))("ngStyle",f.tc(13,tt,t.countPercent+"%")),f.Db(2),f.Vc(" ",t.countTrue," "),f.Db(2),f.Vc("(",t.countPercent+"%",")"),f.Db(4),f.Wc("",f.ic(12,6,"lang_powerpoint_frontend_chart_question")," ",e+1<=9?"0"+(e+1):e+1,"")}}function it(t,n){if(1&t&&(f.Vb(0,"div",23),f.Vb(1,"div",24),f.Vb(2,"div",38),f.Rc(3,ot,13,15,"div",39),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.gc(2);f.nc("hidden",t.isShowQuestion),f.Db(3),f.nc("ngForOf",t.finalStatisticObjs)}}function st(t,n){if(1&t){const t=f.Wb();f.Vb(0,"div",8),f.Vb(1,"div",41),f.Vb(2,"div",42),f.Vb(3,"mat-slide-toggle",43),f.cc("change",function(n){return f.Ec(t),f.gc(2).toggleShowAnswer(n.checked)}),f.Ub(),f.Vb(4,"span",44),f.Tc(5),f.hc(6,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(3),f.nc("checked",t.isShowAnswer),f.Db(2),f.Uc(f.ic(6,2,"lang_powerpoint_frontend_chart_view_answer"))}}function at(t,n){if(1&t){const t=f.Wb();f.Vb(0,"div",45),f.Vb(1,"div",24),f.Vb(2,"azt-next-back-btn",46),f.cc("goToPrevEmit",function(n){return f.Ec(t),f.gc(2).prevScreenPP(n)})("goToNextEmit",function(n){return f.Ec(t),f.gc(2).nextScreenPP(n)}),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(2),f.nc("curIndex",t.curIndex)("totalQuestion",t.totalQuestion)("disableBackBtn",t.disableBackBtn)("disableNextBtn",t.disableNextBtn)}}function rt(t,n){if(1&t){const t=f.Wb();f.Vb(0,"div",7),f.Vb(1,"div",8),f.Vb(2,"div",9),f.Vb(3,"div",10),f.Vb(4,"span",11),f.cc("click",function(){return f.Ec(t),f.gc().showCopySuccess()}),f.Tc(5),f.hc(6,"mytranslate"),f.Vb(7,"span"),f.Tc(8),f.Ub(),f.Ub(),f.Ub(),f.Vb(9,"div",12),f.Vb(10,"span",13),f.Tc(11),f.hc(12,"mytranslate"),f.Vb(13,"a",14),f.Tc(14),f.Ub(),f.Ub(),f.Ub(),f.Vb(15,"div",15),f.Rc(16,W,3,5,"a",0),f.Rc(17,z,3,3,"a",0),f.Ub(),f.Ub(),f.Ub(),f.Vb(18,"div",16),f.Vb(19,"div",17),f.Rc(20,G,2,6,"div",18),f.Rc(21,K,2,6,"div",18),f.Rc(22,X,2,6,"div",18),f.Ub(),f.Ub(),f.Rc(23,et,18,2,"div",19),f.Rc(24,it,4,2,"div",19),f.Rc(25,st,7,4,"div",20),f.Rc(26,at,3,4,"div",21),f.Ub()}if(2&t){const t=f.gc();f.Db(4),f.nc("cdkCopyToClipboard",t.copyCodeToClipboard(null==t.linkJoinObj?null:t.linkJoinObj.hashCode)),f.Db(1),f.Vc("",f.ic(6,17,"lang_powerpoint_frontend_chart_code_open_class"),": "),f.Db(3),f.Uc(null==t.linkJoinObj?null:t.linkJoinObj.hashCode),f.Db(3),f.Vc("",f.ic(12,19,"lang_powerpoint_frontend_chart_student_access"),": "),f.Db(2),f.oc("href",t.domainLink,f.Ic),f.Db(1),f.Uc(t.domainLink),f.Db(2),f.nc("ngIf",t.isShowQuestion),f.Db(1),f.nc("ngIf",!t.isShowQuestion),f.Db(1),f.nc("hidden",!t.isShowQuestion),f.Db(1),f.nc("ngSwitch",t.templateId),f.Db(1),f.nc("ngSwitchCase",1),f.Db(1),f.nc("ngSwitchCase",2),f.Db(1),f.nc("ngSwitchCase",3),f.Db(1),f.nc("ngIf",!t.statisticForExam),f.Db(1),f.nc("ngIf",t.statisticForExam),f.Db(1),f.nc("ngIf",t.isShowQuestion),f.Db(1),f.nc("ngIf",t.isShowQuestion)}}let ct=(()=>{class t extends g.a{constructor(t,n,e,o,i){super(e),this.router=t,this.frontPptExamService=n,this.commonService=e,this.docxService=o,this.homeworkExamService=i,this.subscriptions=new u.a,this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.backLink="",this.statisticForExam=!1,this.curIndex=0,this.totalQuestion=0,this.disableBackBtn=!1,this.disableNextBtn=!1,this.isLoading=!1,this.numberStatistical={total:0,answered:0},this.isShowQuestion=!0,this.isShowAnswer=!1,this.domainLink="",this.templateId=1}backScreen(){window.history.back()}prevScreenPP(t){var n,e;if(t){var o=this.curIndex>0?this.curIndex-1:0;this.curQuestionObj=null===(n=this.questionObjs)||void 0===n?void 0:n[o],void 0!==(null===(e=this.curQuestionObj)||void 0===e?void 0:e.isShowAnswer)&&(this.curQuestionObj.isShowAnswer=this.isShowAnswer),this.curIndex=o,0==o?(this.disableBackBtn=!0,this.disableNextBtn=!1):(this.disableBackBtn=!1,this.disableNextBtn=!1)}this.isShowQuestion=!0}nextScreenPP(t){var n,e,o,i,s,a,r,c;if(t){var l=this.curIndex==(null!==(e=null===(n=this.questionObjs)||void 0===n?void 0:n.length)&&void 0!==e?e:0)-1?null!==(i=null===(o=this.questionObjs)||void 0===o?void 0:o.length)&&void 0!==i?i:0:this.curIndex+1;this.curQuestionObj=null===(s=this.questionObjs)||void 0===s?void 0:s[l],this.curIndex=l,void 0!==(null===(a=this.curQuestionObj)||void 0===a?void 0:a.isShowAnswer)&&(this.curQuestionObj.isShowAnswer=this.isShowAnswer),l==(null!==(c=null===(r=this.questionObjs)||void 0===r?void 0:r.length)&&void 0!==c?c:0)-1?(this.disableNextBtn=!0,this.disableBackBtn=!1):(this.disableNextBtn=!1,this.disableBackBtn=!1)}this.isShowQuestion=!0}calcIndex(t){return(t+4)%4}showStatistic(){this.isShowQuestion=!this.isShowQuestion}foundTrueAnswer(t){var n=[];return t.forEach(t=>{var e;t=Object.assign(Object.assign({},t),{isShowAnswer:!1});var o=this.commonService.parseJson(null!==(e=t.answerResult)&&void 0!==e?e:"");if(Array.isArray(t.answerConfigParse))for(var i=0;i<t.answerConfigParse.length;i++)if(t.answerConfigParse[i].key==o[0]){t.answerConfigParse[i].isTrue=!0;break}n.push(t)}),n}toggleShowAnswer(t){this.isShowAnswer=!this.isShowAnswer;var n=Object.assign({},this.curQuestionObj);n.isShowAnswer=t,this.curQuestionObj=n}getData(){var t,n;this.isLoading=!0,this.subscriptions.add(this.frontPptExamService.apiFrontPptExamGetPPTQuestionResultObjsIdHashCodeTGet(null!==(t=this.linkId)&&void 0!==t?t:0,null!==(n=this.hashCode)&&void 0!==n?n:"","0").subscribe(t=>{var n,e,o,i,s,a,r,c,l,d,u,h,g,f;if(1==t.success){let f=this.commonService.castJsonToClassObjs(b.e,JSON.stringify(null===(n=t.data)||void 0===n?void 0:n.questionObjs));this.questionObjs=this.foundTrueAnswer(this.homeworkExamService.changeDataQuestions(null!=f?f:[])),this.linkJoinObj=null===(e=t.data)||void 0===e?void 0:e.linkJoinObj,this.curQuestionObj=null===(o=this.questionObjs)||void 0===o?void 0:o[0],this.curQuestionObj.answerResultParse=null!==(s=this.castJsonToObj(null!==(i=this.curQuestionObj.answerResult)&&void 0!==i?i:"[]"))&&void 0!==s?s:[],this.disableBackBtn=!0,this.totalQuestion=null!==(r=null===(a=this.questionObjs)||void 0===a?void 0:a.length)&&void 0!==r?r:0,this.templateId=null!==(d=null===(l=null===(c=t.data)||void 0===c?void 0:c.linkObj)||void 0===l?void 0:l.templateId)&&void 0!==d?d:1,(null!==(h=null===(u=this.questionObjs)||void 0===u?void 0:u.length)&&void 0!==h?h:0)<=1&&(this.disableBackBtn=!0,this.disableNextBtn=!0),(null===(g=t.data)||void 0===g?void 0:g.finalStatistic)&&t.data.finalStatistic.length>0?(this.finalStatisticObjs=t.data.finalStatistic,this.statisticForExam=!0):(this.finalStatisticObjs=new Array,this.statisticForExam=!1),this.docxService.replaceCanvasBackground(this.questionObjs),this.status_obj={loading:!1,error:!1,error_obj:{message:""}}}else this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.showErrorSnack(null!==(f=t.message)&&void 0!==f?f:"");this.isLoading=!1}))}setupLoopGetStatisticalNumber(){this.loopGetStatical=window.setInterval(()=>{var t;this.frontPptExamService.apiFrontPptExamGetStatisticalLinkEmbedObjIdHashCodeTGet(Number(this.linkId),null!==(t=this.hashCode)&&void 0!==t?t:"","t").subscribe(t=>{1==t.success&&(this.numberStatistical=t.data)})},2e3)}convertNumber(t){return Number(t)}answerResultNew(){var t,n,e;return null!==(e=null===(n=null===(t=this.curQuestionObj)||void 0===t?void 0:t.answerResultParse)||void 0===n?void 0:n[0])&&void 0!==e?e:""}ngOnInit(){Object(h.b)([this.router.params,this.router.queryParams]).subscribe(([])=>{var t;this.domainLink=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/join",this.linkId=Number(this.commonService.getMyParam(this.router,"id")),this.hashCode=null===(t=this.commonService.getMyParam(this.router,"hash_code"))||void 0===t?void 0:t.toString(),this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.getData(),this.setupLoopGetStatisticalNumber()}),super.ngOnInit()}copyCodeToClipboard(t){return null!=t?t:""}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p m\xe3 v\xe0o l\u1edbp th\xe0nh c\xf4ng","")}ngOnDestroy(){this.subscriptions.unsubscribe(),0!==this.loopGetStatical&&clearInterval(this.loopGetStatical)}}return t.\u0275fac=function(n){return new(n||t)(f.Pb(a.a),f.Pb(p.E),f.Pb(m.a),f.Pb(v.a),f.Pb(w.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-powerpoint-chart"]],features:[f.Ab],decls:3,vars:3,consts:[["class","view-link clickable",3,"click",4,"ngIf"],["class","app maxW1200 mt-5 text-center",4,"ngIf"],["class","app maxW1200 mt-5",4,"ngIf"],[1,"view-link","clickable",3,"click"],[2,"margin","10px","vertical-align","middle","font-size","22px"],[1,"app","maxW1200","mt-5","text-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"app","maxW1200","mt-5"],[1,"container"],[1,"row"],[1,"col-md-3","heading-row"],[1,"code-text",3,"cdkCopyToClipboard","click"],[1,"col-md-6","text-center","heading-row"],[1,"title-link"],["target","_blank",1,"link",3,"href"],[1,"col-md-3","text-right","heading-row"],[3,"hidden"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","row",3,"hidden",4,"ngIf"],["class","container",4,"ngIf"],["class","row mt-3",4,"ngIf"],[3,"indexQuestion","questionObj","isAnswer","isShowAnswer","studentAnswer"],[1,"row",3,"hidden"],[1,"col-md-12"],[1,"chart"],[1,"chart-column"],["class","column-total",4,"ngFor","ngForOf"],[1,"chart-fields"],[1,"field"],[1,"text-center"],[1,"column-total"],[1,"column-result",3,"ngClass","ngStyle"],["class","point-result",4,"ngIf"],["class","answer-true",4,"ngIf"],[1,"point-result"],[1,"answer-true"],[1,"fa","fa-check"],[1,"chart","d-flex",2,"overflow-x","scroll","white-space","nowrap"],["class","col-column",4,"ngFor","ngForOf"],[1,"col-column"],[1,"row","mt-2","justify-content-end"],[1,"col-md-3","text-right"],["color","primary",2,"vertical-align","middle",3,"checked","change"],[2,"vertical-align","middle","margin-left","5px"],[1,"row","mt-3"],[3,"curIndex","totalQuestion","disableBackBtn","disableNextBtn","goToPrevEmit","goToNextEmit"]],template:function(t,n){1&t&&(f.Rc(0,L,4,0,"a",0),f.Rc(1,J,6,3,"div",1),f.Rc(2,rt,27,21,"div",2)),2&t&&(f.nc("ngIf",n.isShowQuestion),f.Db(1),f.nc("ngIf",n.isLoading),f.Db(1),f.nc("ngIf",!n.isLoading))},directives:[o.m,V.a,B.a,o.o,o.p,A.a,E.a,Q.a,o.l,o.k,o.n,T.a,N],pipes:[x.q],styles:[".app[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden;padding-bottom:40px}.maxW1200[_ngcontent-%COMP%]{max-width:1200px}.control[_ngcontent-%COMP%]{display:flex;justify-content:center}.control-next[_ngcontent-%COMP%], .control-prev[_ngcontent-%COMP%]{margin:0 15px}.control-btn[_ngcontent-%COMP%]{color:#fff;background-color:#169bd5;padding:5px 15px}.control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;font-weight:700;width:30px;height:30px}.heading-row[_ngcontent-%COMP%]{margin-bottom:20px}.code-text[_ngcontent-%COMP%]{font-size:18px;font-weight:500;cursor:pointer}.code-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:23px;color:#00a7d0}.title-link[_ngcontent-%COMP%]{font-size:18px}.title-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;color:#42474b}.col-column[_ngcontent-%COMP%]{display:block;width:33%}.col-column[_ngcontent-%COMP%]   .column-total[_ngcontent-%COMP%]{height:95%;width:calc(100% - 5%)!important;display:flex;align-items:flex-end}.chart[_ngcontent-%COMP%]{width:85%;height:500px;background-color:#fff;margin:0 auto}.chart-column[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;height:88%;padding:0 30px}.chart-column[_ngcontent-%COMP%]   .column-total[_ngcontent-%COMP%]{height:95%;width:calc(100%/4 - 8%);display:flex;align-items:flex-end}.chart-column[_ngcontent-%COMP%]   .column-result[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-weight:500;width:100%;min-height:5px;text-align:center;display:flex;flex-direction:column;justify-content:space-between}.chart-column[_ngcontent-%COMP%]   .column-one[_ngcontent-%COMP%]{background-color:#66c870}.chart-column[_ngcontent-%COMP%]   .column-two[_ngcontent-%COMP%]{background-color:#fb708f}.chart-column[_ngcontent-%COMP%]   .column-three[_ngcontent-%COMP%]{background-color:#2aa4e6}.chart-column[_ngcontent-%COMP%]   .column-four[_ngcontent-%COMP%]{background-color:#f5bc20}.chart-column[_ngcontent-%COMP%]   .point-result[_ngcontent-%COMP%]{margin-top:10px}.chart-column[_ngcontent-%COMP%]   .answer-true[_ngcontent-%COMP%]{margin-bottom:10px}.chart-column[_ngcontent-%COMP%]   .answer-true[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}.chart-fields[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:12%;padding:0 30px;border-top:1px solid #ddd}.chart-fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:calc(100%/4 - 8%);text-align:center;font-size:18px;font-weight:500}.view-link[_ngcontent-%COMP%]{font-size:18px}@media screen and (max-width:768px){.heading-row[_ngcontent-%COMP%]{text-align:left!important}.chart-column[_ngcontent-%COMP%], .chart-fields[_ngcontent-%COMP%]{padding:0 20px}}@media screen and (max-width:480px){.chart-fields[_ngcontent-%COMP%]{padding:0 10px}.app[_ngcontent-%COMP%]{overflow-y:inherit}.chart-column[_ngcontent-%COMP%]{padding:0 10px}}"]}),t})(),lt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=f.Jb({type:t,selectors:[["app-test-dashboard"]],decls:2,vars:0,consts:[["id","testbank-frontend-layout"]],template:function(t,n){1&t&&(f.Vb(0,"div",0),f.Qb(1,"router-outlet"),f.Ub())},directives:[a.m],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:0 1px 7px rgba(169,151,151,.24)}"]}),t})();var dt=e("AkFM"),ut=e("nzN9");function ht(t,n){1&t&&f.Qb(0,"azt-loading-effect")}function bt(t,n){if(1&t){const t=f.Wb();f.Vb(0,"div",2),f.Vb(1,"h2"),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Vb(4,"h1"),f.Tc(5),f.Ub(),f.Vb(6,"button",3),f.cc("click",function(){return f.Ec(t),f.gc().redirectBackToDetail()}),f.Tc(7),f.hc(8,"mytranslate"),f.Ub(),f.Vb(9,"button",4),f.cc("click",function(){return f.Ec(t),f.gc().redirectBackToNext()}),f.Tc(10),f.hc(11,"mytranslate"),f.Ub(),f.Ub()}if(2&t){const t=f.gc();f.Db(2),f.Uc(f.ic(3,5,"lang_powerpoint_frontend_result_submit_succes")),f.Db(3),f.Wc("",null==t.resultObj?null:t.resultObj.totalCorrect,"/",null==t.resultObj?null:t.resultObj.totalQuestion,""),f.Db(2),f.Vc(" ",f.ic(8,7,"lang_powerpoint_frontend_result_view_answer")," "),f.Db(3),f.Vc(" ",f.ic(11,9,"lang_powerpoint_frontend_detail_continue")," ")}}const gt=[{path:"",component:lt,children:[{path:"",children:[{path:"detail/:id/:hash_code",component:U},{path:"result/:id/:hash_code",component:(()=>{class t extends g.a{constructor(t,n,e,o){super(n),this.router=t,this.commonService=n,this.frontPowerPointLinkService=e,this.browserStorageService=o,this.loading=!1,this.backLink=""}GetResultObj(){this.loading=!0,this.frontPowerPointLinkService.apiFrontPowerPointLinkGetResultObjGet(this.JoinLinkId,this.hashCode).subscribe(t=>{1==t.success?(this.resultObj=t.data,this.loading=!1):(this.loading=!1,this.commonService.snackError("L\u1ed7i: Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3","\u0110\xf3ng"))})}redirectBackToDetail(){this.commonService.myNavigation("/powerpoint/detail/"+this.JoinLinkId+"/"+this.hashCode)}redirectBackToNext(){this.browserStorageService.saveStorage("powerpoint_next","true"),this.commonService.myNavigation("/join")}ngOnInit(){var t;this.JoinLinkId=Number(this.commonService.getMyParam(this.router,"id")),this.hashCode=null===(t=this.commonService.getMyParam(this.router,"hash_code"))||void 0===t?void 0:t.toString(),this.GetResultObj(),this.commonService.translateMetaData({title:"lang_cms_powerpoint_result_title",description:"lang_cms_powerpoint_result_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return t.\u0275fac=function(n){return new(n||t)(f.Pb(a.a),f.Pb(m.a),f.Pb(p.D),f.Pb(dt.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-powerpoint-result"]],features:[f.Ab],decls:2,vars:2,consts:[[4,"ngIf"],["class","content",4,"ngIf"],[1,"content"],["mat-flat-button","",1,"btn-submit",3,"click"],["mat-flat-button","",1,"btn-next",3,"click"]],template:function(t,n){1&t&&(f.Rc(0,ht,1,0,"azt-loading-effect",0),f.Rc(1,bt,12,11,"div",1)),2&t&&(f.nc("ngIf",!0===n.loading),f.Db(1),f.nc("ngIf",!1===n.loading))},directives:[o.m,ut.a,R.b],pipes:[x.q],styles:[".content[_ngcontent-%COMP%]{text-align:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#f39c12}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Arial Bold,Arial;font-weight:700;font-style:normal}.content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{background-color:#f39c12;padding:5px 25px;color:#fff;transition:all .5s}.content[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover{background-color:#e09214}.content[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:#00a7d0;padding:5px 25px;color:#fff;transition:all .5s;margin-left:5px}.content[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]:hover{background-color:#0087a8}"]}),t})()},{path:"embed/:id/:hash_code",component:ct}]}]}];let ft=(()=>{class t{}return t.\u0275mod=f.Nb({type:t}),t.\u0275inj=f.Mb({factory:function(n){return new(n||t)},imports:[[a.l.forChild(gt)],a.l,I.c]}),t})(),pt=(()=>{class t{}return t.\u0275mod=f.Nb({type:t}),t.\u0275inj=f.Mb({factory:function(n){return new(n||t)},imports:[[a.l,o.c,l.a,r.b,ft,i.m,i.x,s.f,d.a,c.a]]}),t})();f.Kc(U,[o.m,ut.a,o.o,o.p,A.a,E.a,Q.a,N,R.b],[x.q])},o9K7:function(t,n,e){"use strict";e.d(n,"a",function(){return r});var o=e("mrSG"),i=e("fXoL"),s=e("oUVn"),a=e("qJLG");let r=(()=>{class t{constructor(t,n){this.commonService=t,this.cdnService=n}convertUrlToBase64(t){return Object(o.a)(this,void 0,void 0,function*(){const n=yield fetch(t+"?t="+(new Date).getTime()),e=yield n.blob();return new Promise(t=>{const n=new FileReader;n.readAsDataURL(e),n.onloadend=()=>{t(n.result)}})})}convertLinkToBase64(t,n,e){var i;return Object(o.a)(this,void 0,void 0,function*(){if(!n)return e;for(let n=0;n<(null!==(i=null==t?void 0:t.length)&&void 0!==i?i:0);n++)if((null==t?void 0:t[n].link)===e)return null==t?void 0:t[n].convert;var o=yield this.convertUrlToBase64(e);return null==t||t.push({convert:o,link:e}),o})}replaceCanvasBackground(t,n){var e,i,s,a;return Object(o.a)(this,void 0,void 0,function*(){if(t){var o=[];for(let P=0;P<t.length;P++){var r=t[P];if(r&&0===r.isImage){var c=null===(e=r.questionContentParse)||void 0===e?void 0:e[0].content;r.questionContentParse&&(r.questionContentParse[0].content="");var l=void 0===c?[]:c.split("@[]");for(let t=0;t<l.length;t++){var d=l[t];if(!0===this.commonService.isJson(d)){var u=JSON.parse(d);if(u.hasOwnProperty("link")){var h=document.body.offsetWidth,b=1;u.data.width>(C=h-30)&&(u.data={x:u.data.x*(b=C/u.data.width),y:u.data.y*b,width:u.data.width*b,height:u.data.height*b}),u.data={x:Math.floor(u.data.x),y:Math.floor(u.data.y),width:Math.floor(u.data.width),height:Math.floor(u.data.height)},r.questionContentParse&&(r.questionContentParse[0].content+=`<div class="background_question_${P}_${t}"><img width="${1024*b}" height="${1024*b}" src="${yield this.convertLinkToBase64(o,n,this.cdnService.getMyCdn(u.link))}"></div>`);var g=document.createElement("style");document.body.appendChild(g),g.textContent+=`.background_question_${P}_${t} {margin: 0 3px; width: ${u.data.width}px; height: ${u.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${P}_${t} img { margin-top: -${u.data.y}px; margin-left: -${u.data.x}px;}`}else r.questionContentParse&&(r.questionContentParse[0].content+=d)}else r.questionContentParse&&(r.questionContentParse[0].content+=d)}if(1===r.answerType)for(let t=0;t<(null!==(s=null===(i=r.answerConfigParse)||void 0===i?void 0:i.length)&&void 0!==s?s:0);t++){var f=null===(a=r.answerConfigParse)||void 0===a?void 0:a[t].content;r.answerConfigParse&&(r.answerConfigParse[t].content="");var p=void 0===f?[]:f.split("@[]");for(let e=0;e<p.length;e++){var m=p[e];if(!0===this.commonService.isJson(m)){var v=JSON.parse(m);v.hasOwnProperty("link")?(h=document.body.offsetWidth,b=1,v.data.width>(C=h-30)&&(v.data={x:v.data.x*(b=C/v.data.width),y:v.data.y*b,width:v.data.width*b,height:v.data.height*b}),v.data={x:Math.floor(v.data.x),y:Math.floor(v.data.y),width:Math.floor(v.data.width),height:Math.floor(v.data.height)},r.answerConfigParse&&(r.answerConfigParse[t].content+=`<div class="background_question__ans${P}_${t}_${e}"><img width="${1024*b}" height="${1024*b}" src="${yield this.convertLinkToBase64(o,n,this.cdnService.getMyCdn(v.link))}"></div>`),g=document.createElement("style"),document.body.appendChild(g),g.textContent+=`.background_question__ans${P}_${t}_${e} {margin: 0 3px; width: ${v.data.width}px; height: ${v.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans${P}_${t}_${e} img { margin-top: -${v.data.y}px; margin-left: -${v.data.x}px;}`):r.answerConfigParse&&(r.answerConfigParse[t].content+=m)}else r.answerConfigParse&&(r.answerConfigParse[t].content+=m)}}if(r.answerMediaParse&&r.answerMediaParse.length>0){var w=r.answerMediaParse;r.answerMediaParse="";var x=void 0===w?[]:w.split("@[]");for(let t=0;t<x.length;t++){var _=x[t];if(!0===this.commonService.isJson(_)){var C,O=JSON.parse(_);O.hasOwnProperty("link")?(h=document.body.offsetWidth,b=1,O.data.width>(C=h-30)&&(O.data={x:O.data.x*(b=C/O.data.width),y:O.data.y*b,width:O.data.width*b,height:O.data.height*b}),O.data={x:Math.floor(O.data.x),y:Math.floor(O.data.y),width:Math.floor(O.data.width),height:Math.floor(O.data.height)},r.answerMediaParse+=`<div class="background_question__ans_result${P}_${t}"><img width="${1024*b}" height="${1024*b}" src="${yield this.convertLinkToBase64(o,n,this.cdnService.getMyCdn(O.link))}"></div>`,g=document.createElement("style"),document.body.appendChild(g),g.textContent+=`.background_question__ans_result${P}_${t} {margin: 0 3px; width: ${O.data.width}px; height: ${O.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans_result${P}_${t} img { margin-top: -${O.data.y}px; margin-left: -${O.data.x}px;}`):r.answerMediaParse+=_}else r.answerMediaParse+=_}}}}}})}replaceCanvasBackgroundTS(t,n){return Object(o.a)(this,void 0,void 0,function*(){var e=[];for(let p=0;p<t.length;p++){var o=t[p];if(0===o.isImage){var i=o.questionContentParse[0].content;o.questionContentParse[0].content="";var s=void 0===i?[]:i.split("@[]");for(let t=0;t<s.length;t++){var a=s[t];if(!0===this.commonService.isJson(a)){var r=JSON.parse(a);if(r.hasOwnProperty("link")){var c=document.body.offsetWidth,l=1;r.data.width>(g=c-30)&&(r.data={x:r.data.x*(l=g/r.data.width),y:r.data.y*l,width:r.data.width*l,height:r.data.height*l}),r.data={x:Math.floor(r.data.x),y:Math.floor(r.data.y),width:Math.floor(r.data.width),height:Math.floor(r.data.height)},o.questionContentParse[0].content+=`<div class="background_question_${p}_${t}"><img width="${1024*l}" height="${1024*l}" src="${yield this.convertLinkToBase64(e,n,this.cdnService.getMyCdn(r.link))}"></div>`;var d=document.createElement("style");document.body.appendChild(d),d.textContent+=`.background_question_${p}_${t} {margin: 0 3px; width: ${r.data.width}px; height: ${r.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${p}_${t} img { margin-top: -${r.data.y}px; margin-left: -${r.data.x}px;}`}else o.questionContentParse[0].content+=a}else o.questionContentParse[0].content+=a}if(1===o.answerType&&(0==o.isImage||1==o.isImage&&o.name.startsWith("[PDFv2]")?this.replaceBackgroundAnswerConfig(o.answerConfigParse,e,p,n):this.replaceBackgroundAnswerConfig(o.answerConfigParseVer1.answerConfigV2,e,p,n)),o.answerMedia&&o.answerMedia.length>0){var u=o.answerMedia;o.answerMedia="";var h=void 0===u?[]:u.split("@[]");for(let t=0;t<h.length;t++){var b=h[t];if(!0===this.commonService.isJson(b)){var g,f=JSON.parse(b);f.hasOwnProperty("link")?(c=document.body.offsetWidth,l=1,f.data.width>(g=c-30)&&(f.data={x:f.data.x*(l=g/f.data.width),y:f.data.y*l,width:f.data.width*l,height:f.data.height*l}),f.data={x:Math.floor(f.data.x),y:Math.floor(f.data.y),width:Math.floor(f.data.width),height:Math.floor(f.data.height)},o.answerMedia+=`<div class="background_question__ans_result${p}_${t}"><img width="${1024*l}" height="${1024*l}" src="${yield this.convertLinkToBase64(e,n,this.cdnService.getMyCdn(f.link))}"></div>`,d=document.createElement("style"),document.body.appendChild(d),d.textContent+=`.background_question__ans_result${p}_${t} {margin: 0 3px; width: ${f.data.width}px; height: ${f.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans_result${p}_${t} img { margin-top: -${f.data.y}px; margin-left: -${f.data.x}px;}`):o.answerMedia+=b}else o.answerMedia+=b}}}}return!0})}replaceBackgroundAnswerConfig(t,n,e,i){return Object(o.a)(this,void 0,void 0,function*(){for(let u=0;u<t.length;u++){var o=t[u].content;t[u].content="";var s=void 0===o?[]:o.split("@[]");for(let o=0;o<s.length;o++){var a=s[o];if(!0===this.commonService.isJson(a)){var r=JSON.parse(a);if(r.hasOwnProperty("link")){var c=document.body.offsetWidth-30,l=1;r.data.width>c&&(r.data={x:r.data.x*(l=c/r.data.width),y:r.data.y*l,width:r.data.width*l,height:r.data.height*l}),r.data={x:Math.floor(r.data.x),y:Math.floor(r.data.y),width:Math.floor(r.data.width),height:Math.floor(r.data.height)},t[u].content+=`<div class="background_question__ans${e}_${u}_${o}"><img width="${1024*l}" height="${1024*l}" src="${yield this.convertLinkToBase64(n,i,this.cdnService.getMyCdn(r.link))}"></div>`;var d=document.createElement("style");document.body.appendChild(d),d.textContent+=`.background_question__ans${e}_${u}_${o} {margin: 0 3px; width: ${r.data.width}px; height: ${r.data.height}px; display: inline-block; overflow: hidden;} .background_question__ans${e}_${u}_${o} img { margin-top: -${r.data.y}px; margin-left: -${r.data.x}px;}`}else t[u].content+=a}else t[u].content+=a}}})}}return t.\u0275fac=function(n){return new(n||t)(i.Zb(s.a),i.Zb(a.a))},t.\u0275prov=i.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);