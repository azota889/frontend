"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[959],{65959:(cn,lt,_)=>{_.r(lt),_.d(lt,{HomeworkFrontModule:()=>dn});var P=_(69808),M=_(93075),N=_(48966),I=_(74202),pt=_(51908),ft=_(1737),vt=_(63728),bt=_(47470),wt=_(75658),xt=_(49088),kt=_(8785),jt=_(37389),Ot=_(45668),D=_(55330),t=_(5e3);let yt=(()=>{class n extends D.Q{}return n.\u0275fac=function(){let r;return function(o){return(r||(r=t.n5z(n)))(o||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-dashboard"]],features:[t.qOj],decls:2,vars:0,consts:[["id","homework-frontend-layout"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[I.lC],encapsulation:2}),n})();var B=_(70655),_t=_(40520),Ct=_(36053),Q=_(35018),Y=_(74693),K=_(42873),H=_(1033);let Zt=(()=>{class n extends D.Q{constructor(e,o,i,s,a,d){super(o),this.router=e,this.commonService=o,this.frontStudentService=i,this.redirectService=s,this.dialogRef=a,this.data=d,this.formName=new M.nJ({})}sendRequest(){var e,o,i;this.initStatusObj(),this.frontStudentService.apiFrontStudentRequestForReApproveStudentGet(null===(e=this.data)||void 0===e?void 0:e.classId,null!==(i=null===(o=this.data)||void 0===o?void 0:o.studentObj)&&void 0!==i&&i.id?this.data.studentObj.id:0).subscribe(s=>{var a;1==s.success?(this.dialogRef.close("success"),this.successStatusObj()):(this.dialogRef.close("error"),this.errorStatusObj(null!==(a=s.message)&&void 0!==a?a:""))})}btnCloseDialog(){this.dialogRef.close("close")}goToLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`)}ngOnChanges(){var e;null!==(e=this.data)&&void 0!==e&&e.studentObj&&(this.studentObj=this.data.studentObj)}ngOnInit(){var e;!(null===(e=this.data)||void 0===e)&&e.studentObj&&(this.studentObj=this.data.studentObj),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I.F0),t.Y36(Q.v),t.Y36(Y.Dn),t.Y36(K.V),t.Y36(N.so,8),t.Y36(N.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-send-request"]],features:[t.qOj,t.TTD],decls:39,vars:39,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[1,"text-md"],[1,"p-3","text-right"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(10,"div",8)(11,"p",9),t._uU(12),t.ALo(13,"mytranslate"),t.TgZ(14,"b"),t._uU(15),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.ALo(18,"mytranslate"),t.ALo(19,"mytranslate"),t.TgZ(20,"b"),t._uU(21),t.qZA(),t._uU(22),t.ALo(23,"mytranslate"),t.ALo(24,"mytranslate"),t.ALo(25,"mytranslate"),t.ALo(26,"mytranslate"),t.TgZ(27,"b"),t._uU(28),t.ALo(29,"mytranslate"),t.qZA(),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()()(),t.TgZ(32,"div",10)(33,"button",11),t.NdJ("click",function(){return o.btnCloseDialog()}),t._uU(34),t.ALo(35,"mytranslate"),t.qZA(),t.TgZ(36,"button",12),t.NdJ("click",function(){return o.sendRequest()}),t._uU(37),t.ALo(38,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(8),t.hij(" ",t.lcZ(9,13,"lang_auto_hoc_sinh_nay_da_duoc_chon"),"! "),t.xp6(4),t.hij(" ",t.lcZ(13,15,"lang_auto_hoc_sinh")," "),t.xp6(3),t.Oqu(null==o.studentObj?null:o.studentObj.fullName),t.xp6(1),t.AsE(" ",t.lcZ(17,17,"lang_auto_da_duoc_chon_boi_tai_khoan")," ",""!=(null==o.studentObj?null:o.studentObj.last4DigitPhone)?t.lcZ(18,19,"lang_auto_voi_sdt_co_duoi")+"- xxx xxx":t.lcZ(19,21,"lang_auto_voi_ten_zalo")+"-"," "),t.xp6(5),t.Oqu(""!=(null==o.studentObj?null:o.studentObj.last4DigitPhone)?null==o.studentObj?null:o.studentObj.last4DigitPhone:null==o.studentObj?null:o.studentObj.zaloName),t.xp6(1),t.lnq(" ",t.lcZ(23,23,"lang_auto__neu_ban_chac_chan_do_khong_phai")," ",""!=(null==o.studentObj?null:o.studentObj.last4DigitPhone)?t.lcZ(24,25,"lang_auto_so_dt"):t.lcZ(25,27,"lang_auto_ten_tai_khoan_zalo")," ",t.lcZ(26,29,"lang_auto_cua_ban_vui_long_bam_nut")," "),t.xp6(6),t.Oqu(t.lcZ(29,31,"lang_auto_bao_giao_vien")),t.xp6(2),t.hij(" ",t.lcZ(31,33,"lang_auto_de_giao_vien_kiem_tra_lai")," "),t.xp6(4),t.hij(" ",t.lcZ(35,35,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(38,37,"lang_auto_xac_nhan")," "))},dependencies:[H.bT],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:9990;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;background:rgba(0,0,0,.5607843137);min-height:100vh}.school-info[_ngcontent-%COMP%]{z-index:9990;top:50%;left:50%;min-width:30%;transform:translate(-50%,-50%);position:fixed;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-7px;padding:5px 10px;background:#dadada;cursor:pointer;border-radius:20px}.note[_ngcontent-%COMP%]{font-style:italic;font-size:15px;font-weight:600}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:95%}}"]}),n})();var A=_(51442);let At=(()=>{class n extends D.Q{constructor(e,o,i,s,a){super(e),this.commonService=e,this.router=o,this.redirectService=i,this.dialogRef=s,this.data=a}btnCloseDialog(){this.dialogRef.close()}goToLogin(){var e,o;let i=`${this.router.url}`;i=-1!==i.indexOf("?")?i.slice(0,i.indexOf("?")):i,this.redirectService.redirectToLoginBackLinkWithFromRegister(`${i}%3FstudentId%3D${null===(o=null===(e=this.data)||void 0===e?void 0:e.studentObj)||void 0===o?void 0:o.id}`)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Q.v),t.Y36(I.F0),t.Y36(K.V),t.Y36(N.so,8),t.Y36(N.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-require-login"]],features:[t.qOj],decls:31,vars:25,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(10,"div",8)(11,"p",9),t._uU(12),t.ALo(13,"mytranslate"),t.TgZ(14,"b"),t._uU(15),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.ALo(18,"mytranslate"),t.ALo(19,"mytranslate"),t.TgZ(20,"b"),t._uU(21),t.qZA(),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()()()(),t.TgZ(24,"div",10)(25,"button",11),t.NdJ("click",function(){return o.btnCloseDialog()}),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"button",12),t.NdJ("click",function(){return o.goToLogin()}),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(8),t.hij(" ",t.lcZ(9,9,"lang_auto_hoc_sinh_nay_da_duoc_chon"),"! "),t.xp6(4),t.hij(" ",t.lcZ(13,11,"lang_auto_hoc_sinh")," "),t.xp6(3),t.Oqu(null==o.data||null==o.data.studentObj?null:o.data.studentObj.fullName),t.xp6(1),t.AsE(" ",t.lcZ(17,13,"lang_auto_da_duoc_chon_boi_tai_khoan")," ",""!=(null==o.data||null==o.data.studentObj?null:o.data.studentObj.last4DigitPhone)?t.lcZ(18,15,"lang_auto_voi_sdt_co_duoi")+"- xxx xxx":t.lcZ(19,17,"lang_auto_voi_ten_zalo")+"-"," "),t.xp6(5),t.Oqu(""!=(null==o.data||null==o.data.studentObj?null:o.data.studentObj.last4DigitPhone)?null==o.data||null==o.data.studentObj?null:o.data.studentObj.last4DigitPhone:null==o.data||null==o.data.studentObj?null:o.data.studentObj.zaloName),t.xp6(1),t.hij("",t.lcZ(23,19,"lang_auto__dang_nhap_de_tiep_tuc")," "),t.xp6(4),t.hij(" ",t.lcZ(27,21,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(30,23,"lang_auto_xac_nhan")," "))},dependencies:[H.bT]}),n})();var St=_(43147),Tt=_(58326),Mt=_(64262),Ht=_(12813),dt=_(2366),Ft=_(88386),Lt=_(35191),Pt=_(87238),It=_(81903),Ut=_(73852),ct=_(37104),Dt=_(71572),qt=_(30004),mt=_(47423);function Jt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"p",5),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"a",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.redirectToRegister())}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"p",7),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"a",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.redirectToLogin())}),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(3),t.hij("",t.lcZ(4,4,"lang_homework_homework_frontend_submit_homework_register_account_submit"),"!"),t.xp6(3),t.Oqu(t.lcZ(7,6,"lang_buttom_register")),t.xp6(3),t.hij("",t.lcZ(10,8,"lang_homework_homework_frontend_submit_homework_have_account"),"?"),t.xp6(3),t.Oqu(t.lcZ(13,10,"lang_buttom_login")))}function Nt(n,r){1&n&&(t.TgZ(0,"span"),t._UZ(1,"span",13),t._uU(2,"\xa0"),t.qZA())}function Qt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"p",8),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"p",9),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",10)(9,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.confirmQuit())}),t.YNc(10,Nt,3,0,"span",12),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij("",t.lcZ(4,4,"lang_homework_homework_frontend_submit_homework_register_account_submit"),"!"),t.xp6(3),t.Oqu(t.lcZ(7,6,"lang_buttom_register")),t.xp6(4),t.Q6J("ngIf",!0===e.isLoading),t.xp6(1),t.hij(" ",t.lcZ(12,8,"lang_buttom_confirm")," ")}}function Yt(n,r){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,Jt,14,12,"div",2),t.YNc(2,Qt,13,10,"div",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0==e.viewType),t.xp6(1),t.Q6J("ngIf",1==e.viewType)}}let zt=(()=>{class n extends D.Q{constructor(e,o,i){super(e),this.commonService=e,this.router=o,this.redirectService=i,this.closeDialog=new t.vpe,this.isLoading=!1,this.viewType=0}confirmQuit(){this.closeDialog.emit(!0)}checkType(e){"redirect_register"==e?this.viewType=0:"submit_name"==e&&(this.viewType=1)}redirectToRegister(){this.redirectService.redirectRegisterForStudent()}redirectToLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`)}ngOnInit(){this.data&&this.checkType(this.data.type),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Q.v),t.Y36(I.F0),t.Y36(K.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-message-dialog"]],inputs:{data:"data"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:1,vars:1,consts:[["class","school-info_bg",4,"ngIf"],[1,"school-info_bg"],["class","school-info p-4",4,"ngIf"],[1,"school-info","p-4"],[1,"text-center"],[1,"mb-2","h5"],[1,"mb-0","h4","text-info","clickable",3,"click"],[1,"mb-2","h5","mt-4"],[1,"mb-1","h5"],[1,"mb-0","h4","text-info"],[1,"d-flex","float-right","mt-3"],["mat-raised-button","","color","warn",2,"margin-left","15px",3,"click"],[4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,o){1&e&&t.YNc(0,Yt,3,2,"div",0),2&e&&t.Q6J("ngIf",null==o.data?null:o.data.isShow)},dependencies:[P.O5,mt.lW,H.bT],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:600px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.truncate[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:90%;padding:5px 0;white-space:nowrap}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-7px;padding:5px 10px;background:#dadada;cursor:pointer;border-radius:20px}.block-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.bar-custom[_ngcontent-%COMP%]{font-size:35px;margin:0 10px -18px;background:#000;width:2px;display:block;height:35px}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();var ut=_(15043),ht=_(25245);function Et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"a",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.viewDetailHistory(null==i?null:i.id))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_xem_chi_tiet")))}function Rt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"a",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(4);return t.KtG(a.onShowFile(s,-1))}),t.TgZ(2,"mat-icon",19),t._uU(3,"attach_file"),t.qZA(),t.TgZ(4,"span",20),t._uU(5),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(4),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name)}}function $t(n,r){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,Rt,6,2,"div",16),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.fileParse)}}function Gt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"a",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(5);return t.KtG(a.onShowFile(s,-1))}),t.TgZ(2,"mat-icon",19),t._uU(3,"attach_file"),t.qZA(),t.TgZ(4,"span",20),t._uU(5),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(4),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name)}}function Bt(n,r){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,Gt,6,2,"div",16),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.fileParse)}}function Kt(n,r){if(1&n&&(t.TgZ(0,"p",8),t._UZ(1,"azt-check-mark",29),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("mark",e.point)}}function Vt(n,r){if(1&n&&(t.TgZ(0,"div",23)(1,"div",24),t.YNc(2,Kt,2,1,"p",25),t.qZA(),t.TgZ(3,"div",26)(4,"span",27),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t._UZ(7,"div",28),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",!e.hideMark),t.xp6(3),t.Oqu(t.lcZ(6,3,"lang_homework_homework_frontend_utils_comment")),t.xp6(2),t.Q6J("innerHTML",e.note,t.oJD)}}function Wt(n,r){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,Bt,2,1,"div",12),t.YNc(2,Vt,8,5,"div",22),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.fileParse&&e.fileParse.length>0),t.xp6(1),t.Q6J("ngIf",null!=e&&null!=e.confirmedAt)}}function Xt(n,r){if(1&n&&(t.TgZ(0,"div",6)(1,"div",7)(2,"span",8),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"date"),t.qZA(),t.YNc(6,Et,3,3,"a",9),t.qZA(),t.TgZ(7,"div",7)(8,"span",10),t._uU(9),t.ALo(10,"mytranslate"),t.TgZ(11,"span",11),t._uU(12),t.qZA()()(),t.YNc(13,$t,2,1,"div",12),t.YNc(14,Wt,3,2,"div",13),t.qZA()),2&n){const e=r.$implicit;t.xp6(3),t.AsE("",t.lcZ(4,7,"lang_auto_nop_luc"),": ",t.xi3(5,9,e.createdAt,"dd/MM/yyyy hh:mm"),""),t.xp6(3),t.Q6J("ngIf",e.result),t.xp6(3),t.hij("",t.lcZ(10,12,"lang_homework_homework_frontend_utils_request_submit"),": "),t.xp6(3),t.Oqu(e.resendNote),t.xp6(1),t.Q6J("ngIf",!e.result&&e.files),t.xp6(1),t.Q6J("ngIf",e.result)}}function te(n,r){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()(),t.YNc(6,Xt,15,14,"div",5),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,2,"lang_homework_homework_frontend_utils_history_submit")),t.xp6(2),t.Q6J("ngForOf",e.dataAnswerHistory)}}let ee=(()=>{class n extends D.Q{constructor(e,o){super(e),this.commonService=e,this.cdnService=o,this.previewFileEmit=new t.vpe,this.isShowPreviewFile=!1,this.answerFile=null}viewDetailHistory(e){var o,i;this.commonService.myNavigation("/homework/view-homework/"+(null===(o=this.dataHomeworkObj)||void 0===o?void 0:o.id)+"/"+(null===(i=this.dataHomeworkObj)||void 0===i?void 0:i.hashId)+"/"+e)}onFileClose(){this.isShowPreviewFile=!1}onShowFile(e,o){this.isShowPreviewFile=!0;let i=Object.assign(Object.assign({},e),{index:o});this.previewFileEmit.emit(i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Q.v),t.Y36(ut.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-answer-history"]],inputs:{dataAnswerHistory:"dataAnswerHistory",dataHomeworkObj:"dataHomeworkObj"},outputs:{previewFileEmit:"previewFileEmit"},features:[t.qOj],decls:1,vars:1,consts:[["class","card-box mt-3",4,"ngIf"],[1,"card-box","mt-3"],[1,"row","top-row"],[1,"col-12","text-center"],[1,"h5","text-white"],["class","ml-0 mr-0 mt-4 attach-container p-2",4,"ngFor","ngForOf"],[1,"ml-0","mr-0","mt-4","attach-container","p-2"],[1,"flex-title","mt-2","pl-3","pr-3"],[1,"mb-0"],[3,"click",4,"ngIf"],[1,"mb-0",2,"font-weight","400"],[1,"text-danger","text-bold"],["class","row ml-0 mr-0 mt-1 mb-1 pb-3 pt-3 attach-container",4,"ngIf"],["class","mt-2",4,"ngIf"],[3,"click"],[1,"row","ml-0","mr-0","mt-1","mb-1","pb-3","pt-3","attach-container"],["class","col-6 col-sm-6 col-md-4 col-xl-2 col-lg-2",4,"ngFor","ngForOf"],[1,"col-6","col-sm-6","col-md-4","col-xl-2","col-lg-2"],["target","_blank",1,"dz-clickable",2,"display","flex","margin-top","3px","font-size","14px",3,"click"],[2,"font-size","20px","vertical-align","sub"],[1,"truncate",2,"line-height","1.6",3,"title"],[1,"mt-2"],["class","row justify-content-between mt-2","style","margin: 16px!important;",4,"ngIf"],[1,"row","justify-content-between","mt-2",2,"margin","16px!important"],[1,"col-sm-3","col-md-3","col-lg-3","_col-left_result","text-center"],["class","mb-0",4,"ngIf"],[1,"col-sm-8","col-md-8","col-lg-8","_col-right_result"],[1,"h5","title"],[1,"content-homework","pt-3",3,"innerHTML"],[3,"mark"]],template:function(e,o){1&e&&t.YNc(0,te,7,4,"div",0),2&e&&t.Q6J("ngIf",o.dataAnswerHistory&&o.dataAnswerHistory.length>0)},dependencies:[P.sg,P.O5,ht.Hw,ct.B,P.uU,H.bT],styles:[".card-box[_ngcontent-%COMP%]{width:100%;border:1px solid rgb(0,167,208);border-radius:3px}.top-row[_ngcontent-%COMP%]{background-color:#00a7d0;margin:0;padding:10px}.attach-container[_ngcontent-%COMP%]{margin:16px!important;background:#f1f1f1;padding:10px 0 0;border-radius:5px;border:1px solid #e8e8e8}@font-face{font-family:handwriting_font;src:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/fonts/HP0015HB.ttf)}._col-left[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;line-height:1;padding:35px}._col-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:5rem;color:#ff0024}._col-right[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;position:relative;padding:10px}._col-right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:-10px;left:20px;background-color:#f1f1f1}._col-right[_ngcontent-%COMP%]   .content-homework[_ngcontent-%COMP%]{color:red;line-height:1.4;font-size:20px;font-family:handwriting_font!important}._col-left_result[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;line-height:1;padding:10px}._col-left_result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:3rem;color:#ff0024}._col-right_result[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;position:relative;padding:10px}._col-right_result[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:-10px;left:20px;background-color:#f1f1f1}._col-right_result[_ngcontent-%COMP%]   .content-homework[_ngcontent-%COMP%]{color:red;font-size:16px;line-height:1.4;font-family:handwriting_font!important}.flex-title[_ngcontent-%COMP%]{display:flex;align-items:center}.flex-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00a7d0;cursor:pointer;margin-left:5px}.files[_ngcontent-%COMP%]{cursor:pointer}.testbank[_ngcontent-%COMP%]{padding-top:40px;text-align:left}.testbank__title[_ngcontent-%COMP%]{font-size:large;font-weight:500}.testbank_fileitem[_ngcontent-%COMP%]{display:flex;color:#00a7d0;margin-top:15px}.testbank_fileitem_icon[_ngcontent-%COMP%]{margin-right:5px}.testbank_fileitem_name[_ngcontent-%COMP%]{margin-right:10px}.testbank_fileitem_info_resualt[_ngcontent-%COMP%]{color:#000;font-weight:500;font-size:small;margin-right:15px}.testbank_fileitem_info_time[_ngcontent-%COMP%]{color:#9d9d9d}.testbank_fileitem_info_btn_submit[_ngcontent-%COMP%]{text-transform:uppercase;cursor:pointer;font-weight:500}.student_obj[_ngcontent-%COMP%]{padding:5px;min-height:69px}"]}),n})();function ne(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"date"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_frontend_come_back_at")+t.xi3(3,3,null==e.obj||null==e.obj.homeworkObj?null:e.obj.homeworkObj.startDate,"dd/MM/yyyy HH:mm"))}}function oe(n,r){if(1&n&&(t.TgZ(0,"div")(1,"div",6)(2,"div",7),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,ne,4,6,"span",3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,2,e.statusObj.errorMessage)," "),t.xp6(2),t.Q6J("ngIf","lang_core_not_start_homework_obj"==e.statusObj.errorMessage&&(null==e.obj||null==e.obj.homeworkObj?null:e.obj.homeworkObj.startDate))}}function ie(n,r){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"h3",14),t._uU(3),t.qZA(),t.TgZ(4,"div",15),t._UZ(5,"azt-download-qr-code",16),t.qZA()(),t.TgZ(6,"div",17)(7,"span",13),t.O4$(),t.TgZ(8,"svg",18),t._UZ(9,"path",19)(10,"path",20)(11,"path",21)(12,"path",22)(13,"rect",23)(14,"rect",24),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.kcU(),t.TgZ(17,"span",25)(18,"span"),t._uU(19),t.qZA()()()()()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",null==e.obj||null==e.obj.homeworkObj?null:e.obj.homeworkObj.name," "),t.xp6(2),t.Q6J("fileName","azota_submit_homework_qrcode_"+e.homeworkHashId)("linkUrl",e.urlLocation),t.xp6(10),t.hij(" ",t.lcZ(16,5,"lang_homework_homework_frontend_submit_homework_code_homework"),": "),t.xp6(4),t.Oqu(null==e.obj||null==e.obj.homeworkObj?null:e.obj.homeworkObj.hashId)}}function se(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.YNc(1,ie,20,7,"div",9),t.TgZ(2,"div",10)(3,"app-select-student",11),t.NdJ("selectChild",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.closeChooseStudent(i))})("approvedByName",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.approvedToClass(i))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e.obj?null:e.obj.homeworkObj)&&(null==e.obj||null==e.obj.homeworkObj?null:e.obj.homeworkObj.hashId)&&""!=(null==e.obj||null==e.obj.homeworkObj?null:e.obj.homeworkObj.hashId)),t.xp6(2),t.Q6J("homeworkFlow",!0)("data",e.chooseChildData)("showAddStudent",null==e.chooseChildData.classObj?null:e.chooseChildData.classObj.showAddStudent)}}function re(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-message-dialog",26),t.NdJ("closeDialog",function(i){t.CHM(e);const s=t.oxw();return t.KtG(s.closeMessageDialog(i))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("data",e.messageDialogData)}}function ae(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"azt-preview-media",29),t.NdJ("closePreview",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onFileClose())}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("fileOption",e.previewFile)}}function le(n,r){1&n&&(t.TgZ(0,"div",32)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_core_over_time_deadline")))}function _e(n,r){if(1&n&&(t.TgZ(0,"div",17)(1,"span",13),t.O4$(),t.TgZ(2,"svg",43),t._UZ(3,"path",58)(4,"circle",59),t.qZA(),t._uU(5," T\xean h\u1ecdc sinh: "),t.kcU(),t.TgZ(6,"span",38),t._uU(7),t.qZA()()()),2&n){const e=t.oxw(4);t.xp6(7),t.hij(" ",e.currentChild.fullName," ")}}function de(n,r){if(1&n&&(t.TgZ(0,"div",60)(1,"span",13),t.O4$(),t.TgZ(2,"svg",43),t._UZ(3,"rect",61)(4,"line",62)(5,"line",63)(6,"line",64)(7,"path",65)(8,"path",66)(9,"path",67)(10,"path",68)(11,"path",69)(12,"path",70),t.qZA(),t._uU(13," B\u1eaft \u0111\u1ea7u n\u1ed9p: "),t.kcU(),t.TgZ(14,"span",38),t._uU(15),t.ALo(16,"date"),t.qZA()()()),2&n){const e=t.oxw(4);t.xp6(15),t.hij(" ",t.xi3(16,1,null==e.obj||null==e.obj.homeworkObj?null:e.obj.homeworkObj.startDate,"dd/MM/yyyy HH:mm:ss")," ")}}function ce(n,r){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.Oqu(t.xi3(2,1,null==e.obj||null==e.obj.homeworkObj?null:e.obj.homeworkObj.deadline,"dd/MM/yyyy HH:mm:ss"))}}function me(n,r){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_homework_frontend_submit_homework_not_time")))}function ue(n,r){if(1&n&&t._UZ(0,"img",79),2&n){const e=t.oxw().$implicit;t.Q6J("src",e.url,t.LSH)}}function he(n,r){if(1&n&&(t._UZ(0,"img",79),t.ALo(1,"convertCdn")),2&n){const e=t.oxw().$implicit,o=t.oxw(4);t.Q6J("src",t.lcZ(1,1,o.getFileIcon(e)),t.LSH)}}function ge(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",71)(1,"div",72)(2,"a",73),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(4);return t.KtG(a.onShowFile(s,-1))}),t.TgZ(3,"div",74),t.YNc(4,ue,1,1,"img",75),t.YNc(5,he,2,3,"img",75),t.qZA(),t.TgZ(6,"div",76)(7,"p",77),t._uU(8),t.qZA(),t.TgZ(9,"div",78),t._uU(10),t.qZA()()()()()}if(2&n){const e=r.$implicit,o=t.oxw(4);let i,s;t.xp6(4),t.Q6J("ngIf",null==e.mimes?null:e.mimes.includes("image")),t.xp6(1),t.Q6J("ngIf",!(null!=e.mimes&&e.mimes.includes("image"))),t.xp6(2),t.Q6J("matTooltip",null!==(i=e.name)&&void 0!==i?i:""),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.Oqu(o.getFileType(null!==(s=e.mimes)&&void 0!==s?s:""))}}function pe(n,r){1&n&&(t.TgZ(0,"div",97)(1,"div",98)(2,"div",99)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark"),"!"))}function fe(n,r){1&n&&(t.TgZ(0,"div",100)(1,"h5",101),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij("",t.lcZ(3,1,"lang_homework_homework_frontend_submit_homework_loading_wait_it"),"!"))}const ve=function(n){return{"width.%":n}};function be(n,r){if(1&n&&(t.TgZ(0,"div",104)(1,"h5",105),t._uU(2),t.qZA(),t.TgZ(3,"div",106),t._UZ(4,"div",107),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.fileName),t.xp6(2),t.Q6J("ngStyle",t.VKq(2,ve,e.uploadProgress))}}function we(n,r){if(1&n&&(t.TgZ(0,"div",102),t.YNc(1,be,5,4,"div",103),t.qZA()),2&n){const e=t.oxw(6);t.xp6(1),t.Q6J("ngForOf",e.convertObjToArray(e.fileUploadQueue))}}function xe(n,r){1&n&&(t.TgZ(0,"div",100)(1,"h5",108),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij("",t.lcZ(3,1,"lang_homework_homework_frontend_submit_homework_submit_success"),"!"))}function ke(n,r){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",122),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(7);return t.KtG(s.removeImg(i.url))}),t.O4$(),t.TgZ(1,"svg",123),t._UZ(2,"line",124)(3,"line",125),t.qZA()()}}function je(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",111)(1,"div",112),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(7);return t.KtG(a.onShowFile(s,-1))}),t._UZ(2,"img",113),t.ALo(3,"mycdn"),t.qZA(),t.TgZ(4,"div",114)(5,"button",115),t.NdJ("click",function(){const s=t.CHM(e).index,a=t.oxw(7);return t.KtG(a.switchAttributeArray(a.answerFileList,s,s-1))}),t.O4$(),t.TgZ(6,"svg",116),t._UZ(7,"polyline",117),t.qZA()(),t.kcU(),t.TgZ(8,"input",118,119),t.NdJ("keyup.enter",function(){const s=t.CHM(e).index,a=t.MAs(9),d=t.oxw(7);return t.KtG(d.switchAttributeArrayInput(s,a.value))})("change",function(){const s=t.CHM(e).index,a=t.MAs(9),d=t.oxw(7);return t.KtG(d.switchAttributeArrayInput(s,a.value))}),t.qZA(),t.TgZ(10,"button",115),t.NdJ("click",function(){const s=t.CHM(e).index,a=t.oxw(7);return t.KtG(a.switchAttributeArray(a.answerFileList,s,s+1))}),t.O4$(),t.TgZ(11,"svg",116),t._UZ(12,"polyline",120),t.qZA()()(),t.YNc(13,ke,4,0,"div",121),t.qZA()}if(2&n){const e=r.$implicit,o=r.index,i=t.oxw(7);t.xp6(2),t.Q6J("src",t.lcZ(3,5,e.thumb),t.LSH),t.xp6(6),t.s9C("id","input_page_"+o),t.s9C("max",null==i.answerFileList?null:i.answerFileList.length),t.s9C("value",o+1),t.xp6(5),t.Q6J("ngIf",!(null!=i.obj&&i.obj.isMarked&&i.isShowGreenCheckbox(e.url)))}}function Oe(n,r){if(1&n&&(t.TgZ(0,"div",109),t.YNc(1,je,14,7,"div",110),t.qZA()),2&n){const e=t.oxw(6);t.xp6(1),t.Q6J("ngForOf",e.answerFileList)}}function ye(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,pe,6,3,"div",84),t.YNc(2,fe,4,3,"div",85),t.YNc(3,we,2,1,"div",86),t.YNc(4,xe,4,3,"div",85),t.YNc(5,Oe,2,1,"div",87),t.TgZ(6,"div",88),t.O4$(),t.TgZ(7,"svg",43),t._UZ(8,"path",89)(9,"polyline",90)(10,"line",91),t.qZA(),t.kcU(),t.TgZ(11,"span",92),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"input",93,94),t.NdJ("change",function(i){t.CHM(e);const s=t.oxw(5);return t.KtG(s.selectFile(i))}),t.qZA()(),t.TgZ(16,"div",95)(17,"span",96),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(5);t.xp6(1),t.Q6J("ngIf",null==e.obj?null:e.obj.isMarked),t.xp6(1),t.Q6J("ngIf",e.statusObjData.loading),t.xp6(1),t.Q6J("ngIf",e.convertObjToArray(e.fileUploadQueue).length>0),t.xp6(1),t.Q6J("ngIf",(null==e.answerFileList?null:e.answerFileList.length)&&(null==e.rawAnswerFileList?null:e.rawAnswerFileList.length)&&e.isSubmit),t.xp6(1),t.Q6J("ngIf",null==e.answerFileList?null:e.answerFileList.length),t.xp6(7),t.Oqu(t.lcZ(13,7,"lang_auto_upload_file")),t.xp6(6),t.Oqu(t.lcZ(19,9,"lang_auto_ho_tro_anh_video_audio_hoac_file_pdf_brackets"))}}function Ce(n,r){1&n&&(t.TgZ(0,"div",97)(1,"div",98)(2,"div",99)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark"),"!"))}function Ze(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",111)(1,"div",127),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(7);return t.KtG(a.onShowFile(s,-1))}),t._UZ(2,"img",128),t.ALo(3,"mycdn"),t.qZA(),t.TgZ(4,"div",114)(5,"button",129),t.O4$(),t.TgZ(6,"svg",116),t._UZ(7,"polyline",117),t.qZA()(),t.kcU(),t._UZ(8,"input",130,119),t.TgZ(10,"button",129),t.O4$(),t.TgZ(11,"svg",116),t._UZ(12,"polyline",120),t.qZA()()()()}if(2&n){const e=r.$implicit,o=r.index,i=t.oxw(7);t.xp6(2),t.Q6J("src",t.lcZ(3,4,e.thumb),t.LSH),t.xp6(6),t.s9C("id","input_page_"+o),t.s9C("max",null==i.answerFileList?null:i.answerFileList.length),t.s9C("value",o+1)}}function Ae(n,r){if(1&n&&(t.TgZ(0,"div",109),t.YNc(1,Ze,13,6,"div",110),t.qZA()),2&n){const e=t.oxw(6);t.xp6(1),t.Q6J("ngForOf",e.answerFileList)}}function Se(n,r){1&n&&(t.TgZ(0,"div",131)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_homework_homework_frontend_submit_homework_end_time_submit")))}function Te(n,r){if(1&n&&(t.ynx(0),t.YNc(1,Ce,6,3,"div",84),t.YNc(2,Ae,2,1,"div",87),t.YNc(3,Se,4,3,"div",126),t.BQk()),2&n){const e=t.oxw(5);t.xp6(1),t.Q6J("ngIf",null==e.obj?null:e.obj.isMarked),t.xp6(1),t.Q6J("ngIf",null==e.answerFileList?null:e.answerFileList.length),t.xp6(1),t.Q6J("ngIf",(null==e.obj?null:e.obj.isOverTime)&&!(null!=e.obj&&e.obj.isMarked))}}function Me(n,r){1&n&&(t.TgZ(0,"span"),t._UZ(1,"span",133),t._uU(2,"\xa0"),t.qZA())}function He(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",132),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.submitHomework())}),t.YNc(1,Me,3,0,"span",3),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(5);t.Q6J("disabled",e.statusObjData.loading||!(null!=e.answerFileList&&e.answerFileList.length)||(null==e.obj?null:e.obj.isMarked)||e.isNotChangeData),t.xp6(1),t.Q6J("ngIf",!0===e.statusObjData.loading),t.xp6(1),t.hij("",null!=e.obj&&e.obj.isMarked?t.lcZ(3,3,"lang_homework_homework_frontend_submit_homework_submited"):t.lcZ(4,5,"lang_homework_homework_frontend_submit_homework_submit")," ")}}function Fe(n,r){1&n&&(t.TgZ(0,"span"),t._UZ(1,"span",133),t._uU(2,"\xa0"),t.qZA())}function Le(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",134),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.submitHomework())}),t.YNc(1,Fe,3,0,"span",3),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(5);t.Q6J("disabled",e.statusObjData.loading||!(null!=e.answerFileList&&e.answerFileList.length)||(null==e.obj?null:e.obj.isOverTime)),t.xp6(1),t.Q6J("ngIf",!0===e.statusObjData.loading),t.xp6(1),t.hij("",null!=e.obj&&e.obj.isMarked?t.lcZ(3,3,"lang_homework_homework_frontend_submit_homework_submited"):t.lcZ(4,5,"lang_homework_homework_frontend_submit_homework_submit")," ")}}function Pe(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",80),t.YNc(2,ye,20,11,"ng-container",3),t.YNc(3,Te,4,3,"ng-container",3),t.qZA(),t.TgZ(4,"div",81),t.YNc(5,He,5,7,"button",82),t.YNc(6,Le,5,7,"button",83),t.qZA(),t.BQk()),2&n){const e=t.oxw(4);t.xp6(2),t.Q6J("ngIf",!(null!=e.obj&&e.obj.isOverTime)),t.xp6(1),t.Q6J("ngIf",null==e.obj?null:e.obj.isOverTime),t.xp6(2),t.Q6J("ngIf",!(null!=e.obj&&e.obj.isOverTime)),t.xp6(1),t.Q6J("ngIf",null==e.obj?null:e.obj.isOverTime)}}function Ie(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",111)(1,"div",127),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(6);return t.KtG(a.onShowFile(s,-1))}),t._UZ(2,"img",128),t.ALo(3,"mycdn"),t.qZA(),t.TgZ(4,"div",114)(5,"button",129),t.O4$(),t.TgZ(6,"svg",116),t._UZ(7,"polyline",117),t.qZA()(),t.kcU(),t._UZ(8,"input",130,119),t.TgZ(10,"button",129),t.O4$(),t.TgZ(11,"svg",116),t._UZ(12,"polyline",120),t.qZA()()()()}if(2&n){const e=r.$implicit,o=r.index,i=t.oxw(6);t.xp6(2),t.Q6J("src",t.lcZ(3,4,e.thumb),t.LSH),t.xp6(6),t.s9C("id","input_page_"+o),t.s9C("max",null==i.answerFileList?null:i.answerFileList.length),t.s9C("value",o+1)}}function Ue(n,r){if(1&n&&(t.TgZ(0,"div",141),t.YNc(1,Ie,13,6,"div",110),t.qZA()),2&n){const e=t.oxw(5);t.xp6(1),t.Q6J("ngForOf",e.answerFileList)}}function De(n,r){1&n&&(t.TgZ(0,"div",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark")," "))}function qe(n,r){1&n&&t._UZ(0,"p",151)}function Je(n,r){if(1&n&&(t.TgZ(0,"p",151),t._UZ(1,"azt-check-mark",152),t.qZA()),2&n){const e=t.oxw(6);t.xp6(1),t.Q6J("mark",e.answerObj.point)}}function Ne(n,r){if(1&n&&t._UZ(0,"div",157),2&n){const e=t.oxw(7);t.Q6J("innerHTML",e.answerObj.note,t.oJD)}}function Qe(n,r){if(1&n&&t._UZ(0,"div",158),2&n){const e=t.oxw(7);t.Q6J("innerHTML",e.answerObj.note,t.oJD)}}function Ye(n,r){if(1&n&&t._UZ(0,"div",159),2&n){const e=t.oxw(7);t.Q6J("innerHTML",e.answerObj.note,t.oJD)}}function ze(n,r){if(1&n&&t._UZ(0,"div",160),2&n){const e=t.oxw(7);t.Q6J("innerHTML",e.answerObj.note,t.oJD)}}function Ee(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Ne,1,1,"div",153),t.YNc(2,Qe,1,1,"div",154),t.YNc(3,Ye,1,1,"div",155),t.YNc(4,ze,1,1,"div",156),t.qZA()),2&n){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf","font_chu_in"==e.answerObj.txtCommentFont),t.xp6(1),t.Q6J("ngIf","font_chu_in_\u0111am"==e.answerObj.txtCommentFont),t.xp6(1),t.Q6J("ngIf","font_chu_dep_z"==e.answerObj.txtCommentFont),t.xp6(1),t.Q6J("ngIf","font_chu_in_nghieng"==e.answerObj.txtCommentFont)}}function Re(n,r){if(1&n&&t._UZ(0,"div",159),2&n){const e=t.oxw(6);t.Q6J("innerHTML",e.answerObj.note,t.oJD)}}function $e(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",143)(1,"h5",137),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._uU(4,"\xa0("),t.TgZ(5,"a",144),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(5);return t.KtG(i.viewDetail())}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t._uU(8,") "),t.qZA(),t.TgZ(9,"div",145)(10,"div",146),t.YNc(11,qe,1,0,"p",147),t.YNc(12,Je,2,1,"p",147),t.qZA(),t.TgZ(13,"div",148)(14,"h4",149),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t.YNc(17,Ee,5,4,"div",27),t.YNc(18,Re,1,1,"ng-template",null,150,t.W1O),t.qZA()()}if(2&n){const e=t.MAs(19),o=t.oxw(5);t.xp6(2),t.Oqu(t.lcZ(3,7,"lang_homework_homework_frontend_submit_homework_result")),t.xp6(4),t.Oqu(t.lcZ(7,9,"lang_homework_homework_frontend_submit_homework_view_detail_result")),t.xp6(5),t.Q6J("ngIf",!o.isHideMark&&!o.answerObj.point),t.xp6(1),t.Q6J("ngIf",!o.isHideMark&&o.answerObj.point),t.xp6(3),t.Oqu(t.lcZ(16,11,"lang_homework_homework_frontend_submit_homework_comment")),t.xp6(2),t.Q6J("ngIf",null!=o.answerObj.txtCommentFont||null!=o.answerObj.txtCommentFont)("ngIfElse",e)}}function Ge(n,r){if(1&n&&(t.TgZ(0,"div",135)(1,"div",136)(2,"h5",137),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.ALo(8,"date"),t.qZA()(),t.YNc(9,Ue,2,1,"div",138),t.YNc(10,De,3,3,"div",139),t.YNc(11,$e,20,13,"ng-template",140),t.qZA()),2&n){const e=t.oxw(4);t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_homework_homework_frontend_submit_homework_assignment")),t.xp6(3),t.AsE("\xa0(",t.lcZ(7,8,"lang_homework_homework_frontend_submit_homework_time_submit"),": ",t.xi3(8,10,null==e.answerObj?null:e.answerObj.createdAt,"dd/MM/yyyy HH:mm:ss"),")"),t.xp6(3),t.Q6J("ngIf",null==e.answerFileList?null:e.answerFileList.length),t.xp6(1),t.Q6J("ngIf",null!=e.answerObj&&(null==e.obj?null:e.obj.isMarked)&&e.whenShowAnswer),t.xp6(1),t.Q6J("ngIf",null!=e.answerObj&&(null==e.obj?null:e.obj.isMarked)&&!e.whenShowAnswer)}}function Be(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",33)(2,"div",13)(3,"h3",14),t._uU(4),t.qZA(),t.TgZ(5,"div",15),t._UZ(6,"azt-download-qr-code",16),t.qZA()(),t.TgZ(7,"div",17)(8,"span",13),t.O4$(),t.TgZ(9,"svg",18),t._UZ(10,"path",19)(11,"path",20)(12,"path",21)(13,"path",22)(14,"rect",23)(15,"rect",24),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.kcU(),t.TgZ(18,"span",25)(19,"span"),t._uU(20),t.qZA()()()(),t.TgZ(21,"div",17)(22,"span",13),t.O4$(),t.TgZ(23,"svg",18),t._UZ(24,"rect",34)(25,"rect",35)(26,"rect",36)(27,"rect",37),t.qZA(),t._uU(28," L\u1edbp: "),t.kcU(),t.TgZ(29,"span",38),t._uU(30),t.qZA()()(),t.YNc(31,_e,8,1,"div",39),t.TgZ(32,"div",40),t.YNc(33,de,17,4,"div",41),t.TgZ(34,"div",42)(35,"span",13),t.O4$(),t.TgZ(36,"svg",43),t._UZ(37,"path",44)(38,"path",45)(39,"path",46)(40,"path",47)(41,"path",48)(42,"line",49),t.qZA(),t._uU(43),t.ALo(44,"mytranslate"),t.YNc(45,ce,3,4,"span",50),t.YNc(46,me,3,3,"span",50),t.qZA()()()(),t.kcU(),t.TgZ(47,"div",12),t._UZ(48,"div",51),t.ALo(49,"safeContentQuestion"),t.ALo(50,"mathJaxContent"),t.TgZ(51,"div",52)(52,"div",53),t.YNc(53,ge,11,5,"div",54),t.qZA()()(),t.TgZ(54,"div",55),t.YNc(55,Pe,7,4,"ng-container",27),t.YNc(56,Ge,12,13,"ng-template",null,56,t.W1O),t.TgZ(58,"app-answer-history",57),t.NdJ("previewFileEmit",function(i){t.CHM(e);const s=t.oxw(3);return t.KtG(s.onShowFileTwo(i))}),t.qZA()(),t.BQk()}if(2&n){const e=t.MAs(57),o=t.oxw(3);t.xp6(4),t.hij(" ",null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.name," "),t.xp6(2),t.Q6J("fileName","azota_submit_homework_qrcode_"+o.homeworkHashId)("linkUrl",o.urlLocation),t.xp6(10),t.hij(" ",t.lcZ(17,17,"lang_homework_homework_frontend_submit_homework_code_homework"),": "),t.xp6(4),t.Oqu(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.hashId),t.xp6(10),t.hij(" ",o.currentChild||null!=o.obj&&null!=o.obj.classroomObj&&o.obj.classroomObj.name?null==o.obj||null==o.obj.classroomObj?null:o.obj.classroomObj.name:""," "),t.xp6(1),t.Q6J("ngIf",o.currentChild),t.xp6(2),t.Q6J("ngIf",null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.startDate),t.xp6(10),t.hij(" ",t.lcZ(44,19,"lang_homework_homework_frontend_submit_homework_dealine"),":\xa0 "),t.xp6(2),t.Q6J("ngIf",null!=(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.deadline)),t.xp6(1),t.Q6J("ngIf",null==(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.deadline)),t.xp6(2),t.Q6J("innerHTML",t.lcZ(49,21,t.lcZ(50,23,null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.content)),t.oJD),t.xp6(5),t.Q6J("ngForOf",o.files),t.xp6(2),t.Q6J("ngIf",null==o.answerObj||null!=o.answerObj&&null==o.answerObj.confirmedAt)("ngIfElse",e),t.xp6(3),t.Q6J("dataAnswerHistory",o.answerHistory)("dataHomeworkObj",null==o.obj?null:o.obj.homeworkObj)}}function Ke(n,r){if(1&n&&(t.YNc(0,le,4,3,"div",30),t.YNc(1,Be,59,25,"ng-template",null,31,t.W1O)),2&n){const e=t.MAs(2),o=t.oxw(2);t.Q6J("ngIf",o.showErrorOvertime)("ngIfElse",e)}}function Ve(n,r){if(1&n&&(t.ynx(0),t.YNc(1,ae,2,1,"div",27),t.YNc(2,Ke,3,2,"ng-template",null,28,t.W1O),t.BQk()),2&n){const e=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.isShowPreviewFile)("ngIfElse",e)}}let We=(()=>{class n extends D.Q{constructor(e,o,i,s,a,d,c,h,p,f,j,O,y,Z){super(i),this.fb=e,this.activeRoute=o,this.commonService=i,this.baseApiService=s,this.myPdfService=a,this.localStorageObjetct=d,this.frontHomeworkService=c,this.frontAnswerService=h,this.frontStudentService=p,this.apiUploadService=f,this.zipdataService=j,this.userService=O,this.homeworkExamService=y,this.dialog=Z,this.form=new M.nJ({}),this.homeworkHashId="",this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""},this.currentChild={},this.files=[],this.hasResentComment=!1,this.isSubmit=!1,this.urlLocation="",this.isShowPreviewFile=!1,this.showErrorOvertime=!1,this.logs=[],this.isShowErrorsBox=!1,this.isHideMark=!1,this.fileUploadQueue=[],this.uploadCount=0,this.selectChild=!1,this.isPendingApproved=!1,this.messageDialogData={type:"",isShow:!1},this.normalFlow=!1,this.chooseChildData={isPendingApproved:!1,isShow:!1},this.backToLink="/student/dashboard/1",this.sendRequestData={studentObj:void 0,classId:-1,isShow:!1},this.countUpload=1,this.isNotChangeData=!1,this.whenShowAnswer=0,this.selectFile=l=>(0,B.mG)(this,void 0,void 0,function*(){let m=l.target.files;try{for(let u in m)if("length"!=u&&"item"!=u)if((0,A.z_)(m[u].type))if((0,A.EO)(m[u].size)<=200)if(this.statusObjData={loading:!0,errorStatus:-1,errorMessage:"",loadingMessage:""},(0,A._4)(m[u].type)){let b=yield this.myPdfService.getImageWithPdf(m[u]);this.answerFile=m?m[u]:this.answerFile,this.uploadFiles(b,this.uploadCount),this.uploadCount+=1}else this.answerFile=m?m[u]:this.answerFile,this.answerFile&&(this.statusObjData={loading:!0,errorStatus:-1,errorMessage:"",loadingMessage:""},this.uploadFile(this.answerFile,this.uploadCount),this.uploadCount+=1);else this.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb");else this.showErrorSnack("lang_auto_error_file_no_support_homework_front_end");l.target.value="",this.isSubmit=!1}catch(u){alert("\u0110\xe3 x\u1ea3y ra l\u1ed7i:"+u)}}),this.uploadFileVideo=(l,v)=>(0,B.mG)(this,void 0,void 0,function*(){var w,m,u,b,F={qrcode:void 0,homeworkId:null===(m=null===(w=this.obj)||void 0===w?void 0:w.homeworkObj)||void 0===m?void 0:m.id,teacherId:null===(b=null===(u=this.obj)||void 0===u?void 0:u.homeworkObj)||void 0===b?void 0:b.tenantId};this.subscriptions.add(this.apiUploadService.uploadToVimeoProgress("front_homework",l,F).subscribe(S=>{var L;S.isOnProgress?this.fileUploadQueue.hasOwnProperty(v)?(this.fileUploadQueue[v].uploadProgress=Math.round(null!==(L=S.percentage)&&void 0!==L?L:0),this.fileUploadQueue[v].fileName=l.name):this.fileUploadQueue[v]={uploadProgress:0,fileName:l.name}:1==S.success?(delete this.fileUploadQueue[v],Array.isArray(this.answerFileList)||(this.answerFileList=[]),this.addFileWithProsess(Object.assign(Object.assign({},S.data),{lastModified:l.lastModified})),this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""}):S.hasOwnProperty("code")&&401==S.code?this.countUpload<=3&&setTimeout(()=>{this.countUpload++,this.uploadFileVideo(l,v)},15e3):(this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""},this.commonService.snackError("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau_ten: "+l.name,""),this.commonService.gaEvent("FrontHomework_UploadError"))}))}),this.uploadFiles=(l,v)=>(0,B.mG)(this,void 0,void 0,function*(){for(let w=0;w<l.length;w++){const m=l[w];yield(0,A.hv)(m).then(u=>{this.apiUploadService.uploadToCdnProgressForFrontendHomework(u).subscribe(b=>{b.type!=_t.dt.UploadProgress&&(1==b.success?(delete this.fileUploadQueue[v],Array.isArray(this.answerFileList)||(this.answerFileList=[]),this.addFileWithProsess(Object.assign(Object.assign({},b.data),{lastModified:u.lastModified}))):(this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""},this.showErrorSnack("lang_auto_khong_upload_duoc_tep_tin_ten:"+m.name)))})}),w===l.length-1&&(this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""})}}),this.uploadFile=(l,v)=>(0,B.mG)(this,void 0,void 0,function*(){this.isSubmit=!1,((0,A.Or)(l.type)||(0,A.Wv)(l.type)||(0,A.F0)(l.type)||(0,A._4)(l.type)||(0,A.D_)(l.type))&&(0,A.hv)(l).then(w=>{this.apiUploadService.uploadToCdnProgressForFrontendHomework(w).subscribe(m=>{var u,b;if(m.type!=_t.dt.UploadProgress)1==m.success?(delete this.fileUploadQueue[v],Array.isArray(this.answerFileList)||(this.answerFileList=[]),this.addFileWithProsess(Object.assign(Object.assign({},m.data),{lastModified:w.lastModified})),this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""}):(this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""},this.commonService.gaEvent("FrontHomework_UploadError"),this.showErrorSnack("lang_auto_khong_upload_duoc_anh_ten: "+l.name+"lang_auto__brackets_vui_long_thu_lai_sau_loi_split_lang"+m.message));else{let F=Math.round(null!==(u=m.loaded)&&void 0!==u?u:0/(null!==(b=m.total)&&void 0!==b?b:1)*100);this.fileUploadQueue.hasOwnProperty(v)?(this.fileUploadQueue[v].uploadProgress=F,this.fileUploadQueue[v].fileName=l.name):this.fileUploadQueue[v]={uploadProgress:0,fileName:l.name}}})})}),this.captureFile=l=>(0,B.mG)(this,void 0,void 0,function*(){let m=l.target.files;try{for(let u in m)if("length"!=u&&"item"!=u)if((0,A.z_)(m[u].type))if((0,A.EO)(m[u].size)<=200)if(this.statusObjData={loading:!0,errorStatus:-1,errorMessage:"",loadingMessage:""},(0,A._4)(m[u].type)){let b=yield this.myPdfService.getImageWithPdf(m[u]);this.answerFile=m?m[u]:this.answerFile,this.uploadFiles(b,this.uploadCount),this.uploadCount+=1}else this.answerFile=m?m[u]:this.answerFile,this.answerFile&&(this.statusObjData={loading:!0,errorStatus:-1,errorMessage:"",loadingMessage:""},this.uploadFile(this.answerFile,this.uploadCount),this.uploadCount+=1);else this.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb");else this.showErrorSnack("lang_auto_error_file_no_support_homework_front_end");l.target.value="",this.isSubmit=!1}catch(u){alert(u)}}),this.answerFile=null}getFileType(e){let o=(0,A.Z9)(e);return"image"==o?"H\xecnh \u1ea3nh":"video"==o?"Video":"audio"==o?"\xc2m thanh":"T\xe0i li\u1ec7u"}getFileIcon(e){var o,i;let s=(0,A.Z9)(null!==(o=e.mimes)&&void 0!==o?o:"");return"image"==s?null!==(i=e.url)&&void 0!==i?i:"azota_assets/images/jpg-icon.png":"video"==s?"azota_assets/images/video_sample.png":"audio"==s?"azota_assets/images/audio_sample.png":"pdf"==s?"azota_assets/images/ext_pdf_filetype_icon_176234.svg":"azota_assets/images/documents.png"}isShowGreenCheckbox(e){if(this.rawAnswerFileList&&this.rawAnswerFileList.length>0)for(let o=0;o<this.rawAnswerFileList.length;o++)if(this.rawAnswerFileList[o].url===e)return!0;return!1}onFileClose(){this.isShowPreviewFile=!1,this.previewFile={}}onShowFile(e,o){this.isShowPreviewFile=!0,this.previewFile=Object.assign(Object.assign({},e),{index:o})}onShowFileTwo(e){this.isShowPreviewFile=!0,this.previewFile=e}showAllSubmit(){this.commonService.myNavigation("/student/dashboard/1")}viewDetail(){var e;this.commonService.myNavigation("/homework/view-homework/"+(null===(e=this.answerObj)||void 0===e?void 0:e.id)+"/"+this.homeworkHashId)}viewDetailHistory(e){var o,i;this.commonService.myNavigation("/homework/view-homework/"+(null===(i=null===(o=this.obj)||void 0===o?void 0:o.homeworkObj)||void 0===i?void 0:i.id)+"/"+this.homeworkHashId+"/"+e)}openChooseStudent(e){1==e?(this.chooseChildData.isPendingApproved=!1,this.chooseChildData.isShow=!0):(this.chooseChildData.isPendingApproved=!0,this.chooseChildData.isShow=!0)}closeChooseStudent(e){var o,i,s,a,d;0==(null===(o=e.studentObj)||void 0===o?void 0:o.isVerified)||1==(null===(i=e.classroomObj)||void 0===i?void 0:i.freeChooseName)?this.frontStudentService.apiFrontStudentAddStudentToClassForHomeworkGet(this.homeworkHashId,null===(a=null===(s=this.obj)||void 0===s?void 0:s.classroomObj)||void 0===a?void 0:a.id,e.studentObj?e.studentObj.id:0).subscribe(c=>{var h;1===c.success?(this.getData(),this.selectChild=!1,this.isPendingApproved=!1):this.showErrorSnack(null!==(h=c.message)&&void 0!==h?h:"")}):this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole()?this.userService.getUserObj().id==(null===(d=e.studentObj)||void 0===d?void 0:d.parentId)?(this.urlStudentId=0,this.getData(),this.selectChild=!1,this.isPendingApproved=!1,this.normalFlow=!0):this.dialog.open(Zt,{width:"600px",data:{studentObj:e.studentObj,classId:e.classId,isShow:!0}}).afterClosed().subscribe(f=>{switch(console.log("%cMyProject%cline:172%cresult","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(3, 38, 58);padding:3px;border-radius:2px",f),f){case"success":this.showSuccessSnack("lang_auto_yeu_cau_cua_ban_da_duoc_gui_toi_cho_giao_vien");break;case"error":this.showErrorSnack("lang_auto_chua_the_gui_yeu_cau_vui_long_thu_lai")}}):this.dialog.open(At,{data:{studentObj:e.studentObj,isShow:!0}})}approvedToClass(e){var o,i;let s={fullName:e.nameEmit,homeworkHashId:this.homeworkHashId,classroomId:null===(i=null===(o=this.obj)||void 0===o?void 0:o.classroomObj)||void 0===i?void 0:i.id};this.subscriptions.add(this.frontStudentService.apiFrontStudentSaveStudentForHomeworkPost(s).subscribe(a=>{var d;1==a.success?this.getData():this.showErrorSnack(null!==(d=a.message)&&void 0!==d?d:"")}))}fillData(){var e,o,i,s,a,d,c,h,p,f,j,O,y;if(this.files=null!==(s=this.commonService.myParseJson(null!==(i=null===(o=null===(e=this.obj)||void 0===e?void 0:e.homeworkObj)||void 0===o?void 0:o.files)&&void 0!==i?i:""))&&void 0!==s?s:[],null==this.files&&(this.files=new Array),!(null===(a=this.obj)||void 0===a)&&a.answerObj&&this.obj.answerObj.files&&(this.answerFileList=this.commonService.myParseJson(this.obj.answerObj.files),this.rawAnswerFileList=this.commonService.myClone(this.answerFileList),this.isNotChangeData=!0),null!==(d=this.obj)&&void 0!==d&&d.answerHistoryObjs){for(let l=0;l<this.obj.answerHistoryObjs.length;l++)this.resendNote=this.obj.answerHistoryObjs[0].resendNote,this.hasResentComment=!0,this.obj.answerHistoryObjs[l].result&&(this.obj.answerHistoryObjs[l].note=this.commonService.willDeleteParseJson(null!==(c=this.obj.answerHistoryObjs[l].result)&&void 0!==c?c:"").comment);this.answerHistory=this.obj.answerHistoryObjs;for(let l=0;l<this.answerHistory.length;l++){if(this.answerHistory[l].result){var Z=this.commonService.willDeleteParseJson(null!==(h=this.answerHistory[l].resultNote)&&void 0!==h?h:"");this.answerHistory[l].hideMark=!(!Z||!Z.IsHideMark)&&Z.IsHideMark}this.answerHistory[l].files&&(this.answerHistory[l].fileParse=this.commonService.myParseJson(null!==(p=this.answerHistory[l].files)&&void 0!==p?p:""))}}!(null===(f=this.obj)||void 0===f)&&f.answerObj&&(this.answerObj=this.obj.answerObj,this.hasResentComment=!1),this.answerObj&&this.answerObj.result&&(this.answerObj.note=null!=this.commonService.willDeleteParseJson(this.answerObj.result)?this.commonService.willDeleteParseJson(this.answerObj.result).comment:"",this.answerObj.txtCommentFont=this.commonService.willDeleteParseJson(this.commonService.willDeleteParseJson(this.answerObj.result).staticTextConfig).txtCommentFont,this.isHideMark=null!=this.commonService.willDeleteParseJson(this.answerObj.result)&&this.commonService.willDeleteParseJson(this.answerObj.result).hideMark),null!=(null===(j=this.answerObj)||void 0===j?void 0:j.resultNote)&&null==(null===(O=this.answerObj)||void 0===O?void 0:O.note)&&(this.answerObj.note=null!=this.commonService.willDeleteParseJson(this.answerObj.resultNote)?this.commonService.willDeleteParseJson(this.answerObj.resultNote).Note:""),this.currentChild=null!==(y=this.obj)&&void 0!==y&&y.studentObj?this.obj.studentObj:this.baseApiService.getUserObj()}closeMessageDialog(e){e&&(this.messageDialogData={type:"",isShow:!1})}getData(){this.initStatusObj(),this.frontHomeworkService.apiFrontHomeworkGetObjGet(this.homeworkHashId).subscribe(e=>{var o,i,s,a,d,c,h,p,f,j,O,y,Z,l,v,w,m,u,b,F,S,L,z,q,T,E,R,$,J,G,g,C,x,W,X,tt,et,nt,ot,it,st,rt,at;if(1==e.success){if(this.zipdataService.convertAnswersHistories(e.data),this.zipdataService.convertSubmittedAnswersObj(null===(o=e.data)||void 0===o?void 0:o.answerObj),this.obj=e.data,this.dataProcess=e.data,this.zipdataService.convertHomeworkObj(null!==(s=null===(i=this.obj)||void 0===i?void 0:i.homeworkObj)&&void 0!==s?s:{}),this.commonService.translateMetaData({title:(null===(d=null===(a=this.obj)||void 0===a?void 0:a.homeworkObj)||void 0===d?void 0:d.name)+"- L\u1edbp:"+(null===(h=null===(c=this.obj)||void 0===c?void 0:c.classroomObj)||void 0===h?void 0:h.name),description:null===(f=null===(p=this.obj)||void 0===p?void 0:p.homeworkObj)||void 0===f?void 0:f.content}),this.whenShowAnswer=null!==(y=null===(O=null===(j=this.obj)||void 0===j?void 0:j.homeworkObj)||void 0===O?void 0:O.whenShowAnswer)&&void 0!==y?y:0,!(null===(Z=this.obj)||void 0===Z?void 0:Z.isOverTime)||null!==(l=this.obj.answerObj)&&void 0!==l&&l.createdAt)if(1==(null===(w=null===(v=this.obj)||void 0===v?void 0:v.homeworkObj)||void 0===w?void 0:w.mustVerified))if(!this.baseApiService.isLogin()||this.baseApiService.isLogin()&&this.baseApiService.isAnonymousRole())this.messageDialogData={type:"redirect_register",isShow:!0},this.openChooseStudent(1),this.chooseChildData.studentObjs=this.obj.studentObjs,this.chooseChildData.classObj=this.obj.classroomObj,this.selectChild=!0,this.normalFlow=!1;else if((null===(m=this.obj)||void 0===m?void 0:m.studentObj)&&1==this.obj.studentObj.isVerified)if(this.urlStudentId){let k=null===(b=null===(u=this.obj)||void 0===u?void 0:u.studentObjs)||void 0===b?void 0:b.filter(U=>U.id==this.urlStudentId);this.selectChild=!0,this.normalFlow=!1,this.openChooseStudent(3),this.chooseChildData={studentObj:null==k?void 0:k[0],studentObjs:null===(F=this.obj)||void 0===F?void 0:F.studentObjs,classroomObj:this.obj.classroomObj,isPendingApproved:!1,isShow:!0}}else this.fillData(),this.selectChild=!1,this.normalFlow=!0;else if((null===(S=this.obj)||void 0===S?void 0:S.studentObj)&&0==this.obj.studentObj.isVerified)if(this.urlStudentId){let k=null===(z=null===(L=this.obj)||void 0===L?void 0:L.studentObjs)||void 0===z?void 0:z.filter(U=>U.id==this.urlStudentId);this.selectChild=!0,this.normalFlow=!1,this.openChooseStudent(3),this.chooseChildData={studentObj:null==k?void 0:k[0],studentObjs:null===(q=this.obj)||void 0===q?void 0:q.studentObjs,classroomObj:this.obj.classroomObj,isPendingApproved:!1,isShow:!0}}else this.selectChild=!0,this.normalFlow=!1,this.openChooseStudent(2),this.chooseChildData.studentObj=null===(T=this.dataProcess)||void 0===T?void 0:T.studentObj;else if(this.urlStudentId){let k=null===(R=null===(E=this.obj)||void 0===E?void 0:E.studentObjs)||void 0===R?void 0:R.filter(U=>U.id==this.urlStudentId);this.selectChild=!0,this.normalFlow=!1,this.openChooseStudent(3),this.chooseChildData={studentObj:null==k?void 0:k[0],studentObjs:null===($=this.obj)||void 0===$?void 0:$.studentObjs,classroomObj:null===(J=this.obj)||void 0===J?void 0:J.classroomObj,isPendingApproved:!1,isShow:!0}}else this.selectChild=!0,this.normalFlow=!1,this.openChooseStudent(1),this.chooseChildData.studentObjs=null===(G=this.dataProcess)||void 0===G?void 0:G.studentObjs,this.chooseChildData.classObj=null===(g=this.dataProcess)||void 0===g?void 0:g.classroomObj;else if(null==(null===(C=this.obj)||void 0===C?void 0:C.studentObj))if(this.urlStudentId){let k=null===(W=null===(x=this.obj)||void 0===x?void 0:x.studentObjs)||void 0===W?void 0:W.filter(U=>U.id==this.urlStudentId);this.selectChild=!0,this.normalFlow=!1,this.openChooseStudent(3),this.chooseChildData={studentObj:null==k?void 0:k[0],studentObjs:null===(X=this.obj)||void 0===X?void 0:X.studentObjs,classroomObj:null===(tt=this.obj)||void 0===tt?void 0:tt.classroomObj,isPendingApproved:!1,isShow:!0}}else this.selectChild=!0,this.normalFlow=!1,this.openChooseStudent(1),this.chooseChildData.studentObjs=null===(et=this.dataProcess)||void 0===et?void 0:et.studentObjs,this.chooseChildData.classObj=null===(nt=this.dataProcess)||void 0===nt?void 0:nt.classroomObj;else if(this.urlStudentId){let k=null===(it=null===(ot=this.obj)||void 0===ot?void 0:ot.studentObjs)||void 0===it?void 0:it.filter(U=>U.id==this.urlStudentId);this.selectChild=!0,this.normalFlow=!1,this.openChooseStudent(3),this.chooseChildData={studentObj:null==k?void 0:k[0],studentObjs:null===(st=this.obj)||void 0===st?void 0:st.studentObjs,classroomObj:this.obj.classroomObj,isPendingApproved:!1,isShow:!0}}else this.isPendingApproved=!1,this.selectChild=!1,this.fillData(),this.normalFlow=!0;else this.showErrorOvertime=!0,this.normalFlow=!0,this.selectChild=!1;this.successStatusObj()}else this.obj=null!==(rt=e.data)&&void 0!==rt?rt:{},this.errorStatusObj(null!==(at=e.message)&&void 0!==at?at:"",!0)}),this.commonService.gaEvent("FrontHomework_GetObj")}convertObjToArray(e){let o=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&o.push(e[i]);return o}addFileWithProsess(e){var o,i,s,a;e&&(this.isNotChangeData=!1,null===(o=this.answerFileList)||void 0===o||o.push(e));let d=null!==(s=null===(i=this.answerFileList)||void 0===i?void 0:i.length)&&void 0!==s?s:0;for(let c=0;c<d;c++)this.answerFileList&&!(null!==(a=this.answerFileList)&&void 0!==a&&a[c].lastModified)&&(this.answerFileList[c].lastModified=(new Date).getTime()),this.answerFileList&&!this.answerFileList[c].thumb&&(this.answerFileList[c].thumb=this.homeworkExamService.getThumbWithObj(this.answerFileList[c]));this.answerFileList&&this.answerFileList.length>0&&this.answerFileList.sort((c,h)=>c.lastModified&&h.lastModified?c.lastModified-h.lastModified:0)}removeImg(e){var o;let i=null===(o=this.answerFileList)||void 0===o?void 0:o.filter(s=>s.url!==e);this.answerFileList=i,this.isNotChangeData=!1}submitHomework(){var e,o,i,s,a,d;let c={homeworkHashId:null===(o=null===(e=this.obj)||void 0===e?void 0:e.homeworkObj)||void 0===o?void 0:o.hashId,studentId:this.currentChild.id,files:JSON.stringify(this.answerFileList)};if("[]"!=c.files){this.isSubmit=!1,this.statusObjData={loading:!0,errorStatus:-1,errorMessage:"",loadingMessage:""};let h=JSON.stringify({type:"homework",id:null===(s=null===(i=this.obj)||void 0===i?void 0:i.homeworkObj)||void 0===s?void 0:s.id,user:null===(d=null===(a=this.obj)||void 0===a?void 0:a.homeworkObj)||void 0===d?void 0:d.tenantId});this.frontAnswerService.apiFrontAnswerSaveObjPost(c,h).subscribe(p=>{var f;1==p.success?(this.localStorageObjetct.clearAllCache(),this.isSubmit=!0,this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""},this.rawAnswerFileList=this.commonService.myClone(this.answerFileList),this.showSuccessSnack("lang_auto_ban_da_nop_bai_thanh_cong"),this.isNotChangeData=!0,this.hasResentComment=!1):(this.showErrorSnack(null!==(f=p.message)&&void 0!==f?f:""),this.statusObjData={loading:!1,errorStatus:-1,errorMessage:"",loadingMessage:""},this.isSubmit=!1)},p=>{this.logs.push("Err:"+p)})}else this.showErrorSnack("lang_auto_bai_lam_chua_day_du_vui_long_thu_lai");this.commonService.gaEvent("FrontHomework_SaveObj")}switchAttributeArray(e,o,i){var s,a,d;if(this.answerFileList&&(null===(s=this.answerFileList)||void 0===s?void 0:s.length)){if((null===(a=this.answerFileList)||void 0===a?void 0:a.length)<=o||this.answerFileList.length<=i||o<0||i<0)return;let c=this.castObj(this.answerFileList[o]);this.answerFileList[o]=null!==(d=this.castObj(this.answerFileList[i]))&&void 0!==d?d:{},this.answerFileList[i]=null!=c?c:{}}}switchAttributeArrayInput(e,o){var i,s;let a=Number(o)-1;a<=0?a=0:this.answerFileList&&a>=(null===(i=this.answerFileList)||void 0===i?void 0:i.length)&&(a=this.answerFileList.length),null===(s=this.answerFileList)||void 0===s||s.splice(a,0,this.answerFileList.splice(e,1)[0])}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_student_view_excercise_title",description:"lang_cms_student_view_excercise_description",image:"lang_cms_test_image"}),(0,Ct.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([e,o])=>{var i,s,a;""!=this.commonService.getMyQueryParam("backto")&&(this.backToLink=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"/student/dashboard/1");var d=null!==(s=this.commonService.getMyQueryParam("studentId"))&&void 0!==s?s:"0";this.urlStudentId=parseInt(d,10),this.homeworkHashId=null!==(a=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==a?a:"",this.getData()}),this.form=this.fb.group({file_data:new M.p4("",M.kI.required),file_capture:new M.p4("",M.kI.required),file:new M.p4("",M.kI.required)}),this.urlLocation=window.location.href,super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.QS),t.Y36(I.gz),t.Y36(Q.v),t.Y36(St._),t.Y36(Tt.t),t.Y36(Mt.L),t.Y36(Y.WY),t.Y36(Y.XL),t.Y36(Y.Dn),t.Y36(Ht.$),t.Y36(dt.n),t.Y36(Ft.K),t.Y36(Lt.j),t.Y36(N.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-submit-homework"]],features:[t.qOj],decls:7,vars:5,consts:[[3,"headerBackTolink"],[1,"intro-x","mt-5"],[1,"box","mx-auto"],[4,"ngIf"],["class","azt-select-child",4,"ngIf"],[3,"data","closeDialog",4,"ngIf"],[1,"w-full"],[1,"alert","alert-danger","text-center",2,"display","block"],[1,"azt-select-child"],["class","p-3 border-b border-slate-200/60 dark:border-darkmode-400",4,"ngIf"],[1,"mt-5"],[3,"homeworkFlow","data","showAddStudent","selectChild","approvedByName"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"flex","items-center"],[1,"text-lg","font-medium","mr-auto"],[1,"w-auto","flex"],[3,"fileName","linkUrl"],[1,"mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M6 20h4"],["d","M14 10h4"],["d","M6 14h2v6"],["d","M14 4h2v6"],["x","6","y","4","width","4","height","6"],["x","14","y","14","width","4","height","6"],[1,"ml-1","font-bold","text-pirmary"],[3,"data","closeDialog"],[4,"ngIf","ngIfElse"],["Main",""],[3,"fileOption","closePreview"],["class","alert alert-danger mt-3",4,"ngIf","ngIfElse"],["Normal",""],[1,"alert","alert-danger","mt-3"],[1,"azt-info-homework","p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],["x","3","y","3","width","7","height","7"],["x","14","y","3","width","7","height","7"],["x","14","y","14","width","7","height","7"],["x","3","y","14","width","7","height","7"],[1,"ml-1","font-medium"],["class","mt-2",4,"ngIf"],[1,"flex","flex-col","sm:flex-row"],["class","time-create mr-10 mt-2",4,"ngIf"],[1,"time-deadline","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18"],["d","M21 15.5V6a2 2 0 0 0-2-2H9.5"],["d","M16 2v4"],["d","M3 10h7"],["d","M21 10h-5.5"],["x1","2","y1","2","x2","22","y2","22"],["class","ml-1 font-medium",4,"ngIf"],[1,"azt-content-homework",3,"innerHTML"],[1,"attack-file","mt-5"],[1,"grid","grid-cols-12","gap-3","mt-3"],["class","col-span-12 lg:col-span-3",4,"ngFor","ngForOf"],[1,"p-3"],["Result",""],[3,"dataAnswerHistory","dataHomeworkObj","previewFileEmit"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"time-create","mr-10","mt-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],["d","M8 14h.01"],["d","M12 14h.01"],["d","M16 14h.01"],["d","M8 18h.01"],["d","M12 18h.01"],["d","M16 18h.01"],[1,"col-span-12","lg:col-span-3"],[1,"border","flex","border-slate-200/60","dark:border-darkmode-400","rounded-md","p-3","zoom-in"],[1,"flex","w-full","items-center",3,"click"],[1,"w-12","h-12","image-fit","lg:mr-1"],["class","rounded-md",3,"src",4,"ngIf"],[1,"ml-2","mt-0",2,"max-width","80%"],[1,"font-medium","truncate",3,"matTooltip"],[1,"text-slate-500","text-xs","mt-0.5"],[1,"rounded-md",3,"src"],[1,"w-full","mt-3","xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md","pt-4"],[1,"text-center","mt-5"],["class","btn w-24 btn-primary",3,"disabled","click",4,"ngIf"],["class","btn w-24 btn-danger",3,"disabled","click",4,"ngIf"],["class","row ml-0 mr-0",4,"ngIf"],["class","text-center mt-4 mb-4",4,"ngIf"],["class","row ml-0 mr-0 mt-1 mb-1 pb-3 pt-3 attach-container",4,"ngIf"],["class","grid grid-cols-10 gap-5 pl-4 pr-5",4,"ngIf"],[1,"px-4","flex","items-center","justify-center","cursor-pointer","relative",2,"margin-top","80px"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],[1,"text-primary","mr-1"],["id","horizontal-form-1","type","file","id","inp_hidden","multiple","",1,"w-full","h-full","top-0","left-0","absolute","opacity-0","cursor-pointer",3,"change"],["fileCapture",""],[1,"px-4","pb-4","mt-1","flex","items-center","justify-center","cursor-pointer","relative"],[1,"block","text-slate-600","dark:text-slate-500"],[1,"row","ml-0","mr-0"],[1,"col-12"],[1,"alert","alert-danger","text-center"],[1,"text-center","mt-4","mb-4"],[1,"text-md","font-medium"],[1,"row","ml-0","mr-0","mt-1","mb-1","pb-3","pt-3","attach-container"],["class","col-6 col-sm-6 col-md-4 col-xl-2 col-lg-2",4,"ngFor","ngForOf"],[1,"col-6","col-sm-6","col-md-4","col-xl-2","col-lg-2"],[1,"text-md","font-medium","truncate"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",3,"ngStyle"],[1,"text-md","font-medium","text-success"],[1,"grid","grid-cols-10","gap-5","pl-4","pr-5"],["class","col-span-5 md:col-span-2 relative cursor-pointer",4,"ngFor","ngForOf"],[1,"col-span-5","md:col-span-2","relative","cursor-pointer"],["_target","blank",1,"image-fit","h-32",3,"click"],["alt","Midone - HTML Admin Template",1,"rounded-md",2,"border-bottom-left-radius","0","border-bottom-right-radius","0",3,"src"],[1,"flex","items-center","rounded-md","border","border-slate-200","dark:border-darkmode-400","overflow-hidden",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"btn-sm","btn","btn-secondary",2,"border-radius","0","border","none",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5"],["points","15 18 9 12 15 6"],["type","text","type","number","min","1","placeholder","Trang s\u1ed1",1,"form-control","text-center",2,"border","none","line-height","0.25rem","border-radius","0",3,"id","max","value","keyup.enter","change"],["myInput",""],["points","9 18 15 12 9 6"],["class","tooltip w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-danger right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],[1,"tooltip","w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-danger","right-0","top-0","-mr-2","-mt-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","x","data-lucide","x",1,"lucide","lucide-x","w-4","h-4"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["class","alert alert-danger text-center mt-2 mb-2 ml-5 mr-5",4,"ngIf"],["_target","blank",1,"image-fit","h-64",3,"click"],["alt","Midone - HTML Admin Template",1,"rounded-md","w-fit",2,"border-bottom-left-radius","0","border-bottom-right-radius","0",3,"src"],["disabled","",1,"btn-sm","btn","btn-secondary",2,"border-radius","0","border","none"],["type","text","type","number","min","1","disabled","","placeholder","Trang s\u1ed1",1,"form-control","text-center",2,"border","none","line-height","0.25rem","border-radius","0",3,"id","max","value"],[1,"alert","alert-danger","text-center","mt-2","mb-2","ml-5","mr-5"],[1,"btn","w-24","btn-primary",3,"disabled","click"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"btn","w-24","btn-danger",3,"disabled","click"],[1,"w-full","mt-3","xl:mt-0","flex-1","border-2","dark:border-darkmode-400","rounded-md","pt-4"],[1,"flex"],[1,"text-md","ml-3","font-medium","text-dark"],["class","grid grid-cols-10 gap-5 pl-4 pr-5 mt-3",4,"ngIf"],["class","alert alert-danger p-3 mt-3 mb-3",4,"ngIf"],[3,"ngIf"],[1,"grid","grid-cols-10","gap-5","pl-4","pr-5","mt-3"],[1,"alert","alert-danger","p-3","mt-3","mb-3"],[1,"flex","mt-3"],[2,"color","rgba(0, 167, 208, 1)","cursor","pointer",3,"click"],[1,"grid","grid-cols-4","gap-3","mt-3",2,"margin","16px!important"],[1,"col-span-1","md:col-span-1","relative","text-center","border-2","border-dashed","dark:border-darkmode-400","p-8","content-homework"],["class","mb-0",4,"ngIf"],[1,"col-span-3","md:col-start-2","md:col-end-4","relative","border-2","border-dashed","dark:border-darkmode-400","p-3"],[1,"text-md","ml-3","font-medium","text-dark","title"],["fontText",""],[1,"mb-0"],[3,"mark"],["class","content-homework pt-3 text-writing",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-bold",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-beautiful",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-italy",3,"innerHTML",4,"ngIf"],[1,"content-homework","pt-3","text-writing",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-bold",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-beautiful",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-italy",3,"innerHTML"]],template:function(e,o){1&e&&(t.TgZ(0,"student-layout",0)(1,"div",1)(2,"div",2),t.YNc(3,oe,6,4,"div",3),t.YNc(4,se,4,4,"div",4),t.YNc(5,re,1,1,"app-message-dialog",5),t.YNc(6,Ve,4,2,"ng-container",3),t.qZA()()()),2&e&&(t.Q6J("headerBackTolink",o.backToLink),t.xp6(3),t.Q6J("ngIf",""!=o.statusObj.errorMessage),t.xp6(1),t.Q6J("ngIf",o.selectChild),t.xp6(1),t.Q6J("ngIf",o.messageDialogData.isShow),t.xp6(1),t.Q6J("ngIf",o.normalFlow))},dependencies:[P.sg,P.O5,P.PC,Pt.gM,It.p,Ut.x,ct.B,Dt.o,qt.L,zt,ee,P.uU,H.bT,H.GT,H.QA,H.Ev,H.BI],styles:["@font-face{font-family:font_chu_dep;src:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/fonts/HP0015HB.ttf)}@font-face{font-family:font_chu_in;src:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/fonts/Roboto-Thin.ttf)}@font-face{font-family:font_chu_in_nghieng;src:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/fonts/MyriadPro-It.otf)}@font-face{font-family:font_chu_in_dam;src:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/fonts/MyriadPro-BoldIt.otf)}.text-writing[_ngcontent-%COMP%]{font-family:font_chu_in!important;font-weight:700}.text-writing-beautiful[_ngcontent-%COMP%]{font-family:font_chu_dep!important}.text-writing-italy[_ngcontent-%COMP%]{font-family:font_chu_in_nghieng!important}.text-writing-bold[_ngcontent-%COMP%]{font-family:font_chu_in_dam!important}.content-homework[_ngcontent-%COMP%]{color:red;line-height:1.4;font-size:20px}.title[_ngcontent-%COMP%]{position:absolute;top:-11px;background:#fff}"]}),n})();var Xe=_(41752),tn=_(69287),V=_(92181),en=_(91350);function nn(n,r){if(1&n&&(t.TgZ(0,"h4",12),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",null==e.result||null==e.result.studentObj?null:e.result.studentObj.fullName,", ",null==e.result||null==e.result.classroomObj?null:e.result.classroomObj.name," ")}}function on(n,r){1&n&&t._UZ(0,"azt-loading-effect")}function sn(n,r){if(1&n&&(t.TgZ(0,"div",16)(1,"div",17),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,1,e.errorMessage))}}function rn(n,r){if(1&n&&(t.TgZ(0,"div",18),t._UZ(1,"iframe",19),t.ALo(2,"safe"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("src",t.lcZ(2,1,e.iframeSrc),t.uOi)}}function an(n,r){if(1&n&&(t.TgZ(0,"div")(1,"div",13),t.YNc(2,sn,4,3,"div",14),t.qZA()(),t.YNc(3,rn,3,3,"div",15)),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",""!=e.errorMessage),t.xp6(1),t.Q6J("ngIf",""==e.errorMessage)}}let gt=(()=>{class n extends D.Q{constructor(e,o,i,s,a,d,c){super(s),this.activeRoute=e,this.frontAnswerService=o,this.frontAnswerHistoryService=i,this.commonService=s,this.cdnService=a,this.zipdataService=d,this.envService=c,this.homeworkHashId="",this.isMarked=!1,this.jsonData={},this.iframeSrc="",this.backToLink="",this.files=[],this.handleIframe=h=>{var p,f,j,O,y,Z,l,v,w,m,u,b,F,S,L;if("MNoteLoadComplete"==h.data){const z=document.getElementById("mNote"),q=z?z.contentWindow:null;if(null!==q){let T=null!==(p=this.result)&&void 0!==p&&p.hasOwnProperty("answerObj")&&null!==(f=this.castObj(this.result.answerObj))&&void 0!==f?f:{};if(null!==(j=this.result)&&void 0!==j&&j.hasOwnProperty("answerObj")){let g=this.commonService.willDeleteParseJson(null!==(O=null==T?void 0:T.result)&&void 0!==O?O:"");if(null!=g){for(let x=0;x<g.pages.length;x++)g.pages[x].backgroundImage&&(g.pages[x].backgroundImage=this.cdnService.getMyCdn(g.pages[x].backgroundImage)),g.pages[x].draw&&(g.pages[x].draw=this.cdnService.getMyCdn(g.pages[x].draw));g=JSON.stringify(g),T.result=g}let C=this.commonService.willDeleteParseJson(null!==(y=T.files)&&void 0!==y?y:"");if(null!=C){for(let x=0;x<C.length;x++)C[x].url&&(C[x].url=this.cdnService.getMyCdn(C[x].url)),C[x].thumb&&(C[x].thumb=this.cdnService.getMyCdn(C[x].thumb));C=JSON.stringify(C),T.files=C}}let E=null!==(Z=this.result)&&void 0!==Z&&Z.hasOwnProperty("studentObj")?this.result.studentObj:{},R=null!==(l=this.result)&&void 0!==l&&l.hasOwnProperty("classroomObj")?this.result.classroomObj:{},$=null!==(v=this.result)&&void 0!==v&&v.hasOwnProperty("homeworkObj")?this.result.homeworkObj:{},J=this.commonService.willDeleteParseJson(null!==(w=T.result)&&void 0!==w?w:""),G=!(!J||!J.hasOwnProperty("hideMark"))&&J.hideMark;if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let g=0;g<(null!==(u=null===(m=this.jsonData.pages)||void 0===m?void 0:m.length)&&void 0!==u?u:0);g++)!(null===(b=this.jsonData.pages)||void 0===b)&&b[g].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[g].backgroundImage=this.cdnService.getMyCdn(null!==(F=this.jsonData.pages[g].backgroundImage)&&void 0!==F?F:"")),null!==(S=this.jsonData.pages)&&void 0!==S&&S[g].hasOwnProperty("draw")&&(this.jsonData.pages[g].draw=this.cdnService.getMyCdn(null!==(L=this.jsonData.pages[g].draw)&&void 0!==L?L:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=T,this.jsonData.student_obj=E,this.jsonData.classroom_obj=R,this.jsonData.homework_obj=$,this.jsonData.hideMark=G,q.postMessage(this.jsonData,"*");else{let g=[];this.files.forEach(C=>{g.push({backgroundImage:C.url})}),q.postMessage({cmd:"initMNote",pages:g,answer_obj:T,student_obj:E,classroom_obj:R,homework_obj:$,mode:"view",hideMark:G},"*")}}}}}goBack(){this.commonService.myNavigation(""!=this.backToLink&&null!=this.backToLink?this.backToLink:"/bai-tap/"+this.homeworkHashId)}fillData(e){var o,i,s,a,d,c,h,p,f,j,O,y;if(e){if(this.zipdataService.convertSubmittedAnswersHistoryObj(null===(o=e.data)||void 0===o?void 0:o.answerObj),this.result=e.data,this.files=null!==(d=this.commonService.myParseJson(null!==(a=null===(s=null===(i=e.data)||void 0===i?void 0:i.answerObj)||void 0===s?void 0:s.files)&&void 0!==a?a:""))&&void 0!==d?d:[],null!==this.files)for(let l=0;l<this.files.length;l++)this.files&&(this.files[l].url=this.cdnService.getMyCdn(null!==(c=this.files[l].url)&&void 0!==c?c:""),this.files[l].thumb=this.cdnService.getMyCdn(null!==(h=this.files[l].thumb)&&void 0!==h?h:""));if(null!==(f=null===(p=e.data)||void 0===p?void 0:p.answerObj)&&void 0!==f&&f.confirmedAt){this.isMarked=!0;var Z=this.commonService.myParseJson(this.cdnService.getMyCdn(null!==(y=null===(O=null===(j=null==e?void 0:e.data)||void 0===j?void 0:j.answerObj)||void 0===O?void 0:O.result)&&void 0!==y?y:""));Z&&(this.jsonData=Z,null===this.jsonData&&(this.isMarked=!1))}}}getData(e,o){this.initStatusObj(),this.errorMessage="",o?this.frontAnswerHistoryService.apiFrontAnswerHistoryGetObjGet(this.homeworkHashId,o).subscribe(i=>{var s;1==i.success?(this.fillData(i),this.successStatusObj()):(this.errorStatusObj(null!==(s=i.message)&&void 0!==s?s:"",!0),this.errorMessage=null==i?void 0:i.message)}):this.frontAnswerService.apiFrontAnswerGetObjGet(this.homeworkHashId,e).subscribe(i=>{var s;1==i.success?(this.fillData(i),this.successStatusObj()):(this.errorStatusObj(null!==(s=i.message)&&void 0!==s?s:"",!0),this.errorMessage=i.message)})}copyLinkToClipboard(){const e=this.getMyParam(this.activeRoute,"id");return`${this.commonService.getCurrentDomainWithLanguage()}/admin/homework/mark-exercise/${e}/${this.homeworkHashId}`}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p th\xe0nh c\xf4ng","")}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnInit(){var e,o,i,s,a;this.iframeSrc=null!==(e=this.envService.getEnvValue("classliveUrl"))&&void 0!==e?e:"";let d=null!==(o=this.commonService.getMyParam(this.activeRoute,"id"))&&void 0!==o?o:"";const c=parseInt(d,10);if(this.homeworkHashId=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:"",this.backToLink=null!==(s=this.commonService.getMyQueryParam("backto"))&&void 0!==s?s:"",this.commonService.getMyParam(this.activeRoute,"history_id")){let h=null!==(a=this.commonService.getMyParam(this.activeRoute,"history_id"))&&void 0!==a?a:"";const p=parseInt(h,10);this.getData(c,p)}else this.getData(c);this.commonService.translateMetaData({title:"lang_cms_student_view_excercise_title",description:"lang_cms_student_view_excercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(I.gz),t.Y36(Y.XL),t.Y36(Y.ln),t.Y36(Q.v),t.Y36(ut.U),t.Y36(dt.n),t.Y36(Xe.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-exercise"]],features:[t.qOj],decls:20,vars:11,consts:[["id","markContainer",1,"maxW1000","pt-3"],[1,"row","titleRow"],[1,"col","center-row"],["mat-button","",3,"title","click"],[1,"col","center-row",2,"justify-content","center"],["class","studentInfo","style","padding-right: 10px;",4,"ngIf"],[1,"col","center-row",2,"justify-content","flex-end"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"cdkCopyToClipboard","click"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"studentInfo",2,"padding-right","10px"],[1,"row","justify-content-center","py-5"],["class","col-12 text-center",4,"ngIf"],["class","card-box listPhotos","style","overflow : hidden",4,"ngIf"],[1,"col-12","text-center"],[1,"alert","alert-danger"],[1,"card-box","listPhotos",2,"overflow","hidden"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),t.NdJ("click",function(){return o.goBack()}),t.ALo(4,"mytranslate"),t._uU(5,"keyboard_arrow_left"),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,nn,2,2,"h4",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7)(10,"mat-icon"),t._uU(11,"more_vert"),t.qZA()(),t.TgZ(12,"mat-menu",null,8)(14,"button",9),t.NdJ("click",function(){return o.showCopySuccess()}),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()()()(),t.YNc(17,on,1,0,"azt-loading-effect",10),t.YNc(18,an,4,2,"ng-template",null,11,t.W1O),t.qZA()),2&e){const i=t.MAs(13),s=t.MAs(19);t.xp6(3),t.s9C("title",t.lcZ(4,7,"lang_auto_quay_lai")),t.xp6(4),t.Q6J("ngIf",null==o.result?null:o.result.answerObj),t.xp6(2),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("cdkCopyToClipboard",o.copyLinkToClipboard()),t.xp6(1),t.Oqu(t.lcZ(16,9,"lang_homework_homework_frontend_utils_copy_send_teacher")),t.xp6(2),t.Q6J("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[P.O5,tn.i3,mt.lW,ht.Hw,V.VK,V.OP,V.p6,en.Q,H.bT,H.yl],styles:["#markContainer[_ngcontent-%COMP%]{position:relative}.center-row[_ngcontent-%COMP%]{display:flex;align-items:center}.titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;margin:0;color:#fff}.titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}.titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f2f2f2;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e5e5e5;border-left:0px;border-right:0px;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width: 1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}"]}),n})();const ln=[{path:"",component:yt,canActivate:[Ot.J],children:[{path:":hash_id",component:We},{path:"view-homework/:id/:hash_id",component:gt},{path:"view-homework/:id/:hash_id/:history_id",component:gt}]}];let _n=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[I.Bz.forChild(ln),I.Bz,jt.fQ]}),n})(),dn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[I.Bz,P.ez,xt.j,pt.Z_,M.u5,M.UX,N.Is,wt.Z,ft.xC,_n,vt.QG,bt.W,kt.t]}),n})()}}]);