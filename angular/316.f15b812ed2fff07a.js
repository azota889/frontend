"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[316],{1643:(K,N,g)=>{g.d(N,{p:()=>O});var t=g(55330),e=g(5e3),Z=g(63382),R=g(35018),B=g(69808),C=g(1033);function A(o,x){if(1&o&&(e.TgZ(0,"h3",5),e._uU(1),e.qZA()),2&o){const i=e.oxw(3);e.xp6(1),e.Oqu(i.title)}}const y=function(o){return{"rotated-img":o}},I=function(o,x,i,c){return{"width.px":o,"height.px":x,"aspect-ratio":i,transform:c}};function _(o,x){if(1&o&&(e._UZ(0,"img",9),e.ALo(1,"mycdn")),2&o){const i=e.oxw(2).$implicit,c=e.oxw(2);e.s9C("src",e.lcZ(1,4,i.backgroundImage),e.LSH),e.Q6J("ngClass",e.VKq(6,y,c.isRightRotation(i.rotation||0)))("ngStyle",e.l5B(8,I,(i.width||0)<(i.height||0)?"auto":c.isRightRotation(i.rotation||0)?i.height:i.width,(i.width||0)>(i.height||0)?"auto":c.isRightRotation(i.rotation||0)?i.width:i.height,(i.width||0)/(i.height||1),"rotate("+i.rotation+"deg)")),e.uIk("data-ratio",(i.width||0)/(i.height||1))}}function s(o,x){1&o&&(e.TgZ(0,"div",10),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dinh_dang_file_khong_ho_tro_xuat_ra_pdf_he_thong_chi_xuat_duoc_file_pdf_doi_voi_file_tai_len_dang_anh_va_pdf")))}function a(o,x){if(1&o&&(e._UZ(0,"img",11),e.ALo(1,"mycdn")),2&o){const i=e.oxw(2).$implicit;e.s9C("src",e.lcZ(1,1,i.draw),e.LSH)}}function d(o,x){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const i=e.oxw(6);e.xp6(1),e.hij(" ",null==i.result.staticTextConfigParse?null:i.result.staticTextConfigParse.textCorrect," ")}}function p(o,x){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const i=e.oxw(6);e.xp6(1),e.hij(" ",null==i.result.staticTextConfigParse?null:i.result.staticTextConfigParse.textWrong," ")}}function m(o,x){if(1&o&&e._UZ(0,"img",14),2&o){const i=e.oxw(6);e.s9C("src","assets/images/classlive/"+(null==i.result.staticTextConfigParse?null:i.result.staticTextConfigParse.urlImgCorrect),e.LSH)}}function h(o,x){if(1&o&&e._UZ(0,"img",14),2&o){const i=e.oxw(6);e.s9C("src","assets/images/classlive/"+(null==i.result.staticTextConfigParse?null:i.result.staticTextConfigParse.urlImgWrong),e.LSH)}}const v=function(o,x,i,c,b){return{"font-family":o,color:x,"font-size":i,position:"absolute","z-index":2,"top.px":c,"left.px":b}};function S(o,x){if(1&o&&(e.ynx(0),e.TgZ(1,"span",12),e.YNc(2,d,2,1,"ng-container",0),e.YNc(3,p,2,1,"ng-container",0),e.YNc(4,m,1,1,"img",13),e.YNc(5,h,1,1,"img",13),e.qZA(),e.BQk()),2&o){const i=x.$implicit,c=e.oxw(5);e.xp6(1),e.Q6J("ngStyle",e.qbA(5,v,null==c.result.staticTextConfigParse?null:c.result.staticTextConfigParse.fontText,null==c.result.staticTextConfigParse?null:c.result.staticTextConfigParse.fontColor,(null==c.result.staticTextConfigParse?null:c.result.staticTextConfigParse.fontSize)+"px",i.y,i.x)),e.xp6(1),e.Q6J("ngIf",(null==c.result.staticTextConfigParse?null:c.result.staticTextConfigParse.useCorrectText)&&"correct"==i.value),e.xp6(1),e.Q6J("ngIf",(null==c.result.staticTextConfigParse?null:c.result.staticTextConfigParse.useCorrectText)&&"wrong"==i.value),e.xp6(1),e.Q6J("ngIf",!(null!=c.result.staticTextConfigParse&&c.result.staticTextConfigParse.useCorrectText)&&"correct"==i.value),e.xp6(1),e.Q6J("ngIf",!(null!=c.result.staticTextConfigParse&&c.result.staticTextConfigParse.useWrongText)&&"wrong"==i.value)}}function M(o,x){if(1&o&&e.YNc(0,S,6,11,"ng-container",1),2&o){const i=e.oxw(2).$implicit;e.Q6J("ngForOf",i.staticText)}}const n=function(o,x,i,c,b,L){return{"font-family":o,color:x,"font-size":i,display:"block","line-height":1.5,position:"absolute",letterSpacing:"3px",fontWeight:"bold","z-index":3,"text-align":c,"top.px":b,"left.px":L}};function r(o,x){if(1&o&&(e.ynx(0),e._UZ(1,"span",15),e.ALo(2,"formatNoteBreak"),e.BQk()),2&o){const i=x.$implicit;e.xp6(1),e.Q6J("ngStyle",e.HTZ(4,n,i.textStyle.font,i.textStyle.color,i.textStyle.size+"px",i.textStyle.align,i.y,i.x))("innerHtml",e.lcZ(2,2,i.value),e.oJD)}}function f(o,x){if(1&o&&e.YNc(0,r,3,11,"ng-container",1),2&o){const i=e.oxw(2).$implicit;e.Q6J("ngForOf",i.objText)}}function T(o,x){if(1&o&&(e.YNc(0,_,2,13,"img",6),e.ALo(1,"isImageExtension"),e.YNc(2,s,3,3,"ng-template",null,7,e.W1O),e.YNc(4,a,2,3,"img",8),e.YNc(5,M,1,1,"ng-template",4),e.YNc(6,f,1,1,"ng-template",4)),2&o){const i=e.MAs(3),c=e.oxw().$implicit;e.Q6J("ngIf",e.lcZ(1,5,(null==c?null:c.backgroundImage)||""))("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",c.draw),e.xp6(1),e.Q6J("ngIf",c.staticText&&c.staticText.length>0),e.xp6(1),e.Q6J("ngIf",c.objText&&c.objText.length>0)}}const P=function(o,x){return{position:"relative","width.px":o,"height.px":x,display:"flex","justify-content":"center","align-items":"center",margin:"0 auto"}};function E(o,x){if(1&o&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,A,2,1,"h3",2),e.TgZ(3,"div",3),e.YNc(4,T,7,7,"ng-template",4),e.qZA()(),e.BQk()),2&o){const i=x.$implicit,c=x.first,b=e.oxw(2);e.xp6(1),e.Tol("mb-2 essayPdfImage "+b.blockItemCropClass+" "+b.blockItemEssayCropClass),e.xp6(1),e.Q6J("ngIf",c),e.xp6(1),e.Q6J("ngStyle",e.WLB(6,P,i.width,i.height)),e.xp6(1),e.Q6J("ngIf",null==i?null:i.backgroundImage)}}function w(o,x){if(1&o&&(e.ynx(0),e.YNc(1,E,5,9,"ng-container",1),e.BQk()),2&o){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.result.pages)}}let O=(()=>{class o extends t.Q{constructor(i,c){super(c),this.iframeService=i,this.commonService=c,this.title="\u1ea2nh b\xe0i l\xe0m t\u1ef1 lu\u1eadn",this.result={}}isRightRotation(i){return 1==Math.abs(i/90%2)}ngOnInit(){this.result.staticTextConfig&&(this.result.staticTextConfigParse=this.commonService.myParseJson(this.result.staticTextConfig)),super.ngOnInit()}ngOnChanges(){this.result.staticTextConfig&&(this.result.staticTextConfigParse=this.commonService.myParseJson(this.result.staticTextConfig))}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(Z.X),e.Y36(R.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["azt-export-essay-template"]],inputs:{title:"title",blockItemEssayCropClass:"blockItemEssayCropClass",blockItemCropClass:"blockItemCropClass",result:"result"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["id","essayPdfTitle","class","text-center",4,"ngIf"],[3,"ngStyle"],[3,"ngIf"],["id","essayPdfTitle",1,"text-center"],["class","user-img img_respon","alt","",3,"ngClass","ngStyle","src",4,"ngIf","ngIfElse"],["noSupportExtension",""],["style","position: absolute; z-index: 1; top: 0; left: 0","class","user-img img_respon","alt","",3,"src",4,"ngIf"],["alt","",1,"user-img","img_respon",3,"ngClass","ngStyle","src"],[1,"p-2","text-center",2,"border","2px solid red"],["alt","",1,"user-img","img_respon",2,"position","absolute","z-index","1","top","0","left","0",3,"src"],[2,"min-height","50px","min-width","50px","font-weight","bold","display","flex","line-height","1.5","font-weight","bold","align-items","center","justify-content","center","text-shadow","rgb(130 126 126) 1px 1px 1px",3,"ngStyle"],["width","30","height","30","class","","alt","",3,"src",4,"ngIf"],["width","30","height","30","alt","",1,"",3,"src"],[3,"ngStyle","innerHtml"]],template:function(i,c){1&i&&e.YNc(0,w,2,1,"ng-container",0),2&i&&e.Q6J("ngIf",c.result)},dependencies:[B.mk,B.sg,B.O5,B.PC,C.bT,C.GT,C.AL,C.kJ],encapsulation:2}),o})()},83467:(K,N,g)=>{g.d(N,{O:()=>J});var t=g(5e3),e=g(55330),Z=g(35018),R=g(72491),B=g(74202),C=g(69808),A=g(69287),y=g(25245),I=g(44841),_=g(64123),s=g(37104),a=g(1033);function d(l,k){if(1&l){const u=t.EpF();t.TgZ(0,"div")(1,"div",4)(2,"p",5),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"p",6),t._uU(6),t.ALo(7,"mytranslate"),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"a",7),t.NdJ("click",function(){t.CHM(u);const F=t.oxw();return t.KtG(F.showCopySuccess())}),t.TgZ(11,"mat-icon",8),t._uU(12,"share"),t.qZA(),t.TgZ(13,"span",8),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()()}if(2&l){const u=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_auto_chua_co_du_lieu_nop_bai")),t.xp6(3),t.lnq("",t.lcZ(7,8,"lang_auto_neu_chua_gui_link_nop_bai_cho_hoc_sinh_vui_long_bam"),' "',t.lcZ(8,10,"lang_auto_copy_link_bai_tap"),'" ',t.lcZ(9,12,"lang_auto_ben_duoi_va_gui_cho_hoc_sinh_de_nop_bai"),""),t.xp6(4),t.Q6J("cdkCopyToClipboard",u.copyLinkHomeWorkToClipboard()),t.xp6(4),t.hij("\xa0",t.lcZ(15,14,"lang_auto_copy_link_bai_tap"),"")}}function p(l,k){1&l&&(t.TgZ(0,"p",29),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_cham")," "))}function m(l,k){1&l&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_nop")," "))}function h(l,k){1&l&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai")," "))}function v(l,k){if(1&l&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._UZ(4,"azt-check-mark",32),t.qZA()()),2&l){const u=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_diem"),": "),t.xp6(3),t.Q6J("mark",u.point)}}function S(l,k){if(1&l&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&l){const u=t.oxw(2).$implicit,D=t.oxw(2);t.xp6(1),t.AsE(" ",D.calculationTime(u.createdAt)," ",t.lcZ(2,2,"lang_auto_truoc")," ")}}function M(l,k){if(1&l&&(t.TgZ(0,"div",23)(1,"p",33),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",33),t._uU(5),t.qZA()()),2&l){const u=t.oxw(2).$implicit;let D;t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_so_tep_tin_da_nop"),": "),t.xp6(3),t.hij(" ",null!==(D=null==u.answerFileObjs?null:u.answerFileObjs.length)&&void 0!==D?D:0," ")}}const n=function(l){return[l]},r=function(l){return{backto:l}},f=function(l){return{disableClick:l}};function T(l,k){if(1&l&&(t.TgZ(0,"div")(1,"a",15),t.ALo(2,"mylocalize"),t.TgZ(3,"div",16)(4,"div",17)(5,"span",18),t._UZ(6,"azt-create-avatar",19),t.qZA(),t.TgZ(7,"div",20)(8,"div",21)(9,"span",8)(10,"span",22),t._uU(11),t.qZA()()(),t.TgZ(12,"div",23),t.YNc(13,p,3,3,"p",24),t.YNc(14,m,3,3,"p",25),t.YNc(15,h,3,3,"p",25),t.YNc(16,v,5,4,"p",26),t.YNc(17,S,3,4,"p",27),t.qZA(),t.YNc(18,M,6,4,"div",28),t.qZA()()()()()),2&l){const u=t.oxw().$implicit,D=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(15,n,t.lcZ(2,13,"/admin/homework/mark-exercise/"+u.answer.id+"/"+D.obj.hashId)))("queryParams",t.VKq(17,r,D.backToLink)),t.xp6(2),t.Q6J("ngClass",t.VKq(19,f,u.isNotSubmit||u.mustReSubmit)),t.xp6(3),t.Q6J("linkAvatar",u.avatar)("nameCreateAvatar",u.fullName)("size",30),t.xp6(5),t.Oqu(u.fullName),t.xp6(2),t.Q6J("ngIf",u.isSubmitted),t.xp6(1),t.Q6J("ngIf",u.isNotSubmit),t.xp6(1),t.Q6J("ngIf",u.mustReSubmit),t.xp6(1),t.Q6J("ngIf",u.isMarked),t.xp6(1),t.Q6J("ngIf",null!=u.createdAt),t.xp6(1),t.Q6J("ngIf",u.isMarked||u.isSubmitted)}}function P(l,k){1&l&&(t.TgZ(0,"p",29),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_cham")," "))}function E(l,k){1&l&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_nop")," "))}function w(l,k){1&l&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai")," "))}function O(l,k){if(1&l&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.qZA()()),2&l){const u=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_diem"),": "),t.xp6(3),t.Oqu(u.point)}}function o(l,k){if(1&l&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&l){const u=t.oxw(2).$implicit,D=t.oxw(2);t.xp6(1),t.AsE(" ",D.calculationTime(u.createdAt)," ",t.lcZ(2,2,"lang_auto_truoc")," ")}}function x(l,k){1&l&&(t.TgZ(0,"div",23)(1,"p",33),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",33),t._uU(5," 0 "),t.qZA()()),2&l&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_so_tep_tin_da_nop"),": "))}function i(l,k){if(1&l){const u=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"span",18),t._UZ(3,"azt-create-avatar",19),t.qZA(),t.TgZ(4,"div",34),t.NdJ("click",function(){t.CHM(u);const F=t.oxw().$implicit,z=t.oxw(2);return t.KtG(z.goToResultReview(F))}),t.TgZ(5,"div",21)(6,"span",8)(7,"span",22),t._uU(8),t.qZA()()(),t.TgZ(9,"div",23),t.YNc(10,P,3,3,"p",24),t.YNc(11,E,3,3,"p",25),t.YNc(12,w,3,3,"p",25),t.YNc(13,O,5,4,"p",26),t.YNc(14,o,3,4,"p",27),t.qZA(),t.YNc(15,x,6,3,"div",28),t.qZA()()()}if(2&l){const u=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(11,f,u.isNotSubmit||u.mustReSubmit)),t.xp6(3),t.Q6J("linkAvatar",u.avatar)("nameCreateAvatar",u.fullName)("size",30),t.xp6(5),t.Oqu(u.fullName),t.xp6(2),t.Q6J("ngIf",u.isSubmitted),t.xp6(1),t.Q6J("ngIf",u.isNotSubmit),t.xp6(1),t.Q6J("ngIf",u.mustReSubmit),t.xp6(1),t.Q6J("ngIf",u.isMarked),t.xp6(1),t.Q6J("ngIf",null!=u.createdAt),t.xp6(1),t.Q6J("ngIf",u.isMarked||u.isSubmitted)}}const c=function(l){return{"col-lg-4":l}};function b(l,k){if(1&l&&(t.TgZ(0,"div",12),t.YNc(1,T,19,21,"div",13),t.YNc(2,i,16,13,"ng-template",null,14,t.W1O),t.qZA()),2&l){const u=k.$implicit,D=t.MAs(3),F=t.oxw(2);t.Q6J("ngClass",t.VKq(3,c,F.isOpenSideNav)),t.xp6(1),t.Q6J("ngIf",u.answer)("ngIfElse",D)}}function L(l,k){if(1&l&&(t.TgZ(0,"div",9)(1,"div",10),t.YNc(2,b,4,5,"div",11),t.qZA()()),2&l){const u=t.oxw();t.xp6(2),t.Q6J("ngForOf",u.studentLists)}}const U=function(l){return{suppressScrollX:!0,suppressScrollY:l}};let J=(()=>{class l extends e.Q{constructor(u,D){super(u),this.commonService=u,this.timeService=D,this.isSortByTime=!1,this.backToLink="",this.searchKey="",this.studentLists=[],this.isNotTestedYet=!1,this.isOpenSideNav=!0,this.obj={},this.goToResult=new t.vpe}goToResultReview(u){u.isNotSubmit||u.mustReSubmit||this.goToResult.emit(u)}copyLinkHomeWorkToClipboard(){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p th\xe0nh c\xf4ng","")}calculationTime(u,D){return this.timeService.calculationTime(u,D)}}return l.\u0275fac=function(u){return new(u||l)(t.Y36(Z.v),t.Y36(R.O))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-student-homework-result"]],inputs:{isSortByTime:"isSortByTime",backToLink:"backToLink",searchKey:"searchKey",studentLists:"studentLists",isNotTestedYet:"isNotTestedYet",isOpenSideNav:"isOpenSideNav",obj:"obj"},outputs:{goToResult:"goToResult"},features:[t.qOj],decls:5,vars:8,consts:[[1,"box-content","py-2","scrollable-content"],[3,"config","scrollIndicators"],[4,"ngIf"],["class","pt-0 pb-2 px-3 ",4,"ngIf"],[1,"text-center","mt-5"],[1,"h5",2,"color","#333333","font-size","18px!important"],[1,"mt-2","ml-auto","mr-auto","w-60",2,"color","#333333"],[1,"clickable","mt-2","link__color","link__hover",2,"user-select","none",3,"cdkCopyToClipboard","click"],[2,"vertical-align","middle"],[1,"pt-0","pb-2","px-3"],[1,"row","ml-0","mr-0","pl-0","pr-0","mt-2"],["class","col-12 col-sm-12 col-md-4 col-lg-3 mb-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-2",3,"ngClass"],[4,"ngIf","ngIfElse"],["answerIdNull",""],[3,"routerLink","queryParams"],[1,"box-item",3,"ngClass"],[1,"student-item"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"stdinfo"],[1,"stdinfo-fullname"],[2,"vertical-align","middle","color","#333333","font-weight","400","font-size","15px","word-break","break-word"],[1,"d-flex","justify-content-between"],["style","color: #F39C12; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","color: #9F0000; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px; color: #9C9C9C",4,"ngIf"],["class","d-flex justify-content-between",4,"ngIf"],[2,"color","#F39C12","font-size","13px","margin-bottom","2px"],[2,"color","#9F0000","font-size","13px","margin-bottom","2px"],[2,"font-size","13px","margin-bottom","2px"],[3,"mark"],[2,"font-size","13px","margin-bottom","2px","color","#9C9C9C"],[1,"stdinfo",3,"click"]],template:function(u,D){1&u&&(t.TgZ(0,"div",0)(1,"perfect-scrollbar",1),t.ALo(2,"customScrollConfig"),t.YNc(3,d,16,16,"div",2),t.YNc(4,L,3,1,"div",3),t.qZA()()),2&u&&(t.xp6(1),t.Q6J("config",t.VKq(6,U,t.lcZ(2,4,"")))("scrollIndicators",!0),t.xp6(2),t.Q6J("ngIf",D.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",!D.isNotTestedYet))},dependencies:[B.yS,C.mk,C.sg,C.O5,A.i3,y.Hw,I.Vv,_.t,s.B,a.mp,a.bT,a.SJ],styles:[".box-content[_ngcontent-%COMP%]{background:inherit;background-color:#f9f9f9;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e9e9e9;border-radius:5px;box-shadow:none}a[_ngcontent-%COMP%]{color:#000}.disableClick[_ngcontent-%COMP%]{cursor:default!important}.scrollable-content[_ngcontent-%COMP%]{height:calc(100vh - 166px);overflow:hidden}.box-item[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px;cursor:pointer;position:relative}.badge-testing[_ngcontent-%COMP%]{position:absolute;top:0;right:6px;border-radius:4px;padding:0 3px}.student-item[_ngcontent-%COMP%]{display:flex;position:relative}.student-item[_ngcontent-%COMP%]   .enterClsWrap[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .deleteBtn[_ngcontent-%COMP%]{display:flex}.link-stu[_ngcontent-%COMP%]{display:flex;align-items:center}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.stdimg[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:10px}.stdinfo[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto}.menu-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#828282}.create-avatar[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;margin-top:2px;border-radius:50%;width:30px;text-transform:uppercase;height:30px;background:#ddd;text-align:center;padding-top:5px}.link__color[_ngcontent-%COMP%]{color:#2262ae!important}.link__hover[_ngcontent-%COMP%]:hover{color:#0a8f9e!important}@media screen and (max-width: 750px){.scrollable-content[_ngcontent-%COMP%]{min-height:calc(100vh - 170px);height:auto;overflow-y:inherit}.tested_list_container[_ngcontent-%COMP%]{height:auto}}"]}),l})()},10731:(K,N,g)=>{g.d(N,{x:()=>t});class t{constructor(){this.answerConfigParse=[],this.questionContentParse=[],this.answerLabelsMockup={}}}},296:(K,N,g)=>{g.d(N,{S:()=>y});var t=g(70655),e=g(10731),Z=g(5e3),R=g(35018),B=g(15043),C=g(90893),A=g(20814);let y=(()=>{class I{constructor(s,a,d,p){this.commonService=s,this.cdnService=a,this.customQuestionAnswerConfig=d,this.exportPdfUtilsService=p}processEssayResultToBase64(s){var a,d,p,m,h;return(0,t.mG)(this,void 0,void 0,function*(){for(const v of null!==(a=s.pages)&&void 0!==a?a:[]){if(v.draw){this.cdnService.isViettelCDN(null!==(p=null===(d=s.pages)||void 0===d?void 0:d[0].backgroundImage)&&void 0!==p?p:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500));const S=yield this.exportPdfUtilsService.convertAndRetryToBase64(v.draw);v.draw=S}if(this.cdnService.isViettelCDN(null!==(h=null===(m=s.pages)||void 0===m?void 0:m[0].backgroundImage)&&void 0!==h?h:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500)),v.backgroundImage){const S=yield this.exportPdfUtilsService.convertAndRetryToBase64(v.backgroundImage);v.backgroundImage=S}}if(s.commentEmoji&&s.commentEmoji.length){let v="https://azota889.github.io/storage_public/mnote/",S=s.commentEmoji.length;for(let M=0;M<S;M++){let n=v+s.commentEmoji[M];const r=yield this.exportPdfUtilsService.convertAndRetryToBase64(n);s.commentEmoji[M]=r}}return s})}processGroupImagesToBase64(s,a){var d,p,m;return(0,t.mG)(this,void 0,void 0,function*(){if(s&&(null===(d=null==s?void 0:s[0].name)||void 0===d?void 0:d.startsWith("[PDFv2]")))for(const h of s)if(s[0].questionContentParse&&this.cdnService.isViettelCDN(null!==(p=s[0].questionContentParse[0].groupUrl)&&void 0!==p?p:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500)),h.questionContentParse&&h.questionContentParse[0].groupUrl&&a.includes(null!==(m=h.indexLabel)&&void 0!==m?m:-1)){const v=yield this.exportPdfUtilsService.convertAndRetryToBase64(h.questionContentParse[0].groupUrl);h.questionContentParse[0].groupUrl=v}})}processQuestionImagesToBase64(s){var a,d,p,m;return(0,t.mG)(this,void 0,void 0,function*(){if(1==s[0].isImage)for(const h of s){this.cdnService.isViettelCDN(null!==(d=null===(a=s[0].questionContentParse)||void 0===a?void 0:a[0].url)&&void 0!==d?d:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500));const v=yield this.exportPdfUtilsService.convertAndRetryToBase64(null!==(m=null===(p=h.questionContentParse)||void 0===p?void 0:p[0].url)&&void 0!==m?m:"");h.questionContentParse&&(h.questionContentParse[0].url=v)}})}processQuestionDocxContentToBase64(s){var a,d,p,m;return(0,t.mG)(this,void 0,void 0,function*(){if(0==s[0].isImage)for(const v of s){var h=this.exportPdfUtilsService.findImageSrcInContent(null!==(d=null===(a=v.questionContentParse)||void 0===a?void 0:a[0].content)&&void 0!==d?d:"");if(this.cdnService.isViettelCDN(h)&&(yield this.exportPdfUtilsService.asyncTimeout(500)),h&&!h.includes(";base64")){const S=yield this.exportPdfUtilsService.convertAndRetryToBase64(h);(null===(m=null===(p=v.questionContentParse)||void 0===p?void 0:p[0].content)||void 0===m?void 0:m.includes("img"))&&S&&(v.questionContentParse[0].content=v.questionContentParse[0].content.replace(h,S))}}})}convertAnswersArr(s,a){0!=s.length&&s.forEach(d=>{d.QuestionId&&d.AnswerContent&&d.AnswerContent[0]&&d.AnswerContent[0].Content&&(a[`id_${d.QuestionId}`]=d.AnswerContent[0].Content)})}parseQuestionsFor_PDFv2(s,a){var d,p;let m=this.commonService.castJsonToClassObjs(e.x,JSON.stringify(null===(d=a.data)||void 0===d?void 0:d.questionObjs));s=this.customQuestionAnswerConfig.changeQuestionContent(null!=m?m:[],!0);for(let h=0;h<s.length;h++)s[h].indexLabel=h,s[h].correctAnswer=this.commonService.filterArray(null===(p=a.data)||void 0===p?void 0:p.correctQuestionIds,s[h].id);return s}findScaleDirection(s,a){return s/a>=.7070707070707071?"w":"h"}}return I.\u0275fac=function(s){return new(s||I)(Z.LFG(R.v),Z.LFG(B.U),Z.LFG(C.U),Z.LFG(A.V))},I.\u0275prov=Z.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},16031:(K,N,g)=>{g.d(N,{I:()=>v});var t=g(70655),e=g(4159),R=g(53583),B=g(17489),A=g(5e3),y=g(296),I=g(20814),_=g(88161),s=g(72491);const h={top:60,left:60,right:60,bottom:60};let v=(()=>{class S{constructor(n,r,f,T){this.exportPdfConvertDataService=n,this.exportPdfUtilsService=r,this.answerTypeService=f,this.timeService=T,this.totalDraw=1,this.countDraw=0,this.currentPos=h,this.pdfDoc=new R.jsPDF}get loadPercent(){return Math.floor(this.countDraw/this.totalDraw*100)}getSourceCanvas(n){return(0,t.mG)(this,void 0,void 0,function*(){var r=document.getElementById(n);return yield e(r,{scale:2})})}resetPosition(n){n&&(this.currentPos={left:60,top:60,right:60,bottom:60})}drawHomeworkNoteBoxOfTeacher(n){return(0,t.mG)(this,void 0,void 0,function*(){let r=document.querySelector(".box-point.display .text-mark");if(n){n.font="25px font_chu_dep",n.fillStyle="#000",r&&n.fillText("\u0110i\u1ec3m",90,this.currentPos.top+20),n.fillText("L\u1eddi ph\xea c\u1ee7a gi\xe1o vi\xean",420,this.currentPos.top+20),this.currentPos.top+=30;let f=document.querySelector(".box-msg .note p");if(f){n.lineWidth=2,n.fillStyle="#000",n.fillRect(this.currentPos.left,this.currentPos.top,n.canvas.width-this.currentPos.left-this.currentPos.right,1);const T=this.currentPos.top;let P=window.getComputedStyle(f,null).getPropertyValue("font"),E=window.getComputedStyle(f,null).getPropertyValue("color"),w=parseInt(P.split(" ")[0].split("p")[0],10);n.font=P;let o=this.exportPdfUtilsService.essayText2LinesArr(f.innerHTML,n,n.canvas.width-60-30-(r?200:0),16,P);this.currentPos.top+=35;const x=Math.round(1.5*w),i=this.currentPos.left+(r?200:0)+15;let c=0,b=200;for(let z=0;z<o.length;z++)for(let W=0;W<o[z].length;W++){const Q=o[z][W];n.font=P,n.fillStyle=E,n.fillText(Q,i,this.currentPos.top),this.currentPos.top+=x,c+=x}let L=document.querySelectorAll(".box-emoji> img"),U=this.currentPos.left+(r?100:0)+15,J=this.currentPos.top,l=78,k=78,u=15;L.forEach(z=>{var W;let Q=new Image;Q.src=null!==(W=z.getAttribute("src"))&&void 0!==W?W:"",Q.onload=()=>{U=U+l+u,n.drawImage(Q,U,J,l,k)}});let F=30+k;if(c>b-F&&(b=c+F),n.lineWidth=2,n.fillStyle="#000",n.fillRect(this.currentPos.left,T,1,b),r&&n.fillRect(this.currentPos.left+200,T,1,b),n.fillRect(n.canvas.width-this.currentPos.right,T,1,b),n.fillRect(this.currentPos.left,T+b,n.canvas.width-this.currentPos.right-this.currentPos.left,1),r){let z=r.getBoundingClientRect().width,W=r.getBoundingClientRect().height,Q=window.getComputedStyle(r,null).getPropertyValue("font"),Y=window.getComputedStyle(r,null).getPropertyValue("color");n.font=Q,n.fillStyle=Y,n.fillText(r.textContent?r.textContent:"",this.currentPos.left+100-z/2,T+b/2+W/4)}this.currentPos.top=T+b+20}else{if(n.lineWidth=2,n.rect(this.currentPos.left,this.currentPos.top,n.canvas.width-this.currentPos.left-this.currentPos.right,200),n.stroke(),r&&n.fillRect(this.currentPos.left+200,this.currentPos.top,1,200),r){let T=r.getBoundingClientRect().width,P=r.getBoundingClientRect().height,E=window.getComputedStyle(r,null).getPropertyValue("font"),w=window.getComputedStyle(r,null).getPropertyValue("color");n.font=E,n.fillStyle=w,n.fillText(r.textContent?r.textContent:"",this.currentPos.left+100-T/2,this.currentPos.top+150-P/2)}this.currentPos.top+=220}}})}drawExamTitle(n){if(n){let c=document.querySelector("#mainTitle span"),b=c?window.getComputedStyle(c,null).getPropertyValue("font"):"",L=null==c?void 0:c.getBoundingClientRect().width,U=null==c?void 0:c.getBoundingClientRect().height;var r=null==c?void 0:c.querySelector("img"),f=null==r?void 0:r.getBoundingClientRect().width,T=null==r?void 0:r.getBoundingClientRect().height,P=0;if(c&&c.textContent&&L&&U&&!(r&&f&&T)){var E=(n.canvas.width-L)/2,w=this.currentPos.top+15;n.font=b,n.fillStyle="#000",n.fillText(c.textContent,E,w),P=U+20}else c&&c.textContent&&L&&U&&r&&f&&T&&(E=(n.canvas.width-L)/2,w=this.currentPos.top+20,n.font=b,n.fillStyle="#000",n.fillText(c.textContent,E,w),P=U+40,n.drawImage(r,0,0,f,T,E+(L-f)+5,this.currentPos.top-10,f,T));P>0&&(this.currentPos.top+=P,this.countDraw++)}}drawColLeftRightInHeaderOfExam(n){var r;let f=document.getElementById("colLeftInfo"),T=document.getElementById("colRightInfo"),P=f?f.querySelectorAll("h3"):void 0,E=T?T.querySelectorAll("h3"):void 0,w={top:0,left:0,right:0,bottom:0};if(n){if(n.font="16px Arial",P)for(let O=0;O<P.length;O++){0==O&&(w=B.cloneDeep(this.currentPos));const o=P[O];o.textContent&&(n.fillText(null!==(r=o.textContent)&&void 0!==r?r:"",this.currentPos.left,this.currentPos.top),this.currentPos.top+=o.getBoundingClientRect().height+5)}if(E)for(let O=0;O<E.length;O++){const o=E[O];o.textContent&&(n.fillText(o.textContent,n.canvas.width-this.currentPos.right-o.getBoundingClientRect().width,w.top),w.top+=o.getBoundingClientRect().height+5)}}}drawBlockItemToPageForExam(n,r){return(0,t.mG)(this,void 0,void 0,function*(){if(n){let T=document.querySelectorAll(`.${this.exportPdfUtilsService.blockCropItemClass}`);if(T.length>0){let P=[];for(let E=0;E<T.length;E++)P.push(E);var f=yield this.getSourceCanvas("multipleChoiceWrap");for(const E of P){const w=T[E];let O=w.classList.contains(this.exportPdfUtilsService.blockEssayCropItemClass),o=w.classList.contains("__TXT_ESSAY_PARA"),x=2*w.offsetLeft,i=2*w.offsetTop,c=2*w.getBoundingClientRect().width,b=2*w.getBoundingClientRect().height;const L=n.canvas.width-this.currentPos.left-this.currentPos.right,U=L*b/c;if(U<=n.canvas.height-this.currentPos.bottom-this.currentPos.top&&!O)this.drawSingleBlockItemToCanvas(n,f,L,U,{left:x,top:i,width:c,height:b},o);else if(this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,n.canvas.toDataURL("image/jpeg",1)),this.pdfDoc.addPage(),this.exportPdfUtilsService.eraseCanvas(n),this.resetPosition(r),"h"==this.exportPdfConvertDataService.findScaleDirection(c,b)){const J=n.canvas.height-h.top-h.bottom,l=J*c/b;this.drawSingleBlockItemToCanvas(n,f,L,U,{left:x,top:i,width:c,height:b},o,(n.canvas.width-l)/2,h.top,l,J)}else this.drawSingleBlockItemToCanvas(n,f,L,U,{left:x,top:i,width:c,height:b},o)}this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,n.canvas.toDataURL("image/jpeg",1))}else this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,n.canvas.toDataURL("image/jpeg",1))}})}convertEssayBoxes2Canvas(n,r,f,T){return(0,t.mG)(this,void 0,void 0,function*(){let P=[];for(let E=0;E<n.length;E++)P.push(E);for(const E of P){const w=yield e(n[E]);if(0==E&&r){const x=(r.canvas.width-50-50)*w.height/w.width;T&&x>r.canvas.height-50-this.currentPos.top&&(this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,r.canvas.toDataURL("image/jpeg",1)),this.exportPdfUtilsService.eraseCanvas(r),this.resetPosition(f),this.pdfDoc.addPage()),this.addEssayImage(r,n,w,E)}else this.exportPdfUtilsService.eraseCanvas(r),this.resetPosition(f),this.addEssayImage(r,n,w,E)}})}drawEssayIframeContent(n,r,f){return(0,t.mG)(this,void 0,void 0,function*(){let T=document.querySelectorAll(".essayPdfImage");if(T.length>0&&n){f||(this.exportPdfUtilsService.eraseCanvas(n),this.resetPosition(r),this.pdfDoc.addPage());let P=document.querySelector("#essayPdfTitle span");n&&P&&P.textContent&&(n.font="18px Georgia",n.fillStyle="#333",n.fillText(P.textContent,(n.canvas.width-P.getBoundingClientRect().width)/2,this.currentPos.top+20),this.currentPos.top+=P.getBoundingClientRect().height+20),yield this.convertEssayBoxes2Canvas(T,n,r,f)}})}addEssayImage(n,r,f,T){if(n){if("w"==this.exportPdfConvertDataService.findScaleDirection(f.width,f.height))n.drawImage(f,0,0,f.width,f.height,50,this.currentPos.top+50,n.canvas.width-100,(n.canvas.width-100)*f.height/f.width);else{let P=n.canvas.height-this.currentPos.top-this.currentPos.bottom,E=P*f.width/f.height;n.drawImage(f,0,0,f.width,f.height,(n.canvas.width-E)/2,this.currentPos.top,E,P)}console.log(`[_Essay_image_] V\u1ebd \u1ea3nh t\u1ef1 lu\u1eadn s\u1ed1 ${T+1}`),this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,n.canvas.toDataURL("image/jpeg",1)),this.countDraw++,T!=r.length-1&&this.pdfDoc.addPage()}}drawSingleBlockItemToCanvas(n,r,f,T,P,E,w,O,o,x){E&&this.currentPos.top!=h.top&&(this.currentPos.top-=60),n.drawImage(r,P.left,P.top,P.width,P.height,w||this.currentPos.left,O||this.currentPos.top,o||f,x||T),this.currentPos.top+=T+80,this.countDraw++}examToPdf(n,r){return(0,t.mG)(this,void 0,void 0,function*(){this.countDraw=0,this.totalDraw=document.querySelectorAll(`.${this.exportPdfUtilsService.blockCropItemClass}`).length,this.pdfDoc=new R.jsPDF;let f=document.createElement("canvas"),T=document.getElementById("multipleChoiceWrap");if(T){let w=T.getBoundingClientRect().width;f.width=2*w,f.height=297*w/210*2}let P=f.getContext("2d");return this.exportPdfUtilsService.eraseCanvas(P),T&&this.resetPosition(T),T&&(yield this.drawBlockItemToPageForExam(P,T)),this.countDraw=this.totalDraw,yield this.exportPdfUtilsService.asyncTimeout(1e3),"class"==n?this.pdfDoc.output("blob"):(this.pdfDoc.save(r||"test_result.pdf"),!0)})}homeworkToPdf(){return(0,t.mG)(this,void 0,void 0,function*(){this.pdfDoc=new R.jsPDF;let n=document.createElement("canvas"),r=document.getElementById("multipleChoiceWrap");if(r){let P=r.getBoundingClientRect().width;n.width=P,n.height=297*P/210}let f=n.getContext("2d");return this.exportPdfUtilsService.eraseCanvas(f),r&&this.resetPosition(r),this.drawExamTitle(f),this.drawColLeftRightInHeaderOfExam(f),yield this.drawHomeworkNoteBoxOfTeacher(f),r&&(yield this.drawEssayIframeContent(f,r,!0)),this.pdfDoc.output("blob")})}}return S.\u0275fac=function(n){return new(n||S)(A.LFG(y.S),A.LFG(I.V),A.LFG(_.T),A.LFG(s.O))},S.\u0275prov=A.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},20814:(K,N,g)=>{g.d(N,{V:()=>A});var t=g(70655),e=g(5e3),Z=g(35018),R=g(15043),B=g(88161),C=(()=>{return(y=C||(C={}))[y.Cdn=0]="Cdn",y[y.CdnTimestamp=1]="CdnTimestamp",y[y.Rawlink=2]="Rawlink",y[y.RawlinkTimestamp=3]="RawlinkTimestamp",C;var y})();let A=(()=>{class y{constructor(_,s,a){this.commonService=_,this.cdnService=s,this.answerTypeService=a}get blockCropItemClass(){return"__CANVAS_CROP_ITEM"}get blockEssayCropItemClass(){return"_ESSAY"}isSupportedBrowswer(){var p,d,m;let s=(d=navigator.userAgent,m=d.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(m[1])?"IE "+((p=/\brv[ :]+(\d+)/g.exec(d)||[])[1]||""):"Chrome"===m[1]&&null!=(p=d.match(/\b(OPR|Edge)\/(\d+)/))?p.slice(1).join(" ").replace("OPR","Opera"):(m=m[2]?[m[1],m[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(p=d.match(/version\/(\d+)/i))&&m.splice(1,1,p[1]),m.join(" "))).toString();return!(!["chrome"].includes(s.split(" ")[0].toLowerCase())||parseInt(s.split(" ")[1],10)<80)}getExtensionFile(_){if(!_)return"";var s=_.split(".");return s.length<=1?"":s[s.length-1].toLocaleLowerCase().split("_")[0]}translateMetaTitle(_){var s,a,d,p;let m="Export PDF: ";this.commonService.translateMetaData({title:m+(null===(a=null===(s=_.data)||void 0===s?void 0:s.examObj)||void 0===a?void 0:a.name),description:m+(null===(p=null===(d=_.data)||void 0===d?void 0:d.examObj)||void 0===p?void 0:p.name),image:"lang_cms_test_image"})}findImageSrcInContent(_){var s="";if(_.includes("img")){var a=_.indexOf("img"),d=_.indexOf("src=",a),p=_.indexOf('"',Number(d)+5);s=_.substring(Number(d)+5,Number(p))}return s}asyncTimeout(_){return(0,t.mG)(this,void 0,void 0,function*(){return`Waited ${yield new Promise(a=>{setTimeout(()=>a(_),_)})} miliseconds`})}parseEssayMarkResult(_,s,a){var d;let p=_.filter(v=>this.answerTypeService.isEssayAnswer(v.answerType));if(0!=p.length){if(s&&s.essayResult){var m=this.commonService.willDeleteParseJson(s.essayResult);if(m){var h=Object.entries(m);for(let v=0;v<p.length;v++)p[v].essayMarkParsed=h[v][1]}}for(let v=0;v<p.length;v++){let S=p[v].id,M=a.filter(r=>r.questionId==S)[0],n=this.commonService.willDeleteParseJson(null!==(d=M.config)&&void 0!==d?d:"");p[v].scorePerQuestion=n?Number(n.ScorePerQuestion):0}}}convertToBase64(_,s){return(0,t.mG)(this,void 0,void 0,function*(){let a=_;switch(s){case C.Cdn:a=this.cdnService.getMyCdn(_);break;case C.CdnTimestamp:a=this.cdnService.getMyCdn(_)+"?t="+Date.now();break;case C.RawlinkTimestamp:a=_+"?t="+Date.now()}const p=yield(yield fetch(a)).blob(),m=yield new Promise(h=>{const v=new FileReader;v.readAsDataURL(p),v.onloadend=()=>{h(v.result)}});return m&&"string"==typeof m?m:(console.log("kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh chu\u1ed7i base64: "+_),_)})}convertAndRetryToBase64(_){return(0,t.mG)(this,void 0,void 0,function*(){let s=this.getExtensionFile(_);if(["pdf","jpg","jpeg","png","gif"].includes(s)){let a;const d=[C.Cdn,C.CdnTimestamp,C.Rawlink,C.RawlinkTimestamp];if(this.cdnService.isViettelCDN(_)){console.log(">>>> YAAAAAA, \u0111\xe2y l\xe0 link Viettel, qu\xe1 tr\xecnh convert c\xf3 th\u1ec3 l\xe2u h\u01a1n b\xecnh th\u01b0\u1eddng, v\xec ph\u1ea3i convert tu\u1ea7n t\u1ef1 sau m\u1ed7i 0.5 gi\xe2y");try{a=yield this.convertToBase64(_,d[0])}catch(p){try{yield this.asyncTimeout(500),a=yield this.convertToBase64(_,d[1])}catch(m){console.log("Kh\xf4ng th\u1ec3 convert url VIETTEL n\xe0y th\xe0nh base64 sau 2 l\u1ea7n th\u1eed: "+_),a=_}}}else try{a=yield this.convertToBase64(_,d[0])}catch(p){try{a=yield this.convertToBase64(_,d[1])}catch(m){try{a=yield this.convertToBase64(_,d[2])}catch(h){try{a=yield this.convertToBase64(_,d[3])}catch(v){console.log("Kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh base64 sau v\xe0i l\u1ea7n retry: "+_),a=_}}}}return a}return console.log("\u0110\u1ecbnh d\u1ea1ng file kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3: "+_),_})}eraseCanvas(_){_&&(_.beginPath(),_.rect(0,0,_.canvas.width,_.canvas.height),_.fillStyle="white",_.fill())}addContentToPdf(_,s){_.addImage(s,"JPEG",0,0,_.internal.pageSize.getWidth(),_.internal.pageSize.getHeight())}drawTextWrap(_,s,a,d,p){let m=_.split(" "),h=[],v=m[0];if(s){s.font=p||`${d}px Arial`;for(let S=1;S<m.length;S++){let M=m[S];s.measureText(v+" "+M).width<a?v+=" "+M:(h.push(v),v=M)}h.push(v)}return h}essayText2LinesArr(_,s,a,d,p){var m;let h=new RegExp("(<br>|<br/>)+","igm"),S=(null!==(m=this.commonService.replaceAllByRegExp(_,h,"<br>"))&&void 0!==m?m:"").split("<br>"),M=[];for(let n=0;n<S.length;n++)M.push(this.drawTextWrap(S[n],s,a,d,p));return M}}return y.\u0275fac=function(_){return new(_||y)(e.LFG(Z.v),e.LFG(R.U),e.LFG(B.T))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},91153:(K,N,g)=>{g.d(N,{Y:()=>Z});var t=g(5e3),e=g(34782);let Z=(()=>{class R{constructor(C){this.browserStorageService=C,this.global_data_filter={}}getCustomFilter(C,A){let y="";switch(C){case"exam":y="saveFilterExam_"+A;break;case"homework":y="saveFilterHomework_"+A}return this.global_data_filter[y]}setCustomFilter(C,A,y){let I="";switch(A){case"exam":I="saveFilterExam_"+y,this.global_data_filter[I]="",C.isMarked&&(this.global_data_filter[I]+="isMarked "),C.isNotMarked&&(this.global_data_filter[I]+="isNotMarked "),C.isOnTest&&(this.global_data_filter[I]+="isOnTest "),C.isNotTested&&(this.global_data_filter[I]+="isNotTested ");break;case"homework":I="saveFilterHomework_"+y,this.global_data_filter[I]="",C.isMarked&&(this.global_data_filter[I]+="isMarked "),C.isSubmitted&&(this.global_data_filter[I]+="isSubmitted "),C.isNotSubmit&&(this.global_data_filter[I]+="isNotSubmit "),C.mustReSubmit&&(this.global_data_filter[I]+="mustReSubmit ")}}removeCustomFilter(C,A){let y="";switch(C){case"exam":y="saveFilterExam_"+A,this.global_data_filter[y]="";break;case"homework":y="saveFilterHomework_"+A,this.global_data_filter[y]=""}}getStatusSideNav(C){var A;return null!==(A=this.browserStorageService.getSimpleStorage("statusSideNav_"+C))&&void 0!==A?A:""}removeStatusSideNav(C){this.browserStorageService.removeSimpleStorage("statusSideNav_"+C)}saveStatusSideNav(C,A){this.browserStorageService.saveSimpleStorage("statusSideNav_"+C,A?"open":"close")}}return R.\u0275fac=function(C){return new(C||R)(t.LFG(e.z))},R.\u0275prov=t.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()}}]);