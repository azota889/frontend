"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[284],{12011:(Te,he,h)=>{h.d(he,{Dh:()=>ae,GT:()=>re,cc:()=>L,hO:()=>x,on:()=>D,pX:()=>k,xv:()=>oe});var C=h(5e3),H=h(70127),u=h(26351);Te=h.hmd(Te);const I=["ngOnDestroy"],k=(y,U,q,J={})=>new Proxy(y,{get:(se,G)=>q.runOutsideAngular(()=>{var ee;if(y[G])return!(null===(ee=null==J?void 0:J.spy)||void 0===ee)&&ee.get&&J.spy.get(G,y[G]),y[G];if(I.indexOf(G)>-1)return()=>{};const P=U.toPromise().then(W=>{const N=W&&W[G];return"function"==typeof N?N.bind(W):N&&N.then?N.then(ce=>q.run(()=>ce)):q.run(()=>N)});return new Proxy(()=>{},{get:(W,N)=>P[N],apply:(W,N,ce)=>P.then(pe=>{var Le;const Ve=pe&&pe(...ce);return!(null===(Le=null==J?void 0:J.spy)||void 0===Le)&&Le.apply&&J.spy.apply(G,ce,Ve),Ve})})})}),re=(y,U)=>{U.forEach(q=>{Object.getOwnPropertyNames(q.prototype||q).forEach(J=>{Object.defineProperty(y.prototype,J,Object.getOwnPropertyDescriptor(q.prototype||q,J))})})};class ge{constructor(U){return U}}const ae=new C.OlP("angularfire2.app.options"),oe=new C.OlP("angularfire2.app.name");function D(y,U,q){const se="object"==typeof q&&q||{};se.name=se.name||"string"==typeof q&&q||"[DEFAULT]";const ee=H.Z.apps.filter(P=>P&&P.name===se.name)[0]||U.runOutsideAngular(()=>H.Z.initializeApp(y,se));try{JSON.stringify(y)!==JSON.stringify(ee.options)&&R("error",`${ee.name} Firebase App already initialized with different options${Te.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(P){}return new ge(ee)}const R=(y,...U)=>{(0,C.X6Q)()&&"undefined"!=typeof console&&console[y](...U)},e={provide:ge,useFactory:D,deps:[ae,C.R0b,[new C.FiY,oe]]};let x=(()=>{class y{constructor(q){H.Z.registerVersion("angularfire",u.q4.full,"core"),H.Z.registerVersion("angularfire",u.q4.full,"app-compat"),H.Z.registerVersion("angular",C.q4F.full,q.toString())}static initializeApp(q,J){return{ngModule:y,providers:[{provide:ae,useValue:q},{provide:oe,useValue:J}]}}}return y.\u0275fac=function(q){return new(q||y)(C.LFG(C.Lbi))},y.\u0275mod=C.oAB({type:y}),y.\u0275inj=C.cJS({providers:[e]}),y})();function L(y,U,q,J,se){const[,G,ee]=globalThis.\u0275AngularfireInstanceCache.find(P=>P[0]===y)||[];if(G)return function F(y,U){try{return y.toString()===U.toString()}catch(q){return y===U}}(se,ee)||(S("error",`${U} was already initialized on the ${q} Firebase App with different settings.${Q?" You may need to reload as Firebase is not HMR aware.":""}`),S("warn",{is:se,was:ee})),G;{const P=J();return globalThis.\u0275AngularfireInstanceCache.push([y,P,se]),P}}const Q=!!Te.hot,S=(y,...U)=>{(0,C.X6Q)()&&"undefined"!=typeof console&&console[y](...U)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},26351:(Te,he,h)=>{h.d(he,{q4:()=>ra,iC:()=>lt,HU:()=>Qr,vb:()=>sa,JM:()=>aa});var C=h(5e3),H=h(15867),u=h(15861),I=h(49681),k=h(42090),re=h(34859),ge=h(41877),ae=h(98766);const oe="@firebase/installations",D="0.5.11",e=`w:${D}`,x="FIS_v2",U=new k.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function q(i){return i instanceof k.ZR&&i.code.includes("request-failed")}function J({projectId:i}){return`https://firebaseinstallations.googleapis.com/v1/projects/${i}/installations`}function se(i){return{token:i.token,requestStatus:2,expiresIn:pe(i.expiresIn),creationTime:Date.now()}}function G(i,a){return ee.apply(this,arguments)}function ee(){return(ee=(0,u.Z)(function*(i,a){const d=(yield a.json()).error;return U.create("request-failed",{requestName:i,serverCode:d.code,serverMessage:d.message,serverStatus:d.status})})).apply(this,arguments)}function P({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function W(i,{refreshToken:a}){const c=P(i);return c.append("Authorization",function Le(i){return`${x} ${i}`}(a)),c}function N(i){return ce.apply(this,arguments)}function ce(){return(ce=(0,u.Z)(function*(i){const a=yield i();return a.status>=500&&a.status<600?i():a})).apply(this,arguments)}function pe(i){return Number(i.replace("s","000"))}function Ve(i,a){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,u.Z)(function*({appConfig:i,heartbeatServiceProvider:a},{fid:c}){const d=J(i),g=P(i),p=a.getImmediate({optional:!0});if(p){const Z=yield p.getHeartbeatsHeader();Z&&g.append("x-firebase-client",Z)}const b={method:"POST",headers:g,body:JSON.stringify({fid:c,authVersion:x,appId:i.appId,sdkVersion:e})},T=yield N(()=>fetch(d,b));if(T.ok){const Z=yield T.json();return{fid:Z.fid||c,registrationStatus:2,refreshToken:Z.refreshToken,authToken:se(Z.authToken)}}throw yield G("Create Installation",T)})).apply(this,arguments)}function Ke(i){return new Promise(a=>{setTimeout(a,i)})}const $n=/^[cdef][\w-]{21}$/;function Xn(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const c=function Wo(i){return function Wn(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}(i).substr(0,22)}(i);return $n.test(c)?c:""}catch(i){return""}}function Ee(i){return`${i.appName}!${i.appId}`}const Me=new Map;function eo(i,a){const c=Ee(i);to(c,a),function ei(i,a){const c=function no(){return!Se&&"BroadcastChannel"in self&&(Se=new BroadcastChannel("[Firebase] FID Change"),Se.onmessage=i=>{to(i.data.key,i.data.fid)}),Se}();c&&c.postMessage({key:i,fid:a}),function oo(){0===Me.size&&Se&&(Se.close(),Se=null)}()}(c,a)}function to(i,a){const c=Me.get(i);if(c)for(const d of c)d(a)}let Se=null;const Ze="firebase-installations-store";let Rt=null;function Qt(){return Rt||(Rt=(0,ae.X3)("firebase-installations-database",1,{upgrade:(i,a)=>{0===a&&i.createObjectStore(Ze)}})),Rt}function _t(i,a){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(i,a){const c=Ee(i),g=(yield Qt()).transaction(Ze,"readwrite"),p=g.objectStore(Ze),m=yield p.get(c);return yield p.put(a,c),yield g.done,(!m||m.fid!==a.fid)&&eo(i,a.fid),a})).apply(this,arguments)}function Nt(i){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,u.Z)(function*(i){const a=Ee(i),d=(yield Qt()).transaction(Ze,"readwrite");yield d.objectStore(Ze).delete(a),yield d.done})).apply(this,arguments)}function Ge(i,a){return qe.apply(this,arguments)}function qe(){return(qe=(0,u.Z)(function*(i,a){const c=Ee(i),g=(yield Qt()).transaction(Ze,"readwrite"),p=g.objectStore(Ze),m=yield p.get(c),b=a(m);return void 0===b?yield p.delete(c):yield p.put(b,c),yield g.done,b&&(!m||m.fid!==b.fid)&&eo(i,b.fid),b})).apply(this,arguments)}function jt(i){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(function*(i){let a;const c=yield Ge(i.appConfig,d=>{const g=oi(d),p=ii(i,g);return a=p.registrationPromise,p.installationEntry});return""===c.fid?{installationEntry:yield a}:{installationEntry:c,registrationPromise:a}})).apply(this,arguments)}function oi(i){return gt(i||{fid:Xn(),registrationStatus:0})}function ii(i,a){if(0===a.registrationStatus){if(!navigator.onLine)return{installationEntry:a,registrationPromise:Promise.reject(U.create("app-offline"))};const c={fid:a.fid,registrationStatus:1,registrationTime:Date.now()},d=function ri(i,a){return Jt.apply(this,arguments)}(i,c);return{installationEntry:c,registrationPromise:d}}return 1===a.registrationStatus?{installationEntry:a,registrationPromise:ai(i)}:{installationEntry:a}}function Jt(){return(Jt=(0,u.Z)(function*(i,a){try{const c=yield Ve(i,a);return _t(i.appConfig,c)}catch(c){throw q(c)&&409===c.customData.serverCode?yield Nt(i.appConfig):yield _t(i.appConfig,{fid:a.fid,registrationStatus:0}),c}})).apply(this,arguments)}function ai(i){return zt.apply(this,arguments)}function zt(){return(zt=(0,u.Z)(function*(i){let a=yield io(i.appConfig);for(;1===a.registrationStatus;)yield Ke(100),a=yield io(i.appConfig);if(0===a.registrationStatus){const{installationEntry:c,registrationPromise:d}=yield jt(i);return d||c}return a})).apply(this,arguments)}function io(i){return Ge(i,a=>{if(!a)throw U.create("installation-not-found");return gt(a)})}function gt(i){return function We(i){return 1===i.registrationStatus&&i.registrationTime+1e4<Date.now()}(i)?{fid:i.fid,registrationStatus:0}:i}function si(i,a){return pt.apply(this,arguments)}function pt(){return(pt=(0,u.Z)(function*({appConfig:i,heartbeatServiceProvider:a},c){const d=ci(i,c),g=W(i,c),p=a.getImmediate({optional:!0});if(p){const Z=yield p.getHeartbeatsHeader();Z&&g.append("x-firebase-client",Z)}const b={method:"POST",headers:g,body:JSON.stringify({installation:{sdkVersion:e,appId:i.appId}})},T=yield N(()=>fetch(d,b));if(T.ok)return se(yield T.json());throw yield G("Generate Auth Token",T)})).apply(this,arguments)}function ci(i,{fid:a}){return`${J(i)}/${a}/authTokens:generate`}function Yt(i){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,u.Z)(function*(i,a=!1){let c;const d=yield Ge(i.appConfig,p=>{if(!Gt(p))throw U.create("not-registered");const m=p.authToken;if(!a&&ui(m))return p;if(1===m.requestStatus)return c=li(i,a),p;{if(!navigator.onLine)throw U.create("app-offline");const b=gi(p);return c=di(i,b),b}});return c?yield c:d.authToken})).apply(this,arguments)}function li(i,a){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,u.Z)(function*(i,a){let c=yield ro(i.appConfig);for(;1===c.authToken.requestStatus;)yield Ke(100),c=yield ro(i.appConfig);const d=c.authToken;return 0===d.requestStatus?Yt(i,a):d})).apply(this,arguments)}function ro(i){return Ge(i,a=>{if(!Gt(a))throw U.create("not-registered");return function pi(i){return 1===i.requestStatus&&i.requestTime+1e4<Date.now()}(a.authToken)?Object.assign(Object.assign({},a),{authToken:{requestStatus:0}}):a})}function di(i,a){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,u.Z)(function*(i,a){try{const c=yield si(i,a),d=Object.assign(Object.assign({},a),{authToken:c});return yield _t(i.appConfig,d),c}catch(c){if(!q(c)||401!==c.customData.serverCode&&404!==c.customData.serverCode){const d=Object.assign(Object.assign({},a),{authToken:{requestStatus:0}});yield _t(i.appConfig,d)}else yield Nt(i.appConfig);throw c}})).apply(this,arguments)}function Gt(i){return void 0!==i&&2===i.registrationStatus}function ui(i){return 2===i.requestStatus&&!function _i(i){const a=Date.now();return a<i.creationTime||i.creationTime+i.expiresIn<a+36e5}(i)}function gi(i){const a={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:a})}function Wt(){return(Wt=(0,u.Z)(function*(i){const a=i,{installationEntry:c,registrationPromise:d}=yield jt(a);return d?d.catch(console.error):Yt(a).catch(console.error),c.fid})).apply(this,arguments)}function $t(){return($t=(0,u.Z)(function*(i,a=!1){const c=i;return yield fi(c),(yield Yt(c,a)).token})).apply(this,arguments)}function fi(i){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,u.Z)(function*(i){const{registrationPromise:a}=yield jt(i);a&&(yield a)})).apply(this,arguments)}function tn(i){return U.create("missing-app-config-values",{valueName:i})}const so="installations",xi=i=>{const a=i.getProvider("app").getImmediate(),c=function bi(i){if(!i||!i.options)throw tn("App Configuration");if(!i.name)throw tn("App Name");const a=["projectId","apiKey","appId"];for(const c of a)if(!i.options[c])throw tn(c);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}(a);return{app:a,appConfig:c,heartbeatServiceProvider:(0,I._getProvider)(a,"heartbeat"),_delete:()=>Promise.resolve()}},Ci=i=>{const a=i.getProvider("app").getImmediate(),c=(0,I._getProvider)(a,so).getImmediate();return{getId:()=>function hi(i){return Wt.apply(this,arguments)}(c),getToken:g=>function mi(i){return $t.apply(this,arguments)}(c,g)}};(function wi(){(0,I._registerComponent)(new re.wA(so,xi,"PUBLIC")),(0,I._registerComponent)(new re.wA("installations-internal",Ci,"PRIVATE"))})(),(0,I.registerVersion)(oe,D),(0,I.registerVersion)(oe,D,"esm2017");const nn="@firebase/remote-config",le=new k.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ei{constructor(a,c,d,g){this.client=a,this.storage=c,this.storageCache=d,this.logger=g}isCachedDataFresh(a,c){if(!c)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const d=Date.now()-c,g=d<=a;return this.logger.debug(`Config fetch cache check. Cache age millis: ${d}. Cache max age millis (minimumFetchIntervalMillis setting): ${a}. Is cache hit: ${g}.`),g}fetch(a){var c=this;return(0,u.Z)(function*(){const[d,g]=yield Promise.all([c.storage.getLastSuccessfulFetchTimestampMillis(),c.storage.getLastSuccessfulFetchResponse()]);if(g&&c.isCachedDataFresh(a.cacheMaxAgeMillis,d))return g;a.eTag=g&&g.eTag;const p=yield c.client.fetch(a),m=[c.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===p.status&&m.push(c.storage.setLastSuccessfulFetchResponse(p)),yield Promise.all(m),p})()}}function Mi(i=navigator){return i.languages&&i.languages[0]||i.language}class qi{constructor(a,c,d,g,p,m){this.firebaseInstallations=a,this.sdkVersion=c,this.namespace=d,this.projectId=g,this.apiKey=p,this.appId=m}fetch(a){var c=this;return(0,u.Z)(function*(){var d,g,p;const[m,b]=yield Promise.all([c.firebaseInstallations.getId(),c.firebaseInstallations.getToken()]),Z=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${c.projectId}/namespaces/${c.namespace}:fetch?key=${c.apiKey}`,O={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":a.eTag||"*"},w={sdk_version:c.sdkVersion,app_instance_id:m,app_instance_id_token:b,app_id:c.appId,language_code:Mi()},te={method:"POST",headers:O,body:JSON.stringify(w)},_e=fetch(Z,te),qt=new Promise((ye,Ye)=>{a.signal.addEventListener(()=>{const Go=new Error("The operation was aborted.");Go.name="AbortError",Ye(Go)})});let dt;try{yield Promise.race([_e,qt]),dt=yield _e}catch(ye){let Ye="fetch-client-network";throw"AbortError"===(null===(d=ye)||void 0===d?void 0:d.name)&&(Ye="fetch-timeout"),le.create(Ye,{originalErrorMessage:null===(g=ye)||void 0===g?void 0:g.message})}let ze=dt.status;const Nr=dt.headers.get("ETag")||void 0;let Gn,we;if(200===dt.status){let ye;try{ye=yield dt.json()}catch(Ye){throw le.create("fetch-client-parse",{originalErrorMessage:null===(p=Ye)||void 0===p?void 0:p.message})}Gn=ye.entries,we=ye.state}if("INSTANCE_STATE_UNSPECIFIED"===we?ze=500:"NO_CHANGE"===we?ze=304:("NO_TEMPLATE"===we||"EMPTY_CONFIG"===we)&&(Gn={}),304!==ze&&200!==ze)throw le.create("fetch-status",{httpStatus:ze});return{status:ze,eTag:Nr,config:Gn}})()}}class Ri{constructor(a,c){this.client=a,this.storage=c}fetch(a){var c=this;return(0,u.Z)(function*(){const d=(yield c.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return c.attemptFetch(a,d)})()}attemptFetch(a,{throttleEndTimeMillis:c,backoffCount:d}){var g=this;return(0,u.Z)(function*(){yield function Ui(i,a){return new Promise((c,d)=>{const g=Math.max(a-Date.now(),0),p=setTimeout(c,g);i.addEventListener(()=>{clearTimeout(p),d(le.create("fetch-throttle",{throttleEndTimeMillis:a}))})})}(a.signal,c);try{const p=yield g.client.fetch(a);return yield g.storage.deleteThrottleMetadata(),p}catch(p){if(!function $e(i){if(!(i instanceof k.ZR&&i.customData))return!1;const a=Number(i.customData.httpStatus);return 429===a||500===a||503===a||504===a}(p))throw p;const m={throttleEndTimeMillis:Date.now()+(0,k.$s)(d),backoffCount:d+1};return yield g.storage.setThrottleMetadata(m),g.attemptFetch(a,m)}})()}}class _o{constructor(a,c,d,g,p){this.app=a,this._client=c,this._storageCache=d,this._storage=g,this._logger=p,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ft(i,a){var c;const d=i.target.error||void 0;return le.create(a,{originalErrorMessage:d&&(null===(c=d)||void 0===c?void 0:c.message)})}const ke="app_namespace_store";class Bi{constructor(a,c,d,g=function ji(){return new Promise((i,a)=>{var c;try{const d=indexedDB.open("firebase_remote_config",1);d.onerror=g=>{a(ft(g,"storage-open"))},d.onsuccess=g=>{i(g.target.result)},d.onupgradeneeded=g=>{0===g.oldVersion&&g.target.result.createObjectStore(ke,{keyPath:"compositeKey"})}}catch(d){a(le.create("storage-open",{originalErrorMessage:null===(c=d)||void 0===c?void 0:c.message}))}})}()){this.appId=a,this.appName=c,this.namespace=d,this.openDbPromise=g}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(a){return this.set("last_fetch_status",a)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(a){return this.set("last_successful_fetch_timestamp_millis",a)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(a){return this.set("last_successful_fetch_response",a)}getActiveConfig(){return this.get("active_config")}setActiveConfig(a){return this.set("active_config",a)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(a){return this.set("active_config_etag",a)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(a){return this.set("throttle_metadata",a)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(a){var c=this;return(0,u.Z)(function*(){const d=yield c.openDbPromise;return new Promise((g,p)=>{var m;const T=d.transaction([ke],"readonly").objectStore(ke),Z=c.createCompositeKey(a);try{const O=T.get(Z);O.onerror=w=>{p(ft(w,"storage-get"))},O.onsuccess=w=>{const te=w.target.result;g(te?te.value:void 0)}}catch(O){p(le.create("storage-get",{originalErrorMessage:null===(m=O)||void 0===m?void 0:m.message}))}})})()}set(a,c){var d=this;return(0,u.Z)(function*(){const g=yield d.openDbPromise;return new Promise((p,m)=>{var b;const Z=g.transaction([ke],"readwrite").objectStore(ke),O=d.createCompositeKey(a);try{const w=Z.put({compositeKey:O,value:c});w.onerror=te=>{m(ft(te,"storage-set"))},w.onsuccess=()=>{p()}}catch(w){m(le.create("storage-set",{originalErrorMessage:null===(b=w)||void 0===b?void 0:b.message}))}})})()}delete(a){var c=this;return(0,u.Z)(function*(){const d=yield c.openDbPromise;return new Promise((g,p)=>{var m;const T=d.transaction([ke],"readwrite").objectStore(ke),Z=c.createCompositeKey(a);try{const O=T.delete(Z);O.onerror=w=>{p(ft(w,"storage-delete"))},O.onsuccess=()=>{g()}}catch(O){p(le.create("storage-delete",{originalErrorMessage:null===(m=O)||void 0===m?void 0:m.message}))}})})()}createCompositeKey(a){return[this.appId,this.appName,this.namespace,a].join()}}class Ji{constructor(a){this.storage=a}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var a=this;return(0,u.Z)(function*(){const c=a.storage.getLastFetchStatus(),d=a.storage.getLastSuccessfulFetchTimestampMillis(),g=a.storage.getActiveConfig(),p=yield c;p&&(a.lastFetchStatus=p);const m=yield d;m&&(a.lastSuccessfulFetchTimestampMillis=m);const b=yield g;b&&(a.activeConfig=b)})()}setLastFetchStatus(a){return this.lastFetchStatus=a,this.storage.setLastFetchStatus(a)}setLastSuccessfulFetchTimestampMillis(a){return this.lastSuccessfulFetchTimestampMillis=a,this.storage.setLastSuccessfulFetchTimestampMillis(a)}setActiveConfig(a){return this.activeConfig=a,this.storage.setActiveConfig(a)}}function Yi(){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(){if(!(0,k.hl)())return!1;try{return yield(0,k.eu)()}catch(i){return!1}})).apply(this,arguments)}!function zi(){(0,I._registerComponent)(new re.wA("remote-config",function i(a,{instanceIdentifier:c}){const d=a.getProvider("app").getImmediate(),g=a.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw le.create("registration-window");if(!(0,k.hl)())throw le.create("indexed-db-unavailable");const{projectId:p,apiKey:m,appId:b}=d.options;if(!p)throw le.create("registration-project-id");if(!m)throw le.create("registration-api-key");if(!b)throw le.create("registration-app-id");const T=new Bi(b,d.name,c=c||"firebase"),Z=new Ji(T),O=new ge.Yd(nn);O.logLevel=ge.in.ERROR;const w=new qi(g,I.SDK_VERSION,c,p,m,b),te=new Ri(w,T),_e=new Ei(te,T,Z,O),qt=new _o(d,_e,Z,T,O);return function Pi(i){const a=(0,k.m9)(i);a._initializePromise||(a._initializePromise=a._storageCache.loadFromStorage().then(()=>{a._isInitializationComplete=!0}))}(qt),qt},"PUBLIC").setMultipleInstances(!0)),(0,I.registerVersion)(nn,"0.3.10"),(0,I.registerVersion)(nn,"0.3.10","esm2017")}();const Hi="/firebase-messaging-sw.js",Vi="/firebase-cloud-messaging-push-scope",go="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",po="google.c.a.c_id",Gi="google.c.a.c_l",Wi="google.c.a.ts",$i="google.c.a.e";var Re=(()=>{return(i=Re||(Re={})).PUSH_RECEIVED="push-received",i.NOTIFICATION_CLICKED="notification-clicked",Re;var i})();function ve(i){const a=new Uint8Array(i);return btoa(String.fromCharCode(...a)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xi(i){const c=(i+"=".repeat((4-i.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),d=atob(c),g=new Uint8Array(d.length);for(let p=0;p<d.length;++p)g[p]=d.charCodeAt(p);return g}const dn="fcm_token_details_db",ho="fcm_token_object_Store";function tr(i){return un.apply(this,arguments)}function un(){return un=(0,u.Z)(function*(i){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(p=>p.name).includes(dn))return null;let a=null;return(yield(0,ae.X3)(dn,5,{upgrade:(d=(0,u.Z)(function*(g,p,m,b){var T;if(p<2||!g.objectStoreNames.contains(ho))return;const Z=b.objectStore(ho),O=yield Z.index("fcmSenderId").get(i);if(yield Z.clear(),O)if(2===p){const w=O;if(!w.auth||!w.p256dh||!w.endpoint)return;a={token:w.fcmToken,createTime:null!==(T=w.createTime)&&void 0!==T?T:Date.now(),subscriptionOptions:{auth:w.auth,p256dh:w.p256dh,endpoint:w.endpoint,swScope:w.swScope,vapidKey:"string"==typeof w.vapidKey?w.vapidKey:ve(w.vapidKey)}}}else if(3===p){const w=O;a={token:w.fcmToken,createTime:w.createTime,subscriptionOptions:{auth:ve(w.auth),p256dh:ve(w.p256dh),endpoint:w.endpoint,swScope:w.swScope,vapidKey:ve(w.vapidKey)}}}else if(4===p){const w=O;a={token:w.fcmToken,createTime:w.createTime,subscriptionOptions:{auth:ve(w.auth),p256dh:ve(w.p256dh),endpoint:w.endpoint,swScope:w.swScope,vapidKey:ve(w.vapidKey)}}}}),function(p,m,b,T){return d.apply(this,arguments)})})).close(),yield(0,ae.Lj)(dn),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),nr(a)?a:null;var d}),un.apply(this,arguments)}function nr(i){if(!i||!i.subscriptionOptions)return!1;const{subscriptionOptions:a}=i;return"number"==typeof i.createTime&&i.createTime>0&&"string"==typeof i.token&&i.token.length>0&&"string"==typeof a.auth&&a.auth.length>0&&"string"==typeof a.p256dh&&a.p256dh.length>0&&"string"==typeof a.endpoint&&a.endpoint.length>0&&"string"==typeof a.swScope&&a.swScope.length>0&&"string"==typeof a.vapidKey&&a.vapidKey.length>0}const Oe="firebase-messaging-store";let _n=null;function gn(){return _n||(_n=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(i,a)=>{0===a&&i.createObjectStore(Oe)}})),_n}function mo(i){return pn.apply(this,arguments)}function pn(){return(pn=(0,u.Z)(function*(i){const a=vn(i),d=yield(yield gn()).transaction(Oe).objectStore(Oe).get(a);if(d)return d;{const g=yield tr(i.appConfig.senderId);if(g)return yield hn(i,g),g}})).apply(this,arguments)}function hn(i,a){return mn.apply(this,arguments)}function mn(){return(mn=(0,u.Z)(function*(i,a){const c=vn(i),g=(yield gn()).transaction(Oe,"readwrite");return yield g.objectStore(Oe).put(a,c),yield g.done,a})).apply(this,arguments)}function rr(i){return fn.apply(this,arguments)}function fn(){return(fn=(0,u.Z)(function*(i){const a=vn(i),d=(yield gn()).transaction(Oe,"readwrite");yield d.objectStore(Oe).delete(a),yield d.done})).apply(this,arguments)}function vn({appConfig:i}){return i.appId}const V=new k.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function sr(i,a){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,u.Z)(function*(i,a){var c;const d=yield yt(i),g=et(a),p={method:"POST",headers:d,body:JSON.stringify(g)};let m;try{m=yield(yield fetch(vt(i.appConfig),p)).json()}catch(b){throw V.create("token-subscribe-failed",{errorInfo:null===(c=b)||void 0===c?void 0:c.toString()})}if(m.error)throw V.create("token-subscribe-failed",{errorInfo:m.error.message});if(!m.token)throw V.create("token-subscribe-no-token");return m.token})).apply(this,arguments)}function cr(i,a){return yn.apply(this,arguments)}function yn(){return(yn=(0,u.Z)(function*(i,a){var c;const d=yield yt(i),g=et(a.subscriptionOptions),p={method:"PATCH",headers:d,body:JSON.stringify(g)};let m;try{m=yield(yield fetch(`${vt(i.appConfig)}/${a.token}`,p)).json()}catch(b){throw V.create("token-update-failed",{errorInfo:null===(c=b)||void 0===c?void 0:c.toString()})}if(m.error)throw V.create("token-update-failed",{errorInfo:m.error.message});if(!m.token)throw V.create("token-update-no-token");return m.token})).apply(this,arguments)}function fo(i,a){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,u.Z)(function*(i,a){var c;const g={method:"DELETE",headers:yield yt(i)};try{const m=yield(yield fetch(`${vt(i.appConfig)}/${a}`,g)).json();if(m.error)throw V.create("token-unsubscribe-failed",{errorInfo:m.error.message})}catch(p){throw V.create("token-unsubscribe-failed",{errorInfo:null===(c=p)||void 0===c?void 0:c.toString()})}})).apply(this,arguments)}function vt({projectId:i}){return`https://fcmregistrations.googleapis.com/v1/projects/${i}/registrations`}function yt(i){return bn.apply(this,arguments)}function bn(){return(bn=(0,u.Z)(function*({appConfig:i,installations:a}){const c=yield a.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i.apiKey,"x-goog-firebase-installations-auth":`FIS ${c}`})})).apply(this,arguments)}function et({p256dh:i,auth:a,endpoint:c,vapidKey:d}){const g={web:{endpoint:c,auth:a,p256dh:i}};return d!==go&&(g.web.applicationPubKey=d),g}const Fe=6048e5;function An(i){return bt.apply(this,arguments)}function bt(){return(bt=(0,u.Z)(function*(i){const a=yield lr(i.swRegistration,i.vapidKey),c={vapidKey:i.vapidKey,swScope:i.swRegistration.scope,endpoint:a.endpoint,auth:ve(a.getKey("auth")),p256dh:ve(a.getKey("p256dh"))},d=yield mo(i.firebaseDependencies);if(d){if(dr(d.subscriptionOptions,c))return Date.now()>=d.createTime+Fe?xn(i,{token:d.token,createTime:Date.now(),subscriptionOptions:c}):d.token;try{yield fo(i.firebaseDependencies,d.token)}catch(g){console.warn(g)}return tt(i.firebaseDependencies,c)}return tt(i.firebaseDependencies,c)})).apply(this,arguments)}function vo(i){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(i){const a=yield mo(i.firebaseDependencies);a&&(yield fo(i.firebaseDependencies,a.token),yield rr(i.firebaseDependencies));const c=yield i.swRegistration.pushManager.getSubscription();return!c||c.unsubscribe()})).apply(this,arguments)}function xn(i,a){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,u.Z)(function*(i,a){try{const c=yield cr(i.firebaseDependencies,a),d=Object.assign(Object.assign({},a),{token:c,createTime:Date.now()});return yield hn(i.firebaseDependencies,d),c}catch(c){throw yield vo(i),c}})).apply(this,arguments)}function tt(i,a){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,u.Z)(function*(i,a){const d={token:yield sr(i,a),createTime:Date.now(),subscriptionOptions:a};return yield hn(i,d),d.token})).apply(this,arguments)}function lr(i,a){return yo.apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(i,a){return(yield i.pushManager.getSubscription())||i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xi(a)})})).apply(this,arguments)}function dr(i,a){return a.vapidKey===i.vapidKey&&a.endpoint===i.endpoint&&a.auth===i.auth&&a.p256dh===i.p256dh}function xt(i){const a={from:i.from,collapseKey:i.collapse_key,messageId:i.fcmMessageId};return function Gr(i,a){if(!a.notification)return;i.notification={};const c=a.notification.title;c&&(i.notification.title=c);const d=a.notification.body;d&&(i.notification.body=d);const g=a.notification.image;g&&(i.notification.image=g)}(a,i),function Wr(i,a){!a.data||(i.data=a.data)}(a,i),function ur(i,a){var c,d,g,p,m;if(!(a.fcmOptions||null!==(c=a.notification)&&void 0!==c&&c.click_action))return;i.fcmOptions={};const b=null!==(g=null===(d=a.fcmOptions)||void 0===d?void 0:d.link)&&void 0!==g?g:null===(p=a.notification)||void 0===p?void 0:p.click_action;b&&(i.fcmOptions.link=b);const T=null===(m=a.fcmOptions)||void 0===m?void 0:m.analytics_label;T&&(i.fcmOptions.analyticsLabel=T)}(a,i),a}function _r(i){return"object"==typeof i&&!!i&&po in i}function gr(i,a){const c=[];for(let d=0;d<i.length;d++)c.push(i.charAt(d)),d<a.length&&c.push(a.charAt(d));return c.join("")}function bo(i){return V.create("missing-app-config-values",{valueName:i})}gr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xr{constructor(a,c,d){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const g=function $r(i){if(!i||!i.options)throw bo("App Configuration Object");if(!i.name)throw bo("App Name");const a=["projectId","apiKey","appId","messagingSenderId"],{options:c}=i;for(const d of a)if(!c[d])throw bo(d);return{appName:i.name,projectId:c.projectId,apiKey:c.apiKey,appId:c.appId,senderId:c.messagingSenderId}}(a);this.firebaseDependencies={app:a,appConfig:g,installations:c,analyticsProvider:d}}_delete(){return Promise.resolve()}}function pr(i){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,u.Z)(function*(i){var a;try{i.swRegistration=yield navigator.serviceWorker.register(Hi,{scope:Vi}),i.swRegistration.update().catch(()=>{})}catch(c){throw V.create("failed-service-worker-registration",{browserErrorMessage:null===(a=c)||void 0===a?void 0:a.message})}})).apply(this,arguments)}function ea(i,a){return xo.apply(this,arguments)}function xo(){return(xo=(0,u.Z)(function*(i,a){if(!a&&!i.swRegistration&&(yield pr(i)),a||!i.swRegistration){if(!(a instanceof ServiceWorkerRegistration))throw V.create("invalid-sw-registration");i.swRegistration=a}})).apply(this,arguments)}function wn(i,a){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,u.Z)(function*(i,a){a?i.vapidKey=a:i.vapidKey||(i.vapidKey=go)})).apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(i,a){if(!navigator)throw V.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw V.create("permission-blocked");return yield wn(i,null==a?void 0:a.vapidKey),yield ea(i,null==a?void 0:a.serviceWorkerRegistration),An(i)})).apply(this,arguments)}function Co(i,a,c){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(function*(i,a,c){const d=hr(a);(yield i.firebaseDependencies.analyticsProvider.get()).logEvent(d,{message_id:c[po],message_name:c[Gi],message_time:c[Wi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hr(i){switch(i){case Re.NOTIFICATION_CLICKED:return"notification_open";case Re.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ue(){return(ue=(0,u.Z)(function*(i,a){const c=a.data;if(!c.isFirebaseMessaging)return;i.onMessageHandler&&c.messageType===Re.PUSH_RECEIVED&&("function"==typeof i.onMessageHandler?i.onMessageHandler(xt(c)):i.onMessageHandler.next(xt(c)));const d=c.data;_r(d)&&"1"===d[$i]&&(yield Co(i,c.messageType,d))})).apply(this,arguments)}const nt="@firebase/messaging",mr=i=>{const a=new Xr(i.getProvider("app").getImmediate(),i.getProvider("installations-internal").getImmediate(),i.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",c=>function K(i,a){return ue.apply(this,arguments)}(a,c)),a},fr=i=>{const a=i.getProvider("messaging").getImmediate();return{getToken:d=>function De(i,a){return Tn.apply(this,arguments)}(a,d)}};function Zn(){return kn.apply(this,arguments)}function kn(){return(kn=(0,u.Z)(function*(){try{yield(0,k.eu)()}catch(i){return!1}return"undefined"!=typeof window&&(0,k.hl)()&&(0,k.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vr(){(0,I._registerComponent)(new re.wA("messaging",mr,"PUBLIC")),(0,I._registerComponent)(new re.wA("messaging-internal",fr,"PRIVATE")),(0,I.registerVersion)(nt,"0.9.15"),(0,I.registerVersion)(nt,"0.9.15","esm2017")}();const je="analytics",Ln="firebase_id",Cr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",To="https://www.googletagmanager.com/gtag/js",$=new ge.Yd("@firebase/analytics");function Be(i){return Promise.all(i.map(a=>a.catch(c=>c)))}function So(i,a){const c=document.createElement("script");c.src=`${To}?l=${i}&id=${a}`,c.async=!0,document.head.appendChild(c)}function Zo(i,a,c,d,g,p){return En.apply(this,arguments)}function En(){return(En=(0,u.Z)(function*(i,a,c,d,g,p){const m=d[g];try{if(m)yield a[m];else{const T=(yield Be(c)).find(Z=>Z.measurementId===g);T&&(yield a[T.appId])}}catch(b){$.error(b)}i("config",g,p)})).apply(this,arguments)}function wr(i,a,c,d,g){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,u.Z)(function*(i,a,c,d,g){try{let p=[];if(g&&g.send_to){let m=g.send_to;Array.isArray(m)||(m=[m]);const b=yield Be(c);for(const T of m){const Z=b.find(w=>w.measurementId===T),O=Z&&a[Z.appId];if(!O){p=[];break}p.push(O)}}0===p.length&&(p=Object.values(a)),yield Promise.all(p),i("event",d,g||{})}catch(p){$.error(p)}})).apply(this,arguments)}function qn(){const i=window.document.getElementsByTagName("script");for(const a of Object.values(i))if(a.src&&a.src.includes(To))return a;return null}const ie=new k.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Zt=new class Sr{constructor(a={},c=1e3){this.throttleMetadata=a,this.intervalMillis=c}getThrottleMetadata(a){return this.throttleMetadata[a]}setThrottleMetadata(a,c){this.throttleMetadata[a]=c}deleteThrottleMetadata(a){delete this.throttleMetadata[a]}};function Po(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}function Zr(i){return it.apply(this,arguments)}function it(){return(it=(0,u.Z)(function*(i){var a;const{appId:c,apiKey:d}=i,g={method:"GET",headers:Po(d)},p=Cr.replace("{app-id}",c),m=yield fetch(p,g);if(200!==m.status&&304!==m.status){let b="";try{const T=yield m.json();null!==(a=T.error)&&void 0!==a&&a.message&&(b=T.error.message)}catch(T){}throw ie.create("config-fetch-failed",{httpStatus:m.status,responseMessage:b})}return m.json()})).apply(this,arguments)}function Lo(i){return kt.apply(this,arguments)}function kt(){return(kt=(0,u.Z)(function*(i,a=Zt,c){const{appId:d,apiKey:g,measurementId:p}=i.options;if(!d)throw ie.create("no-app-id");if(!g){if(p)return{measurementId:p,appId:d};throw ie.create("no-api-key")}const m=a.getThrottleMetadata(d)||{backoffCount:0,throttleEndTimeMillis:Date.now()},b=new It;return setTimeout((0,u.Z)(function*(){b.abort()}),void 0!==c?c:6e4),Ot({appId:d,apiKey:g,measurementId:p},m,b,a)})).apply(this,arguments)}function Ot(i,a,c){return Un.apply(this,arguments)}function Un(){return(Un=(0,u.Z)(function*(i,{throttleEndTimeMillis:a,backoffCount:c},d,g=Zt){var p,m;const{appId:b,measurementId:T}=i;try{yield kr(d,a)}catch(Z){if(T)return $.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${T} provided in the "measurementId" field in the local Firebase config. [${null===(p=Z)||void 0===p?void 0:p.message}]`),{appId:b,measurementId:T};throw Z}try{const Z=yield Zr(i);return g.deleteThrottleMetadata(b),Z}catch(Z){const O=Z;if(!Or(O)){if(g.deleteThrottleMetadata(b),T)return $.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${T} provided in the "measurementId" field in the local Firebase config. [${null==O?void 0:O.message}]`),{appId:b,measurementId:T};throw Z}const w=503===Number(null===(m=null==O?void 0:O.customData)||void 0===m?void 0:m.httpStatus)?(0,k.$s)(c,g.intervalMillis,30):(0,k.$s)(c,g.intervalMillis),te={throttleEndTimeMillis:Date.now()+w,backoffCount:c+1};return g.setThrottleMetadata(b,te),$.debug(`Calling attemptFetch again in ${w} millis`),Ot(i,te,d,g)}})).apply(this,arguments)}function kr(i,a){return new Promise((c,d)=>{const g=Math.max(a-Date.now(),0),p=setTimeout(c,g);i.addEventListener(()=>{clearTimeout(p),d(ie.create("fetch-throttle",{throttleEndTimeMillis:a}))})})}function Or(i){if(!(i instanceof k.ZR&&i.customData))return!1;const a=Number(i.customData.httpStatus);return 429===a||500===a||503===a||504===a}class It{constructor(){this.listeners=[]}addEventListener(a){this.listeners.push(a)}abort(){this.listeners.forEach(a=>a())}}function Rn(){return rt.apply(this,arguments)}function rt(){return(rt=(0,u.Z)(function*(){var i;if(!(0,k.hl)())return $.warn(ie.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,k.eu)()}catch(a){return $.warn(ie.create("indexeddb-unavailable",{errorInfo:null===(i=a)||void 0===i?void 0:i.toString()}).message),!1}return!0})).apply(this,arguments)}function Pt(){return(Pt=(0,u.Z)(function*(i,a,c,d,g,p,m){var b;const T=Lo(i);T.then(_e=>{c[_e.measurementId]=_e.appId,i.options.measurementId&&_e.measurementId!==i.options.measurementId&&$.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${_e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_e=>$.error(_e)),a.push(T);const Z=Rn().then(_e=>{if(_e)return d.getId()}),[O,w]=yield Promise.all([T,Z]);qn()||So(p,O.measurementId),g("js",new Date);const te=null!==(b=null==m?void 0:m.config)&&void 0!==b?b:{};return te.origin="firebase",te.update=!0,null!=w&&(te[Ln]=w),g("config",O.measurementId,te),O.measurementId})).apply(this,arguments)}class Ir{constructor(a){this.app=a}_delete(){return delete me[this.app.options.appId],Promise.resolve()}}let me={},at=[];const Eo={};let qo,st,Lt="dataLayer",Fn=!1;function Lr(i,a,c){!function Pr(){const i=[];if((0,k.ru)()&&i.push("This is a browser extension environment."),(0,k.zI)()||i.push("Cookies are not available."),i.length>0){const a=i.map((d,g)=>`(${g+1}) ${d}`).join(" "),c=ie.create("invalid-analytics-context",{errorInfo:a});$.warn(c.message)}}();const d=i.options.appId;if(!d)throw ie.create("no-app-id");if(!i.options.apiKey){if(!i.options.measurementId)throw ie.create("no-api-key");$.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=me[d])throw ie.create("already-exists",{id:d});if(!Fn){!function St(i){let a=[];Array.isArray(window[i])?a=window[i]:window[i]=a}(Lt);const{wrappedGtag:p,gtagCore:m}=function ko(i,a,c,d,g){let p=function(...m){window[d].push(arguments)};return window[g]&&"function"==typeof window[g]&&(p=window[g]),window[g]=function Tr(i,a,c,d){function p(){return(p=(0,u.Z)(function*(m,b,T){try{"event"===m?yield wr(i,a,c,b,T):"config"===m?yield Zo(i,a,c,d,b,T):i("set",b)}catch(Z){$.error(Z)}})).apply(this,arguments)}return function g(m,b,T){return p.apply(this,arguments)}}(p,i,a,c),{gtagCore:p,wrappedGtag:window[g]}}(me,at,Eo,Lt,"gtag");st=p,qo=m,Fn=!0}return me[d]=function Qn(i,a,c,d,g,p,m){return Pt.apply(this,arguments)}(i,at,Eo,a,qo,Lt,c),new Ir(i)}function Je(){return(Je=(0,u.Z)(function*(i,a,c,d,g){if(g&&g.global)i("event",c,d);else{const p=yield a;i("event",c,Object.assign(Object.assign({},d),{send_to:p}))}})).apply(this,arguments)}function Fo(){return No.apply(this,arguments)}function No(){return(No=(0,u.Z)(function*(){if((0,k.ru)()||!(0,k.zI)()||!(0,k.hl)())return!1;try{return yield(0,k.eu)()}catch(i){return!1}})).apply(this,arguments)}const jo="@firebase/analytics";!function Ur(){(0,I._registerComponent)(new re.wA(je,(a,{options:c})=>Lr(a.getProvider("app").getImmediate(),a.getProvider("installations-internal").getImmediate(),c),"PUBLIC")),(0,I._registerComponent)(new re.wA("analytics-internal",function i(a){try{const c=a.getProvider(je).getImmediate();return{logEvent:(d,g,p)=>function oa(i,a,c,d){i=(0,k.m9)(i),function Er(i,a,c,d,g){return Je.apply(this,arguments)}(st,me[i.app.options.appId],a,c,d).catch(g=>$.error(g))}(c,d,g,p)}}catch(c){throw ie.create("interop-component-reg-failed",{reason:c})}},"PRIVATE")),(0,I.registerVersion)(jo,"0.7.11"),(0,I.registerVersion)(jo,"0.7.11","esm2017")}();var Bo=h(30341),Jn=h(20353),Jo=h(2994),ia=h(13334),zn=h(57770);const ra=new C.GfV("7.4.1"),Yn="__angularfire_symbol__analyticsIsSupportedValue",zo="__angularfire_symbol__analyticsIsSupported",Hn="__angularfire_symbol__remoteConfigIsSupportedValue",Vn="__angularfire_symbol__remoteConfigIsSupported",Yo="__angularfire_symbol__messagingIsSupportedValue",Ho="__angularfire_symbol__messagingIsSupported";function aa(i,a,c){if(a){if(1===a.length)return a[0];const p=a.filter(m=>m.app===c);if(1===p.length)return p[0]}return c.container.getProvider(i).getImmediate({optional:!0})}globalThis[zo]||(globalThis[zo]=Fo().then(i=>globalThis[Yn]=i).catch(()=>globalThis[Yn]=!1)),globalThis[Ho]||(globalThis[Ho]=Zn().then(i=>globalThis[Yo]=i).catch(()=>globalThis[Yo]=!1)),globalThis[Vn]||(globalThis[Vn]=Yi().then(i=>globalThis[Hn]=i).catch(()=>globalThis[Hn]=!1));const sa=(i,a)=>{const c=a?[a]:(0,H.C6)(),d=[];return c.forEach(g=>{g.container.getProvider(i).instances.forEach(m=>{d.includes(m)||d.push(m)})}),d};function ct(){}class Vo{constructor(a,c=Bo.N){this.zone=a,this.delegate=c}now(){return this.delegate.now()}schedule(a,c,d){const g=this.zone;return this.delegate.schedule(function(m){g.runGuarded(()=>{a.apply(this,[m])})},c,d)}}class Rr{constructor(a){this.zone=a,this.task=null}call(a,c){const d=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ct,{},ct,ct)),c.pipe((0,Jo.b)({next:d,complete:d,error:d})).subscribe(a).add(d)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Qr=(()=>{class i{constructor(c){this.ngZone=c,this.outsideAngular=c.runOutsideAngular(()=>new Vo(Zone.current)),this.insideAngular=c.run(()=>new Vo(Zone.current,Jn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return i.\u0275fac=function(c){return new(c||i)(C.LFG(C.R0b))},i.\u0275prov=C.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ie(){const i=globalThis.\u0275AngularFireScheduler;if(!i)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return i}function lt(i){return Ie(),function da(i){return function(c){return(c=c.lift(new Rr(i.ngZone))).pipe((0,ia.R)(i.outsideAngular),(0,zn.QV)(i.insideAngular))}}(Ie())(i)}},78284:(Te,he,h)=>{h.r(he),h.d(he,{AuthModule:()=>es});var C=h(69808),H=h(12011),u=h(93075),I=h(74202),k=h(51908),re=h(47470),ge=h(75658),ae=h(95880),oe=h(92340),D=h(37389),R=h(55330),e=h(5e3),x=h(43147),L=h(35018),F=h(51930),Q=h(47423),S=h(25245),y=h(1033);function U(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_email")," "))}function q(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_email_phai_nhap_dung_dinh_dang")," "))}function J(n,s){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,U,3,3,"div",11),e.YNc(2,q,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.email.errors.email||t.form.controls.email.errors.pattern)}}function se(n,s){if(1&n&&(e.TgZ(0,"div",26)(1,"label",27),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function G(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function ee(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form",14)(2,"div",2)(3,"div",15)(4,"div",16)(5,"div",17)(6,"span",18)(7,"mat-icon"),e._uU(8,"email_outlined"),e.qZA()()(),e._UZ(9,"input",19),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,J,3,2,"div",20),e.qZA()(),e.YNc(12,se,4,3,"div",21),e.TgZ(13,"div",2)(14,"div",15)(15,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmEmail())}),e.YNc(16,G,3,0,"span",11),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"div",23)(20,"a",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.backToRedirect())}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(8),e.s9C("placeholder",e.lcZ(10,8,"lang_auto_nhap_email_moi")),e.xp6(2),e.Q6J("ngIf",t.form.controls.email.errors&&t.form.controls.email.dirty),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(3),e.Q6J("disabled",t.statusObj.loading||t.form.invalid),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(18,10,"lang_auto_tiep_tuc")," "),e.xp6(4),e.Oqu(e.lcZ(22,12,"lang_auto_bo_qua"))}}function P(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",2)(2,"div",15)(3,"p",29),e._uU(4),e.ALo(5,"mytranslate"),e.TgZ(6,"b"),e._uU(7),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,3,"lang_auto_vui_long_kiem_tra_email"),": "),e.xp6(3),e.Oqu(t.oldEmail),e.xp6(1),e.hij(" ",e.lcZ(9,5,"lang_auto_va_an_vao_duong_link_he_thong_da_gui_de_xac_thuc_hoan_tat_viec_doi_email")," ")}}let W=(()=>{class n extends R.Q{constructor(t,o,r,l){super(o),this.baseApiService=t,this.commonService=o,this.formBuilder=r,this.userInfoService=l,this.form=new u.nJ({}),this.step=1,this.oldEmail=""}ignoreRequest(){this.baseApiService.redirectLoginByRole("")}confirmEmail(){this.form.valid&&(this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoChangeEmailPost({newEmail:this.form.controls.email.value}).subscribe(o=>{var r,l,_;1==o.success?(this.oldEmail=null!==(l=null===(r=o.data)||void 0===r?void 0:r.value)&&void 0!==l?l:"",this.successStatusObj(),this.step=2):this.errorStatusObj(null!==(_=o.message)&&void 0!==_?_:"")})))}handleClickDashboard(){this.baseApiService.redirectLoginByRole("")}backToRedirect(){let t=this.getMyQueryParam("return_url");t&&this.myNavigation(t)}ngOnInit(){this.form=this.formBuilder.group({email:new u.p4("",[u.kI.required,u.kI.email,u.kI.pattern(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)])}),this.commonService.translateMetaData({title:"lang_cms_auth_change_mail_title",description:"lang_cms_auth_change_mail_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x._),e.Y36(L.v),e.Y36(u.QS),e.Y36(F.$C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-account"]],features:[e.qOj],decls:22,vars:11,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],[1,"text-center","mb-3"],[1,"text-normal","clickable",3,"click"],[3,"formGroup"],[1,"col-md-12"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","text","name","email","formControlName","email",1,"form-control",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],["mat-raised-button","",1,"btn-azt-primary",2,"width","100%",3,"disabled","click"],[1,"mt-3","text-center"],[1,"clickable",3,"click"],[1,"alert","alert-danger"],[1,"form-group"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"text-center"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._UZ(8,"img",8),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",9),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",10),e.YNc(14,ee,23,14,"div",11),e.YNc(15,P,10,7,"div",11),e.qZA(),e._UZ(16,"hr"),e.TgZ(17,"div",12)(18,"a",13),e.NdJ("click",function(){return o.handleClickDashboard()}),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()()(),e._UZ(21,"div",3),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("src",e.lcZ(9,5,"azota_assets/images/logo.svg"),e.LSH),e.xp6(3),e.hij(" ",e.lcZ(12,7,"lang_auto_doi_email_moi")," "),e.xp6(3),e.Q6J("ngIf",1==o.step),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading&&2==o.step),e.xp6(4),e.Oqu(e.lcZ(20,9,"lang_auto_quay_lai_man_hinh_chinh")))},dependencies:[C.O5,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,u.sg,u.u,y.bT,y.BI],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}"]}),n})();var N=h(70024),ce=h(90508),pe=h(67322),Le=h(96551),Ve=h(60703),Ce=h(41303),Ke=h(42873),Wn=h(88386),$n=h(81760),Ut=h(98833),Xn=h(79814);function Wo(n,s){1&n&&(e.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function Ee(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_email_phai_nhap_dung_dinh_dang")," "))}function Me(n,s){if(1&n&&(e.TgZ(0,"div",42),e.YNc(1,Ee,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorType("email","email")||t.getErrorType("email","pattern"))}}function eo(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"span",19)(5,"mat-icon"),e._uU(6,"email_outlined"),e.qZA()()(),e._UZ(7,"input",41),e.qZA(),e.YNc(8,Me,2,1,"div",23),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",t.form.controls.email.invalid&&t.form.controls.email.dirty)}}function $o(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"div",43)(3,"div",18)(4,"span",19)(5,"mat-icon"),e._uU(6,"email_outlined"),e.qZA()()(),e._UZ(7,"input",41),e.qZA(),e.TgZ(8,"a",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goToConfirmEmail())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(7),e.uIk("disabled",!0),e.xp6(2),e.Oqu(e.lcZ(10,2,"lang_auto_click_vao_day_neu_ban_muon_doi_email")))}function Xo(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_dien_thoai_chi_gom_cac_chu_so_va_dai_10_ky_tu")," "))}function to(n,s){if(1&n&&(e.TgZ(0,"div",42),e.YNc(1,Xo,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorType("phone","pattern")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength"))}}function ei(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"div",43)(3,"div",18)(4,"span",19)(5,"mat-icon"),e._uU(6,"phone_enabled"),e.qZA()()(),e._UZ(7,"input",45),e.ALo(8,"mytranslate"),e.qZA(),e.YNc(9,to,2,1,"div",23),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(7),e.s9C("placeholder",e.lcZ(8,2,"lang_auto_so_dien_thoai")),e.xp6(2),e.Q6J("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched))}}function Se(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_dien_thoai_chi_gom_cac_chu_so_va_dai_10_ky_tu")," "))}function no(n,s){if(1&n&&(e.TgZ(0,"div",42),e.YNc(1,Se,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorType("phone","pattern")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength"))}}function oo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"div",43)(3,"div",18)(4,"span",19)(5,"mat-icon"),e._uU(6,"phone_enabled"),e.qZA()()(),e._UZ(7,"input",45),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"a",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goToConfirm())}),e._uU(10),e.ALo(11,"mytranslate"),e.ALo(12,"mytranslate"),e.qZA(),e.YNc(13,no,2,1,"div",23),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(7),e.s9C("placeholder",e.lcZ(8,5,"lang_auto_so_dien_thoai")),e.uIk("disabled",!0),e.xp6(3),e.AsE("",e.lcZ(11,7,"lang_auto_click_vao_day_neu_ban_muon_doi_so")," ",e.lcZ(12,9,"lang_auto_dien_thoai"),""),e.xp6(3),e.Q6J("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched))}}function ti(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_mat_khau_phai_dai_toi_thieu_la_6")," "))}function ni(n,s){if(1&n&&(e.TgZ(0,"div",42),e.YNc(1,ti,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Ze(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"OK"),e.qZA())}function Rt(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"label",46),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function Qt(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",47),e._uU(2,"\xa0"),e.qZA())}function _t(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"span",19)(6,"mat-icon"),e._uU(7,"person_outline"),e.qZA()()(),e._UZ(8,"input",20),e.ALo(9,"mytranslate"),e.qZA()()(),e.YNc(10,eo,9,1,"div",21),e.YNc(11,$o,11,4,"div",21),e.YNc(12,ei,10,4,"div",21),e.YNc(13,oo,14,11,"div",21),e.TgZ(14,"div",15)(15,"div",16)(16,"div",17)(17,"div",18)(18,"span",19)(19,"mat-icon"),e._uU(20,"lock_outlined"),e.qZA()()(),e._UZ(21,"input",22),e.ALo(22,"mytranslate"),e.qZA(),e.YNc(23,ni,2,1,"div",23),e.qZA()(),e.TgZ(24,"div",15)(25,"div",16)(26,"div",24)(27,"mat-radio-group",25)(28,"div",26)(29,"div",27),e._uU(30),e.ALo(31,"mytranslate"),e.qZA(),e.TgZ(32,"div",28)(33,"mat-radio-button",29),e._uU(34,"Nam"),e.qZA(),e.TgZ(35,"mat-radio-button",30),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()()()()()()(),e.TgZ(38,"div",15)(39,"div",31)(40,"mat-form-field",32)(41,"input",33),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(47);return e.KtG(r.open())}),e.ALo(42,"mytranslate"),e.qZA(),e.TgZ(43,"button",34),e.NdJ("click",function(r){return e.CHM(t),e.MAs(47).open(),e.KtG(r.stopPropagation())}),e.TgZ(44,"mat-icon"),e._uU(45,"today"),e.qZA()(),e.TgZ(46,"ngx-mat-datetime-picker",35,36),e.YNc(48,Ze,2,0,"ng-template"),e.qZA()()()(),e.YNc(49,Rt,4,3,"div",21),e.TgZ(50,"div",15)(51,"div",37)(52,"button",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changeInfo())}),e.YNc(53,Qt,3,0,"span",11),e._uU(54),e.ALo(55,"mytranslate"),e.qZA()()(),e.TgZ(56,"div",39)(57,"a",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.goBack())}),e._uU(58),e.ALo(59,"mytranslate"),e.qZA()()()}if(2&n){const t=e.MAs(47),o=e.oxw();e.xp6(8),e.s9C("placeholder",e.lcZ(9,17,"lang_auto_ho_va_ten")),e.xp6(2),e.Q6J("ngIf",o.checkEnableChangeEmailOrPhone(o.email,"email")),e.xp6(1),e.Q6J("ngIf",!o.checkEnableChangeEmailOrPhone(o.email,"email")),e.xp6(1),e.Q6J("ngIf",o.checkEnableChangeEmailOrPhone(o.phone,"phone")),e.xp6(1),e.Q6J("ngIf",!o.checkEnableChangeEmailOrPhone(o.phone,"phone")),e.xp6(8),e.s9C("placeholder",e.lcZ(22,19,"lang_auto_mat_khau_moi")),e.xp6(2),e.Q6J("ngIf",o.form.controls.password.invalid&&(o.form.controls.password.dirty||o.form.controls.password.touched)),e.xp6(7),e.hij(" ",e.lcZ(31,21,"lang_auto_gioi_tinh")," "),e.xp6(6),e.Oqu(e.lcZ(37,23,"lang_auto_nu")),e.xp6(5),e.s9C("placeholder",e.lcZ(42,25,"lang_auto_ngay_sinh")),e.Q6J("ngxMatDatetimePicker",t),e.xp6(5),e.Q6J("hideTime",!0),e.xp6(3),e.Q6J("ngIf",o.statusObj.errorMessage),e.xp6(3),e.Q6J("disabled",o.form.invalid||o.statusObj.loading),e.xp6(1),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.hij("",e.lcZ(55,27,"lang_auto_cap_nhat")," "),e.xp6(4),e.Oqu(e.lcZ(59,29,"lang_auto_quay_lai_trang_chu"))}}let Ft=(()=>{class n extends R.Q{constructor(t,o,r,l,_,f,v,A){super(o),this.formBuilder=t,this.commonService=o,this.baseApiService=r,this.userInfoService=l,this.redirectService=_,this.userService=f,this.datepipe=v,this.mobileWebviewService=A,this.form=new u.nJ({}),this.startDate=new Date(1990,1,1),this.gender=0,this.email="",this.phone="",this.prevData="",this.returnUrl=""}getErrorType(t,o){var r,l,_,f,v,A;return!(null===(_=null===(l=null===(r=this.form.controls)||void 0===r?void 0:r[t])||void 0===l?void 0:l.errors)||void 0===_||!_[o])&&(null===(A=null===(v=null===(f=this.form.controls)||void 0===f?void 0:f[t])||void 0===v?void 0:v.errors)||void 0===A?void 0:A[o])}goToConfirm(){this.returnUrl="/auth/change-info";var t="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=change_phone";this.commonService.myNavigationWithQueryString("/auth/checking_service",t)}goToConfirmEmail(){this.returnUrl="/auth/change-info";var t="?return_url="+encodeURIComponent(this.returnUrl);this.commonService.myNavigationWithQueryString("/auth/change-email",t)}allowChangePhone(){var t=this.baseApiService.getUserObj(),r=t.zaloId?t.zaloId:"";return""!=r&&r==(t.phone?t.phone:"")}changeInfo(){var t;if(this.form.valid){var o=this.commonService.getFormObj(this.form),r=o.birthday?new Date(Date.parse(o.birthday)):this.startDate,l={fullName:o.fullName,birthday:null!==(t=this.datepipe.transform(r,"yyyy-MM-ddTHH:mm:ss"))&&void 0!==t?t:"",email:o.email,gender:o.gender,password:o.password,phone:o.phone};this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoUpdateInfoPost(l).subscribe(_=>{var f,v,A;1==_.success?(this.email=null!==(f=l.email)&&void 0!==f?f:"",this.phone=null!==(v=l.phone)&&void 0!==v?v:"",this.successStatusObj("lang_auto_cap_nhat_thong_tin_thanh_cong",!0)):this.errorStatusObj(null!==(A=_.message)&&void 0!==A?A:"",!0)}))}}goBack(){this.baseApiService.redirectLoginByRole("")}getInfo(){var t,o,r,l=this.baseApiService.getUserObj(),_=l.birthday?new Date(l.birthday):new Date(1990,1,1);this.startDate=_,this.gender=null!==(t=l.gender)&&void 0!==t?t:0,this.email=null!==(o=l.email)&&void 0!==o?o:"",this.phone=null!==(r=l.phone)&&void 0!==r?r:"",this.form.patchValue({fullName:this.userService.isAnonymousName(l)?"":l.fullName,email:l.email?l.email:"",phone:l.phone?l.phone:"",gender:1!=this.gender?"0":"1"}),this.form.controls.birthday.setValue(_)}checkEnableChangeEmailOrPhone(t,o){if("email"==o){if(!t||!t.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/))return!0}else if("phone"==o&&(!t||t.length>15))return!0;return!1}ngOnInit(){this.form=this.formBuilder.group({fullName:new u.p4("",[u.kI.required,Ce._.noWhiteSpace]),email:new u.p4("",[u.kI.email,u.kI.pattern(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)]),phone:new u.p4("",[u.kI.pattern("^[0-9]{10}$")]),gender:new u.p4(""),birthday:new u.p4(""),password:new u.p4("",[u.kI.minLength(6)])}),this.baseApiService.isAnonymousRole()?this.redirectService.redirectSimpleRegister():(this.getInfo(),this.form.valueChanges.subscribe(t=>{let o=JSON.stringify(t);o!=this.prevData&&(this.prevData=o,this.form.patchValue(t))}),this.commonService.translateMetaData({title:"lang_cms_auth_change_info_title",description:"lang_cms_auth_change_info_description",image:"lang_cms_test_image"}),super.ngOnInit()),this.mobileWebviewService.sendComponentLoaded("offline_answer_list")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.QS),e.Y36(L.v),e.Y36(x._),e.Y36(F.$C),e.Y36(Ke.V),e.Y36(Wn.K),e.Y36(C.uU),e.Y36($n.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-change-info"]],features:[e._Bn([C.uU,{provide:N.fM,useClass:Ve.HF,deps:[ce.Ad,Ve.o8]},{provide:N.ab,useValue:Le.ws},{provide:pe.o2,useValue:{floatLabel:"never"}}]),e.qOj],decls:17,vars:9,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","text","formControlName","fullName",1,"form-control",3,"placeholder"],["class","form-group",4,"ngIf"],["type","password","formControlName","password","autocomplete","new-password",1,"form-control",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],[1,"input-group","input-custom"],["formControlName","gender","color","primary",2,"width","100%"],[1,"row","fsz-16"],[1,"col-5"],[1,"col-7"],["value","1",1,"col-6","p-0"],["value","0"],[1,"col-sm-12","studentBirthDay"],["id","birthday",1,"myTimePicker",2,"border","1px solid #ced4da","border-radius","3px","padding-top","2px"],["matInput","","formControlName","birthday","readonly","",1,"form-birthday","bg-white",3,"placeholder","ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",3,"click"],[3,"hideTime"],["birthDay",""],[1,"col-sm-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],["type","text","placeholder","Email","formControlName","email",1,"form-control"],[1,"alert","alert-danger"],[1,"input-group","mb-1"],[1,"clickable","text-info",2,"font-size","13px","padding-left","5px",3,"click"],["type","text","formControlName","phone",1,"form-control",3,"placeholder"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._UZ(8,"img",8),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",9),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",10),e.YNc(14,Wo,6,3,"div",11),e.YNc(15,_t,60,31,"div",11),e.qZA()()(),e._UZ(16,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(7),e.Q6J("src",e.lcZ(9,5,"azota_assets/images/logo.svg"),e.LSH),e.xp6(3),e.Oqu(e.lcZ(12,7,"lang_auto_sua_thong_tin_tai_khoan")),e.xp6(3),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading))},dependencies:[C.O5,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,pe.KE,pe.R9,Ut.Nt,Xn.VQ,Xn.U0,N.AB,N.g2,u.sg,u.u,y.bT,y.BI],styles:[".mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em}  .mat-form-field-appearance-legacy .mat-form-field-label{font-weight:400;color:#0000008a;font-size:16px}.fsz-16[_ngcontent-%COMP%]{font-size:16px!important}.form-birthday[_ngcontent-%COMP%]{display:block;width:100%;height:calc(1.5em + .75rem - 10px);padding:.375rem .75rem;font-weight:400;font-size:16px;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}#birthday[_ngcontent-%COMP%]:focus, #birthday[_ngcontent-%COMP%]:active, #birthday[_ngcontent-%COMP%]:target, #birthday[_ngcontent-%COMP%]:visited, #birthday[_ngcontent-%COMP%]:focus-within, #birthday[_ngcontent-%COMP%]:focus-visible{background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.hover-cancel[_ngcontent-%COMP%]:hover{background-color:#ebe9e9}.form-control[_ngcontent-%COMP%]{font-size:16px;height:calc(1.5em + .75rem + 5px)}.input-custom[_ngcontent-%COMP%]{border:1px solid #e2e2e2;border-radius:3px;padding-left:12px;padding-top:10px;padding-bottom:8px}  label{margin-bottom:0!important}  .mat-form-field-flex{align-items:center!important}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}"]}),n})(),Nt=(()=>{class n extends R.Q{constructor(t,o){super(t),this.commonService=t,this.userInfoService=o}get returnUrl(){var t;return null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""}get confirm_type(){var t;return null!==(t=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==t?t:""}ngOnInit(){this.userInfoService.apiUserInfoGetFirebaseConfigGet().subscribe(t=>{var o;if(1==t.success){let r=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.app);window.location.href=r.toString()}else this.showErrorSnack("lang_auto__blank_co_loi_khi_kiem_tra_dich_vu")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v),e.Y36(F.$C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-checking-service"]],features:[e.qOj],decls:4,vars:3,consts:[[1,"mt-5","text-center"],["role","status",1,"spinner-border","spinner-border-md",2,"color","#2361ae"]],template:function(t,o){1&t&&(e.TgZ(0,"h2",0),e._UZ(1,"span",1),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&t&&(e.xp6(2),e.hij("\xa0 ",e.lcZ(3,1,"lang_auto_dang_kiem_tra_dich_vu_doing"),""))},dependencies:[y.bT],encapsulation:2}),n})();function Dt(n,s){1&n&&(e.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"span",18),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}let Ge=(()=>{class n extends R.Q{constructor(t,o,r){super(t),this.commonService=t,this.userInfoService=o,this.baseApiService=r}ngOnInit(){super.ngOnInit()}chooseRegisterStudent(){this.baseApiService.redirectLoginByRole("")}chooseRegisterTeacher(){this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoConvertToTeacherGet().subscribe(t=>{var o;1==t.success?this.baseApiService.redirectLoginByRole(""):this.errorStatusObj(null!==(o=t.message)&&void 0!==o?o:"",!0)}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v),e.Y36(F.$C),e.Y36(x._))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-download-answer-sheet"]],features:[e.qOj],decls:29,vars:16,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"row","py-5"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],[1,"row",2,"justify-content","space-around"],[1,"col-sm-4","border-card","mb-3",3,"click"],[1,"df-logo"],[1,"fas","fa-graduation-cap","pb-3",2,"font-size","36px"],["width","36px","height","45px",1,"mb-3",3,"src"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),e._UZ(7,"img",7),e.ALo(8,"convertCdn"),e.qZA(),e.TgZ(9,"h3",8),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",9),e.YNc(13,Dt,6,3,"div",10),e.TgZ(14,"div",11)(15,"div",12),e.NdJ("click",function(){return o.chooseRegisterStudent()}),e.TgZ(16,"div",13),e._UZ(17,"i",14),e.TgZ(18,"p"),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()(),e.TgZ(21,"div",12),e.NdJ("click",function(){return o.chooseRegisterTeacher()}),e.TgZ(22,"div",13),e._UZ(23,"img",15),e.ALo(24,"convertCdn"),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"mytranslate"),e.qZA()()()()()()(),e._UZ(28,"div",2),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("src",e.lcZ(8,6,"azota_assets/images/logo.svg"),e.LSH),e.xp6(3),e.Oqu(e.lcZ(11,8,"lang_auto_chon_vai_tro")),e.xp6(3),e.Q6J("ngIf",o.statusObj.loading),e.xp6(6),e.Oqu(e.lcZ(20,10,"lang_auto_toi_la_hoc_sinh")),e.xp6(4),e.Q6J("src",e.lcZ(24,12,"azota_assets/images/teacher.png"),e.LSH),e.xp6(3),e.Oqu(e.lcZ(27,14,"lang_auto_toi_la_giao_vien")))},dependencies:[C.O5,y.bT,y.BI],styles:[".select-style[_ngcontent-%COMP%]{color:#868686!important}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}.select-style[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.select-style[_ngcontent-%COMP%]:hover, .select-style-active[_ngcontent-%COMP%]{color:#2361ae!important}.df-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.register--login[_ngcontent-%COMP%]{width:88px;height:88px}.two-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%;height:100vh;margin:auto}.register-button[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center}.btn-max-width[_ngcontent-%COMP%]{width:100%;padding-top:1.25rem;padding-bottom:1.25rem;font-size:1.5rem}.responsive__text[_ngcontent-%COMP%]{width:90%;margin-left:auto;margin-right:auto}.btn-outline-primary[_ngcontent-%COMP%]{color:#2361ae!important;border-color:#2361ae!important}.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#2361ae!important;background-color:#2361ae!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b818e!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#2361ae!important;border-color:#2361ae!important;background-color:#0eacbe26}.btn-border-fix[_ngcontent-%COMP%]{border-radius:10px!important}.border-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid hsla(0deg,0%,86.3%,.8);border-radius:8px;cursor:pointer;padding:12px;align-items:center;text-align:center}.border-card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 20px #00000012,-10px -10px 20px #fffc}.button-color[_ngcontent-%COMP%]{background-color:#2361ae!important;color:#fff!important}"]}),n})();var qe=h(64262);let jt=(()=>{class n extends R.Q{constructor(t,o,r,l){super(t),this.commonService=t,this.userInfoService=o,this.baseApiService=r,this.localStorageObject=l}getData(t){this.subscriptions.add(this.userInfoService.apiUserInfoConfirmPassFromEmailPost({secret:t}).subscribe(r=>{var l;1==r.success?(this.showSuccessSnack("lang_auto_doi_email_thanh_cong"),this.getInfo()):(this.errorStatusObj(null!==(l=r.message)&&void 0!==l?l:"",!0),this.myNavigation("/auth/login"))}))}getInfo(){this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoInfoGet().subscribe(t=>{var o,r;if(1==t.success){let l=null!==(o=t.data)&&void 0!==o?o:{};this.baseApiService.saveUserObj(l),this.successStatusObj(),this.localStorageObject.clearAllCache(),this.baseApiService.redirectLoginByRole("")}else this.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:"")}))}ignoreRequest(){this.baseApiService.redirectLoginByRole("")}confirmChangeEmail(){let t=this.commonService.getMyQueryParam("secret");t?this.getData(t):this.showErrorSnack("lang_auto_vui_long_truy_cap_link_duoc_gui_den_email_cua_ban")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v),e.Y36(F.$C),e.Y36(x._),e.Y36(qe.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-email"]],features:[e.qOj],decls:29,vars:27,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-around","mt-3"],["mat-stroked-button","",2,"width","45%",3,"click"],["mat-stroked-button","",1,"btn-azt-primary",2,"width","45%","margin-left","15px",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._UZ(8,"img",8),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",9),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",10)(14,"p",11),e._uU(15),e.ALo(16,"mytranslate"),e.ALo(17,"mytranslate"),e.ALo(18,"mytranslate"),e.ALo(19,"mytranslate"),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"div",12)(22,"button",13),e.NdJ("click",function(){return o.ignoreRequest()}),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e.TgZ(25,"button",14),e.NdJ("click",function(){return o.confirmChangeEmail()}),e._uU(26),e.ALo(27,"mytranslate"),e.qZA()()()()(),e._UZ(28,"div",3),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("src",e.lcZ(9,9,"azota_assets/images/logo.svg"),e.LSH),e.xp6(3),e.hij(" ",e.lcZ(12,11,"lang_auto_xac_nhan_doi_email_moi")," "),e.xp6(4),e.xDo(" ",e.lcZ(16,13,"lang_auto_ban_vua_yeu_cau_thay_doi_email_cho_tai_khoan_tren_azota_hay_bam_nut"),' "',e.lcZ(17,15,"lang_auto_xac_nhan"),'" ',e.lcZ(18,17,"lang_auto_ben_duoi_neu_do_la_ban_neu_khong_vui_long_bam_nut"),' "',e.lcZ(19,19,"lang_auto_huy"),'" ',e.lcZ(20,21,"lang_auto_de_huy_bo_yeu_cau_nay")," "),e.xp6(8),e.hij(" ",e.lcZ(24,23,"lang_cms_common_close_btn")," "),e.xp6(3),e.hij(" ",e.lcZ(27,25,"lang_cms_common_confirm_btn")," "))},dependencies:[Q.lW,y.bT,y.BI],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}"]}),n})();function Bt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",15)(9,"button",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.ignoreRequest())}),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"button",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmPassword())}),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(2),e.xDo(" ",e.lcZ(3,7,"lang_auto_ban_vua_yeu_cau_thay_doi_mat_khau_cho_tai_khoan_tren_azota_hay_bam_nut"),' "',e.lcZ(4,9,"lang_auto_xac_nhan"),'" ',e.lcZ(5,11,"lang_auto_ben_duoi_neu_do_la_ban_neu_khong_vui_long_bam_nut"),' "',e.lcZ(6,13,"lang_auto_huy"),'" ',e.lcZ(7,15,"lang_auto_de_huy_bo_yeu_cau_nay")," "),e.xp6(8),e.hij(" ",e.lcZ(11,17,"lang_cms_common_close_btn")," "),e.xp6(3),e.hij(" ",e.lcZ(14,19,"lang_cms_common_confirm_btn")," "))}function oi(n,s){1&n&&(e.TgZ(0,"div")(1,"div",18)(2,"div",19)(3,"span",20),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}const ii=function(n){return[n]},ri=function(){return{user_click:"true"}};function Jt(n,s){1&n&&(e.TgZ(0,"div",23)(1,"div",24),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",25)(5,"div",26)(6,"a",27),e.ALo(7,"localize"),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_mat_khau_moi_cua_ban_da_duoc_kich_hoat_thanh_cong")," "),e.xp6(4),e.Q6J("routerLink",e.VKq(10,ii,e.lcZ(7,6,"/auth/login")))("queryParams",e.DdM(12,ri)),e.xp6(2),e.Oqu(e.lcZ(9,8,"lang_auto_dang_nhap_tai_khoan")))}function ai(n,s){if(1&n&&(e.TgZ(0,"div",23)(1,"div",28),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.lnq(" ",e.lcZ(3,3,"lang_auto_da_co_loi_trong_qua_trinh_doi_mat_khau"),": ",e.lcZ(4,5,t.hasErrorMessage),"",e.lcZ(5,7,"lang_auto__vui_long_thu_lai_sau")," ")}}function zt(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Jt,10,13,"div",21),e.YNc(2,ai,6,9,"ng-template",null,22,e.W1O),e.qZA()),2&n){const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.hasErrorMessage)("ngIfElse",t)}}let io=(()=>{class n extends R.Q{constructor(t,o,r){super(o),this.baseApiService=t,this.commonService=o,this.smsService=r,this.form=new u.nJ({}),this.is_mobile=/Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.is_mobile_ios=/webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),this.hasErrorMessage="",this.step=1}ignoreRequest(){this.baseApiService.redirectLoginByRole("")}confirmPassword(){var t;this.initStatusObj();var r={secret:null!==(t=this.commonService.getMyQueryParam("secret"))&&void 0!==t?t:""};this.step=2,this.smsService.apiSmsConfirmPassFromEmailPost(r).subscribe(l=>{var _;1==l.success?this.successStatusObj():(this.stopStatusObj(),this.hasErrorMessage=null!==(_=l.message)&&void 0!==_?_:"lang_core_invalid_data")})}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x._),e.Y36(L.v),e.Y36(F.tr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password-email"]],features:[e.qOj],decls:18,vars:7,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],["class","col-md-12",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],[1,"sms-info","alert","alert-warning","text-justify"],[1,"d-flex","justify-content-around","mt-3"],["mat-raised-button","",2,"width","45%","margin-right","15px",3,"click"],["mat-raised-button","","color","warn",2,"width","45%",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],["class","col-sm-12",4,"ngIf","ngIfElse"],["errorChangePass",""],[1,"col-sm-12"],[1,"sms-info","alert","alert-success"],[1,"text-center","mt-3"],[1,"mb-1"],[3,"routerLink","queryParams"],[1,"sms-info","alert","alert-danger"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"span",9),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",10)(13,"div"),e.YNc(14,Bt,15,21,"div",11),e.qZA(),e.YNc(15,oi,6,3,"div",12),e.YNc(16,zt,4,2,"div",12),e.qZA()()(),e._UZ(17,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(9),e.Oqu(e.lcZ(11,5,"lang_auto_doi_mat_khau_moi")),e.xp6(4),e.Q6J("ngIf",1==o.step),e.xp6(1),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading&&2==o.step))},dependencies:[I.yS,C.O5,u._Y,u.JL,Q.lW,u.sg,D.lO,y.bT],styles:['#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),n})();var gt=h(15867),We=h(98937),si=h(24096);let pt=(()=>{class n{get windowRef(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var ci=h(34782);const Yt=["verifyCode"];function Ht(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_so_dien_thoai_phai_la_so_va_10_ky_tu")))}function li(n,s){if(1&n&&(e.TgZ(0,"div",38),e.YNc(1,Ht,3,3,"div",35),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.getErrorType("phone","required")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength")||t.getErrorType("phone","pattern"))}}function Vt(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"label",39),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function ro(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",40),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"b",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.resendCode())}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()}2&n&&(e.xp6(1),e.hij("",e.lcZ(2,2,"lang_auto_khong_nhan_duoc_ma_xac_thuc")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"lang_auto_gui_lai")))}function di(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",41),e._uU(2,"\xa0"),e.qZA())}const Kt=function(n){return{"margin-left":n}};let ui=(()=>{class n extends R.Q{constructor(t,o,r,l,_,f,v){super(o),this.formBuilder=t,this.commonService=o,this.window=r,this.baseApiService=l,this.userInfoService=_,this.redirectService=f,this.browserStorageService=v,this.subscriptions=new si.w,this.form=new u.nJ({}),this.confirm_type="forgot_password",this.isVerifying=!1,this.smsSent=!1,this.timeOut=60,this.captchaWidgetId="",this.isLoading=!0,this.app=(0,gt.ZF)(oe.N[`firebaseConfig_${this.firebaseApp}`],"confirm_account"),this.getAuthApp().useDeviceLanguage()}getInitApp(){return this.app}getAuthApp(){return(0,We.v0)(this.app)}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,o){var r,l;return!(null===(r=this.form.controls[t].errors)||void 0===r||!r[o])&&(null===(l=this.form.controls[t].errors)||void 0===l?void 0:l[o])}get firebaseApp(){var t;return null!==(t=this.commonService.getMyQueryParam("app_name"))&&void 0!==t?t:""}get returnUrl(){var t;return null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""}getConfirmType(){var t;return null!==(t=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==t?t:""}skipVerifyPhone(){var t,o=Math.round((new Date).getTime()/1e3);if(this.browserStorageService.saveSimpleStorage("skip_verify_phone",o.toString()),this.baseApiService.redirectLoginByRole(""),"confirm_phone_register"==this.getConfirmType())this.commonService.myNavigation("/admin/student/manage-class/0");else{let l=null!==(t=this.getMyQueryParam("return_url"))&&void 0!==t?t:"";this.commonService.myNavigation(l)}}handleConfirmUsage(){const t=this.form.value.phone;let o=this.getConfirmType();if(""!=t)switch(o){case"forgot_password":this.commonService.gaEvent("confirm_event_forgot_password"),this.userInfoService.apiUserInfoCheckPhoneExistsGet(t).subscribe(r=>{1==r.success?this.sendLoginCode("+84"+t.slice(1)):(this.showErrorSnack("lang_auto_so_diem_thoai_chua_ton_tai_tren_he_thong"),this.reRenderCaptcha())});break;case"change_phone":this.commonService.gaEvent("confirm_event_change_phone"),this.userInfoService.apiUserInfoCheckPhoneExistsGet(t).subscribe(r=>{1!=r.success?this.sendLoginCode("+84"+t.slice(1)):(this.showErrorSnack("lang_auto_so_diem_thoai_chua_ton_tai_tren_he_thong"),this.reRenderCaptcha())});break;default:this.commonService.gaEvent("confirm_event_confirm_phone"),this.userInfoService.apiUserInfoCheckUpdatePhoneExistsGet(t).subscribe(r=>{1!=r.success?this.sendLoginCode("+84"+t.slice(1)):(this.showErrorSnack("lang_auto_so_diem_thoai_chua_ton_tai_tren_he_thong"),this.reRenderCaptcha())})}else this.commonService.snackError("lang_auto_vui_long_nhap_so_dien_thoai",""),this.reRenderCaptcha()}sendLoginCode(t){const o=this.windowRef.recaptchaVerifier;(0,We.$g)(this.getAuthApp(),t,o).then(r=>{this.windowRef.confirmationResult=r,this.smsSent=!0,this.timeOut=60,this.countDownTime()}).catch(r=>{console.log(r),"auth/quota-exceeded"==r.code?this.userInfoService.apiUserInfoFirebaseOverQuotaGet(this.firebaseApp).subscribe(l=>{1==l.success?this.userInfoService.apiUserInfoGetFirebaseConfigGet().subscribe(_=>{var f,v,A,E,j;if(1==_.success)if((null===(f=null==_?void 0:_.data)||void 0===f?void 0:f.app)!==this.firebaseApp){var z=this.commonService.getMyQueryParam("interval_app");if(z&&z!=(null===(v=null==_?void 0:_.data)||void 0===v?void 0:v.app)){z=z||(null!==(E=null===(A=null==_?void 0:_.data)||void 0===A?void 0:A.app)&&void 0!==E?E:"");let M=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(j=null==_?void 0:_.data)||void 0===j?void 0:j.app)+"&interval_app="+z;window.location.href=M.toString()}else this.showErrorSnack("OUT OF QUOTA FIREBASE, CONTACT ADMIN")}else this.showErrorSnack("OUT OF QUOTA FIREBASE, CONTACT ADMIN");else this.showErrorSnack("lang_auto_khong_lay_duoc_thong_tin_FirebaseApp")}):this.showErrorSnack("lang_auto_khong_danh_dau_duoc_firebase_het_quoata")}):(this.commonService.gaEvent("confirm_event_error_send_code"),this.smsSent=!1,this.showErrorSnack("lang_auto_co_loi_xay_ra_split_lang"+r.code))})}verify_code(t){this.windowRef.confirmationResult?(this.isVerifying=!0,this.windowRef.confirmationResult.confirm(t).then(o=>{this.isVerifying=!1;const r=o.user;let l=this.getConfirmType();"forgot_password"===l?this.commonService.myNavigationWithQueryString("/auth/set_new_password","?app_name="+this.firebaseApp+"&token="+encodeURIComponent(r.accessToken)):this.userInfoService.apiUserInfoUpdatePhoneOrPasswordByFirebasePost({firebaseToken:r.accessToken,password:"",appName:this.firebaseApp}).subscribe(f=>{1==f.success?(this.showSuccessSnack("lang_auto_cap_nhat_so_dien_thoai_thanh_cong"),"confirm_phone_register"==l?this.commonService.myNavigation("/admin/student/manage-class/0"):this.baseApiService.redirectLoginByRole("")):this.showErrorSnack("lang_auto_co_loi_xay_ra_split_lang"+f.message)})}).catch(o=>{console.log(o),this.isVerifying=!1,this.commonService.gaEvent("confirm_event_error_verify_code"),this.showErrorSnack("lang_auto_co_loi_xay_ra_split_lang"+o.code)})):(this.isVerifying=!1,this.showErrorSnack("lang_auto_ma_xac_thuc_khong_dung_vui_long_kiem_tra_lai"))}resendCode(){var t;this.reRenderCaptcha(),null===(t=document.getElementById("recaptcha-container"))||void 0===t||t.click()}countDownTime(){void 0!==this.myCountDown&&clearInterval(this.myCountDown),this.myCountDown=window.setInterval(()=>{this.timeOut>0&&this.timeOut--},1e3)}initForm(){this.form=this.formBuilder.group({phone:["",[u.kI.required,u.kI.minLength(10),u.kI.maxLength(10),u.kI.pattern(/^[0-9]*$/)]]})}handleClickLogout(){"forgot_password"==this.confirm_type||"change_phone"==this.confirm_type?this.baseApiService.redirectLoginByRole(""):(this.baseApiService.logout(),this.redirectService.redirectSimpleLogin())}reRenderCaptcha(){}handleEnterVerify(t,o){"Enter"==t.key&&(this.commonService.gaEvent("confirm_event_verify_code_by_press_enter"),this.verify_code(o))}ngOnInit(){this.initForm();let t=this.getConfirmType();switch(this.confirm_type=this.getConfirmType(),"forgot_password"!=t&&this.userInfoService.apiUserInfoInfoGet().subscribe(o=>{var r,l,_;1==o.success?1==(null===(r=null==o?void 0:o.new_user)||void 0===r?void 0:r.isVerifyPhone)?"change_phone"!=t&&this.baseApiService.redirectLoginByRole(""):(null===(l=null==o?void 0:o.new_user)||void 0===l?void 0:l.phone)&&(null===(_=null==o?void 0:o.new_user)||void 0===_?void 0:_.phone.length)<=10?this.form.setValue({phone:""}):(this.form.setValue({phone:""}),console.log("enter phone plz")):this.showErrorSnack(o.message?"lang_auto_co_loi_xay_ra_split_lang"+o.message:"")}),t){case"forgot_password":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"});break;case"change_phone":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_change_phone_title",description:"lang_cms_auth_confirm_change_phone_description",image:"lang_cms_test_image"});break;default:this.commonService.translateMetaData({title:"lang_cms_auth_confirm_confirm_phone_title",description:"lang_cms_auth_confirm_confirm_phone_description",image:"lang_cms_test_image"})}super.ngOnInit()}ngAfterViewInit(){if(this.windowRef=this.window.windowRef,this.windowRef.recaptchaVerifier=new We.lI("recaptcha-container",{size:"invisible",callback:()=>{this.handleConfirmUsage()}},this.getAuthApp()),this.windowRef.recaptchaVerifier.render().then(t=>{this.windowRef.recaptchaWidgetId=t}),this.verifyCode&&""!=this.verifyCode.nativeElement.value){let t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.addEventListener("keyup",o=>this.handleEnterVerify(o,t))}}ngOnDestroy(){if(clearInterval(this.myCountDown),this.verifyCode){let t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.removeEventListener("keyup",o=>this.handleEnterVerify(o,t))}super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.QS),e.Y36(L.v),e.Y36(pt),e.Y36(x._),e.Y36(F.$C),e.Y36(Ke.V),e.Y36(ci.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-account"]],viewQuery:function(t,o){if(1&t&&e.Gf(Yt,5),2&t){let r;e.iGM(r=e.CRH())&&(o.verifyCode=r.first)}},features:[e._Bn([pt]),e.qOj],decls:68,vars:48,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],["id","verify_wrap"],["id","enter_phone_area",3,"ngStyle"],["id","enter_phone_wrap"],[1,"form-horizontal",3,"formGroup"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["id","phoneInput","type","text","formControlName","phone","name","phone","autocomplete","off",1,"form-control",3,"placeholder"],["phoneInput",""],["class","alert alert-danger",4,"ngIf"],["id","recaptcha-container","color","primary","mat-raised-button","",3,"disabled"],[1,"mt-3","text-center"],[1,"clickable",3,"click"],["class","form-group",4,"ngIf"],["id","verify_area",1,"form-group"],[1,"sms-info"],[2,"text-align","right","font-size","12px","margin-bottom","3px"],["class","mb-2 mt-2 resend-code",4,"ngIf"],["type","string","autocomplete","off",1,"form-control",3,"placeholder"],["verifyCode",""],[1,"input-group-append","ml-1"],["id","buttonVerify","mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[1,"text-center","mt-3"],[1,"text-normal","clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],[1,"mb-2","mt-2","resend-code"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._UZ(8,"img",8),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",9),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"mytranslate"),e.qZA()(),e.TgZ(14,"div",10)(15,"div")(16,"div",11)(17,"div",12)(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16)(22,"div",17)(23,"div",18)(24,"span",19)(25,"mat-icon"),e._uU(26,"phone_outlined"),e.qZA()()(),e._UZ(27,"input",20,21),e.ALo(29,"mytranslate"),e.qZA(),e.YNc(30,li,2,1,"div",22),e.TgZ(31,"button",23),e._uU(32),e.ALo(33,"mytranslate"),e.qZA(),e.TgZ(34,"div",24)(35,"a",25),e.NdJ("click",function(){return o.skipVerifyPhone()}),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()()()()(),e.YNc(38,Vt,4,3,"div",26),e.qZA()(),e.TgZ(39,"div",27)(40,"div",16)(41,"div",28),e._uU(42),e.ALo(43,"mytranslate"),e.TgZ(44,"b"),e._uU(45),e.qZA(),e._uU(46),e.ALo(47,"mytranslate"),e.qZA(),e.TgZ(48,"div",29),e._uU(49),e.qZA(),e.YNc(50,ro,6,6,"div",30),e.TgZ(51,"div",17),e._UZ(52,"input",31,32),e.ALo(54,"mytranslate"),e.TgZ(55,"div",33)(56,"button",34),e.NdJ("click",function(){e.CHM(r);const _=e.MAs(53);return e.KtG(o.verify_code(_.value))}),e.YNc(57,di,3,0,"span",35),e._uU(58),e.ALo(59,"mytranslate"),e.qZA()()()()()(),e._UZ(60,"hr"),e.TgZ(61,"div",36)(62,"a",37),e.NdJ("click",function(){return o.handleClickLogout()}),e._uU(63),e.ALo(64,"mytranslate"),e.ALo(65,"mytranslate"),e.ALo(66,"mytranslate"),e.qZA()()()()()(),e._UZ(67,"div",3),e.qZA()()()}if(2&t){const r=e.MAs(53);e.xp6(8),e.Q6J("src",e.lcZ(9,20,"azota_assets/images/logo.svg"),e.LSH),e.xp6(3),e.hij(" ","change_phone"==o.confirm_type?e.lcZ(12,22,"lang_auto_doi_so_diem_thoai_moi"):e.lcZ(13,24,"lang_auto_xac_thu_so_diem_thoai_cua_ban")," "),e.xp6(6),e.Q6J("ngStyle",e.VKq(46,Kt,o.smsSent?"-100%":"0")),e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(8),e.s9C("placeholder",e.lcZ(29,26,"lang_auto_nhap_so_dien_thoai_moi")),e.xp6(3),e.Q6J("ngIf",o.form.controls.phone.invalid&&(o.form.controls.phone.dirty||o.form.controls.phone.touched)),e.xp6(1),e.Q6J("disabled",o.form.invalid),e.xp6(1),e.Oqu(e.lcZ(33,28,"lang_auto_tiep_tuc")),e.xp6(4),e.Oqu(e.lcZ(37,30,"lang_auto_bo_qua")),e.xp6(2),e.Q6J("ngIf",o.statusObj.errorMessage),e.xp6(4),e.hij(" ",e.lcZ(43,32,"lang_auto_mot_tin_nhan_chua_ma_xac_thuc_vua_duoc_gui_toi_so_dien_thoai")," "),e.xp6(3),e.Oqu(o.form.value.phone),e.xp6(1),e.hij("",e.lcZ(47,34,"lang_auto__vui_long_nhap_ma_nay_vao_o_duoi_day_roi_an_xac_thuc")," "),e.xp6(3),e.hij("",o.timeOut," s"),e.xp6(1),e.Q6J("ngIf",0==o.timeOut),e.xp6(2),e.s9C("placeholder",e.lcZ(54,36,"lang_auto_ma_xac_thuc")),e.xp6(4),e.Q6J("disabled",""==r.value||o.isVerifying),e.xp6(1),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.hij("",e.lcZ(59,38,"lang_auto_xac_thuc")," "),e.xp6(5),e.hij(" ","forgot_password"==o.confirm_type?e.lcZ(64,40,"lang_auto_dang_nhap_tai_khoan"):"change_phone"==o.confirm_type?e.lcZ(65,42,"lang_auto_quay_lai_man_hinh_chinh"):e.lcZ(66,44,"lang_auto_dang_xuat")," ")}},dependencies:[C.O5,C.PC,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,u.sg,u.u,y.bT,y.BI],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}"]}),n})();function _i(n,s){if(1&n&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15),e._UZ(3,"div",16)(4,"div",16)(5,"div",16),e.qZA()()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngClass",1==t.step_by_step?"active":t.step_by_step>1?"active pro":""),e.xp6(1),e.Q6J("ngClass",2==t.step_by_step?"active":t.step_by_step>2?"active pro":""),e.xp6(1),e.Q6J("ngClass",3==t.step_by_step?"active":t.step_by_step>3?"active pro":"")}}function gi(n,s){1&n&&(e.TgZ(0,"div")(1,"div",17)(2,"div",18)(3,"span",19),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function pi(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_email_hoac_so_dien_thoai")," "))}function hi(n,s){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,pi,3,3,"div",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("emailOrPhone","required"))}}function Wt(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_mat_khau_phai_dai_toi_thieu_la_6")," "))}function mi(n,s){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,Wt,3,3,"div",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function $t(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_mat_khau_khong_trung_khop")," "))}function fi(n,s){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,$t,3,3,"div",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("repassword","confirm_pass"))}}function Xt(n,s){if(1&n&&(e.TgZ(0,"div",20)(1,"label",42),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function vi(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",43),e._uU(2,"\xa0"),e.qZA())}const Ue=function(n){return[n]};function yi(n,s){1&n&&(e.TgZ(0,"div",5)(1,"a",44),e.ALo(2,"localize"),e.TgZ(3,"span",45)(4,"mat-icon",46),e._uU(5,"center_focus_strong"),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("routerLink",e.VKq(6,Ue,e.lcZ(2,2,"/auth/confirm_forgot_password_qr"))),e.xp6(5),e.hij(" ",e.lcZ(7,4,"lang_auto_su_dung_ma_qr_quen_mat_khau")," "))}const ao=function(){return{user_click:"true"}};function en(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",20)(2,"div",21)(3,"div",22),e._UZ(4,"input",23),e.ALo(5,"mytranslate"),e.TgZ(6,"div",24)(7,"span",25)(8,"mat-icon",26),e._uU(9,"mail "),e.qZA(),e._uU(10,"/"),e.TgZ(11,"mat-icon",26),e._uU(12,"phone"),e.qZA()()()(),e.YNc(13,hi,2,1,"div",27),e.qZA()(),e.TgZ(14,"div",20)(15,"div",21)(16,"div",22),e._UZ(17,"input",28),e.ALo(18,"mytranslate"),e.TgZ(19,"div",24)(20,"span",29)(21,"mat-icon"),e._uU(22,"lock"),e.qZA()()()(),e.YNc(23,mi,2,1,"div",27),e.qZA()(),e.TgZ(24,"div",20)(25,"div",21)(26,"div",22),e._UZ(27,"input",30),e.ALo(28,"mytranslate"),e.TgZ(29,"div",24)(30,"span",29)(31,"mat-icon"),e._uU(32,"lock"),e.qZA()()()(),e.YNc(33,fi,2,1,"div",27),e.qZA()(),e.YNc(34,Xt,4,3,"div",31),e.TgZ(35,"div",20)(36,"div",21)(37,"div",32)(38,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changePassword())}),e.YNc(39,vi,3,0,"span",12),e._uU(40),e.ALo(41,"mytranslate"),e.qZA(),e.TgZ(42,"div",34)(43,"span",35),e._uU(44),e.ALo(45,"mytranslate"),e.qZA()(),e.YNc(46,yi,8,8,"div",36),e.qZA()()(),e._UZ(47,"hr"),e.TgZ(48,"div",37)(49,"div",38)(50,"a",39),e._uU(51),e.ALo(52,"mytranslate"),e.qZA()(),e.TgZ(53,"div")(54,"a",40),e.ALo(55,"localize"),e._uU(56),e.ALo(57,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,16,"lang_auto_email_hoac_so_dien_thoai")),e.xp6(9),e.Q6J("ngIf",t.form.controls.emailOrPhone.invalid&&(t.form.controls.emailOrPhone.dirty||t.form.controls.emailOrPhone.touched)),e.xp6(4),e.s9C("placeholder",e.lcZ(18,18,"lang_auto_mat_khau_moi")),e.xp6(6),e.Q6J("ngIf",t.form.controls.password.invalid&&t.form.controls.password.dirty),e.xp6(4),e.s9C("placeholder",e.lcZ(28,20,"lang_auto_nhap_lai_mat_khau_moi")),e.xp6(6),e.Q6J("ngIf",t.getErrorType("repassword","confirm_pass")&&t.form.controls.repassword.touched),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.form.invalid||t.statusObj.loading||0!=t.getErrorType("repassword","confirm_pass")),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij("",e.lcZ(41,22,"lang_auto_tiep_tuc")," "),e.xp6(4),e.Oqu(e.lcZ(45,24,"lang_auto_hoac")),e.xp6(2),e.Q6J("ngIf",!t.isOnApp),e.xp6(5),e.Oqu(e.lcZ(52,26,"lang_auto_huong_dan_doi_mat_khau_tren_azota")),e.xp6(3),e.Q6J("routerLink",e.VKq(32,Ue,e.lcZ(55,28,"/auth/login")))("queryParams",e.DdM(34,ao)),e.xp6(2),e.Oqu(e.lcZ(57,30,"lang_auto_dang_nhap_tai_khoan"))}}function Dr(n,s){if(1&n&&(e.TgZ(0,"div",50)(1,"a"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.uIk("href","sms:"+t.phone_send+"?body=MK "+t.response_change_pass.otp,e.LSH),e.xp6(1),e.Oqu(e.lcZ(3,2,"lang_auto__click_vao_day_de_gui_ngay__brackets"))}}function jr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeStepByNext())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_tiep_tuc")," "))}function bi(n,s){if(1&n&&(e.TgZ(0,"div",54)(1,"div",55),e._UZ(2,"span",43),e.qZA(),e.TgZ(3,"div",56),e._uU(4),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(t.currentMessage)}}function tn(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",21)(2,"div",47),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"strong"),e._uU(6),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"div",48)(10,"strong"),e._uU(11),e.qZA(),e._uU(12),e.ALo(13,"mytranslate"),e.TgZ(14,"strong"),e._uU(15),e.qZA()(),e.YNc(16,Dr,4,4,"div",49),e.TgZ(17,"div",50),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"div",50),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"div",22),e.YNc(24,jr,3,3,"button",51),e.YNc(25,bi,5,1,"div",52),e.qZA()()()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,11,"lang_auto_thong_tin_mat_khau_moi_cua_ban_da_duoc_ghi_nhan_de_kich_hoat_mat_khau_vua_tao_vui_long_su_dung_so_dien_thoai")," "),e.xp6(3),e.Oqu(t.data_change_pass.phone),e.xp6(1),e.hij(" ",e.lcZ(8,13,"lang_auto_va_soan_tin_nhan"),": "),e.xp6(4),e.hij("MK ",t.response_change_pass.otp,""),e.xp6(1),e.hij(" ",e.lcZ(13,15,"lang_auto_gui")," "),e.xp6(3),e.Oqu(t.phone_send),e.xp6(1),e.Q6J("ngIf",t.is_mobile),e.xp6(2),e.hij(' "',e.lcZ(19,17,"lang_auto_cuoc_phi_tin_nhan_duoc_tinh_theo_gia_cuoc_phi_thong_thuong_cua_nha_mang"),'" '),e.xp6(3),e.hij(" ",e.lcZ(22,19,"lang_auto_sau_khi_gui_tin_nhan_vui_long_bam_nut_ben_duoi_de_tiep_tuc")," "),e.xp6(3),e.Q6J("ngIf",2==t.step_by_step),e.xp6(1),e.Q6J("ngIf",3==t.step_by_step)}}function so(n,s){1&n&&(e.TgZ(0,"div")(1,"div",21)(2,"div",47),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",37)(6,"div",38)(7,"a",57),e.ALo(8,"localize"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div")(12,"a",58),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,5,"lang_auto_mat_khau_moi_cua_ban_da_duoc_kich_hoat_thanh_cong")," "),e.xp6(4),e.Q6J("routerLink",e.VKq(13,Ue,e.lcZ(8,7,"/auth/login")))("queryParams",e.DdM(15,ao)),e.xp6(2),e.Oqu(e.lcZ(10,9,"lang_auto_dang_nhap_tai_khoan")),e.xp6(4),e.Oqu(e.lcZ(14,11,"lang_auto_huong_dan_doi_mat_khau_tren_azota")))}function Ai(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",21)(2,"div",47),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"b"),e._uU(6),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"div",37)(10,"div",38)(11,"a",57),e.ALo(12,"localize"),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div")(16,"a",58),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,7,"lang_auto_he_thong_da_gui_email_toi_dia_chi")," "),e.xp6(3),e.Oqu(t.form.controls.emailOrPhone.value),e.xp6(1),e.hij("",e.lcZ(8,9,"lang_auto__vui_long_kiem_tra_email_va_an_vao_duong_link_xac_nhan_de_viec_thay_doi_mat_khau_thanh_cong")," "),e.xp6(4),e.Q6J("routerLink",e.VKq(17,Ue,e.lcZ(12,11,"/auth/login")))("queryParams",e.DdM(19,ao)),e.xp6(2),e.Oqu(e.lcZ(14,13,"lang_auto_dang_nhap_tai_khoan")),e.xp6(4),e.Oqu(e.lcZ(18,15,"lang_auto_huong_dan_doi_mat_khau_tren_azota"))}}let xi=(()=>{class n extends R.Q{constructor(t,o,r,l){super(o),this.formBuilder=t,this.commonService=o,this.smsService=r,this.mobileWebviewService=l,this.form=new u.nJ({}),this.step_by_step=1,this.currentMessage="",this.phone_send="",this.is_mobile=/Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.is_mobile_ios=/webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),this.isOnApp=!1,this.response_change_pass={},this.data_change_pass={}}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,o){var r,l;return"repassword"===t&&"confirm_pass"===o?this.form.controls.repassword.value!=this.form.controls.password.value:!(null===(r=this.form.controls[t].errors)||void 0===r||!r[o])&&(null===(l=this.form.controls[t].errors)||void 0===l?void 0:l[o])}randomPhone(t){if(t.includes(",")){let o=t.split(",");return o[this.commonService.getRandomNumber(0,o.length-1)]}return t}changePassword(){if(this.form.valid){this.initStatusObj();var t=this.commonService.getFormObj(this.form),o={phone:t.emailOrPhone,password:t.password};this.smsService.apiSmsChangePassPost(o).subscribe(r=>{var l,_;1==r.success?(this.successStatusObj(),t.emailOrPhone.includes("@")?this.step_by_step=5:(this.step_by_step=2,this.response_change_pass=null!==(l=r.data)&&void 0!==l?l:{},this.data_change_pass=o)):this.errorStatusObj(null!==(_=r.message)&&void 0!==_?_:"")})}}getPhone(){this.initStatusObj(),this.smsService.apiSmsGetPhoneGet().subscribe(t=>{var o,r,l;1==t.success?(this.successStatusObj(),this.phone_send=this.randomPhone(null!==(r=null===(o=t.data)||void 0===o?void 0:o.phone)&&void 0!==r?r:"")):this.errorStatusObj(null!==(l=t.message)&&void 0!==l?l:"",!0)})}changeStepByNext(){this.initStatusObj(),this.commonService.getTranslate("lang_auto_dang_xu_ly_du_lieu").subscribe(t=>{this.currentMessage=t}),this.step_by_step=3,this.loop_check=window.setInterval(()=>{this.smsService.apiSmsCheckStatusGet(this.data_change_pass.phone).subscribe(t=>{var o,r;1==t.success?(this.successStatusObj(),1==(null===(o=t.data)||void 0===o?void 0:o.status)&&(this.step_by_step=4,clearInterval(this.loop_check))):(this.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:""),this.commonService.getTranslate("lang_auto_he_thong_tam_thoi_khong_the_xu_ly_vui_long_thu_lai_sau").subscribe(l=>{this.currentMessage=l}),clearInterval(this.loop_check))})},1e3)}ngOnInit(){this.isOnApp=this.commonService.isMobileWebview(),this.form=this.formBuilder.group({emailOrPhone:["",[u.kI.required]],password:["",[u.kI.required,u.kI.minLength(6)]],repassword:["",[u.kI.required,u.kI.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.getPhone(),super.ngOnInit(),this.mobileWebviewService.sendComponentLoaded("confirm_forgot_password")}ngOnDestroy(){this.loop_check&&clearInterval(this.loop_check),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.QS),e.Y36(L.v),e.Y36(F.tr),e.Y36($n.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password"]],features:[e.qOj],decls:20,vars:10,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["class","row m-0",4,"ngIf"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"row","m-0"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","formControlName","emailOrPhone","autocomplete","new-phone",1,"form-control",3,"placeholder"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text",2,"padding-left","0.35rem","padding-right","0.35rem"],[2,"width","15px","height","15px","font-size","15px"],["class","alert alert-danger",4,"ngIf"],["type","password","formControlName","password","autocomplete","new-password",1,"form-control",3,"placeholder"],["id","basic-addon3",1,"input-group-text"],["type","password","formControlName","repassword","autocomplete","new-repassword",1,"form-control",3,"placeholder"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[1,"text-center","mt-2"],[1,"text-mute"],["class","text-center",4,"ngIf"],[1,"text-center","mt-3"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-outline-primary","mt-2","w-100",3,"routerLink"],[1,"link-center"],[1,"mr-1"],[1,"sms-info"],[2,"text-align","right","font-size","15px","margin","10px 0","text-align","center"],["class","sms-info text-center mb-3",4,"ngIf"],[1,"sms-info","text-center","mb-3"],["class","btn btn-block","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"click"],[1,"loading"],[1,"icon"],[1,"text"],[3,"routerLink","queryParams"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank",1,"text-normal"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.qZA(),e.YNc(7,_i,6,3,"div",7),e.TgZ(8,"div",8)(9,"div",9)(10,"span",10),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",11),e.YNc(14,gi,6,3,"div",12),e.YNc(15,en,58,35,"div",12),e.YNc(16,tn,26,21,"div",12),e.YNc(17,so,15,16,"div",12),e.YNc(18,Ai,19,20,"div",12),e.qZA()()(),e._UZ(19,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("ngIf",!o.statusObj.loading),e.xp6(4),e.Oqu(e.lcZ(12,8,"lang_auto_doi_mat_khau_moi")),e.xp6(3),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading&&1==o.step_by_step),e.xp6(1),e.Q6J("ngIf",1!=o.statusObj.loading&&(2==o.step_by_step||3==o.step_by_step)),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading&&4==o.step_by_step),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading&&5==o.step_by_step))},dependencies:[I.yS,C.mk,C.O5,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,u.sg,u.u,D.lO,y.bT],styles:['#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),n})();function Ci(n,s){1&n&&(e.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function wi(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_mat_khau_phai_dai_toi_thieu_la_6")," "))}function nn(n,s){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,wi,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function co(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"label",28),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function Ti(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",29),e._uU(2,"\xa0"),e.qZA())}const lo=function(n){return[n]},Si=function(){return{user_click:"true"}};function le(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17),e._UZ(4,"input",18),e.ALo(5,"mytranslate"),e.TgZ(6,"div",19)(7,"span",20)(8,"mat-icon"),e._uU(9,"lock"),e.qZA()()()(),e.YNc(10,nn,2,1,"div",21),e.qZA()(),e.YNc(11,co,4,3,"div",22),e.TgZ(12,"div",15)(13,"div",16)(14,"div",23)(15,"button",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changePassword())}),e.YNc(16,Ti,3,0,"span",11),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()()(),e._UZ(19,"hr"),e.TgZ(20,"div",25)(21,"a",26),e.ALo(22,"localize"),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,9,"lang_auto_mat_khau_moi")),e.xp6(6),e.Q6J("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.form.invalid||t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij("",e.lcZ(18,11,"lang_auto_doi_mat_khau")," "),e.xp6(4),e.Q6J("routerLink",e.VKq(17,lo,e.lcZ(22,13,"/auth/login")))("queryParams",e.DdM(19,Si)),e.xp6(2),e.Oqu(e.lcZ(24,15,"lang_auto_dang_nhap_tai_khoan"))}}let Zi=(()=>{class n extends R.Q{constructor(t,o,r,l){super(o),this.formBuilder=t,this.commonService=o,this.baseApiService=r,this.userInfoService=l,this.form=new u.nJ({})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,o){var r,l;return!(null===(r=this.form.controls[t].errors)||void 0===r||!r[o])&&(null===(l=this.form.controls[t].errors)||void 0===l?void 0:l[o])}changePassword(){if(this.form.valid){var t=this.commonService.getFormObj(this.form),o=this.commonService.getMyQueryParam("token");this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoConfirmForgotPasswordGet(o,t.password).subscribe(r=>{var l;1==r.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(l=r.message)&&void 0!==l?l:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[u.kI.required,u.kI.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.QS),e.Y36(L.v),e.Y36(x._),e.Y36(F.$C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password-admin"]],features:[e.qOj],decls:17,vars:9,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","formControlName","password","autocomplete","new-password",1,"form-control",3,"placeholder"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.ALo(7,"convertCdn"),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"span",9),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",10),e.YNc(14,Ci,6,3,"div",11),e.YNc(15,le,25,20,"div",11),e.qZA()()(),e._UZ(16,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("src",e.lcZ(7,5,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Oqu(e.lcZ(12,7,"lang_auto_doi_mat_khau_moi")),e.xp6(3),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading))},dependencies:[I.yS,C.O5,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,u.sg,u.u,D.lO,y.bT,y.BI],encapsulation:2}),n})();var ht=h(39105),B=h(15861);const Oi=(()=>{class n{constructor(t,o,r,l,_){this._legacyCanvasSize=n.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),r&&"object"==typeof r?this._onDecode=o:(console.warn(r||l||_?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=o),this._onDecodeError=(o="object"==typeof r?r:{}).onDecodeError||("function"==typeof r?r:this._onDecodeError),this._calculateScanRegion=o.calculateScanRegion||("function"==typeof l?l:this._calculateScanRegion),this._preferredCamera=o.preferredCamera||_||this._preferredCamera,this._legacyCanvasSize="number"==typeof r?r:"number"==typeof l?l:this._legacyCanvasSize,this._maxScansPerSecond=o.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let f=!1;if(t.hidden&&(t.hidden=!1,f=!0),document.body.contains(t)||(document.body.appendChild(t),f=!0),r=t.parentElement,o.highlightScanRegion||o.highlightCodeOutline){if(l=!!o.overlay,this.$overlay=o.overlay||document.createElement("div"),(_=this.$overlay.style).position="absolute",_.display="none",_.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!l&&o.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(v){}r.insertBefore(this.$overlay,this.$video.nextSibling)}o.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let v=window.getComputedStyle(t);"none"===v.display&&(t.style.setProperty("display","block","important"),f=!0),"visible"!==v.visibility&&(t.style.setProperty("visibility","visible","important"),f=!0),f&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=n.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,B.Z)(function*(){try{return!!(yield n.listCameras(!1)).length}catch(t){return!1}})()}static listCameras(t=!1){return(0,B.Z)(function*(){if(!navigator.mediaDevices)return[];let r,o=function(){var l=(0,B.Z)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(_=>"videoinput"===_.kind)});return function(){return l.apply(this,arguments)}}();try{t&&(yield o()).every(l=>!l.label)&&(r=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(l){}try{return(yield o()).map((l,_)=>({id:l.deviceId,label:l.label||(0===_?"Default Camera":`Camera ${_+1}`)}))}finally{r&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),n._stopVideoStream(r))}})()}hasFlash(){var t=this;return(0,B.Z)(function*(){let o;try{if(t.$video.srcObject){if(!(t.$video.srcObject instanceof MediaStream))return!1;o=t.$video.srcObject}else o=(yield t._getCameraStream()).stream;return"torch"in o.getVideoTracks()[0].getSettings()}catch(r){return!1}finally{o&&o!==t.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),n._stopVideoStream(o))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var t=this;return(0,B.Z)(function*(){t._flashOn?yield t.turnFlashOff():yield t.turnFlashOn()})()}turnFlashOn(){var t=this;return(0,B.Z)(function*(){if(!t._flashOn&&!t._destroyed&&(t._flashOn=!0,t._active&&!t._paused))try{if(!(yield t.hasFlash()))throw"No flash available";yield t.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(o){throw t._flashOn=!1,o}})()}turnFlashOff(){var t=this;return(0,B.Z)(function*(){t._flashOn&&(t._flashOn=!1,yield t._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),n._postWorkerMessage(this._qrEnginePromise,"close")}start(){var t=this;return(0,B.Z)(function*(){if(t._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!t._active||t._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),t._active=!0,!document.hidden))if(t._paused=!1,t.$video.srcObject)yield t.$video.play();else try{let{stream:o,facingMode:r}=yield t._getCameraStream();!t._active||t._paused?n._stopVideoStream(o):(t._setVideoMirror(r),t.$video.srcObject=o,yield t.$video.play(),t._flashOn&&(t._flashOn=!1,t.turnFlashOn().catch(()=>{})))}catch(o){if(!t._paused)throw t._active=!1,o}})()}stop(){this.pause(),this._active=!1}pause(t=!1){var o=this;return(0,B.Z)(function*(){if(o._paused=!0,!o._active)return!0;o.$video.pause(),o.$overlay&&(o.$overlay.style.display="none");let r=()=>{o.$video.srcObject instanceof MediaStream&&(n._stopVideoStream(o.$video.srcObject),o.$video.srcObject=null)};return t?(r(),!0):(yield new Promise(l=>setTimeout(l,300)),!!o._paused&&(r(),!0))})()}setCamera(t){var o=this;return(0,B.Z)(function*(){t!==o._preferredCamera&&(o._preferredCamera=t,yield o._restartVideoStream())})()}static scanImage(t,o,r,l,_=!1,f=!1){return(0,B.Z)(function*(){let v,A=!1;o&&("scanRegion"in o||"qrEngine"in o||"canvas"in o||"disallowCanvasResizing"in o||"alsoTryWithoutScanRegion"in o||"returnDetailedScanResult"in o)?(v=o.scanRegion,r=o.qrEngine,l=o.canvas,_=o.disallowCanvasResizing||!1,f=o.alsoTryWithoutScanRegion||!1,A=!0):console.warn(o||r||l||_||f?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),o=!!r;try{let E,j,z;if([r,E]=yield Promise.all([r||n.createQrEngine(),n._loadImage(t)]),[l,j]=n._drawToCanvas(E,v,l,_),r instanceof Worker){let M=r;o||n._postWorkerMessageSync(M,"inversionMode","both"),z=yield new Promise((X,be)=>{let Ae,xe,fe,He=-1;xe=ne=>{ne.data.id===He&&(M.removeEventListener("message",xe),M.removeEventListener("error",fe),clearTimeout(Ae),null!==ne.data.data?X({data:ne.data.data,cornerPoints:n._convertPoints(ne.data.cornerPoints,v)}):be(n.NO_QR_CODE_FOUND))},fe=ne=>{M.removeEventListener("message",xe),M.removeEventListener("error",fe),clearTimeout(Ae),be("Scanner error: "+(ne?ne.message||ne:"Unknown Error"))},M.addEventListener("message",xe),M.addEventListener("error",fe),Ae=setTimeout(()=>fe("timeout"),1e4);let Y=j.getImageData(0,0,l.width,l.height);He=n._postWorkerMessageSync(M,"decode",Y,[Y.data.buffer])})}else z=yield Promise.race([new Promise((M,X)=>window.setTimeout(()=>X("Scanner error: timeout"),1e4)),(0,B.Z)(function*(){try{var[M]=yield r.detect(l);if(!M)throw n.NO_QR_CODE_FOUND;return{data:M.rawValue,cornerPoints:n._convertPoints(M.cornerPoints,v)}}catch(X){if(/not implemented|service unavailable/.test(M=X.message||X))return n._disableBarcodeDetector=!0,n.scanImage(t,{scanRegion:v,canvas:l,disallowCanvasResizing:_,alsoTryWithoutScanRegion:f});throw`Scanner error: ${M}`}})()]);return A?z:z.data}catch(E){if(!v||!f)throw E;let j=yield n.scanImage(t,{qrEngine:r,canvas:l,disallowCanvasResizing:_});return A?j:j.data}finally{o||n._postWorkerMessage(r,"close")}})()}setGrayscaleWeights(t,o,r,l=!0){n._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:o,blue:r,useIntegerApproximation:l})}setInversionMode(t){n._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static createQrEngine(t){return(0,B.Z)(function*(){return t&&console.warn("Specifying a worker path is not required and not supported anymore."),!n._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(yield BarcodeDetector.getSupportedFormats()).includes("qr_code")?new BarcodeDetector({formats:["qr_code"]}):h.e(920).then(h.bind(h,36920)).then(o=>o.createWorker())})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let o=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-o)/2),y:Math.round((t.videoHeight-o)/2),width:o,height:o,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,o=t.videoWidth,r=t.videoHeight,l=t.offsetWidth,_=t.offsetHeight,f=t.offsetLeft,v=t.offsetTop,A=window.getComputedStyle(t),E=A.objectFit,j=o/r,z=l/_;switch(E){case"none":var M=o,X=r;break;case"fill":M=l,X=_;break;default:("cover"===E?j>z:j<z)?M=(X=_)*j:X=(M=l)/j,"scale-down"===E&&(M=Math.min(M,o),X=Math.min(X,r))}var[be,Ae]=A.objectPosition.split(" ").map((fe,He)=>{const Y=parseFloat(fe);return fe.endsWith("%")?(He?_-X:l-M)*Y/100:Y});z=this._scanRegion.height||r,E=this._scanRegion.x||0;var xe=this._scanRegion.y||0;(j=this.$overlay.style).width=(A=this._scanRegion.width||o)/o*M+"px",j.height=z/r*X+"px",j.top=`${v+Ae+xe/r*X}px`,r=/scaleX\(-1\)/.test(t.style.transform),j.left=`${f+(r?l-be-M:be)+(r?o-E-A:E)/o*M}px`,j.transform=t.style.transform}})}static _convertPoints(t,o){if(!o)return t;let r=o.x||0,l=o.y||0,_=o.width&&o.downScaledWidth?o.width/o.downScaledWidth:1;o=o.height&&o.downScaledHeight?o.height/o.downScaledHeight:1;for(let f of t)f.x=f.x*_+r,f.y=f.y*o+l;return t}_scanFrame(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,B.Z)(function*(){if(!(1>=t.$video.readyState)){var o=Date.now()-t._lastScanTimestamp,r=1e3/t._maxScansPerSecond;o<r&&(yield new Promise(_=>setTimeout(_,r-o))),t._lastScanTimestamp=Date.now();try{var l=yield n.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas})}catch(_){if(!t._active)return;t._onDecodeError(_)}!n._disableBarcodeDetector||(yield t._qrEnginePromise)instanceof Worker||(t._qrEnginePromise=n.createQrEngine()),l?(t._onDecode?t._onDecode(l):t._legacyOnDecode&&t._legacyOnDecode(l.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox",`${t._scanRegion.x||0} ${t._scanRegion.y||0} ${t._scanRegion.width||t.$video.videoWidth} ${t._scanRegion.height||t.$video.videoHeight}`),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",l.cornerPoints.map(({x:_,y:f})=>`${_},${f}`).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(()=>t.$codeOutlineHighlight.style.display="none",100))}t._scanFrame()}))}_onDecodeError(t){t!==n.NO_QR_CODE_FOUND&&console.log(t)}_getCameraStream(){var t=this;return(0,B.Z)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let o=/^(environment|user)$/.test(t._preferredCamera)?"facingMode":"deviceId",r=[{width:{min:1024}},{width:{min:768}},{}],l=r.map(_=>Object.assign({},_,{[o]:{exact:t._preferredCamera}}));for(let _ of[...l,...r])try{let f=yield navigator.mediaDevices.getUserMedia({video:_,audio:!1});return{stream:f,facingMode:t._getFacingMode(f)||(_.facingMode?t._preferredCamera:"environment"===t._preferredCamera?"user":"environment")}}catch(f){}throw"Camera not found."})()}_restartVideoStream(){var t=this;return(0,B.Z)(function*(){let o=t._paused;(yield t.pause(!0))&&!o&&t._active&&(yield t.start())})()}static _stopVideoStream(t){for(let o of t.getTracks())o.stop(),t.removeTrack(o)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,o,r,l=!1){r=r||document.createElement("canvas");let _=o&&o.x?o.x:0,f=o&&o.y?o.y:0,v=o&&o.width?o.width:t.videoWidth||t.width,A=o&&o.height?o.height:t.videoHeight||t.height;return l||(l=o&&o.downScaledWidth?o.downScaledWidth:v,o=o&&o.downScaledHeight?o.downScaledHeight:A,r.width!==l&&(r.width=l),r.height!==o&&(r.height=o)),(o=r.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,o.drawImage(t,_,f,v,A,0,0,r.width,r.height),[r,o]}static _loadImage(t){return(0,B.Z)(function*(){if(t instanceof Image)return yield n._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let o=new Image;o.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return yield n._awaitImageLoad(o),o}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(o.src)}}})()}static _awaitImageLoad(t){return(0,B.Z)(function*(){t.complete&&0!==t.naturalWidth||(yield new Promise((o,r)=>{let l=_=>{t.removeEventListener("load",l),t.removeEventListener("error",l),_ instanceof ErrorEvent?r("Image load error"):o()};t.addEventListener("load",l),t.addEventListener("error",l)}))})()}static _postWorkerMessage(t,o,r,l){return(0,B.Z)(function*(){return n._postWorkerMessageSync(yield t,o,r,l)})()}static _postWorkerMessageSync(t,o,r,l){if(!(t instanceof Worker))return-1;let _=n._workerMessageId++;return t.postMessage({id:_,type:o,data:r},l),_}}return n.DEFAULT_CANVAS_SIZE=400,n.NO_QR_CODE_FOUND="No QR code found",n._disableBarcodeDetector=!1,n._workerMessageId=0,n})();var on=h(591),rn=h(10550),Ii=h(35171);function an(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"zxing-scanner",7),e.NdJ("deviceChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.currentDevice=r)})("scanSuccess",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.onCodeResult(r))})("permissionResponse",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.onHasPermission(r))})("camerasFound",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.onCamerasFound(r))})("torchCompatible",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.onTorchCompatible(r))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("torch",t.torchEnabled)("device",t.currentDevice)("tryHarder",t.tryHarder)("formats",t.formatsEnabled)}}function Pi(n,s){if(1&n&&(e.TgZ(0,"span",8),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("( ",t.contentResult," )")}}let uo=(()=>{class n extends R.Q{constructor(t){super(t),this.commonService=t,this.outContentScan=new e.vpe,this.outNotCamAllow=new e.vpe,this.isShowDebugLog=!1,this.isShowScanner=!1,this.availableDevices=[],this.currentDevice=void 0,this.hasDevices=!1,this.hasPermission=!1,this.qrResultString="",this.torchEnabled=!1,this.torchAvailable$=new on.X(!1),this.tryHarder=!1,this.formatsEnabled=[ht.BarcodeFormat.CODE_128,ht.BarcodeFormat.DATA_MATRIX,ht.BarcodeFormat.EAN_13,ht.BarcodeFormat.QR_CODE],this.deviceCamSelect=0,this.contentResult=null,this.isShowLog=!1,this.snd=new Audio,this.snd=new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=")}clearResult(){this.qrResultString=""}onCamerasFound(t){this.availableDevices=t,this.hasDevices=Boolean(t&&t.length)}onCodeResult(t){this.qrResultString=t,rn.g.isEncode(t)?this.switchChangeContent(rn.g.decode(t)):this.switchChangeContent(null)}onDeviceSelectChange(t){const o=this.availableDevices.find(r=>r.deviceId===t);this.currentDevice=o||void 0}onHasPermission(t){this.hasPermission=t}onTorchCompatible(t){this.torchAvailable$.next(t||!1)}toggleTorch(){this.torchEnabled=!this.torchEnabled}toggleTryHarder(){this.tryHarder=!this.tryHarder}switchVideoScan(){this.deviceCamSelect++,this.deviceCamSelect>=this.availableDevices.length&&(this.deviceCamSelect=0),this.currentDevice=this.availableDevices[this.deviceCamSelect]}unInitSscanCam(){this.isShowScanner=!1}initVideoScan(){this.isShowScanner=!0}initScanCam(){this.isShowScanner=!0}onFileSelected(t){let l=t.target.files;if(null!=l&&l.length){var _=l[0];if(!_)return;this.scanProcessSelectFile(t,_,0)}else console.log("jel"),this.switchChangeContent(null)}scanProcessSelectFile(t,o,r){Oi.scanImage(o,{returnDetailedScanResult:!0}).then(l=>{this.thatLog("onFileSelected: 0 "+JSON.stringify(l)),t.target.value="";var _=l.data;this.thatLog("onFileSelected: 1 "+_),rn.g.isEncode(_)?this.switchChangeContent(rn.g.decode(_)):this.switchChangeContent(null)}).catch(l=>{r>=2?(t.target.value="",this.thatLog("onFileSelected: 2 "+JSON.stringify(l)),this.switchChangeContent(null)):this.scanProcessSelectFile(t,o,r++)})}pauseScanQrcode(){this.isShowScanner=!1}switchChangeContent(t){this.contentResult=t,this.pauseScanQrcode(),this.beep(),navigator&&navigator.vibrate&&navigator.vibrate(200),this.thatLog("switchChangeContent: "+t),this.outContentScan.emit(this.contentResult)}thatLog(t){!0===this.isShowDebugLog&&console.log("__AZT SCAN__ :: "+t)}beep(){this.snd&&this.snd.play()}ngOnDestroy(){this.unInitSscanCam(),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-scan-qrcode"]],outputs:{outContentScan:"outContentScan",outNotCamAllow:"outNotCamAllow"},features:[e.qOj],decls:11,vars:5,consts:[[1,"scan__card-video"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible",4,"ngIf"],[1,"text-center","mt-3"],["class","text-center",4,"ngIf"],["type","file","name","fileQrcode",2,"display","none",3,"change"],["formChoseFile",""],[1,"link-center",3,"click"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible"],[1,"text-center"]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.YNc(1,an,1,4,"zxing-scanner",1),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,Pi,2,1,"span",3),e.TgZ(4,"input",4,5),e.NdJ("change",function(_){return o.onFileSelected(_)}),e.qZA(),e.TgZ(6,"a",6),e.NdJ("click",function(){e.CHM(r);const _=e.MAs(5);return e.KtG(_.click())}),e.TgZ(7,"mat-icon"),e._uU(8,"upload"),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()}2&t&&(e.xp6(1),e.Q6J("ngIf",o.isShowScanner),e.xp6(2),e.Q6J("ngIf",o.isShowLog),e.xp6(6),e.hij(" ",e.lcZ(10,3,"lang_auto_tai_len_ma_co_san"),""))},dependencies:[C.O5,S.Hw,Ii.S,y.bT],styles:[".scan__card-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.scan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}.scan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.scan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.431372549);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})();const sn=["aztScanQrcode"];function Br(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_mat_khau_phai_dai_toi_thieu_la_6")," "))}function Jr(n,s){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,Br,3,3,"div",34),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function zr(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_mat_khau_khong_trung_khop")," "))}function Yr(n,s){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,zr,3,3,"div",34),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("repassword","confirm_pass"))}}function mt(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",37),e._uU(2,"\xa0"),e.qZA())}function Hr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",38)(1,"p",39),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.reloadProcessForgot())}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_khong_the_xac_nhan_yeu_cau_doi_mat_khau_ma_qrcode_va_so_dien_thoai_dang_nhap_khong_trung_khop_vui_long_thu_lai"),""),e.xp6(3),e.Oqu(e.lcZ(6,4,"lang_auto_thu_lai")))}function Li(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25),e._UZ(4,"input",26),e.ALo(5,"mytranslate"),e.TgZ(6,"div",27)(7,"span",28)(8,"mat-icon"),e._uU(9,"qr_code"),e.qZA()()()()()(),e.TgZ(10,"div",23)(11,"div",24)(12,"div",25),e._UZ(13,"input",29),e.ALo(14,"mytranslate"),e.TgZ(15,"div",27)(16,"span",28)(17,"mat-icon"),e._uU(18,"lock"),e.qZA()()()(),e.YNc(19,Jr,2,1,"div",30),e.qZA()(),e.TgZ(20,"div",23)(21,"div",24)(22,"div",25),e._UZ(23,"input",31),e.ALo(24,"mytranslate"),e.TgZ(25,"div",27)(26,"span",28)(27,"mat-icon"),e._uU(28,"lock"),e.qZA()()()(),e.YNc(29,Yr,2,1,"div",30),e.qZA()(),e.TgZ(30,"div",23)(31,"div",24)(32,"div",32)(33,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changePassword())}),e.YNc(34,mt,3,0,"span",34),e._uU(35),e.ALo(36,"mytranslate"),e.qZA()()(),e.YNc(37,Hr,7,6,"div",35),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,10,"lang_auto_ma_xac_thuc")),e.uIk("disabled",!0),e.xp6(9),e.s9C("placeholder",e.lcZ(14,12,"lang_auto_mat_khau_moi")),e.xp6(6),e.Q6J("ngIf",t.form.controls.password.invalid&&t.form.controls.password.dirty),e.xp6(4),e.s9C("placeholder",e.lcZ(24,14,"lang_auto_nhap_lai_mat_khau_moi")),e.xp6(6),e.Q6J("ngIf",0!=t.getErrorType("repassword","confirm_pass")&&t.form.controls.repassword.touched),e.xp6(4),e.Q6J("disabled",t.statusObj.errorMessage||t.form.invalid||t.statusObj.loading||0!=t.getErrorType("repassword","confirm_pass")),e.xp6(1),e.Q6J("ngIf",!0===t.statusObj.loading),e.xp6(1),e.hij("",e.lcZ(36,16,"lang_auto_tiep_tuc")," "),e.xp6(2),e.Q6J("ngIf",t.statusObj.errorMessage)}}const Ei=function(n){return{"d-none":n}},Mi=function(n){return[n]},qi=function(){return{user_click:"true"}};let Ui=(()=>{class n extends R.Q{constructor(t,o,r,l){super(t),this.commonService=t,this.localStorageObjetct=o,this.formBuilder=r,this.qrCodeForgotPasswordService=l,this.form=new u.nJ({}),this.stepByStep=0,this.sussScanNextConf=!1}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,o){var r,l;return"repassword"===t&&"confirm_pass"===o?this.form.controls.repassword.value!=this.form.controls.password.value:!(null===(r=this.form.controls[t].errors)||void 0===r||!r[o])&&(null===(l=this.form.controls[t].errors)||void 0===l?void 0:l[o])}reloadProcessForgot(){this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam(),this.stepByStep=0,this.form.reset(),this.initStatusObj(),this.sussScanNextConf=!1}outContentScan(t){null!==t?this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordAnonymousCheckForgotPasswordQrCodePost({hash:t}).subscribe(r=>{var l;1==r.success&&1==(null===(l=null==r?void 0:r.data)||void 0===l?void 0:l.status)?(this.stepByStep=1,this.form.controls.hash.setValue(t),this.sussScanNextConf=!0):(this.showErrorSnack("lang_auto_phan_tich_ma_qrcode_that_bai_vui_long_thu_lai"),this.reloadProcessForgot())}):(this.showErrorSnack("lang_auto_phan_tich_ma_qrcode_that_bai_vui_long_thu_lai"),this.reloadProcessForgot())}changePassword(){this.initStatusObj();var t=this.commonService.getFormObj(this.form);this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordChangePasswordByQrcodePost({hash:t.hash,password:t.password}).subscribe(r=>{0!=r.success?(this.localStorageObjetct.clearAllCache(),this.successStatusObj("lang_auto_dat_lai_mat_khau_thanh_cong",!0),this.commonService.myNavigation("/auth/forgot_password_susscess")):(this.errorStatusObj("lang_auto_yeu_cau_doi_mat_khau_that_bai",!0),this.successStatusObj())})}ngAfterViewInit(){setTimeout(()=>{this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam()},0)}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.form=this.formBuilder.group({hash:["",[u.kI.required]],password:["",[u.kI.required,u.kI.minLength(6)]],repassword:["",[u.kI.required,u.kI.minLength(6)]]}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v),e.Y36(qe.L),e.Y36(u.QS),e.Y36(F.qY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password"]],viewQuery:function(t,o){if(1&t&&e.Gf(sn,5),2&t){let r;e.iGM(r=e.CRH())&&(o.elementaztScanQrcode=r.first)}},features:[e.qOj],decls:37,vars:27,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"loginscan_scanmode_cam",3,"ngClass"],[1,"text-center","mb-3"],[3,"outContentScan"],["aztScanQrcode",""],["class","loginscan_scanmode_conf",4,"ngIf"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal","mt-1",3,"routerLink","queryParams"],[1,"loginscan_scanmode_conf"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","formControlName","hash",1,"form-control",3,"placeholder"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","formControlName","password","autocomplete","new-password",1,"form-control",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],["type","password","formControlName","repassword","autocomplete","new-repassword",1,"form-control",3,"placeholder"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[4,"ngIf"],["class","col-sm-12 mt-2",4,"ngIf"],[1,"alert","alert-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-sm-12","mt-2"],[1,"text-danger"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8),e._UZ(9,"div",9)(10,"div",9)(11,"div",9),e.qZA()(),e.TgZ(12,"div",10)(13,"div",11)(14,"span",12),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()(),e.TgZ(17,"div",13)(18,"div",14)(19,"div",15),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"azt-scan-qrcode",16,17),e.NdJ("outContentScan",function(l){return o.outContentScan(l)}),e.qZA()(),e.YNc(24,Li,38,18,"div",18),e.qZA(),e._UZ(25,"hr"),e.TgZ(26,"div",15)(27,"div",19)(28,"a",20),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div")(32,"a",21),e.ALo(33,"localize"),e._uU(34),e.ALo(35,"mytranslate"),e.qZA()()()()(),e._UZ(36,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(8),e.Q6J("ngClass",o.stepByStep+2==1?"active":o.stepByStep+2>1?"active pro":""),e.xp6(1),e.Q6J("ngClass",o.stepByStep+2==2?"active":o.stepByStep+2>2?"active pro":""),e.xp6(1),e.Q6J("ngClass",o.stepByStep+2==3?"active":o.stepByStep+2>3?"active pro":""),e.xp6(4),e.Oqu(e.lcZ(16,12,"lang_auto_doi_mat_khau_moi_bang_ma_qrcode")),e.xp6(3),e.Q6J("ngClass",e.VKq(22,Ei,o.sussScanNextConf)),e.xp6(2),e.hij(" ",e.lcZ(21,14,"lang_auto_di_chuyen_camera_toi_ma_qrcode")," "),e.xp6(4),e.Q6J("ngIf",o.sussScanNextConf),e.xp6(5),e.Oqu(e.lcZ(30,16,"lang_auto_huong_dan_doi_mat_khau_tren_azota")),e.xp6(3),e.Q6J("routerLink",e.VKq(24,Mi,e.lcZ(33,18,"/auth/login")))("queryParams",e.DdM(26,qi)),e.xp6(2),e.Oqu(e.lcZ(35,20,"lang_auto_dang_nhap_tai_khoan")))},dependencies:[I.yS,C.mk,C.O5,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,u.sg,u.u,uo,D.lO,y.bT],styles:['#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),n})();var $e=h(48966),Ri=h(17852),Qi=h(58496);function Fi(n,s){if(1&n&&(e.TgZ(0,"div",3)(1,"mat-icon",4),e._uU(2,"access_time"),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.stringDuration,"")}}let _o=(()=>{class n extends R.Q{constructor(){super(...arguments),this.content="",this.width=0,this.height=0,this.expired=0,this.expiredAction=new e.vpe,this.startDuration=0,this.isDuration=!1,this.stringDuration="__ : __"}ngAfterViewInit(){setTimeout(()=>{this.reInitComponent()},0)}reInitComponent(){this.bindUrlToQrCode(),0!=this.expired&&(this.isDuration=!0,this.startDuration=Math.floor(Date.now()/1e3),this.initLoopDuration())}initLoopDuration(){this.loopDuration=setInterval(()=>{var t=Math.floor(Date.now()/1e3),r=this.expired-(t-this.startDuration);if(r<0)this.clearLoopDuration(),this.qrcode.clear(),this.expiredAction.emit();else{var l=Math.floor(r/60),_=r-60*l;this.stringDuration=(l<10?"0"+l:""+l)+" : "+(_<10?"0"+_:""+_)}},1e3)}clearLoopDuration(){this.loopDuration&&clearInterval(this.loopDuration)}bindUrlToQrCode(){this.qrcode=this.commonService.createObjectQrcode(this.content,this.width,this.height,"text",!0,"image-qrcode-created"),this.qrcode._oDrawing._elCanvas.style.width="100%",this.qrcode._oDrawing._elCanvas.style.opacity=".9"}downloadQrcode(t){t||(t="azota-qr"),t=this.getTimeSaveQrcode()+"_"+t+".jpg";var o=this.createFrameQrcodeSaveLocal(this.qrcode._oDrawing._elCanvas),r=document.createElement("a");document.body.appendChild(r),r.setAttribute("href",o),r.setAttribute("download",t),r.click()}getTimeSaveQrcode(){var t=new Date,o=t.getMonth()+1,r=t.getDate();return[t.getFullYear(),(o>9?"":"0")+o,(r>9?"":"0")+r].join("_")}createFrameQrcodeSaveLocal(t){var o=document.createElement("canvas");const r=o.getContext("2d");return o.width=420,o.height=420,r&&(r.fillStyle="white",r.fillRect(0,0,o.width,o.height),r.drawImage(t,0,0,t.width,t.height,Math.floor((o.height-t.height)/2),(o.width-t.width)/2,t.width,t.height)),o.toDataURL("image/jpeg",1)}}return n.\u0275fac=function(){let s;return function(o){return(s||(s=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-create-qr-image"]],inputs:{content:"content",width:"width",height:"height",expired:"expired"},outputs:{expiredAction:"expiredAction"},features:[e.qOj],decls:3,vars:1,consts:[[1,"qr-scan-box"],["class","duration",4,"ngIf"],["id","image-qrcode-created"],[1,"duration"],[2,"font-size","18px"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Fi,4,1,"div",1),e._UZ(2,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",o.isDuration))},dependencies:[C.O5,S.Hw],styles:[".qr-scan-box[_ngcontent-%COMP%]{border:1px solid #e0e0e0}#image-qrcode-created[_ngcontent-%COMP%]{margin:20px}.duration[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;font-weight:500}"]}),n})();const ft=["elementCreateQr"];function ke(n,s){1&n&&e._UZ(0,"header-backend",13),2&n&&e.Q6J("headerTitle","")("headerBackToLink","/admin/dashboard")}function Ni(n,s){1&n&&e._UZ(0,"header-frontend",14),2&n&&e.Q6J("headerTitle","")("headerBackToLink","/student/dashboard/0")}function Di(n,s){if(1&n&&(e.TgZ(0,"div",15),e._UZ(1,"azt-create-qr-image",16,17),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("content",t.contentQrcodeHash)("width",350)("height",350)("expired",0)}}function ji(n,s){if(1&n&&(e.TgZ(0,"div",18)(1,"div",19)(2,"mat-icon"),e._uU(3,"visibility_off"),e.qZA()(),e.TgZ(4,"div",20),e._uU(5),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",t.notiContentString," ")}}function Bi(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadQrCode())}),e.TgZ(2,"mat-icon",22),e._uU(3,"download"),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_tai_xuong_ma"),""))}function Ji(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.openDialog())}),e.TgZ(2,"mat-icon",22),e._uU(3,"add_photo_alternate"),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_tao_ma_quen_mat_khau_moi"),""))}let zi=(()=>{class n extends R.Q{constructor(t,o,r,l){super(t),this.commonService=t,this.dialog=o,this.activeRoute=r,this.qrCodeForgotPasswordService=l,this.notiContentString="",this.contentQrcodeHash="",this.role=0}checkQrThisMe(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCheckForgotPasswordQrCodeGet().subscribe(t=>{var o;1==t.success?0!=(null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.status)?this.commonService.getTranslate("lang_auto_ma_qrcode_da_ton_tai_ban_khong_the_xem_ma_hien_tai_tao_ma_moi_trong_truong_hop_ban_da_mat_ma_qrcode").subscribe(r=>{this.notiContentString=r}):this.commonService.getTranslate("lang_auto_ban_chua_tao_ma_qrcode_dung_trong_truong_hop_quen_mat_khau_vui_long_tao_ma_qrcode_moi").subscribe(r=>{this.notiContentString=r}):this.showErrorSnack("lang_auto_khong_co_ket_qua_phan_hoi")})}createQrcodeForgot(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCreateForgotPasswordQrCodeGet().subscribe(t=>{var o,r;1==t.success?this.contentQrcodeHash=null!==(r=null===(o=t.data)||void 0===o?void 0:o.qrCode)&&void 0!==r?r:"":this.showErrorSnack("lang_auto_khong_co_ket_qua_phan_hoi")})}openDialog(){this.dialog.open(Vr).afterClosed().subscribe(o=>{!0===o&&this.createQrcodeForgot()})}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-forgot")}ngOnInit(){var t,o=null!==(t=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==t?t:"0";this.role=parseInt(o,10),this.checkQrThisMe(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v),e.Y36($e.uw),e.Y36(I.gz),e.Y36(F.qY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gzip-tool"]],viewQuery:function(t,o){if(1&t&&e.Gf(ft,5),2&t){let r;e.iGM(r=e.CRH())&&(o.elementCreateQr=r.first)}},features:[e.qOj],decls:17,vars:9,consts:[["class","mb-3",3,"headerTitle","headerBackToLink",4,"ngIf"],[3,"headerTitle","headerBackToLink",4,"ngIf"],[1,"container","component-wrap","centerBoth","hasBg","mt-3"],[1,"card","mb-5"],[1,"card-body"],[1,"text-center"],[1,"card-content","mt-3","text-center"],[1,"card-center-row"],[1,"qrcode-block","card-center-row"],[1,"qrcode-block-fake","card-center-row"],["class","qrcode-block-real",4,"ngIf"],["class","qrcode-block-fake-content",4,"ngIf"],["class","card-center-row",4,"ngIf"],[1,"mb-3",3,"headerTitle","headerBackToLink"],[3,"headerTitle","headerBackToLink"],[1,"qrcode-block-real"],[3,"content","width","height","expired"],["elementCreateQr",""],[1,"qrcode-block-fake-content"],[1,"qrcode-block-icon"],[1,"qrcode-block-note"],[1,"card-center-row","btn","btn-outline-primary",3,"click"],[2,"margin-right","10px"]],template:function(t,o){1&t&&(e.YNc(0,ke,1,2,"header-backend",0),e.YNc(1,Ni,1,2,"header-frontend",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5)(6,"b"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9),e.YNc(13,Di,3,4,"div",10),e.YNc(14,ji,6,1,"div",11),e.qZA()()(),e.YNc(15,Bi,6,3,"div",12),e.YNc(16,Ji,6,3,"div",12),e.qZA()()()()),2&t&&(e.Q6J("ngIf",0==o.role),e.xp6(1),e.Q6J("ngIf",1==o.role),e.xp6(6),e.Oqu(e.lcZ(8,7,"lang_auto_trinh_tao_ma_qrcode_quen_mat_khau")),e.xp6(6),e.Q6J("ngIf",o.contentQrcodeHash),e.xp6(1),e.Q6J("ngIf",!o.contentQrcodeHash),e.xp6(1),e.Q6J("ngIf",o.contentQrcodeHash),e.xp6(1),e.Q6J("ngIf",!o.contentQrcodeHash))},dependencies:[C.O5,S.Hw,Ri.p,Qi.d,_o,y.bT],styles:[".card-center-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.qrcode-block[_ngcontent-%COMP%]{padding:10px;border:1px solid #e0e0e0;margin-bottom:20px;max-width:400px;max-height:400px;min-width:300px;min-height:300px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.qrcode-block-fake[_ngcontent-%COMP%]{width:100%;height:100%}.qrcode-block-fake-content[_ngcontent-%COMP%]{padding:10px}.qrcode-block-note[_ngcontent-%COMP%]{line-height:30px}"]}),n})(),Vr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["dialog-conf-content-qrcode-dialog"]],decls:25,vars:28,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-dialog-close","",1,"btn","btn-default","mr-3"],["cdkFocusInitial","",1,"btn","btn-outline-primary",3,"mat-dialog-close"]],template:function(t,o){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.ALo(2,"mytranslate"),e.qZA(),e.TgZ(3,"mat-dialog-content",1)(4,"h3"),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.ALo(14,"mytranslate"),e._UZ(15,"br"),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()(),e.TgZ(18,"mat-dialog-actions",2)(19,"button",3),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"button",4),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,10,"lang_auto_trinh_tao_ma_qrcode_quen_mat_khau")),e.xp6(4),e.lnq("",e.lcZ(6,12,"lang_auto_bam"),' "',e.lcZ(7,14,"lang_auto_xac_nhan"),'" ',e.lcZ(8,16,"lang_auto_dong_nghia_voi_viec_ban_da_hieu_ve_cac_dieu_sau")," "),e.xp6(5),e.hij(" ",e.lcZ(11,18,"lang_auto_1_ma_qrcode_quen_mat_khau_la_duy_nhat_khi_ban_tao_moi_ma_ma_cu_se_khong_con_gia_tri_su_dung")," "),e.xp6(3),e.hij(" ",e.lcZ(14,20,"lang_auto_2_ma_qrcode_quen_mat_khau_la_chia_khoa_vui_long_khong_chia_se_hay_de_nguoi_khac_co_duoc_ma_qrcode_cua_ban")," "),e.xp6(3),e.hij(" ",e.lcZ(17,22,"lang_auto_sau_khi_tao_thanh_cong_vui_long_tai_xuong_ma_qrcode_de_su_dung_cho_muc_dich_quen_mat_khau_sau_nay")," "),e.xp6(4),e.hij(" ",e.lcZ(21,24,"lang_auto_huy")," "),e.xp6(2),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(24,26,"lang_auto_xac_nhan")," "))},dependencies:[$e.ZT,$e.uh,$e.xY,$e.H8,y.bT],encapsulation:2}),n})(),cn=(()=>{class n extends R.Q{constructor(){super(...arguments),this.step_by_step=3}redirectToCreateQrCode(){this.commonService.myNavigation("/auth/create-qr-forgot-pass/0")}redirectToHome(){this.commonService.myNavigation("/admin/dashboard")}}return n.\u0275fac=function(){let s;return function(o){return(s||(s=e.n5z(n)))(o||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password"]],features:[e.qOj],decls:29,vars:15,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"btn-block-center"],[1,"btn","btn-outline-info","w-100","mr-3",3,"click"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8),e._UZ(9,"div",9)(10,"div",9)(11,"div",9),e.qZA()(),e.TgZ(12,"div",10)(13,"div",11)(14,"span",12),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()(),e.TgZ(17,"div",13)(18,"p"),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"div",14)(22,"a",15),e.NdJ("click",function(){return o.redirectToHome()}),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e.TgZ(25,"a",16),e.NdJ("click",function(){return o.redirectToCreateQrCode()}),e._uU(26),e.ALo(27,"mytranslate"),e.qZA()()()()(),e._UZ(28,"div",3),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("ngClass",o.step_by_step+2==1?"active":o.step_by_step+2>1?"active pro":""),e.xp6(1),e.Q6J("ngClass",o.step_by_step+2==2?"active":o.step_by_step+2>2?"active pro":""),e.xp6(1),e.Q6J("ngClass",o.step_by_step+2==3?"active":o.step_by_step+2>3?"active pro":""),e.xp6(4),e.Oqu(e.lcZ(16,7,"lang_auto_doi_mat_khau_moi_thanh_cong")),e.xp6(4),e.Oqu(e.lcZ(20,9,"lang_auto_ban_da_doi_mat_khau_moi_thanh_cong_ma_qrcode_da_su_dung_co_the_su_dung_lai_de_dam_bao_an_toan_ban_nen_tao_lai_ma_qrcode")),e.xp6(4),e.Oqu(e.lcZ(24,11,"lang_auto_bo_qua_va_ve_trang_chu")),e.xp6(3),e.Oqu(e.lcZ(27,13,"lang_auto_tao_lai_ma_qrcode")))},dependencies:[C.mk,y.bT],styles:['#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.btn-block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}']}),n})();var Yi=h(89892);const ln=["elementCreateQr"],Hi=["aztScanQrcode"];function Vi(n,s){1&n&&(e.TgZ(0,"h2",25),e._UZ(1,"img",26),e.ALo(2,"convertCdn"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("src",e.lcZ(2,1,"azota_assets/images/logo.svg"),e.LSH))}function go(n,s){1&n&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_de_dang_nhap_len_thiet_bi_nay_vui_long_tao_ma_de_thiet_bi_da_dang_nhap_quet")))}function Ki(n,s){1&n&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dung_thiet_bi_can_dang_nhap_quet_ma_ben_duoi")))}function po(n,s){if(1&n&&(e.TgZ(0,"div",27),e._UZ(1,"span",28),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.AsE("\xa0",e.lcZ(3,2,"lang_auto_dang_cho_quet_ma_qrcode"),": ",t.nameSessionConfirm,"")}}function Gi(n,s){1&n&&(e.TgZ(0,"div",27),e._UZ(1,"span",28),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.xp6(2),e.hij("\xa0",e.lcZ(3,1,"lang_auto_dang_cho_quet_ma_qrcode"),""))}function Wi(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,3,"lang_auto_xac_nhan_dang_nhap_tai_khoan")),e.xp6(3),e.AsE("",e.lcZ(5,5,"lang_auto_voi_ma_qr_da_phat_hien"),": ",t.nameSessionConfirm,"")}}function $i(n,s){1&n&&(e.TgZ(0,"div"),e._UZ(1,"span",28),e._uU(2,"\xa0 "),e.TgZ(3,"span",36),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"lang_auto_dang_cho_xu_ly")))}function Kr(n,s){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.textResultErr)}}function Re(n,s){if(1&n&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.textResultSuss)}}function ve(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function Xi(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function dn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confContentPendingLogin(1))}),e.YNc(2,ve,3,0,"span",32),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confContentPendingLogin(2))}),e.YNc(6,Xi,3,0,"span",32),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.isLoadingBtn||t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.hij(" ",e.lcZ(4,6,"lang_auto_chap_nhan")," "),e.xp6(2),e.Q6J("disabled",t.isLoadingBtn||t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.hij(" ",e.lcZ(8,8,"lang_auto_tu_choi")," ")}}function er(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",42),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.backScanActionWithIsLogin())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_quay_lai")))}function ho(n,s){if(1&n&&(e.TgZ(0,"div",29)(1,"div",30)(2,"div",31),e.YNc(3,Wi,6,7,"span",32),e.qZA(),e.YNc(4,$i,6,3,"div",32),e.YNc(5,Kr,2,1,"div",33),e.YNc(6,Re,2,1,"div",34),e.YNc(7,dn,9,10,"div",35),e.YNc(8,er,4,3,"div",32),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.nameSessionConfirm),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.Q6J("ngIf",t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.textResultSuss),e.xp6(1),e.Q6J("ngIf",!t.textResultSuss||!t.isConfirmBtn),e.xp6(1),e.Q6J("ngIf",t.isLogin&&!1===t.isLoadingBtn&&!0===t.isConfirmBtn)}}function tr(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.createRequestLoginHashCodeAction())}),e.TgZ(1,"div",47)(2,"div")(3,"mat-icon"),e._uU(4,"sync"),e.qZA()(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"lang_auto_tao_moi_ma")))}function un(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"azt-create-qr-image",48,49),e.NdJ("expiredAction",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.expiredQrcodeAction())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("content",t.contentCreateQrcode)("width",350)("height",350)("expired",t.durationQrcodeExpire)}}function nr(n,s){if(1&n&&(e.TgZ(0,"div",43),e.YNc(1,tr,8,3,"div",44),e.YNc(2,un,2,4,"azt-create-qr-image",45),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!1===t.isLogin&&!t.contentCreateQrcode),e.xp6(1),e.Q6J("ngIf",t.contentCreateQrcode)}}function or(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadQrCode())}),e.TgZ(1,"mat-icon"),e._uU(2,"download"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_tai_xuong_ma"),""))}function ir(n,s){1&n&&(e.TgZ(0,"div",16)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,1,"lang_auto_-_hoac_ban_co_the_upper")," -"))}function Oe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"a",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.switchModeView())}),e.TgZ(2,"span",52)(3,"mat-icon",53),e._uU(4,"center_focus_strong"),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_quet_ma_qr_co_san"),""))}function _n(n,s){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.textResultErr)}}function gn(n,s){if(1&n&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.textResultSuss)}}function mo(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function pn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confContentLogin())}),e.YNc(2,mo,3,0,"span",32),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.reopenScanCamInit())}),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.isLoadingBtn||t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.hij(" ",e.lcZ(4,5,"lang_auto_dang_nhap")," "),e.xp6(2),e.Q6J("disabled",t.isLoadingBtn),e.xp6(1),e.Oqu(e.lcZ(7,7,"lang_auto_thu_lai"))}}function hn(n,s){if(1&n&&(e.TgZ(0,"div",29)(1,"div",30)(2,"div",31),e._uU(3),e.ALo(4,"mytranslate"),e._UZ(5,"br"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.YNc(8,_n,2,1,"div",33),e.YNc(9,gn,2,1,"div",34),e.YNc(10,pn,8,9,"div",35),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"lang_auto_xac_nhan_dang_nhap_tai_khoan")),e.xp6(3),e.Oqu(e.lcZ(7,7,"lang_auto_voi_ma_qr_da_phat_hien")),e.xp6(2),e.Q6J("ngIf",t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.textResultSuss),e.xp6(1),e.Q6J("ngIf",!t.textResultSuss)}}function mn(n,s){1&n&&(e.TgZ(0,"div"),e._UZ(1,"span",28),e._uU(2,"\xa0 "),e.TgZ(3,"span",36),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"lang_auto_dang_cho_xu_ly")))}function rr(n,s){if(1&n&&e._UZ(0,"div",56),2&n){const t=e.oxw(2);e.Q6J("innerHTML",t.textResultErr,e.oJD)}}function fn(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function vn(n,s){if(1&n&&(e.TgZ(0,"button",57),e.YNc(1,fn,3,0,"span",32),e._uU(2),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("disabled",!t.textResultSuss),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.hij(" ",t.textResultSuss," ")}}function ar(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e._UZ(6,"br"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.YNc(9,mn,6,3,"div",32),e.YNc(10,rr,1,1,"div",54),e.TgZ(11,"div",39),e.YNc(12,vn,3,3,"button",55),e.TgZ(13,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.reopenScanCamInit())}),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,8,"lang_auto_dang_nhap_tai_khoan")),e.xp6(3),e.AsE("",e.lcZ(8,10,"lang_auto_voi_ma_qr_da_phat_hien"),": ",t.nameSessionConfirm,""),e.xp6(2),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.Q6J("ngIf",t.textResultErr),e.xp6(2),e.Q6J("ngIf",!t.textResultSuss&&t.isLoadingBtn),e.xp6(1),e.Q6J("disabled",t.isLoadingBtn),e.xp6(1),e.Oqu(e.lcZ(15,12,"lang_auto_thu_lai"))}}const V=function(n){return[n]},sr=function(n){return{return_url:n,user_click:"true"}},Xe=function(n){return{"d-none":n}},cr=function(n){return{return_url:n}};let yn=(()=>{class n extends R.Q{constructor(t,o,r,l,_,f){super(t),this.commonService=t,this.baseApiService=o,this.localStorageObjetct=r,this.activeRoute=l,this.qrCodeLoginService=_,this.redirectService=f,this.returnUrl="",this.isLogin=!1,this.modeShowInit="create",this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.pendingDuration=!1,this.role=0,this.backToLink=""}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}reloadLogin(){this.isLogin&&this.redirectService.redirectToDashboard()}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-login")}switchModeView(){this.modeShowInit="create"===this.modeShowInit?"scan":"create",this.elementaztScanQrcode&&("scan"===this.modeShowInit?(this.elementaztScanQrcode.initScanCam(),this.clearLoopRefLogin(),this.clearLoopPendingLogin()):(this.elementaztScanQrcode.unInitSscanCam(),this.initLoopRefLogin(),this.initPendingLoadingConfirm()))}clearLoopPendingLogin(){this.loopPendingLogin&&clearInterval(this.loopPendingLogin)}clearLoopRefLogin(){this.loopRefCheckQrcodeLogin&&clearInterval(this.loopRefCheckQrcodeLogin)}reopenScanCamInit(){this.textResultErr="",this.textResultSuss="",this.elementaztScanQrcode&&(this.elementaztScanQrcode.initScanCam(),this.sussScanNextConf=!1)}backScanActionWithIsLogin(){this.isLogin&&(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.createQrCodeWithUser())}expiredQrcodeAction(){this.pendingDuration||(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.isLogin?(this.createQrCodeWithUser(),this.commonService.snackError("lang_auto_ma_qrcode_da_het_han_da_tao_ma_qrcode_moi_vui_long_thao_tac_lai")):this.commonService.snackError("lang_auto_ma_qrcode_da_het_han_vui_long_tao_moi_va_thao_tac_lai"))}createQrCodeWithUser(){this.initStatusObj(),this.subscriptions.add(this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeGet().subscribe(t=>{var o,r,l,_;1==t.success?(this.successStatusObj(),this.contentCreateQrcode=null!==(r=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.qrCode)&&void 0!==r?r:"",this.durationQrcodeExpire=null!==(_=null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.duration)&&void 0!==_?_:0,this.initPendingLoadingConfirm()):this.errorStatusObj("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u",!0)}))}outContentScan(t){var o;null!==t?(this.scanQrContent=t,this.sussScanNextConf=!0,this.isLogin||(null===(o=this.elementaztScanQrcode)||void 0===o||o.pauseScanQrcode(),this.isLoadingBtn=!0,this.textResultSuss="",this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeRequestPost({qrCode:this.scanQrContent}).subscribe(l=>{var _,f,v,A;this.isLoadingBtn=!1,console.log(l),1==l.success?(this.isLoadingBtn=!0,this.scanQrContentConfirm=null!==(f=null===(_=null==l?void 0:l.data)||void 0===_?void 0:_.qrCode)&&void 0!==f?f:"",this.nameSessionConfirm=null!==(A=null===(v=null==l?void 0:l.data)||void 0===v?void 0:v.name)&&void 0!==A?A:"",this.textResultSuss="",this.initLoopPendingLogin()):(this.textResultSuss="",this.commonService.getTranslate("lang_auto_ma_qrcode_da_het_han_hoac_ma_qrcode_khong_duoc_tao_boi_tai_khoan_da_dang_nhap_vui_long_tao_lai_ma_moi_va_thu_lai").subscribe(E=>{this.textResultErr=E}))}))):(this.sussScanNextConf=!0,this.commonService.getTranslate("lang_auto_ma_qrcode_da_het_han_hoac_ma_qrcode_khong_duoc_tao_boi_tai_khoan_da_dang_nhap_vui_long_tao_lai_ma_moi_va_thu_lai").subscribe(l=>{this.textResultErr=l}),this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng \u0111\xfang. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",""))}initLoopPendingLogin(){this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginCheckLoginQrCodeRequestConfirmedPost({qrCode:this.scanQrContentConfirm}).subscribe(o=>{var r,l;1==o.success&&(1==(null===(r=o.data)||void 0===r?void 0:r.status)?(this.clearLoopPendingLogin(),this.commonService.gaEvent("sign_in_login_in"),this.isLoadingBtn=!1,this.textResultSuss="",this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng.",!0),this.baseApiService.redirectLoginByRole(null!==(l=this.commonService.getMyQueryParam("return_url"))&&void 0!==l?l:"")):o.data&&2===o.data.status&&(this.clearLoopPendingLogin(),this.isLoadingBtn=!1,this.errorStatusObj("X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",!0),this.commonService.getTranslate("lang_auto_xac_nhan_dang_nhap_that_bai_br_ma_qr_khong_con_hoat_dong_br_vui_long_tao_ma_qrcode_moi_de_dang_nhap_lai").subscribe(_=>{this.textResultErr=_}),this.textResultSuss=""))})},3e3)}initPendingLoadingConfirm(){this.isLogin&&(this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginGetFirstQrCodeLoginRequestGet().subscribe(t=>{var o,r,l,_;1==t.success&&t.data&&""!==t.data.qrCode&&(this.pendingDuration=!0,this.scanQrContentConfirm=null!==(r=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.qrCode)&&void 0!==r?r:"",this.nameSessionConfirm=null!==(_=null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.name)&&void 0!==_?_:"",this.clearLoopPendingLogin())})},3e3))}confContentPendingLogin(t){this.isLogin&&(this.isLoadingBtn=!0,this.qrCodeLoginService.apiQrCodeLoginConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContentConfirm,status:t}).subscribe(r=>{1==r.success?this.textResultSuss=1==t?"X\xe1c nh\u1eadn th\xe0nh c\xf4ng":"T\u1eeb ch\u1ed1i th\xe0nh c\xf4ng":this.commonService.getTranslate("lang_auto_he_thong_khong_phan_hoi_vui_long_tai_lai_trang_de_thu_lai").subscribe(l=>{this.textResultErr=l}),this.isConfirmBtn=!0,this.isLoadingBtn=!1}))}createRequestLoginHashCodeAction(){this.isLogin||this.qrCodeLoginService.apiQrCodeLoginAnonymousCreateLoginQrCodePost().subscribe(t=>{var o,r,l,_,f,v;1==t.success&&(this.contentCreateQrcode=null!==(r=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.qrCode)&&void 0!==r?r:"",this.nameSessionConfirm=null!==(_=null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.name)&&void 0!==_?_:"",this.durationQrcodeExpire=null!==(v=null===(f=null==t?void 0:t.data)||void 0===f?void 0:f.duration)&&void 0!==v?v:0,this.initLoopRefLogin())})}initLoopRefLogin(){0==this.isLogin&&(this.loopRefCheckQrcodeLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginAnonymousCheckLoginQrCodeRequestConfimedPost({qrCode:this.contentCreateQrcode,status:0}).subscribe(o=>{var r,l;1===o.success&&404!=(null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.status)&&(this.commonService.gaEvent("sign_in_login_in"),this.commonService.snackSuccess("lang_auto_dang_nhap_thanh_cong"),this.baseApiService.redirectLoginByRole(null!==(l=this.commonService.getMyQueryParam("return_url"))&&void 0!==l?l:""))})},3e3))}confContentLogin(){this.isLoadingBtn=!0,this.isLogin&&this.qrCodeLoginService.apiQrCodeLoginAnonymousConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContent,status:1}).subscribe(o=>{this.isLoadingBtn=!1,1===o.success?this.commonService.getTranslate("lang_auto_xac_nhan_thanh_cong_phien_dang_nhap_da_duoc_phe_duyet").subscribe(r=>{this.textResultSuss=r}):this.commonService.getTranslate("lang_auto_thiet_bi_da_dang_nhap_hoac_ma_dang_nhap_khong_hop_le_vui_long_kiem_tra_va_thao_tac_lai").subscribe(r=>{this.textResultErr=r})})}ngOnInit(){var t,o=null!==(t=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==t?t:"0";switch(this.role=parseInt(o,10),this.role){case 0:this.backToLink="/admin/dashboard";break;case 1:this.backToLink="/student/dashboard/0";break;case 2:this.backToLink="/auth/login"}this.isLogin=this.baseApiService.isLogin(),this.isLogin&&this.createQrCodeWithUser(),this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.clearLoopRefLogin(),this.clearLoopPendingLogin(),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v),e.Y36(x._),e.Y36(qe.L),e.Y36(I.gz),e.Y36(Yi.A),e.Y36(Ke.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],viewQuery:function(t,o){if(1&t&&(e.Gf(ln,5),e.Gf(Hi,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.elementCreateQr=r.first),e.iGM(r=e.CRH())&&(o.elementaztScanQrcode=r.first)}},features:[e.qOj],decls:42,vars:46,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6","mb-5"],["class","text-center",4,"ngIf"],[1,"card"],[1,"text-center","loginscan__card-header"],[1,"back-btn",2,"font-size","16px","color","#6d6d6d",3,"routerLink","queryParams"],[2,"font-size","16px","color","#6d6d6d","font-weight","500"],[1,"loginscan__card-body"],[1,"loginscan_createmode",3,"ngClass"],["class","text-center mb-3",4,"ngIf"],["class","text-center mb-3 block-inline-center",4,"ngIf"],["class","loginscan_scanmode_conf",4,"ngIf"],["class","loginscan__card-img",4,"ngIf"],[1,"text-center","mt-3"],["class","link-center",3,"click",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[1,"loginscan_scanmode",3,"ngClass"],[1,"text-center","mb-3"],[3,"routerLink","queryParams"],[1,"loginscan_scanmode_cam",3,"ngClass"],[3,"outContentScan"],["aztScanQrcode",""],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],[1,"text-center","mb-3","block-inline-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"loginscan_scanmode_conf"],[1,"loginscan_scanmode_conf--box"],[1,"boxtext"],[4,"ngIf"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336",4,"ngIf"],["class","boxtext-suss","style","font-size: 20px; margin-bottom: 20px; color: #009688",4,"ngIf"],["class","mt-3",4,"ngIf"],[2,"font-size","18px"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336"],[1,"boxtext-suss",2,"font-size","20px","margin-bottom","20px","color","#009688"],[1,"mt-3"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled","click"],["type","button",1,"btn","btn-warning",3,"disabled","click"],["type","button",1,"btn","btn-primary","mr-3",3,"click"],[1,"loginscan__card-img"],["class","box-create-login-img",3,"click",4,"ngIf"],[3,"content","width","height","expired","expiredAction",4,"ngIf"],[1,"box-create-login-img",3,"click"],[1,"box-create-login-content"],[3,"content","width","height","expired","expiredAction"],["elementCreateQr",""],[1,"link-center",3,"click"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"link-center"],[1,"mr-1"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336; line-height: 30px",3,"innerHTML",4,"ngIf"],["type","button","class","btn btn-primary mr-3",3,"disabled",4,"ngIf"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336","line-height","30px",3,"innerHTML"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4),e.YNc(5,Vi,3,3,"h2",5),e.TgZ(6,"div",6)(7,"div",7)(8,"a",8),e.ALo(9,"localize"),e.TgZ(10,"mat-icon"),e._uU(11,"arrow_back"),e.qZA()(),e.TgZ(12,"span",9),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",10)(16,"div",11),e.YNc(17,go,3,3,"div",12),e.YNc(18,Ki,3,3,"div",12),e.YNc(19,po,4,4,"div",13),e.YNc(20,Gi,4,3,"div",13),e.YNc(21,ho,9,6,"div",14),e.YNc(22,nr,3,2,"div",15),e.TgZ(23,"div",16),e.YNc(24,or,5,3,"a",17),e.qZA(),e.YNc(25,ir,4,3,"div",18),e.YNc(26,Oe,7,3,"div",18),e.qZA(),e.TgZ(27,"div",19)(28,"div",20),e._uU(29),e.ALo(30,"mytranslate"),e.TgZ(31,"a",21),e.ALo(32,"localize"),e._uU(33),e.ALo(34,"mytranslate"),e.qZA(),e._uU(35," )"),e.qZA(),e.TgZ(36,"div",22)(37,"azt-scan-qrcode",23,24),e.NdJ("outContentScan",function(l){return o.outContentScan(l)}),e.qZA()(),e.YNc(39,hn,11,9,"div",14),e.YNc(40,ar,16,14,"div",14),e.qZA()()()(),e._UZ(41,"div",3),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",!o.isLogin),e.xp6(3),e.Q6J("routerLink",e.VKq(32,V,e.lcZ(9,22,o.backToLink)))("queryParams",e.VKq(34,sr,o.returnUrl)),e.xp6(5),e.Oqu(e.lcZ(14,24,"lang_auto_dang_nhap_voi_ma_qr_code")),e.xp6(3),e.Q6J("ngClass",e.VKq(36,Xe,"create"!==o.modeShowInit)),e.xp6(1),e.Q6J("ngIf",!o.isLogin),e.xp6(1),e.Q6J("ngIf",o.isLogin),e.xp6(1),e.Q6J("ngIf",!o.isLogin&&o.contentCreateQrcode),e.xp6(1),e.Q6J("ngIf",o.isLogin&&o.contentCreateQrcode&&!o.scanQrContentConfirm),e.xp6(1),e.Q6J("ngIf",o.scanQrContentConfirm&&o.isLogin),e.xp6(1),e.Q6J("ngIf",!o.scanQrContentConfirm),e.xp6(2),e.Q6J("ngIf",o.contentCreateQrcode&&!o.scanQrContentConfirm),e.xp6(1),e.Q6J("ngIf",!o.scanQrContentConfirm),e.xp6(1),e.Q6J("ngIf",!o.scanQrContentConfirm),e.xp6(1),e.Q6J("ngClass",e.VKq(38,Xe,"scan"!==o.modeShowInit)),e.xp6(2),e.hij("",e.lcZ(30,26,"lang_auto_di_chuyen_camera_toi_ma_qrcode_dang_nhap_")," "),e.xp6(2),e.Q6J("routerLink",e.VKq(40,V,e.lcZ(32,28,"/auth/register")))("queryParams",e.VKq(42,cr,o.returnUrl)),e.xp6(2),e.Oqu(e.lcZ(34,30,"lang_auto_huong_dan")),e.xp6(3),e.Q6J("ngClass",e.VKq(44,Xe,!1!==o.sussScanNextConf)),e.xp6(3),e.Q6J("ngIf",!0===o.sussScanNextConf&&o.isLogin),e.xp6(1),e.Q6J("ngIf",!0===o.sussScanNextConf&&!o.isLogin))},dependencies:[I.yS,C.mk,C.O5,S.Hw,_o,uo,D.lO,y.bT,y.BI],styles:[".loginscan__card-header[_ngcontent-%COMP%]{padding:15px;text-transform:uppercase;display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-body[_ngcontent-%COMP%]{padding:15px}.loginscan__card-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.loginscan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.loginscan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.431372549);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.box-create-login-img[_ngcontent-%COMP%]{display:flex;height:100px;background:#f5f5f5;justify-content:center;align-items:center;border:1px solid #e0e0e0;padding:10px;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.box-create-login-img[_ngcontent-%COMP%]:hover{background:#eceff1}.box-create-login-content[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf[_ngcontent-%COMP%]{width:100%;background:#e0f2f1;padding:10px;display:flex;align-items:center;justify-content:center;height:300px}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]   .boxtext[_ngcontent-%COMP%]{font-size:20px;line-height:30px;margin-bottom:20px}.block-inline-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.back-btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:14px}.back-btn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})();var fo=h(8929),Qe=h(21086),vt=h(34202),yt=h(63527),bn=h(36787),et=h(57770),Fe=h(87545),An=h(24850),bt=h(5154),vo=h(87224),At=h(2313),xn=h(13334),Cn=h(92198),tt=h(26351),wn=h(49681),Ct=h(34859),De=h(42090),Tn=h(41877);const Co=new Map,Sn={activated:!1,tokenObservers:[]},hr={initialized:!1,enabled:!1};function K(n){return Co.get(n)||Sn}function ue(n,s){Co.set(n,s)}function nt(){return hr}class yr{constructor(s,t,o,r,l){if(this.operation=s,this.retryPolicy=t,this.getWaitDuration=o,this.lowerBound=r,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=r,r>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(s){var t=this;return(0,B.Z)(function*(){t.stop();try{t.pending=new De.BH,yield function On(n){return new Promise(s=>{setTimeout(s,n)})}(t.getNextRun(s)),t.pending.resolve(),yield t.pending.promise,t.pending=new De.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(o){t.retryPolicy(o)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(s){if(s)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const de=new De.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Tt(n){if(!K(n).activated)throw de.create("use-before-activation",{appName:n.name})}function je(n,s){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,B.Z)(function*({url:n,body:s},t){var o,r;const l={"Content-Type":"application/json"},_=t.getImmediate({optional:!0});if(_){const M=yield _.getHeartbeatsHeader();M&&(l["X-Firebase-Client"]=M)}const f={method:"POST",body:JSON.stringify(s),headers:l};let v,A;try{v=yield fetch(n,f)}catch(M){throw de.create("fetch-network-error",{originalErrorMessage:null===(o=M)||void 0===o?void 0:o.message})}if(200!==v.status)throw de.create("fetch-status-error",{httpStatus:v.status});try{A=yield v.json()}catch(M){throw de.create("fetch-parse-error",{originalErrorMessage:null===(r=M)||void 0===r?void 0:r.message})}const E=A.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw de.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${A.ttl}`});const j=1e3*Number(E[1]),z=Date.now();return{token:A.token,expireTimeMillis:z+j,issuedAtTimeMillis:z}})).apply(this,arguments)}function Cr(n,s){const{projectId:t,appId:o,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${o}:exchangeDebugToken?key=${r}`,body:{debug_token:s}}}const Be="firebase-app-check-store";let St=null;function Zo(){return St||(St=new Promise((n,s)=>{var t;try{const o=indexedDB.open("firebase-app-check-database",1);o.onsuccess=r=>{n(r.target.result)},o.onerror=r=>{var l;s(de.create("storage-open",{originalErrorMessage:null===(l=r.target.error)||void 0===l?void 0:l.message}))},o.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Be,{keyPath:"compositeKey"})}}catch(o){s(de.create("storage-open",{originalErrorMessage:null===(t=o)||void 0===t?void 0:t.message}))}}),St)}function qn(){return(qn=(0,B.Z)(function*(n,s){const o=(yield Zo()).transaction(Be,"readwrite"),l=o.objectStore(Be).put({compositeKey:n,value:s});return new Promise((_,f)=>{l.onsuccess=v=>{_()},o.onerror=v=>{var A;f(de.create("storage-set",{originalErrorMessage:null===(A=v.target.error)||void 0===A?void 0:A.message}))}})})).apply(this,arguments)}const ot=new Tn.Yd("@firebase/app-check");function Po(n,s){return(0,De.hl)()?function wr(n,s){return function ko(n,s){return qn.apply(this,arguments)}(function Io(n){return`${n.options.appId}-${n.name}`}(n),s)}(n,s).catch(t=>{ot.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lo(){return nt().enabled}function kt(){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,B.Z)(function*(){const n=nt();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const kr={error:"UNKNOWN_ERROR"};function Or(n){return De.US.encodeString(JSON.stringify(n),!1)}function It(n){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,B.Z)(function*(n,s=!1){const t=n.app;Tt(t);const o=K(t);let l,r=o.token;if(!r){const v=yield o.cachedTokenPromise;v&&at(v)&&(r=v)}if(!s&&r&&at(r))return{token:r.token};let f,_=!1;if(Lo()){o.exchangeTokenPromise||(o.exchangeTokenPromise=je(Cr(t,yield kt()),n.heartbeatServiceProvider).then(A=>(o.exchangeTokenPromise=void 0,A)),_=!0);const v=yield o.exchangeTokenPromise;return yield Po(t,v),ue(t,Object.assign(Object.assign({},o),{token:v})),{token:v.token}}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().then(v=>(o.exchangeTokenPromise=void 0,v)),_=!0),r=yield o.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?ot.warn(v.message):ot.error(v),l=v}return r?(f={token:r.token},ue(t,Object.assign(Object.assign({},o),{token:r})),yield Po(t,r)):f=Eo(l),_&&me(t,f),f})).apply(this,arguments)}function Qn(n,s){const t=K(n),o=t.tokenObservers.filter(r=>r.next!==s);0===o.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ue(n,Object.assign(Object.assign({},t),{tokenObservers:o}))}function Pt(n){const{app:s}=n,t=K(s);let o=t.tokenRefresher;o||(o=function Ir(n){const{app:s}=n;return new yr((0,B.Z)(function*(){let o;if(o=K(s).token?yield It(n,!0):yield It(n),o.error)throw o.error}),()=>!0,()=>{const t=K(s);if(t.token){let o=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return o=Math.min(o,t.token.expireTimeMillis-3e5),Math.max(0,o-Date.now())}return 0},3e4,96e4)}(n),ue(s,Object.assign(Object.assign({},t),{tokenRefresher:o}))),!o.isRunning()&&t.isTokenAutoRefreshEnabled&&o.start()}function me(n,s){const t=K(n).tokenObservers;for(const o of t)try{"EXTERNAL"===o.type&&null!=s.error?o.error(s.error):o.next(s)}catch(r){}}function at(n){return n.expireTimeMillis-Date.now()>0}function Eo(n){return{token:Or(kr),error:n}}class Lt{constructor(s,t){this.app=s,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:s}=K(this.app);for(const t of s)Qn(this.app,t.next);return Promise.resolve()}}const Bn="app-check-internal";!function Ur(){(0,wn._registerComponent)(new Ct.wA("app-check",n=>function Mo(n,s){return new Lt(n,s)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,s,t)=>{n.getProvider(Bn).initialize()})),(0,wn._registerComponent)(new Ct.wA(Bn,n=>function qo(n){return{getToken:s=>It(n,s),addTokenListener:s=>function rt(n,s,t,o){const{app:r}=n,l=K(r),_={next:t,error:o,type:s};if(ue(r,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,_]})),l.token&&at(l.token)){const f=l.token;Promise.resolve().then(()=>{t({token:f.token}),Pt(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Pt(n))}(n,"INTERNAL",s),removeTokenListener:s=>Qn(n.app,s)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wn.registerVersion)("@firebase/app-check","0.5.10")}();class Jo{constructor(){return(0,tt.vb)("app-check")}}"undefined"!=typeof window&&window,h(70127);const Rr=new e.OlP("angularfire2.auth.use-emulator"),Qr=new e.OlP("angularfire2.auth.settings"),Ie=new e.OlP("angularfire2.auth.tenant-id"),Fr=new e.OlP("angularfire2.auth.langugage-code"),Pe=new e.OlP("angularfire2.auth.use-device-language"),ca=new e.OlP("angularfire.auth.persistence");let lt=(()=>{class n{constructor(t,o,r,l,_,f,v,A,E,j,z,M){const X=new fo.xQ,be=(0,Qe.of)(void 0).pipe((0,et.QV)(_.outsideAngular),(0,Fe.w)(()=>l.runOutsideAngular(()=>h.e(881).then(h.bind(h,65881)))),(0,An.U)(()=>(0,H.on)(t,l,o)),(0,An.U)(Ae=>((n,s,t,o,r,l,_,f)=>(0,H.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=s.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),o&&(v.tenantId=o),v.languageCode=r,l&&v.useDeviceLanguage(),_)for(const[A,E]of Object.entries(_))v.settings[A]=E;return f&&v.setPersistence(f),v},[t,o,r,l,_,f]))(Ae,l,f,A,E,j,v,z)),(0,bt.d)({bufferSize:1,refCount:!1}));if((0,C.PM)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Qe.of)(null);else{be.pipe((0,vo.P)()).subscribe();const xe=be.pipe((0,Fe.w)(Y=>Y.getRedirectResult().then(ne=>ne,()=>null)),tt.iC,(0,bt.d)({bufferSize:1,refCount:!1})),fe=be.pipe((0,Fe.w)(Y=>new vt.y(ne=>({unsubscribe:l.runOutsideAngular(()=>Y.onAuthStateChanged(ut=>ne.next(ut),ut=>ne.error(ut),()=>ne.complete()))})))),He=be.pipe((0,Fe.w)(Y=>new vt.y(ne=>({unsubscribe:l.runOutsideAngular(()=>Y.onIdTokenChanged(ut=>ne.next(ut),ut=>ne.error(ut),()=>ne.complete()))}))));this.authState=xe.pipe((0,At.c)(fe),(0,xn.R)(_.outsideAngular),(0,et.QV)(_.insideAngular)),this.user=xe.pipe((0,At.c)(He),(0,xn.R)(_.outsideAngular),(0,et.QV)(_.insideAngular)),this.idToken=this.user.pipe((0,Fe.w)(Y=>Y?(0,yt.D)(Y.getIdToken()):(0,Qe.of)(null))),this.idTokenResult=this.user.pipe((0,Fe.w)(Y=>Y?(0,yt.D)(Y.getIdTokenResult()):(0,Qe.of)(null))),this.credential=(0,bn.T)(xe,X,this.authState.pipe((0,Cn.h)(Y=>!Y))).pipe((0,An.U)(Y=>null!=Y&&Y.user?Y:null),(0,xn.R)(_.outsideAngular),(0,et.QV)(_.insideAngular))}return(0,H.pX)(this,be,l,{spy:{apply:(Ae,xe,fe)=>{(Ae.startsWith("signIn")||Ae.startsWith("createUser"))&&fe.then(He=>X.next(He))}}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(H.Dh),e.LFG(H.xv,8),e.LFG(e.Lbi),e.LFG(e.R0b),e.LFG(tt.HU),e.LFG(Rr,8),e.LFG(Qr,8),e.LFG(Ie,8),e.LFG(Fr,8),e.LFG(Pe,8),e.LFG(ca,8),e.LFG(Jo,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Ko=h(73396);function ua(n,s){1&n&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function i(n,s){1&n&&(e.TgZ(0,"div",42)(1,"div"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_vui_long_nhap_dung_sdt_hoac_email")))}function a(n,s){if(1&n&&(e.TgZ(0,"div",42),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.msgError," ")}}function c(n,s){1&n&&(e.TgZ(0,"div",42)(1,"div"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_vui_long_nhap_mat_khau")))}function d(n,s){if(1&n&&(e.TgZ(0,"div",16)(1,"label",43),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function g(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",44),e._uU(2,"\xa0"),e.qZA())}const p=function(n){return[n]},m=function(n){return{return_url:n,user_click:"true"}};function b(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",16)(2,"div",3)(3,"div",17)(4,"div",18)(5,"div",19)(6,"span",20)(7,"mat-icon",21),e._uU(8,"mail_outlined"),e.qZA(),e._uU(9,"/"),e.TgZ(10,"mat-icon",21),e._uU(11,"phone_outlined"),e.qZA()()(),e.TgZ(12,"input",22),e.NdJ("keydown.enter",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.login())})("input",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkValidateUser(r.form.controls.phone.value))}),e.ALo(13,"mytranslate"),e.qZA()(),e.YNc(14,i,4,3,"div",23),e.YNc(15,a,2,1,"div",23),e.qZA()()(),e.TgZ(16,"div",16)(17,"div",3)(18,"div",17)(19,"div",18)(20,"div",19)(21,"span",24)(22,"mat-icon"),e._uU(23,"lock_outlined"),e.qZA()()(),e.TgZ(24,"input",25),e.NdJ("keydown.enter",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.login())}),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"button",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.togglePassword())}),e.TgZ(27,"mat-icon"),e._uU(28),e.qZA()()(),e.YNc(29,c,4,3,"div",23),e.qZA()()(),e.YNc(30,d,4,3,"div",27),e.TgZ(31,"div",16)(32,"div",3)(33,"div",28)(34,"button",29),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.login())}),e.YNc(35,g,3,0,"span",12),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()()()(),e.TgZ(38,"div",30)(39,"span",31),e._uU(40),e.ALo(41,"mytranslate"),e.qZA()(),e.TgZ(42,"div",3)(43,"div",32)(44,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.loginZalo())})("keydown.enter",function(r){return r.preventDefault()}),e._UZ(45,"img",34),e.ALo(46,"convertCdn"),e.TgZ(47,"span",35),e._uU(48,"Zalo"),e.qZA()()(),e.TgZ(49,"div",32)(50,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.googleSignIn())})("keydown.enter",function(r){return r.preventDefault()}),e._UZ(51,"img",36),e.ALo(52,"convertCdn"),e.TgZ(53,"span",35),e._uU(54,"Google"),e.qZA()()(),e.TgZ(55,"div",32)(56,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.loginByQrCode())})("keydown.enter",function(r){return r.preventDefault()}),e.TgZ(57,"mat-icon",37),e._uU(58,"center_focus_strong"),e.qZA(),e.TgZ(59,"span",35),e._uU(60,"Qrcode"),e.qZA()()()(),e.TgZ(61,"div",38)(62,"a",39),e.ALo(63,"localize"),e._uU(64),e.ALo(65,"mytranslate"),e.ALo(66,"mytranslate"),e.qZA()(),e.TgZ(67,"div",40)(68,"a",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.forgotPassword())}),e._uU(69),e.ALo(70,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(12),e.s9C("placeholder",e.lcZ(13,19,"lang_auto_nhap_sdt_hoac_email")),e.xp6(2),e.Q6J("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched)&&!t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.checkValidateUsername),e.xp6(9),e.s9C("placeholder",e.lcZ(25,21,"lang_auto_mat_khau")),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(4),e.Oqu(t.showPassword?"visibility_outlined":"visibility_off_outlined"),e.xp6(1),e.Q6J("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading||t.checkLoadingLogin),e.xp6(1),e.hij("",e.lcZ(37,23,"lang_auto_dang_nhap")," "),e.xp6(4),e.hij("",e.lcZ(41,25,"lang_auto_-_hoac_upper")," -"),e.xp6(5),e.Q6J("src",e.lcZ(46,27,"azota_assets/images/zalo-icon.svg"),e.LSH),e.xp6(6),e.Q6J("src",e.lcZ(52,29,"azota_assets/images/google-icon.svg"),e.LSH),e.xp6(11),e.Q6J("routerLink",e.VKq(39,p,e.lcZ(63,31,"/auth/register")))("queryParams",e.VKq(41,m,t.returnUrl)),e.xp6(2),e.AsE("",e.lcZ(65,33,"lang_auto_dang_ky_thanh_vien")," ",e.lcZ(66,35,"lang_auto_moi"),""),e.xp6(5),e.Oqu(e.lcZ(70,37,"lang_auto_quen_mat_khau"))}}function T(n,s){if(1&n&&(e.TgZ(0,"div",1)(1,"form",2)(2,"div",3),e._UZ(3,"div",4),e.TgZ(4,"div",5)(5,"div",6)(6,"div",7)(7,"h2",8),e._UZ(8,"img",9),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",10),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",11),e.YNc(14,ua,6,3,"div",12),e.YNc(15,b,71,43,"div",12),e.qZA()()(),e._UZ(16,"div",4),e.qZA()()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("src",e.lcZ(9,5,"azota_assets/images/logo.svg"),e.LSH),e.xp6(3),e.Oqu(e.lcZ(12,7,"lang_auto_dang_nhap")),e.xp6(3),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!t.statusObj.loading)}}let Z=(()=>{class n extends R.Q{constructor(t,o,r,l,_,f,v,A){super(o),this.formBuilder=t,this.commonService=o,this.baseApiService=r,this.localStorageObject=l,this.authService=_,this.fireAuth=f,this.userService=v,this.recaptchaV3Service=A,this.form=new u.nJ({}),this.zaloAccessTkn="",this.mAccessTkn="",this.returnUrl="",this.zaloLoginUrl="",this.loginByToken=!0,this.msgError="",this.checkValidateUsername=!1,this.checkLoadingLogin=!0,this.showPassword=!1,this.initStatusObj(),f.authState.subscribe(E=>{E?this.signInWithTokenGoogle(E):this.checkLoadingLogin=!1})}executeImportantAction(){return new Promise(t=>{this.recaptchaV3Service.execute("importantAction").subscribe(o=>{t(o)})})}getError(t){return!(!this.form.controls[t]||!this.form.controls[t].errors)&&this.form.controls[t].errors}loginZalo(){this.commonService.gaEvent("sign_in_click_sign_in_by_zalo"),window.location.href=this.zaloLoginUrl}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}login(){var t=this.commonService.getMyQueryParam("type");this.form.valid?(this.initStatusObj(),this.commonService.gaEvent("sign_in_login_in"),this.executeImportantAction().then(o=>{var r=this.commonService.getFormObj(this.form);this.subscriptions.add(this.authService.apiAuthLoginWebPost({phone:r.phone,password:r.password,tokenCaptcha:o}).subscribe(_=>{var f,v,A;1==_.success?(this.localStorageObject.clearAllCache(),"0"==t?this.baseApiService.redirectLoginForStudent(null!==(f=this.commonService.getMyQueryParam("return_url"))&&void 0!==f?f:""):this.baseApiService.redirectLoginByRole(null!==(v=this.commonService.getMyQueryParam("return_url"))&&void 0!==v?v:""),this.successStatusObj()):this.errorStatusObj(null!==(A=_.message)&&void 0!==A?A:"")}))})):this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin")}loginAnonymous(){this.initStatusObj(),this.commonService.gaEvent("sign_in_login_anonymous"),this.executeImportantAction().then(t=>{this.subscriptions.add(this.authService.apiAuthLoginAnonymousFromWebV2Post({tokenCaptcha:t}).subscribe(r=>{var l,_;1==r.success?(this.baseApiService.redirectLoginByRole(null!==(l=this.commonService.getMyQueryParam("return_url"))&&void 0!==l?l:""),this.successStatusObj()):this.errorStatusObj(null!==(_=r.message)&&void 0!==_?_:"")}))})}loginWithZaloAccessToken(t){var o,r=this.userService.getUserObjFromJwtToken(t);null!=r?(this.baseApiService.saveUserObj(r),this.baseApiService.redirectLoginByRole(null!==(o=this.commonService.getMyQueryParam("return_url"))&&void 0!==o?o:"")):(this.errorStatusObj("lang_core_invalid_login_token"),this.loginByToken=!1)}googleSignIn(){this.fireAuth.signInWithRedirect(new We.hJ).then(()=>this.fireAuth.getRedirectResult().then(t=>{})).catch(t=>{console.log(t)})}validateEmail(t){return t.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}checkValidateUser(t){this.msgError="",isNaN(Number(t))?this.validateEmail(t)?(this.checkValidateUsername=!1,this.msgError=""):(this.commonService.getTranslate("lang_auto_vui_long_nhap_dung_dinh_dang_email").subscribe(o=>{this.msgError=o}),this.checkValidateUsername=!0):10==t.length?(this.msgError="",this.checkValidateUsername=!1):(this.commonService.getTranslate("lang_auto_so_dien_thoai_phai_la_so_va_10_ky_tu").subscribe(o=>{this.msgError=o}),this.checkValidateUsername=!0)}signInWithTokenGoogle(t){this.checkLoadingLogin=!0;var o=this.commonService.getMyQueryParam("type");t.getIdToken().then(r=>{this.subscriptions.add(this.authService.apiAuthAuthByFirebasePost({isRegisterForTeacher:0,firebaseToken:r}).subscribe(_=>{var f,v,A,E;1==_.success?(1==(null===(f=_.data)||void 0===f?void 0:f.isNewRegister)?this.myNavigation("/auth/choose-role"):"0"==o?this.baseApiService.redirectLoginForStudent(null!==(v=this.commonService.getMyQueryParam("return_url"))&&void 0!==v?v:""):this.baseApiService.redirectLoginByRole(null!==(A=this.commonService.getMyQueryParam("return_url"))&&void 0!==A?A:""),this.checkLoadingLogin=!1):(this.checkLoadingLogin=!1,this.errorStatusObj(null!==(E=_.message)&&void 0!==E?E:"",!0))}))})}togglePassword(){this.showPassword=!this.showPassword}loginByQrCode(){this.myNavigation("/auth/login-scan/2")}ngOnInit(){var t,o,r,l;if(this.zaloAccessTkn=null!==(t=this.commonService.getMyQueryParam("zaccess_token"))&&void 0!==t?t:"",this.mAccessTkn=null!==(o=this.commonService.getMyQueryParam("access_token"))&&void 0!==o?o:"",!this.commonService.getMyQueryParam("not_register")&&this.zaloAccessTkn)this.loginByToken=!0,this.loginWithZaloAccessToken(this.zaloAccessTkn);else if(!this.commonService.getMyQueryParam("not_register")&&this.mAccessTkn)this.loginByToken=!0,this.loginWithZaloAccessToken(this.mAccessTkn);else{this.loginByToken=!1,this.initStatusObj();var _=!1;this.form=this.formBuilder.group({phone:["",[u.kI.required,Ce._.noWhiteSpace]],password:["",u.kI.required]}),this.commonService.getMyQueryParam("not_register")?this.commonService.myNavigation("/auth/register"):this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole()?this.baseApiService.redirectLoginByRole(null!==(r=this.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:""):(this.returnUrl=this.commonService.getMyQueryParam("return_url")||"",-1===this.returnUrl.indexOf("/test/")&&-1===this.returnUrl.indexOf("/de-thi/")&&-1===this.returnUrl.indexOf("/bai-tap/")||"register"==this.commonService.getMyQueryParam("from")?(this.zaloLoginUrl=oe.N.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_login=1"),_=!0):this.baseApiService.isLogin()?this.baseApiService.redirectLoginByRole(null!==(l=this.commonService.getMyQueryParam("return_url"))&&void 0!==l?l:""):this.loginAnonymous()),_&&(!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()?this.myNavigation("/student/dashboard/0"):(this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),this.stopStatusObj(),super.ngOnInit()))}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.QS),e.Y36(L.v),e.Y36(x._),e.Y36(qe.L),e.Y36(F.e8),e.Y36(lt),e.Y36(Wn.K),e.Y36(Ko.YC))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],features:[e.qOj],decls:1,vars:1,consts:[["class","container-fluid component-wrap centerBoth hasBg",4,"ngIf"],[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text",2,"padding-left","0.35rem","padding-right","0.35rem"],[2,"width","15px","height","15px","font-size","15px"],["type","tel","formControlName","phone",1,"form-control",3,"placeholder","keydown.enter","input"],["class","alert alert-danger",4,"ngIf"],["id","basic-addon2",1,"input-group-text"],["formControlName","password",1,"form-control","pr-40",3,"type","placeholder","keydown.enter"],[1,"btn-toggle-password",3,"click"],["class","form-group",4,"ngIf"],[1,"col-md-12"],["mat-raised-button","",1,"btn-azt-primary",2,"width","100%",3,"disabled","click"],[1,"text-center","my-3"],[1,"h6","mute-text"],[1,"col-4"],["mat-stroked-button","",2,"width","100%","padding","3px",3,"click","keydown.enter"],["alt","Zalo icon",1,"img-responsive","zalo-icon",3,"src"],[1,"d-none","d-lg-inline-block"],["alt","Google icon",1,"img-responsive","zalo-icon",3,"src"],[1,"zalo-icon","icon-v2"],[1,"text-center","mt-3"],[3,"routerLink","queryParams"],[1,"text-center","mt-1"],[2,"color","rgb(216, 2, 2)",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,o){1&t&&e.YNc(0,T,17,9,"div",0),2&t&&e.Q6J("ngIf",!o.loginByToken)},dependencies:[I.yS,C.O5,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,u.sg,u.u,D.lO,y.bT,y.BI],styles:[".checkboxInput[_ngcontent-%COMP%]{padding:5px 15px;font-size:1rem;font-weight:400;line-height:2}.zalo-icon[_ngcontent-%COMP%]{height:30px;margin-right:10px}.btn-icon[_ngcontent-%COMP%]{transition:all .5s;margin:0 10px}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}.input-group[_ngcontent-%COMP%]{position:relative}.btn-toggle-password[_ngcontent-%COMP%]{position:absolute;top:6px;right:0;border:none;background:transparent;z-index:99}.btn-toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#757575;transition:all .5s}.btn-toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#434242}.pr-40[_ngcontent-%COMP%]{padding-right:40px}.icon-v2[_ngcontent-%COMP%]{height:auto}@media (max-width: 992px){.zalo-icon[_ngcontent-%COMP%]{margin-right:0}}"]}),n})(),O=(()=>{class n extends R.Q{constructor(t,o,r,l){super(t),this.commonService=t,this.baseApiService=o,this.fireAuth=r,this.redirectService=l,this.fireAuth.signOut()}ngOnInit(){this.baseApiService.logout(),this.fireAuth.signOut();var t=this.commonService.getMyQueryParam("return_url")||null;t?this.redirectService.redirectSimpleLoginWithReturnUrl(t):this.redirectService.redirectSimpleLogin(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v),e.Y36(x._),e.Y36(lt),e.Y36(Ke.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],features:[e.qOj],decls:0,vars:0,template:function(t,o){},encapsulation:2}),n})(),w=(()=>{class n extends R.Q{constructor(t){super(t),this.commonService=t}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["auth-master-page"]],features:[e.qOj],decls:2,vars:0,consts:[["id","homework-layout"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[I.lC],encapsulation:2}),n})();function te(n,s){1&n&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function _e(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeRegisterType(0))}),e.TgZ(2,"div",18),e._UZ(3,"i",19),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()(),e.TgZ(7,"div",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeRegisterType(1))}),e.TgZ(8,"div",18),e._UZ(9,"img",20),e.ALo(10,"convertCdn"),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()()}2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,3,"lang_auto_toi_la_hoc_sinh")),e.xp6(4),e.Q6J("src",e.lcZ(10,5,"azota_assets/images/teacher.png"),e.LSH),e.xp6(3),e.Oqu(e.lcZ(13,7,"lang_auto_toi_la_giao_vien")))}function qt(n,s){1&n&&(e.TgZ(0,"div",59)(1,"div"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_vui_long_nhap_ho_va_ten")))}function dt(n,s){1&n&&(e.TgZ(0,"div",59)(1,"div"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_vui_long_nhap_so_dien_thoai_hoac_email")))}function ze(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.msgError," ")}}function Nr(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_mat_khau_dai_toi_thieu_6_ky_tu")))}function Gn(n,s){if(1&n&&(e.TgZ(0,"div",59),e.YNc(1,Nr,3,3,"div",10),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}const we=function(n){return[n]},ye=function(n,s){return{return_url:n,from:"register",user_click:"true",type:s}};function Ye(n,s){if(1&n&&(e.TgZ(0,"label",62),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"a",63),e.ALo(4,"localize"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij("*** ",e.lcZ(2,5,t.statusObj.errorMessage)," Click "),e.xp6(2),e.Q6J("routerLink",e.VKq(13,we,e.lcZ(4,7,"/auth/login")))("queryParams",e.WLB(15,ye,t.returnUrl,t.isStudent?0:1)),e.xp6(2),e.Oqu(e.lcZ(6,9,"lang_auto_vao_day")),e.xp6(2),e.hij(" ",e.lcZ(8,11,"lang_auto_de_dang_nhap"),"")}}function Go(n,s){if(1&n&&(e.TgZ(0,"label",62),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij("*** ",e.lcZ(2,1,t.statusObj.errorMessage),"")}}function va(n,s){if(1&n&&(e.TgZ(0,"div",40),e.YNc(1,Ye,9,18,"label",60),e.YNc(2,Go,3,3,"ng-template",null,61,e.W1O),e.qZA()),2&n){const t=e.MAs(3),o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.isDuplicateEmailOrPhone>0)("ngIfElse",t)}}function ya(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",64),e._uU(2,"\xa0"),e.qZA())}function ba(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",37)(1,"form",38)(2,"div",27)(3,"div",39)(4,"div",40)(5,"div",41)(6,"div",42)(7,"div",43)(8,"span",44)(9,"mat-icon"),e._uU(10,"person_outline"),e.qZA()()(),e._UZ(11,"input",45),e.ALo(12,"mytranslate"),e.qZA(),e.YNc(13,qt,4,3,"div",46),e.qZA()()()(),e.TgZ(14,"div",27)(15,"div",39)(16,"div",40)(17,"div",41)(18,"div",42)(19,"div",43)(20,"span",47)(21,"mat-icon",48),e._uU(22,"mail_outlined"),e.qZA(),e._uU(23,"/"),e.TgZ(24,"mat-icon",48),e._uU(25,"phone_outlined"),e.qZA()()(),e.TgZ(26,"input",49),e.NdJ("input",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkValidateUser(r.form.controls.username.value))}),e.ALo(27,"mytranslate"),e.qZA()(),e.YNc(28,dt,4,3,"div",46),e.YNc(29,ze,2,1,"div",46),e.qZA()()()(),e.TgZ(30,"div",27)(31,"div",39)(32,"div",40)(33,"div",41)(34,"div",42)(35,"div",43)(36,"span",50)(37,"mat-icon"),e._uU(38,"lock_outlined"),e.qZA()()(),e._UZ(39,"input",51),e.ALo(40,"mytranslate"),e.TgZ(41,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.togglePassword())}),e.TgZ(42,"mat-icon"),e._uU(43),e.qZA()()(),e.YNc(44,Gn,2,1,"div",46),e.qZA()()()(),e.YNc(45,va,4,2,"div",53),e.TgZ(46,"div",40)(47,"div",27)(48,"div",39)(49,"button",54),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.registerForTeacher())}),e.YNc(50,ya,3,0,"span",10),e._uU(51),e.ALo(52,"mytranslate"),e.qZA()()()()(),e.TgZ(53,"div",55)(54,"span",56),e._uU(55),e.ALo(56,"mytranslate"),e.qZA()(),e.TgZ(57,"div",27)(58,"div",28)(59,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.googleSignIn())}),e._UZ(60,"img",58),e.ALo(61,"convertCdn"),e.TgZ(62,"span"),e._uU(63,"Google"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(10),e.s9C("placeholder",e.lcZ(12,16,"lang_auto_ho_ten")),e.xp6(2),e.Q6J("ngIf",t.form.controls.fullName.invalid&&(t.form.controls.fullName.dirty||t.form.controls.fullName.touched)),e.xp6(13),e.s9C("placeholder",e.lcZ(27,18,"lang_auto_nhap_sdt_hoac_email")),e.xp6(2),e.Q6J("ngIf",t.form.controls.username.invalid&&(t.form.controls.username.dirty||t.form.controls.username.touched)&&!t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.checkValidateUsername),e.xp6(10),e.s9C("placeholder",e.lcZ(40,20,"lang_auto_mat_khau")),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(4),e.Oqu(t.showPassword?"visibility_outlined":"visibility_off_outlined"),e.xp6(1),e.Q6J("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.form.invalid||t.statusObj.loading||t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading||t.checkLoadingLogin),e.xp6(1),e.hij("",e.lcZ(52,22,"lang_auto_dang_ky")," "),e.xp6(4),e.hij("",e.lcZ(56,24,"lang_auto_-_hoac_upper")," -"),e.xp6(5),e.Q6J("src",e.lcZ(61,26,"azota_assets/images/google-icon.svg"),e.LSH)}}function Aa(n,s){1&n&&(e.TgZ(0,"div",59)(1,"div"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_vui_long_nhap_ho_va_ten")))}function xa(n,s){1&n&&(e.TgZ(0,"div",59)(1,"div"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_vui_long_nhap_so_dien_thoai_hoac_email")))}function Ca(n,s){if(1&n&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.msgError," ")}}function wa(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_mat_khau_dai_toi_thieu_6_ky_tu")))}function Ta(n,s){if(1&n&&(e.TgZ(0,"div",59),e.YNc(1,wa,3,3,"div",10),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorForm("studentPassword","required")||t.getErrorForm("studentPassword","minlength"))}}function Sa(n,s){if(1&n&&(e.TgZ(0,"label",62),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"a",63),e.ALo(4,"localize"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij("*** ",e.lcZ(2,5,t.statusObj.errorMessage)," Click "),e.xp6(2),e.Q6J("routerLink",e.VKq(13,we,e.lcZ(4,7,"/auth/login")))("queryParams",e.WLB(15,ye,t.returnUrl,t.isStudent?0:1)),e.xp6(2),e.Oqu(e.lcZ(6,9,"lang_auto_vao_day")),e.xp6(2),e.hij(" ",e.lcZ(8,11,"lang_auto_de_dang_nhap"),"")}}function Za(n,s){if(1&n&&(e.TgZ(0,"label",62),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij("*** ",e.lcZ(2,1,t.statusObj.errorMessage),"")}}function ka(n,s){if(1&n&&(e.TgZ(0,"div",40),e.YNc(1,Sa,9,18,"label",60),e.YNc(2,Za,3,3,"ng-template",null,61,e.W1O),e.qZA()),2&n){const t=e.MAs(3),o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",o.isDuplicateEmailOrPhone>0)("ngIfElse",t)}}function Oa(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",64),e._uU(2,"\xa0"),e.qZA())}function Ia(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",65)(1,"form",66)(2,"div",27)(3,"div",39)(4,"div",40)(5,"div",41)(6,"div",42)(7,"div",43)(8,"span",44)(9,"mat-icon"),e._uU(10,"person_outline"),e.qZA()()(),e._UZ(11,"input",67),e.ALo(12,"mytranslate"),e.qZA(),e.YNc(13,Aa,4,3,"div",46),e.qZA()()()(),e.TgZ(14,"div",27)(15,"div",39)(16,"div",40)(17,"div",41)(18,"div",42)(19,"div",43)(20,"span",47)(21,"mat-icon",48),e._uU(22,"mail_outlined"),e.qZA(),e._uU(23,"/"),e.TgZ(24,"mat-icon",48),e._uU(25,"phone_outlined"),e.qZA()()(),e.TgZ(26,"input",68),e.NdJ("input",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkValidateUser(r.formRegister.controls.studentUsername.value))}),e.ALo(27,"mytranslate"),e.qZA()(),e.YNc(28,xa,4,3,"div",46),e.YNc(29,Ca,2,1,"div",46),e.qZA()()()(),e.TgZ(30,"div",27)(31,"div",39)(32,"div",40)(33,"div",41)(34,"div",42)(35,"div",43)(36,"span",50)(37,"mat-icon"),e._uU(38,"lock_outlined"),e.qZA()()(),e._UZ(39,"input",69),e.ALo(40,"mytranslate"),e.TgZ(41,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.togglePassword())}),e.TgZ(42,"mat-icon"),e._uU(43),e.qZA()()(),e.YNc(44,Ta,2,1,"div",46),e.qZA()()()()(),e.YNc(45,ka,4,2,"div",53),e.TgZ(46,"button",54),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.registerForStudent())}),e.YNc(47,Oa,3,0,"span",10),e._uU(48),e.ALo(49,"mytranslate"),e.qZA(),e.TgZ(50,"div",55)(51,"span",56),e._uU(52),e.ALo(53,"mytranslate"),e.qZA()(),e.TgZ(54,"div",27)(55,"div",28)(56,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.googleSignIn())}),e._UZ(57,"img",58),e.ALo(58,"convertCdn"),e.TgZ(59,"span"),e._uU(60,"Google"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.formRegister),e.xp6(10),e.s9C("placeholder",e.lcZ(12,16,"lang_auto_ho_ten")),e.xp6(2),e.Q6J("ngIf",t.formRegister.controls.studentFullName.invalid&&(t.formRegister.controls.studentFullName.dirty||t.formRegister.controls.studentFullName.touched)),e.xp6(13),e.s9C("placeholder",e.lcZ(27,18,"lang_auto_nhap_sdt_hoac_email")),e.xp6(2),e.Q6J("ngIf",t.formRegister.controls.studentUsername.invalid&&(t.formRegister.controls.studentUsername.dirty||t.formRegister.controls.studentUsername.touched)&&!t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.checkValidateUsername),e.xp6(10),e.s9C("placeholder",e.lcZ(40,20,"lang_auto_mat_khau")),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(4),e.Oqu(t.showPassword?"visibility_outlined":"visibility_off_outlined"),e.xp6(1),e.Q6J("ngIf",t.formRegister.controls.studentPassword.invalid&&(t.formRegister.controls.studentPassword.dirty||t.formRegister.controls.studentPassword.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(1),e.Q6J("disabled",t.formRegister.invalid||t.statusObj.loading||t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading||t.checkLoadingLogin),e.xp6(1),e.hij(" ",e.lcZ(49,22,"lang_auto_dang_ky")," "),e.xp6(4),e.hij("",e.lcZ(53,24,"lang_auto_-_hoac_upper")," -"),e.xp6(5),e.Q6J("src",e.lcZ(58,26,"azota_assets/images/google-icon.svg"),e.LSH)}}function Pa(n,s){if(1&n&&(e.TgZ(0,"p")(1,"a",63),e.ALo(2,"localize"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("routerLink",e.VKq(7,we,e.lcZ(2,3,"/auth/login")))("queryParams",e.WLB(9,ye,t.returnUrl,t.isStudent?0:1)),e.xp6(2),e.Oqu(e.lcZ(4,5,"lang_auto_dang_nhap"))}}const La=function(n){return{return_url:n,from:"register",user_click:"true"}};function Ea(n,s){if(1&n&&(e.TgZ(0,"p")(1,"a",63),e.ALo(2,"localize"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("routerLink",e.VKq(7,we,e.lcZ(2,3,"/auth/login")))("queryParams",e.VKq(9,La,t.returnUrl)),e.xp6(2),e.Oqu(e.lcZ(4,5,"lang_auto_dang_nhap"))}}function Ma(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"a",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeRegisterType(0))}),e._UZ(4,"i",25),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",23)(8,"a",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeRegisterType(1))}),e._UZ(9,"i",26),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()(),e.TgZ(12,"div",27)(13,"div",28),e._UZ(14,"hr"),e.qZA()(),e.YNc(15,ba,64,28,"div",29),e.YNc(16,Ia,61,28,"div",30),e.TgZ(17,"div",31),e._uU(18),e.ALo(19,"mytranslate"),e.ALo(20,"mytranslate"),e.ALo(21,"mytranslate"),e.TgZ(22,"a",32),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e._uU(25),e.ALo(26,"mytranslate"),e.TgZ(27,"a",32),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()(),e.TgZ(30,"div",33)(31,"p",34),e._uU(32),e.ALo(33,"mytranslate"),e.qZA(),e.YNc(34,Pa,5,12,"p",35),e.YNc(35,Ea,5,11,"ng-template",null,36,e.W1O),e.qZA()()}if(2&n){const t=e.MAs(36),o=e.oxw();e.Q6J("hidden",o.isShowOption),e.xp6(3),e.ekj("select-style-active",o.isStudent),e.xp6(2),e.hij("\xa0 ",e.lcZ(6,18,"lang_auto_toi_la_hoc_sinh"),""),e.xp6(3),e.ekj("select-style-active",o.isTeacher),e.xp6(2),e.hij("\xa0 ",e.lcZ(11,20,"lang_auto_toi_la_giao_vien"),""),e.xp6(5),e.Q6J("ngIf",1==o.isTeacher),e.xp6(1),e.Q6J("ngIf",1==o.isStudent),e.xp6(2),e.lnq("",e.lcZ(19,22,"lang_auto_bang_cach_an_vao_nut"),' "',e.lcZ(20,24,"lang_auto_dang_ky_upper"),'"',e.lcZ(21,26,"lang_auto__toi_dong_y_voi")," "),e.xp6(5),e.hij(" ",e.lcZ(24,28,"lang_auto_dieu_khoan_su_dung")," "),e.xp6(2),e.hij(" ",e.lcZ(26,30,"lang_auto_va")," "),e.xp6(3),e.hij(" ",e.lcZ(29,32,"lang_auto_chinh_sach_bao_mat_cua_azota"),""),e.xp6(4),e.Oqu(e.lcZ(33,34,"lang_auto_ban_da_co_tai_khoan")),e.xp6(2),e.Q6J("ngIf",o.isDuplicateEmailOrPhone>0)("ngIfElse",t)}}let _a=(()=>{class n extends R.Q{constructor(t,o,r,l,_,f,v){super(r),this.formBuilder=t,this.activeRoute=o,this.commonService=r,this.baseApiService=l,this.recaptchaV3Service=_,this.fireAuth=f,this.authService=v,this.form=new u.nJ({}),this.formRegister=new u.nJ({}),this.returnUrl="",this.zaloLoginUrl="",this.isHiddenFormRegister=!0,this.isTeacher=!1,this.isStudent=!1,this.yesterday=new Date,this.isShowOption=!0,this.isShowRegisterForStudent=!1,this.isShowRegisterForTeacher=!1,this.checkValidateUsername=!1,this.msgError="",this.checkLoadingLogin=!0,this.showPassword=!1,this.isDuplicateEmailOrPhone=0,this.initStatusObj(),f.authState.subscribe(A=>{A?this.signInWithTokenGoogle(A):this.checkLoadingLogin=!1})}executeImportantAction(){return new Promise(t=>{this.recaptchaV3Service.execute("importantAction").subscribe(o=>{t(o)})})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,o){var r,l;return!(null===(r=this.form.controls[t].errors)||void 0===r||!r[o])&&(null===(l=this.form.controls[t].errors)||void 0===l?void 0:l[o])}getErrorForm(t,o){var r,l;return!(null===(r=this.formRegister.controls[t].errors)||void 0===r||!r[o])&&(null===(l=this.formRegister.controls[t].errors)||void 0===l?void 0:l[o])}goToConfirm(){var t;this.returnUrl=null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:"";var o="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=confirm_phone_register";this.commonService.myNavigationWithQueryString("/auth/checking_service",o)}changeRegisterType(t){this.isShowOption=!1,this.myNavigationWithQueryString(`/auth/register/${t}`,this.returnUrl?`?return_url=${encodeURIComponent(this.returnUrl)}&user_click=true`:"?user_click=true"),0==t?(this.commonService.gaEvent("sign_up_switch_to_student"),this.isTeacher=!1,this.isStudent=!0,this.checkValidateUsername=!1):(this.commonService.gaEvent("sign_up_switch_to_teacher"),this.isTeacher=!0,this.isStudent=!1,this.checkValidateUsername=!1)}loginZalo(){this.commonService.gaEvent("sign_up_teacher_by_zalo"),window.location.href=this.zaloLoginUrl}registerForTeacher(){this.form.valid&&!this.checkValidateUsername&&this.executeImportantAction().then(t=>{var o=this.commonService.getFormObj(this.form),r={fullName:o.fullName,password:o.password,tokenCaptcha:t};this.validateEmail(o.username)?r.email=o.username:r.phone=o.username,this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRegisterPost(r).subscribe(l=>{var _,f,v,A;1==l.success?(this.commonService.gaEvent("sign_up_teacher"),this.successStatusObj(),this.baseApiService.redirectLoginByRoleForRegister(null!==(_=this.commonService.getMyQueryParam("return_url"))&&void 0!==_?_:"")):(this.errorStatusObj(null!==(f=l.message)&&void 0!==f?f:""),this.isDuplicateEmailOrPhone=null!==(A=null===(v=l.data)||void 0===v?void 0:v.isDuplicateEmailOrPhone)&&void 0!==A?A:0)}))})}registerForStudent(){this.formRegister.valid&&!this.checkValidateUsername&&this.executeImportantAction().then(t=>{this.commonService.gaEvent("sign_up_student");var o=this.commonService.getFormObj(this.formRegister);this.initStatusObj();var r={fullName:o.studentFullName,password:o.studentPassword,tokenCaptcha:t};this.validateEmail(o.studentUsername)?r.email=o.studentUsername:r.phone=o.studentUsername,this.subscriptions.add(this.authService.apiAuthRegisterForStudentPost(r).subscribe(l=>{var _,f,v,A;1==l.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole(null!==(_=this.commonService.getMyQueryParam("return_url"))&&void 0!==_?_:"")):(this.errorStatusObj(null!==(f=l.message)&&void 0!==f?f:""),this.isDuplicateEmailOrPhone=null!==(A=null===(v=l.data)||void 0===v?void 0:v.isDuplicateEmailOrPhone)&&void 0!==A?A:0)}))})}validateEmail(t){return t.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}checkValidateUser(t){this.msgError="",isNaN(Number(t))?this.validateEmail(t)?(this.checkValidateUsername=!1,this.msgError=""):(this.commonService.getTranslate("lang_auto_vui_long_nhap_dung_dinh_dang_email").subscribe(o=>{this.msgError=o}),this.checkValidateUsername=!0):10==t.length?(this.msgError="",this.checkValidateUsername=!1):(this.commonService.getTranslate("lang_auto_so_dien_thoai_phai_la_so_va_10_ky_tu").subscribe(o=>{this.msgError=o}),this.checkValidateUsername=!0)}googleSignIn(){this.fireAuth.signInWithRedirect(new We.hJ).then(()=>this.fireAuth.getRedirectResult().then(t=>{})).catch(t=>{console.log(t)})}signInWithTokenGoogle(t){this.checkLoadingLogin=!0;let o=this.commonService.getMyParam(this.activeRoute,"type"),r=parseInt(null!=o?o:"0",10);t.getIdToken().then(l=>{this.subscriptions.add(this.authService.apiAuthAuthByFirebasePost({isRegisterForm:1,isRegisterForTeacher:r,firebaseToken:l}).subscribe(f=>{var v,A,E,j,z;1==f.success?(this.isStudent?this.baseApiService.redirectLoginForStudent(null!==(v=this.commonService.getMyQueryParam("return_url"))&&void 0!==v?v:""):this.baseApiService.redirectLoginByRole(null!==(A=this.commonService.getMyQueryParam("return_url"))&&void 0!==A?A:""),this.successStatusObj(),this.checkLoadingLogin=!1):(this.errorStatusObj(null!==(E=f.message)&&void 0!==E?E:"",!0),this.isDuplicateEmailOrPhone=null!==(z=null===(j=f.data)||void 0===j?void 0:j.isDuplicateEmailOrPhone)&&void 0!==z?z:0,this.checkLoadingLogin=!1)}))})}togglePassword(){this.showPassword=!this.showPassword}ngOnInit(){if(this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole())this.baseApiService.redirectLoginByRole("");else{var t=this.commonService.getMyParam(this.activeRoute,"type");if(null!=t){var o=parseInt(null==t?void 0:t.toString(),10);this.changeRegisterType(0==o?0:1)}this.yesterday.setDate(this.yesterday.getDate()-1),this.form=this.formBuilder.group({fullName:["",[u.kI.required,Ce._.noWhiteSpace]],username:["",[u.kI.required,Ce._.noWhiteSpace]],password:["",[u.kI.required,u.kI.minLength(6)]]}),this.formRegister=this.formBuilder.group({studentFullName:["",[u.kI.required,Ce._.noWhiteSpace]],studentUsername:["",[u.kI.required,Ce._.noWhiteSpace]],studentPassword:["",[u.kI.required,u.kI.minLength(6)]]}),this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getLocalRouter("/admin/testbank/dashboard"),this.zaloLoginUrl=oe.N.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_register=1"),!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()&&this.myNavigation("/student/dashboard/0"),this.commonService.translateMetaData({title:"lang_cms_auth_register_title",description:"lang_cms_auth_register_description",image:"lang_cms_test_image"}),this.stopStatusObj()}super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.QS),e.Y36(I.gz),e.Y36(L.v),e.Y36(x._),e.Y36(Ko.YC),e.Y36(lt),e.Y36(F.e8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],features:[e.qOj],decls:17,vars:9,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"row","py-5"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],["class","row","style","justify-content: space-around",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"row",2,"justify-content","space-around"],[1,"col-sm-4","border-card","mb-3",3,"click"],[1,"df-logo"],[1,"fas","fa-graduation-cap","pb-3",2,"font-size","36px"],["width","36px","height","45px",1,"mb-3",3,"src"],[3,"hidden"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-6","text-center","mb-3"],[1,"clickable","select-style",3,"click"],[1,"fas","fa-graduation-cap"],[1,"fas","fa-user-alt"],[1,"row"],[1,"col-12"],["id","teacher",4,"ngIf"],["id","chilren",4,"ngIf"],[1,"mt-2",2,"text-align","justify","font-size","13px"],["href","/privacy/index.html","target","_blank"],[1,"text-center","mt-3"],[1,"text-normal"],[4,"ngIf","ngIfElse"],["normalRedirectLogin",""],["id","teacher"],[1,"form-horizontal",3,"formGroup"],[1,"col-sm-12"],[1,"form-group"],[1,"col-sm-12","p-0"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["type","text","formControlName","fullName","autocomplete","new-password",1,"form-control",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],["id","basic-addon3",1,"input-group-text",2,"padding-left","0.35rem","padding-right","0.35rem"],[2,"width","15px","height","15px","font-size","15px"],["type","phone","formControlName","username","autocomplete","new-password",1,"form-control",3,"placeholder","input"],["id","basic-addon3",1,"input-group-text"],["formControlName","password",1,"form-control","pr-40",3,"type","placeholder"],[1,"btn-toggle-password",3,"click"],["class","form-group",4,"ngIf"],["mat-raised-button","",1,"btn-azt-primary",2,"width","100%",3,"disabled","click"],[1,"text-center","my-3"],[1,"h6","mute-text"],["mat-stroked-button","",2,"width","100%","padding","1px",3,"click"],["alt","Zalo Icon",1,"img-responsive","zalo-icon",3,"src"],[1,"alert","alert-danger"],["class","col-sm-12 control-label text-danger",4,"ngIf","ngIfElse"],["anotherError",""],[1,"col-sm-12","control-label","text-danger"],[3,"routerLink","queryParams"],["role","status",1,"spinner-border","spinner-border-sm"],["id","chilren"],[1,"form-horinzal",3,"formGroup"],["type","text","formControlName","studentFullName","autocomplete","new-password",1,"form-control",3,"placeholder"],["type","phone","formControlName","studentUsername","autocomplete","new-password",1,"form-control",3,"placeholder","input"],["formControlName","studentPassword",1,"form-control","pr-40",3,"type","placeholder"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),e._UZ(7,"img",7),e.ALo(8,"convertCdn"),e.qZA(),e.TgZ(9,"h3",8),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",9),e.YNc(13,te,6,3,"div",10),e.YNc(14,_e,14,9,"div",11),e.YNc(15,Ma,37,36,"div",12),e.qZA()()(),e._UZ(16,"div",2),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("src",e.lcZ(8,5,"azota_assets/images/logo.svg"),e.LSH),e.xp6(3),e.Oqu(e.lcZ(11,7,"lang_auto_dang_ky_tai_khoan")),e.xp6(3),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.Q6J("ngIf",1==o.isShowOption),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading))},dependencies:[I.yS,C.O5,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,u.sg,u.u,D.lO,y.bT,y.BI],styles:['.zalo-icon[_ngcontent-%COMP%]{height:30px;margin-right:10px}.select-style[_ngcontent-%COMP%]{color:#868686!important}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}.select-style[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.select-style[_ngcontent-%COMP%]:hover, .select-style-active[_ngcontent-%COMP%]{color:#2361ae!important}.df-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.register--login[_ngcontent-%COMP%]{width:88px;height:88px}.two-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%;height:100vh;margin:auto}.register-button[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center}.btn-max-width[_ngcontent-%COMP%]{width:100%;padding-top:1.25rem;padding-bottom:1.25rem;font-size:1.5rem}.responsive__text[_ngcontent-%COMP%]{width:90%;margin-left:auto;margin-right:auto}.btn-outline-primary[_ngcontent-%COMP%]{color:#2361ae!important;border-color:#2361ae!important}.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#2361ae!important;background-color:#2361ae!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b818e!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#2361ae!important;border-color:#2361ae!important;background-color:#0eacbe26}.btn-border-fix[_ngcontent-%COMP%]{border-radius:10px!important}.border-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid hsla(0deg,0%,86.3%,.8);border-radius:8px;cursor:pointer;padding:12px;align-items:center;text-align:center}.border-card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 20px #00000012,-10px -10px 20px #fffc}.button-color[_ngcontent-%COMP%]{background-color:#2361ae!important;color:#fff!important}.text-line[_ngcontent-%COMP%]{position:relative;text-align:center}.text-line[_ngcontent-%COMP%]:before{content:"";display:block;width:45%;height:.5px;position:absolute;right:0;background-color:#868686;top:50%}.text-line[_ngcontent-%COMP%]:after{content:"";display:block;width:45%;height:.5px;position:absolute;left:0;background-color:#868686;top:50%}.border-select-box[_ngcontent-%COMP%]{border:1px solid #ccd0d5;border-radius:4px;padding:8px 16px}  .mat-radio-label{margin-bottom:0!important}  .mat-radio-label-content{padding-left:16px!important}  .mat-radio-button.mat-accent .mat-radio-inner-circle, .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#2361ae!important}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#2361ae!important}  .mat-input-element{font-size:18px!important;caret-color:#2361ae!important}  .mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon, .mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-datepicker-toggle-default-icon[_ngcontent-%COMP%]{width:1.5em!important}button[_ngcontent-%COMP%]:disabled{background-color:#0000001f!important}.btn-toggle-password[_ngcontent-%COMP%]{position:absolute;top:6px;right:0;border:none;background:transparent;z-index:99}.btn-toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#757575;transition:all .5s}.btn-toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#434242}.pr-40[_ngcontent-%COMP%]{padding-right:40px}@media only screen and (max-width: 424px){.btn-max-width[_ngcontent-%COMP%]{font-size:1rem}}@media only screen and (max-width: 364px){.text-line[_ngcontent-%COMP%]:after, .text-line[_ngcontent-%COMP%]:before{width:40%}}']}),n})();function qa(n,s){1&n&&(e.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function Ua(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_mat_khau_phai_dai_toi_thieu_la_6")," "))}function Ra(n,s){if(1&n&&(e.TgZ(0,"div",28),e.YNc(1,Ua,3,3,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Qa(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"label",29),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function Fa(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",30),e._uU(2,"\xa0"),e.qZA())}const Na=function(n){return[n]},Da=function(){return{user_click:"true"}};function ja(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17),e._UZ(4,"input",18),e.ALo(5,"mytranslate"),e.TgZ(6,"div",19)(7,"span",20)(8,"mat-icon"),e._uU(9,"lock"),e.qZA()()()(),e.TgZ(10,"div",17),e._UZ(11,"input",21),e.ALo(12,"mytranslate"),e.TgZ(13,"div",19)(14,"span",20)(15,"mat-icon"),e._uU(16,"lock"),e.qZA()()()(),e.YNc(17,Ra,2,1,"div",22),e.qZA()(),e.YNc(18,Qa,4,3,"div",23),e.TgZ(19,"div",15)(20,"div",16)(21,"div",24)(22,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changePassword())}),e.YNc(23,Fa,3,0,"span",11),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()()()(),e._UZ(26,"hr"),e.TgZ(27,"div",26)(28,"a",27),e.ALo(29,"localize"),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.s9C("placeholder",e.lcZ(5,10,"lang_auto_mat_khau_moi")),e.xp6(7),e.s9C("placeholder",e.lcZ(12,12,"lang_auto_xac_nhan_mat_khau")),e.xp6(6),e.Q6J("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.form.invalid||t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij("",e.lcZ(25,14,"lang_auto_doi_mat_khau")," "),e.xp6(4),e.Q6J("routerLink",e.VKq(20,Na,e.lcZ(29,16,"/auth/login")))("queryParams",e.DdM(22,Da)),e.xp6(2),e.Oqu(e.lcZ(31,18,"lang_auto_dang_nhap_tai_khoan"))}}function Ja(n,s){1&n&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function za(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",21),e._uU(2,"\xa0"),e.qZA())}function Ya(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.statusObj.loading||r.becomeTeacher())}),e.YNc(4,za,3,0,"span",12),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()(),e.TgZ(7,"div",19)(8,"a",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goBack())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij("",e.lcZ(6,4,"lang_auto_click_vao_day_de_tro_thanh_giao_vien")," "),e.xp6(4),e.Oqu(e.lcZ(10,6,"lang_auto_quay_lai_trang_chu"))}}function Ha(n,s){if(1&n&&(e.TgZ(0,"div",5)(1,"h2",6),e._UZ(2,"img",7),e.ALo(3,"convertCdn"),e.qZA(),e.TgZ(4,"div",8)(5,"div",9)(6,"span",10),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"div",11),e.YNc(10,Ja,6,3,"div",12),e.YNc(11,Ya,11,8,"div",12),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("src",e.lcZ(3,4,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Oqu(e.lcZ(8,6,"lang_auto_toi_muon_thanh_giao_vien")),e.xp6(3),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!t.statusObj.loading)}}function Va(n,s){1&n&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function Ka(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",21),e._uU(2,"\xa0"),e.qZA())}function Ga(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.statusObj.loading||r.becomeStudent())}),e.YNc(4,Ka,3,0,"span",12),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()(),e.TgZ(7,"div",19)(8,"a",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goBack())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij("",e.lcZ(6,4,"lang_auto_click_vao_day_de_bo_quyen_giao_vien")," "),e.xp6(4),e.Oqu(e.lcZ(10,6,"lang_auto_quay_lai_trang_chu"))}}function Wa(n,s){if(1&n&&(e.TgZ(0,"div",5)(1,"h2",6),e._UZ(2,"img",7),e.ALo(3,"convertCdn"),e.qZA(),e.TgZ(4,"div",8)(5,"div",9)(6,"span",10),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"div",11),e.YNc(10,Va,6,3,"div",12),e.YNc(11,Ga,11,8,"div",12),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("src",e.lcZ(3,4,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Oqu(e.lcZ(8,6,"lang_auto_toi_muon_bo_quyen_giao_vien")),e.xp6(3),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!t.statusObj.loading)}}const $a=[{path:"",component:w,children:[{path:"login",component:Z},{path:"login-scan/:role",component:yn},{path:"register",component:_a},{path:"register/:type",component:_a},{path:"logout",component:O},{path:"confirm_forgot_password",component:xi},{path:"confirm-forgot-password-email",component:io},{path:"forgot_password_susscess",component:cn},{path:"confirm_forgot_password_qr",component:Ui},{path:"confirm_forgot_password_old",component:Zi},{path:"confirm_account",component:ui},{path:"checking_service",component:Nt},{path:"set_new_password",component:(()=>{class n extends R.Q{constructor(t,o,r,l){super(o),this.formBuilder=t,this.commonService=o,this.baseApiService=r,this.userInfoService=l,this.form=new u.nJ({})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,o){var r,l;return!(null===(r=this.form.controls[t].errors)||void 0===r||!r[o])&&(null===(l=this.form.controls[t].errors)||void 0===l?void 0:l[o])}changePassword(){if(this.form.valid)if(this.form.value.password!=this.form.value.confirm_password)this.showErrorSnack("lang_auto_xac_nhan_mat_khau_khong_khop");else{this.initStatusObj();var t=this.commonService.getFormObj(this.form),o=this.commonService.getMyQueryParam("token"),r=this.commonService.getMyQueryParam("app_name");this.subscriptions.add(this.userInfoService.apiUserInfoChangePasswordByFirebasePost({firebaseToken:o,newPassword:t.password,appName:r}).subscribe(_=>{var f;1==_.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(f=_.message)&&void 0!==f?f:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[u.kI.required,u.kI.minLength(6)]],confirm_password:""}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.QS),e.Y36(L.v),e.Y36(x._),e.Y36(F.$C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password"]],features:[e.qOj],decls:17,vars:9,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","formControlName","password","autocomplete","off",1,"form-control",3,"placeholder"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","formControlName","confirm_password","autocomplete","off",1,"form-control",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.ALo(7,"convertCdn"),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"span",9),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",10),e.YNc(14,qa,6,3,"div",11),e.YNc(15,ja,32,23,"div",11),e.qZA()()(),e._UZ(16,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("src",e.lcZ(7,5,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Oqu(e.lcZ(12,7,"lang_auto_doi_mat_khau_moi")),e.xp6(3),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!o.statusObj.loading))},dependencies:[I.yS,C.O5,u._Y,u.Fj,u.JJ,u.JL,Q.lW,S.Hw,u.sg,u.u,D.lO,y.bT,y.BI],encapsulation:2}),n})()},{path:"change-info",component:Ft},{path:"switch-teacher-student",component:(()=>{class n extends R.Q{constructor(t,o,r){super(r),this.baseApiService=t,this.userInfoService=o,this.commonService=r,this.isTeacher=!1,this.isStudent=!1}goBack(){this.baseApiService.redirectLoginByRole("")}becomeTeacher(){this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoConvertToTeacherGet().subscribe(t=>{var o;1==t.success?this.baseApiService.redirectLoginByRole(""):this.errorStatusObj(null!==(o=t.message)&&void 0!==o?o:"",!0)}))}becomeStudent(){this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoRemoveTeacherRoleGet().subscribe(t=>{var o;1==t.success?this.baseApiService.redirectLoginByRole(this.commonService.getLocalRouter("/student/dashboard/0")):this.errorStatusObj(null!==(o=t.message)&&void 0!==o?o:"",!0)}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_auto_doi_vai_tro",description:"lang_auto_doi_vai_tro",image:"lang_cms_test_image"}),this.isTeacher=this.baseApiService.isTeacherRole(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x._),e.Y36(F.$C),e.Y36(L.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-switch-teacher-student"]],features:[e.qOj],decls:7,vars:2,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.YNc(4,Ha,12,8,"div",4),e.YNc(5,Wa,12,8,"div",4),e._UZ(6,"div",3),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",0==o.isTeacher),e.xp6(1),e.Q6J("ngIf",1==o.isTeacher))},dependencies:[C.O5,Q.lW,y.bT,y.BI]}),n})()},{path:"create-qr-forgot-pass/:role",component:zi},{path:"change-email",component:W},{path:"confirm-change-email",component:jt},{path:"choose-role",component:Ge}]}];let Xa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[I.Bz.forChild($a),I.Bz,D.fQ]}),n})(),es=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[I.Bz,C.ez,u.u5,k.Z_,ae.j,u.UX,Xa,re.W,ge.Z,H.hO.initializeApp(oe.N.firebaseConfig_app1,"auth")]}),n})()},60703:(Te,he,h)=>{h.d(he,{HF:()=>oe,o8:()=>re});var C=h(70024),H=h(5e3),u=h(15439);const k=h.n(u)()||u,re=new H.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function ge(){return{useUtc:!1}}});function ae(D,R){const e=Array(D);for(let x=0;x<D;x++)e[x]=R(x);return e}let oe=(()=>{class D extends C.fM{constructor(e){super(),this._options=e,this._localeData={firstDayOfWeek:0,longMonths:"",shortMonths:"",dates:"",longDaysOfWeek:"",shortDaysOfWeek:"",narrowDaysOfWeek:""};let F="vi";-1===window.location.href.indexOf("en")&&(F="vi"),k.locale(),this.setLocale(F||k.locale())}setLocale(e){super.setLocale(e);const x=k.localeData(e);this._localeData={firstDayOfWeek:x.firstDayOfWeek(),longMonths:x.months(),shortMonths:x.monthsShort(),dates:ae(31,L=>this.createDate(2017,0,L+1).format("D")),longDaysOfWeek:x.weekdays(),shortDaysOfWeek:x.weekdaysShort(),narrowDaysOfWeek:x.weekdaysMin()}}getYear(e){return this.clone(e).year()}getMonth(e){return this.clone(e).month()}getDate(e){return this.clone(e).date()}getDayOfWeek(e){return this.clone(e).day()}getMonthNames(e){return"long"===e?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(e){return"long"===e?this._localeData.longDaysOfWeek:"short"===e?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(e){return this.clone(e).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(e){return this.clone(e).daysInMonth()}clone(e){return e.clone().locale(this.locale)}createDate(e,x,L){if(x<0||x>11)throw Error(`Invalid month index "${x}". Month index has to be between 0 and 11.`);if(L<1)throw Error(`Invalid date "${L}". Date has to be greater than 0.`);const F=this._createMoment({year:e,month:x,date:L}).locale(this.locale);if(!F.isValid())throw Error(`Invalid date "${L}" for month with index "${x}".`);return F}today(){return this._createMoment().locale(this.locale)}parse(e,x){return e&&"string"==typeof e?this._createMoment(e,x,this.locale):e?this._createMoment(e).locale(this.locale):null}format(e,x){if(e=this.clone(e),!this.isValid(e))throw Error("MomentDateAdapter: Cannot format invalid date.");return e.format(x)}addCalendarYears(e,x){return this.clone(e).add({years:x})}addCalendarMonths(e,x){return this.clone(e).add({months:x})}addCalendarDays(e,x){return this.clone(e).add({days:x})}toIso8601(e){return this.clone(e).format()}deserialize(e){let x;if(e instanceof Date)x=this._createMoment(e).locale(this.locale);else if(this.isDateInstance(e))return this.clone(e);if("string"==typeof e){if(!e)return null;x=this._createMoment(e,k.ISO_8601).locale(this.locale)}return x&&this.isValid(x)?this._createMoment(x).locale(this.locale):super.deserialize(e)}isDateInstance(e){return k.isMoment(e)}isValid(e){return this.clone(e).isValid()}invalid(){return k.invalid()}getHour(e){return e.hours()}getMinute(e){return e.minutes()}getSecond(e){return e.seconds()}setHour(e,x){e.hours(x)}setMinute(e,x){e.minutes(x)}setSecond(e,x){e.seconds(x)}_createMoment(e,x,L){const{strict:F,useUtc:Q}=this._options||{};return Q?k.utc(e,x,L,F):k(e,x,L,F)}}return D.\u0275fac=function(e){return new(e||D)(H.LFG(re,8))},D.\u0275prov=H.Yz7({token:D,factory:D.\u0275fac}),D})()},70127:(Te,he,h)=>{h.d(he,{Z:()=>C.Z});var C=h(63942);C.Z.registerVersion("firebase","9.8.4","app-compat")},63942:(Te,he,h)=>{h.d(he,{Z:()=>F});var C=h(42090),H=h(34859),u=h(49681),I=h(41877);class k{constructor(S,y){this._delegate=S,this.firebase=y,(0,u._addComponent)(S,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=S.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(S){this._delegate.automaticDataCollectionEnabled=S}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(S=>{this._delegate.checkDestroyed(),S()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,u.deleteApp)(this._delegate)))}_getService(S,y=u._DEFAULT_ENTRY_NAME){var U;this._delegate.checkDestroyed();const q=this._delegate.container.getProvider(S);return!q.isInitialized()&&"EXPLICIT"===(null===(U=q.getComponent())||void 0===U?void 0:U.instantiationMode)&&q.initialize(),q.getImmediate({identifier:y})}_removeServiceInstance(S,y=u._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(S).clearInstance(y)}_addComponent(S){(0,u._addComponent)(this._delegate,S)}_addOrOverwriteComponent(S){(0,u._addOrOverwriteComponent)(this._delegate,S)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),D=function oe(){const Q=function ae(Q){const S={},y={__esModule:!0,initializeApp:function J(P,W={}){const N=u.initializeApp(P,W);if((0,C.r3)(S,N.name))return S[N.name];const ce=new Q(N,y);return S[N.name]=ce,ce},app:q,registerVersion:u.registerVersion,setLogLevel:u.setLogLevel,onLog:u.onLog,apps:null,SDK_VERSION:u.SDK_VERSION,INTERNAL:{registerComponent:function G(P){const W=P.name,N=W.replace("-compat","");if(u._registerComponent(P)&&"PUBLIC"===P.type){const ce=(pe=q())=>{if("function"!=typeof pe[N])throw ge.create("invalid-app-argument",{appName:W});return pe[N]()};void 0!==P.serviceProps&&(0,C.ZB)(ce,P.serviceProps),y[N]=ce,Q.prototype[N]=function(...pe){return this._getService.bind(this,W).apply(this,P.multipleInstances?pe:[])}}return"PUBLIC"===P.type?y[N]:null},removeApp:function U(P){delete S[P]},useAsService:function ee(P,W){return"serverAuth"===W?null:W},modularAPIs:u}};function q(P){if(!(0,C.r3)(S,P=P||u._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:P});return S[P]}return y.default=y,Object.defineProperty(y,"apps",{get:function se(){return Object.keys(S).map(P=>S[P])}}),q.App=Q,y}(k);return Q.INTERNAL=Object.assign(Object.assign({},Q.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function S(y){(0,C.ZB)(Q,y)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),Q}(),R=new I.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){R.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Q=self.firebase.SDK_VERSION;Q&&Q.indexOf("LITE")>=0&&R.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const F=D;!function L(Q){(0,u.registerVersion)("@firebase/app-compat","0.1.28",Q)}()}}]);