!function(){function n(n){return function(n){if(Array.isArray(n))return n}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return t(n,e);var o=Object.prototype.toString.call(n).slice(8,-1);"Object"===o&&n.constructor&&(o=n.constructor.name);if("Map"===o||"Set"===o)return Array.from(n);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(n,e)}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}function e(n,t,o){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(n,t,e){var o=function(n,t){for(;!Object.prototype.hasOwnProperty.call(n,t)&&null!==(n=l(n)););return n}(n,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(e):i.value}})(n,t,o||n)}function o(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function i(n,t,e){return t&&o(n.prototype,t),e&&o(n,e),n}function a(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&r(n,t)}function r(n,t){return(r=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function c(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var e,o=l(n);if(t){var i=l(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return s(this,e)}}function s(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(n):t}function u(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function l(n){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function d(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{fB2i:function(n,t,e){"use strict";e.d(t,"a",function(){return S}),e.d(t,"b",function(){return j});var o=e("fXoL"),r=e("ofXK"),s=e("3Pt+");function l(n,t){}var b,h=function(){var n="undefined"!=typeof window?window:void 0;return n&&n.tinymce?n.tinymce:null},g=function(){var n=function n(){d(this,n),this.onBeforePaste=new o.o,this.onBlur=new o.o,this.onClick=new o.o,this.onContextMenu=new o.o,this.onCopy=new o.o,this.onCut=new o.o,this.onDblclick=new o.o,this.onDrag=new o.o,this.onDragDrop=new o.o,this.onDragEnd=new o.o,this.onDragGesture=new o.o,this.onDragOver=new o.o,this.onDrop=new o.o,this.onFocus=new o.o,this.onFocusIn=new o.o,this.onFocusOut=new o.o,this.onKeyDown=new o.o,this.onKeyPress=new o.o,this.onKeyUp=new o.o,this.onMouseDown=new o.o,this.onMouseEnter=new o.o,this.onMouseLeave=new o.o,this.onMouseMove=new o.o,this.onMouseOut=new o.o,this.onMouseOver=new o.o,this.onMouseUp=new o.o,this.onPaste=new o.o,this.onSelectionChange=new o.o,this.onActivate=new o.o,this.onAddUndo=new o.o,this.onBeforeAddUndo=new o.o,this.onBeforeExecCommand=new o.o,this.onBeforeGetContent=new o.o,this.onBeforeRenderUI=new o.o,this.onBeforeSetContent=new o.o,this.onChange=new o.o,this.onClearUndos=new o.o,this.onDeactivate=new o.o,this.onDirty=new o.o,this.onExecCommand=new o.o,this.onGetContent=new o.o,this.onHide=new o.o,this.onInit=new o.o,this.onInitNgModel=new o.o,this.onLoadContent=new o.o,this.onNodeChange=new o.o,this.onPostProcess=new o.o,this.onPostRender=new o.o,this.onPreInit=new o.o,this.onPreProcess=new o.o,this.onProgressState=new o.o,this.onRedo=new o.o,this.onRemove=new o.o,this.onReset=new o.o,this.onSaveContent=new o.o,this.onSetAttrib=new o.o,this.onObjectResizeStart=new o.o,this.onObjectResized=new o.o,this.onObjectSelected=new o.o,this.onSetContent=new o.o,this.onShow=new o.o,this.onSubmit=new o.o,this.onUndo=new o.o,this.onVisualAid=new o.o};return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.Kb({type:n,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),n}(),f=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],v=function(n,t){return"string"==typeof n?n.split(",").map(function(n){return n.trim()}):Array.isArray(n)?n:t},p=0,m=function(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++p+String(t)},w=function(n){return void 0!==n&&"textarea"===n.tagName.toLowerCase()},x=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},k=function(){},_=function(n){return null==n},y=function(){return{listeners:[],scriptId:m("tiny-script"),scriptLoaded:!1}},O=(b=y(),{load:function(n,t,e){b.scriptLoaded?e():(b.listeners.push(e),n.getElementById(b.scriptId)||function(n,t,e,o){var i=t.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=e,i.addEventListener("load",function n(){i.removeEventListener("load",n),b.listeners.forEach(function(n){return n()}),b.scriptLoaded=!0}),t.head&&t.head.appendChild(i)}(b.scriptId,n,t))},reinitialize:function(){b=y()}}),C=new o.s("TINYMCE_SCRIPT_SRC"),P={provide:s.p,useExisting:Object(o.X)(function(){return S}),multi:!0},S=function(){var n=function(n){a(e,n);var t=c(e);function e(n,o,i,a){var r;return d(this,e),(r=t.call(this)).platformId=i,r.tinymceScriptSrc=a,r.cloudChannel="5",r.apiKey="no-api-key",r.id="",r.modelEvents="change input undo redo",r.onTouchedCallback=k,r.onChangeCallback=k,r._elementRef=n,r.ngZone=o,r.initialise=r.initialise.bind(u(r)),r}return i(e,[{key:"writeValue",value:function(n){this._editor&&this._editor.initialized?this._editor.setContent(_(n)?"":n):this.initialValue=null===n?void 0:n}},{key:"registerOnChange",value:function(n){this.onChangeCallback=n}},{key:"registerOnTouched",value:function(n){this.onTouchedCallback=n}},{key:"setDisabledState",value:function(n){this._editor?this._editor.setMode(n?"readonly":"design"):n&&(this.init=Object.assign(Object.assign({},this.init),{readonly:!0}))}},{key:"ngAfterViewInit",value:function(){Object(r.y)(this.platformId)&&(this.id=this.id||m("tiny-angular"),this.inline=void 0!==this.inline?"boolean"!=typeof this.inline||this.inline:this.init&&this.init.inline,this.createElement(),null!==h()?this.initialise():this._element&&this._element.ownerDocument&&O.load(this._element.ownerDocument,this.getScriptSrc(),this.initialise))}},{key:"ngOnDestroy",value:function(){null!==h()&&h().remove(this._editor)}},{key:"createElement",value:function(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(this._element.id=this.id,w(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}},{key:"initialise",value:function(){var n,t,e=this,o=Object.assign(Object.assign({},this.init),{target:this._element,inline:this.inline,readonly:this.disabled,plugins:(n=this.init&&this.init.plugins,t=this.plugins,x(n).concat(x(t))),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:function(n){e._editor=n,n.on("init",function(t){e.initEditor(n)}),function(n,t){(function(n){var t=v(n.ignoreEvents,[]);return v(n.allowedEvents,f).filter(function(n){return f.includes(n)&&!t.includes(n)})})(n).forEach(function(e){var o=n[e];t.on(e.substring(2),function(e){return n.ngZone.run(function(){return o.emit({event:e,editor:t})})})})}(e,n),e.init&&"function"==typeof e.init.setup&&e.init.setup(n)}});w(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(function(){h().init(o)})}},{key:"getScriptSrc",value:function(){return _(this.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(this.apiKey,"/tinymce/").concat(this.cloudChannel,"/tinymce.min.js"):this.tinymceScriptSrc}},{key:"initEditor",value:function(n){var t=this;n.on("blur",function(){return t.ngZone.run(function(){return t.onTouchedCallback()})}),n.on(this.modelEvents,function(){t.ngZone.run(function(){return t.onChangeCallback(n.getContent({format:t.outputFormat}))})}),"string"==typeof this.initialValue&&this.ngZone.run(function(){n.setContent(t.initialValue),n.getContent()!==t.initialValue&&t.onChangeCallback(n.getContent({format:t.outputFormat})),void 0!==t.onInitNgModel&&t.onInitNgModel.emit(n)})}},{key:"disabled",set:function(n){this._disabled=n,this._editor&&this._editor.initialized&&this._editor.setMode(n?"readonly":"design")},get:function(){return this._disabled}},{key:"editor",get:function(){return this._editor}}]),e}(g);return n.\u0275fac=function(t){return new(t||n)(o.Pb(o.l),o.Pb(o.B),o.Pb(o.D),o.Pb(C,8))},n.\u0275cmp=o.Jb({type:n,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",id:"id",modelEvents:"modelEvents",disabled:"disabled",initialValue:"initialValue",init:"init",inline:"inline",outputFormat:"outputFormat",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents"},features:[o.Cb([P]),o.Ab],decls:1,vars:0,template:function(n,t){1&n&&o.Rc(0,l,0,0,"ng-template")},styles:["[_nghost-%COMP%] { display: block; }"]}),n}(),j=function(){var n=function n(){d(this,n)};return n.\u0275mod=o.Nb({type:n}),n.\u0275inj=o.Mb({factory:function(t){return new(t||n)},imports:[[r.c,s.m]]}),n}()},jtFE:function(t,o,r){"use strict";r.r(o),r.d(o,"PowerpointFrontModule",function(){return In});var s=r("ofXK"),u=r("3Pt+"),b=r("0IaG"),h=r("tyNb"),g=r("fB2i"),f=r("Zhhu"),v=r("vvyD"),p=r("sOeQ"),m=r("quSY"),w=r("itXk"),x=r("W8E8"),k=r("gm2p"),_=r("fXoL"),y=r("PYj7"),O=r("oUVn"),C=r("o9K7"),P=r("luLc"),S=r("iWHX");function j(n,t){1&n&&_.Qb(0,"azt-loading-effect")}var M=function(){return{}};function D(n,t){if(1&n){var e=_.Wb();_.Vb(0,"div"),_.Vb(1,"azt-template-one",14),_.cc("chooseAnswer",function(n){return _.Ec(e),_.gc(2).setAnswerObjs(n)})("changeAnswerWithResult",function(){return _.Ec(e),_.gc(2).changeAnswerWithResult()}),_.Ub(),_.Ub()}if(2&n){var o=_.gc(2);_.Db(1),_.nc("indexQuestion",null==o.curQuestionObj?null:o.curQuestionObj.index)("questionObj",o.curQuestionObj||_.sc(4,M))("isAnswer",!o.isResult)("studentAnswer",null!=o.curQuestionObj&&o.curQuestionObj.defaultStudentAnswer&&(null==o.curQuestionObj||null==o.curQuestionObj.defaultStudentAnswer?null:o.curQuestionObj.defaultStudentAnswer.answer)||"")}}function U(n,t){if(1&n){var e=_.Wb();_.Vb(0,"div"),_.Vb(1,"azt-template-two",14),_.cc("chooseAnswer",function(n){return _.Ec(e),_.gc(2).setAnswerObjs(n)})("changeAnswerWithResult",function(){return _.Ec(e),_.gc(2).changeAnswerWithResult()}),_.Ub(),_.Ub()}if(2&n){var o=_.gc(2);_.Db(1),_.nc("indexQuestion",null==o.curQuestionObj?null:o.curQuestionObj.index)("questionObj",o.curQuestionObj||_.sc(4,M))("isAnswer",!o.isResult)("studentAnswer",null!=o.curQuestionObj&&o.curQuestionObj.defaultStudentAnswer&&(null==o.curQuestionObj||null==o.curQuestionObj.defaultStudentAnswer?null:o.curQuestionObj.defaultStudentAnswer.answer)||"")}}function I(n,t){if(1&n){var e=_.Wb();_.Vb(0,"div"),_.Vb(1,"azt-template-three",14),_.cc("chooseAnswer",function(n){return _.Ec(e),_.gc(2).setAnswerObjs(n)})("changeAnswerWithResult",function(){return _.Ec(e),_.gc(2).changeAnswerWithResult()}),_.Ub(),_.Ub()}if(2&n){var o=_.gc(2);_.Db(1),_.nc("indexQuestion",null==o.curQuestionObj?null:o.curQuestionObj.index)("questionObj",o.curQuestionObj||_.sc(4,M))("isAnswer",!o.isResult)("studentAnswer",null!=o.curQuestionObj&&o.curQuestionObj.defaultStudentAnswer&&(null==o.curQuestionObj||null==o.curQuestionObj.defaultStudentAnswer?null:o.curQuestionObj.defaultStudentAnswer.answer)||"")}}function A(n,t){if(1&n){var e=_.Wb();_.Vb(0,"button",15),_.cc("click",function(){return _.Ec(e),_.gc(2).openDialog()}),_.Tc(1),_.hc(2,"mytranslate"),_.Ub()}2&n&&(_.Db(1),_.Vc(" ",_.ic(2,1,"lang_powerpoint_frontend_detail_submit")," "))}function V(n,t){if(1&n){var e=_.Wb();_.Vb(0,"button",15),_.cc("click",function(){return _.Ec(e),_.gc(2).redirectResult()}),_.Tc(1),_.hc(2,"mytranslate"),_.Ub()}2&n&&(_.Db(1),_.Vc(" ",_.ic(2,1,"lang_powerpoint_frontend_detail_view_result")," "))}function B(n,t){if(1&n){var e=_.Wb();_.Vb(0,"div",3),_.Rc(1,D,2,5,"div",4),_.Rc(2,U,2,5,"div",4),_.Rc(3,I,2,5,"div",4),_.Ub(),_.Vb(4,"div",5),_.Vb(5,"div",6),_.Vb(6,"div",7),_.Vb(7,"div",8),_.Vb(8,"span",9),_.Tc(9),_.Ub(),_.Ub(),_.Ub(),_.Vb(10,"div",10),_.Vb(11,"azt-next-back-btn",11),_.cc("goToPrevEmit",function(n){return _.Ec(e),_.gc().prevScreenPP(n)})("goToNextEmit",function(n){return _.Ec(e),_.gc().nextScreenPP(n)}),_.Ub(),_.Ub(),_.Vb(12,"div",12),_.Rc(13,A,3,3,"button",13),_.Rc(14,V,3,3,"button",13),_.Ub(),_.Ub(),_.Ub()}if(2&n){var o=_.gc();_.nc("ngSwitch",o.templateId),_.Db(1),_.nc("ngSwitchCase",1),_.Db(1),_.nc("ngSwitchCase",2),_.Db(1),_.nc("ngSwitchCase",3),_.Db(6),_.Uc(o.testName),_.Db(2),_.nc("curIndex",o.curIndex)("totalQuestion",o.totalQuestion)("disableBackBtn",o.disableBackBtn)("disableNextBtn",o.disableNextBtn),_.Db(2),_.nc("ngIf",!o.isResult),_.Db(1),_.nc("ngIf",o.isResult)}}var E,R,Q=".app[_ngcontent-%COMP%]{overflow-x:hidden;padding-bottom:40px}.maxW1200[_ngcontent-%COMP%]{max-width:1200px}.block[_ngcontent-%COMP%]{margin-top:30px}.block-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.text-align[_ngcontent-%COMP%]{text-align:left}.control[_ngcontent-%COMP%]{display:flex;justify-content:center}.control-next[_ngcontent-%COMP%], .control-prev[_ngcontent-%COMP%]{margin:0 15px}.control-btn[_ngcontent-%COMP%]{color:#fff;background-color:#169bd5;padding:5px 15px}.control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;font-weight:700;width:30px;height:30px}.block-submit[_ngcontent-%COMP%]{text-align:right;display:flex;align-items:flex-end;justify-content:flex-end}.block-control[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn-submit[_ngcontent-%COMP%]{background-color:#f39c12;padding:5px 25px;color:#fff;transition:all .5s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#e09214}.padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}@media screen and (max-width:768px){.block-submit[_ngcontent-%COMP%]{text-align:center;display:flex;align-items:center;justify-content:center}.padding-bottom[_ngcontent-%COMP%]{padding-bottom:16px}.btn-submit[_ngcontent-%COMP%]{width:50%}.text-align[_ngcontent-%COMP%]{text-align:center}}",T=((R=function(t){a(r,t);var o=c(r);function r(n,t,e,i,a,c){var s;return d(this,r),(s=o.call(this,i)).dialog=n,s.router=t,s.frontPowerPointLinkService=e,s.commonService=i,s.docxService=a,s.homeworkExamService=c,s.subscriptions=new m.a,s.status_obj={loading:!1,error:!1,error_obj:{message:""}},s.backLink="",s.testName="Nguy\u1ec5n V\u0103n A",s.dataSubmit={},s.answers=[],s.curIndex=0,s.totalQuestion=0,s.disableBackBtn=!1,s.disableNextBtn=!1,s.isResult=!1,s.templateId=1,s}return i(r,[{key:"prevScreenPP",value:function(n){var t;if(n){var e=this.curIndex>0?this.curIndex-1:0;this.curQuestionObj=null===(t=this.questionObjs)||void 0===t?void 0:t[e],this.curIndex=e,0==e?(this.disableBackBtn=!0,this.disableNextBtn=!1):(this.disableBackBtn=!1,this.disableNextBtn=!1)}}},{key:"nextScreenPP",value:function(n){var t,e,o,i,a,r,c;if(n){var s=this.curIndex==(null!==(e=null===(t=this.questionObjs)||void 0===t?void 0:t.length)&&void 0!==e?e:0)-1?null!==(i=null===(o=this.questionObjs)||void 0===o?void 0:o.length)&&void 0!==i?i:0:this.curIndex+1;this.curQuestionObj=null===(a=this.questionObjs)||void 0===a?void 0:a[s],this.curIndex=s,s==(null!==(c=null===(r=this.questionObjs)||void 0===r?void 0:r.length)&&void 0!==c?c:0)-1?(this.disableNextBtn=!0,this.disableBackBtn=!1):(this.disableNextBtn=!1,this.disableBackBtn=!1)}}},{key:"setAnswerObjs",value:function(n){var t,e,o,i,a,r=null===(t=this.answers)||void 0===t?void 0:t.filter(function(t){return t.questionId==n.id});if(null!=n.index&&(null===(e=this.curQuestionObj)||void 0===e?void 0:e.id)==n.id){var c={questionId:n.id,answerContent:[{index:n.index,content:null===(o=n.event)||void 0===o?void 0:o.key}]};r&&r.length>0?null===(i=this.answers)||void 0===i||i.forEach(function(n){n.questionId==c.questionId&&(n.answerContent=c.answerContent)}):null===(a=this.answers)||void 0===a||a.push(c),this.changeStatusAnswer(n.id,n.index)}}},{key:"changeStatusAnswer",value:function(n,t){var e,o=this;null===(e=this.questionObjs)||void 0===e||e.forEach(function(e){if(e.id==n&&e.answerConfigParse&&e.answerConfigParse.length>0){for(var i=0;i<e.answerConfigParse.length;i++)e.answerConfigParse[i].checked=!1,e.answerConfig=JSON.stringify(e.answerConfigParse);e.answerConfigParse[null!=t?t:-1].checked=!0,e.answerConfig=JSON.stringify(e.answerConfigParse),o.curQuestionObj=e}})}},{key:"changeAnswerWithResult",value:function(){this.showErrorSnack("Kh\xf4ng th\u1ec3 thay \u0111\u1ed5i \u0111\xe1p \xe1n sau khi n\u1ed9p b\xe0i.")}},{key:"redirectResult",value:function(){var n,t;this.commonService.myNavigation("/powerpoint/result/"+(null===(n=this.resultObj)||void 0===n?void 0:n.id)+"/"+(null===(t=this.resultObj)||void 0===t?void 0:t.hashCode))}},{key:"SaveAnswersObjs",value:function(){var n=this;this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.frontPowerPointLinkService.apiFrontPowerPointLinkSaveAnswersObjsPost(this.dataSubmit).subscribe(function(t){var e,o;if(1==t.success){var i=null===(e=t.data)||void 0===e?void 0:e.id,a=null===(o=t.data)||void 0===o?void 0:o.hashCode;n.commonService.myNavigation("/powerpoint/result/"+i+"/"+a),n.status_obj={loading:!1,error:!1,error_obj:{message:""}}}else"lang_core_cannot_resend_answer"==t.message?(n.status_obj={loading:!1,error:!1,error_obj:{message:""}},n.commonService.snackError("B\u1ea1n kh\xf4ng th\u1ec3 g\u1eedi l\u1ea1i b\xe0i l\xe0m","\u0110\xf3ng")):(n.status_obj={loading:!1,error:!1,error_obj:{message:""}},n.commonService.snackError("L\u1ed7i: N\u1ed9p b\xe0i kh\xf4ng th\xe0nh c\xf4ng","\u0110\xf3ng"))})}},{key:"submitTestPP",value:function(){this.dataSubmit={id:this.JoinLinkId,hashCode:this.hashCode,answers:this.answers},this.SaveAnswersObjs()}},{key:"openDialog",value:function(){var n=this;this.dialog.open(q,{width:"450px",data:{}}).afterClosed().subscribe(function(t){"next"==t&&n.submitTestPP()})}},{key:"setupStudentAnswers",value:function(){for(var n,t,e,o,i,a,r,c,s=this,u=0;u<(null!==(t=null===(n=this.questionObjs)||void 0===n?void 0:n.length)&&void 0!==t?t:0);u++)null===(e=this.defaultStudentAnswers)||void 0===e||e.push({questionId:null===(o=this.questionObjs)||void 0===o?void 0:o[u].id,answer:""});if(!0===this.isResult){var l=JSON.parse(null!==(a=null===(i=this.resultObj)||void 0===i?void 0:i.answers)&&void 0!==a?a:"");null===(r=this.defaultStudentAnswers)||void 0===r||r.forEach(function(n){for(var t=0;t<l.length;t++)n.questionId==l[t].QuestionId&&(n.answer=l[t].AnswerContent[0].Content)});for(var d=function(n){null===(c=s.questionObjs)||void 0===c||c.forEach(function(t){l[n].QuestionId===t.id&&(t.defaultStudentAnswer={questionId:l[n].QuestionId,answer:l[n].AnswerContent[0].Content})})},b=0;b<l.length;b++)d(b)}}},{key:"getData",value:function(){var n=this;this.subscriptions.add(this.frontPowerPointLinkService.apiFrontPowerPointLinkGetQuestionObjsGet(this.JoinLinkId,this.hashCode).subscribe(function(t){var e,o,i,a,r,c,s,u,l,d,b,h,g,f;if(1==t.success){var v=n.commonService.castJsonToClassObjs(x.e,JSON.stringify(null===(e=t.data)||void 0===e?void 0:e.questionObjs));n.questionObjs=n.homeworkExamService.changeDataQuestions(null!=v?v:[]),n.resultObj=null===(o=t.data)||void 0===o?void 0:o.resultObj,n.testName=null!==(a=null===(i=n.resultObj)||void 0===i?void 0:i.fullName)&&void 0!==a?a:"",n.disableBackBtn=!0,n.totalQuestion=null!==(c=null===(r=n.questionObjs)||void 0===r?void 0:r.length)&&void 0!==c?c:0,n.isResult=null!==(null===(s=n.resultObj)||void 0===s?void 0:s.answers),n.templateId=null!==(l=null===(u=t.data)||void 0===u?void 0:u.templateId)&&void 0!==l?l:-1,(null!==(b=null===(d=n.questionObjs)||void 0===d?void 0:d.length)&&void 0!==b?b:0)<=1&&(n.disableBackBtn=!0,n.disableNextBtn=!0),n.docxService.replaceCanvasBackgroundTS(null!==(h=n.questionObjs)&&void 0!==h?h:[]),n.status_obj={loading:!1,error:!1,error_obj:{message:""}},n.setupStudentAnswers(),n.curQuestionObj=null===(g=n.questionObjs)||void 0===g?void 0:g[0]}else n.status_obj={loading:!1,error:!1,error_obj:{message:""}},n.showErrorSnack(null!==(f=t.message)&&void 0!==f?f:"")}))}},{key:"ngOnInit",value:function(){var t=this;Object(w.b)([this.router.params,this.router.queryParams]).subscribe(function(e){var o;n(e),t.JoinLinkId=Number(t.commonService.getMyParam(t.router,"id")),t.hashCode=null===(o=t.commonService.getMyParam(t.router,"hash_code"))||void 0===o?void 0:o.toString(),t.status_obj={loading:!0,error:!1,error_obj:{message:""}},t.getData()}),e(l(r.prototype),"ngOnInit",this).call(this)}}]),r}(k.a)).\u0275fac=function(n){return new(n||R)(_.Pb(b.b),_.Pb(h.a),_.Pb(y.D),_.Pb(O.a),_.Pb(C.a),_.Pb(P.a))},R.\u0275cmp=_.Jb({type:R,selectors:[["app-join-class"]],features:[_.Ab],decls:4,vars:2,consts:[[1,"app","maxW1200","mt-2","mt-md-3"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"container","mt-md-3"],[1,"row","pl-0","pr-0","ml-0","mr-0"],[1,"col-md-4","px-0","mt-2","padding-bottom"],[1,"block","text-align"],[1,"block-title"],[1,"col-md-4","px-0","mt-2","block-control","text-center","padding-bottom"],[3,"curIndex","totalQuestion","disableBackBtn","disableNextBtn","goToPrevEmit","goToNextEmit"],[1,"col-md-4","px-0","block-submit","mt-2","text-center"],["class","btn-submit","mat-flat-button","",3,"click",4,"ngIf"],[3,"indexQuestion","questionObj","isAnswer","studentAnswer","chooseAnswer","changeAnswerWithResult"],["mat-flat-button","",1,"btn-submit",3,"click"]],template:function(n,t){if(1&n&&(_.Vb(0,"div",0),_.Rc(1,j,1,0,"azt-loading-effect",1),_.Rc(2,B,15,11,"ng-template",null,2,_.Sc),_.Ub()),2&n){var e=_.Ac(3);_.Db(1),_.nc("ngIf",t.status_obj.loading)("ngIfElse",e)}},styles:[Q]}),R),q=((E=function(){function n(t,e){d(this,n),this.dialogRef=t,this.data=e}return i(n,[{key:"ngOnInit",value:function(){}},{key:"onNoClick",value:function(n){this.dialogRef.close(n)}}]),n}()).\u0275fac=function(n){return new(n||E)(_.Pb(b.g),_.Pb(b.a))},E.\u0275cmp=_.Jb({type:E,selectors:[["dialog-overview-example-dialog"]],decls:10,vars:9,consts:[[2,"font-size","20px","font-weight","500","margin-bottom","20px"],[2,"float","right"],["type","button",1,"btn","btn-danger","mr-3",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,t){1&n&&(_.Vb(0,"div",0),_.Tc(1),_.hc(2,"mytranslate"),_.Ub(),_.Vb(3,"div",1),_.Vb(4,"button",2),_.cc("click",function(){return t.onNoClick("cencer")}),_.Tc(5),_.hc(6,"mytranslate"),_.Ub(),_.Vb(7,"button",3),_.cc("click",function(){return t.onNoClick("next")}),_.Tc(8),_.hc(9,"mytranslate"),_.Ub(),_.Ub()),2&n&&(_.Db(1),_.Vc(" ",_.ic(2,3,"lang_powerpoint_frontend_detail_dialog"),".\n"),_.Db(4),_.Uc(_.ic(6,5,"lang_powerpoint_frontend_detail_cancel")),_.Db(3),_.Uc(_.ic(9,7,"lang_powerpoint_frontend_detail_continue")))},pipes:[S.q],styles:[Q]}),E),N=r("Avyq"),L=r("NFeN"),J=r("UXJo"),W=r("JXIY"),z=r("Td3n"),F=r("jPUe"),G=r("1jcm"),K=r("bTqV");function X(n,t){if(1&n&&(_.Vb(0,"div",8),_.Vb(1,"span",9),_.Tc(2),_.Vb(3,"span",10),_.Tc(4),_.Ub(),_.Ub(),_.Ub()),2&n){var e=_.gc();_.Db(2),_.Vc("",e.curIndex+1,"/"),_.Db(2),_.Uc(e.totalQuestion)}}var Z,H=((Z=function(n){a(e,n);var t=c(e);function e(){var n;return d(this,e),(n=t.apply(this,arguments)).disableBackBtn=!1,n.disableNextBtn=!1,n.curIndex=1,n.totalQuestion=1,n.goToPrevEmit=new _.o,n.goToNextEmit=new _.o,n}return i(e,[{key:"nextScreenPP",value:function(){this.goToNextEmit.emit(!0)}},{key:"prevScreenPP",value:function(){this.goToPrevEmit.emit(!0)}}]),e}(k.a)).\u0275fac=function(n){return Y(n||Z)},Z.\u0275cmp=_.Jb({type:Z,selectors:[["azt-next-back-btn"]],inputs:{disableBackBtn:"disableBackBtn",disableNextBtn:"disableNextBtn",curIndex:"curIndex",totalQuestion:"totalQuestion"},outputs:{goToPrevEmit:"goToPrevEmit",goToNextEmit:"goToNextEmit"},features:[_.Ab],decls:9,vars:4,consts:[[1,"component",3,"hidden"],["class","total-question",4,"ngIf"],[1,"control"],[1,"control-prev"],["mat-flat-button","",1,"control-btn",3,"disabled","click"],[1,"fa","fa-arrow-left"],[1,"control-next"],[1,"fa","fa-arrow-right"],[1,"total-question"],[1,"total"],[1,"result"]],template:function(n,t){1&n&&(_.Vb(0,"div",0),_.Rc(1,X,5,2,"div",1),_.Vb(2,"div",2),_.Vb(3,"div",3),_.Vb(4,"button",4),_.cc("click",function(){return t.prevScreenPP()}),_.Qb(5,"i",5),_.Ub(),_.Ub(),_.Vb(6,"div",6),_.Vb(7,"button",4),_.cc("click",function(){return t.nextScreenPP()}),_.Qb(8,"i",7),_.Ub(),_.Ub(),_.Ub(),_.Ub()),2&n&&(_.nc("hidden",t.totalQuestion<=1),_.Db(1),_.nc("ngIf",t.totalQuestion>0),_.Db(3),_.nc("disabled",t.disableBackBtn),_.Db(3),_.nc("disabled",t.disableNextBtn))},directives:[s.m,K.b],styles:[".component[_ngcontent-%COMP%], .total-question[_ngcontent-%COMP%]{text-align:center}.total-question[_ngcontent-%COMP%]{margin-bottom:10px}.control-prev[_ngcontent-%COMP%]{margin-right:30px}.control-next[_ngcontent-%COMP%], .control-prev[_ngcontent-%COMP%]{display:inline-block}.control-btn[_ngcontent-%COMP%]{color:#fff;background-color:#169bd5;padding:5px 15px;transition:all .5s}.control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;font-weight:700;width:30px;height:30px}.control-btn[_ngcontent-%COMP%]:hover{background-color:#198abb}@media screen and (max-width:768px){.control-prev[_ngcontent-%COMP%]{margin-right:15px}}"]}),Z),Y=_.Xb(H);function $(n,t){if(1&n){var e=_.Wb();_.Vb(0,"a",3),_.cc("click",function(){return _.Ec(e),_.gc().backScreen()}),_.Vb(1,"mat-icon",4),_.Tc(2,"arrow_back"),_.Ub(),_.Tc(3,"Quay l\u1ea1i"),_.Ub()}}function nn(n,t){1&n&&(_.Vb(0,"div",5),_.Vb(1,"span"),_.Qb(2,"span",6),_.Tc(3,"\xa0"),_.Ub(),_.Tc(4),_.hc(5,"mytranslate"),_.Ub()),2&n&&(_.Db(4),_.Vc(" ",_.ic(5,1,"lang_powerpoint_frontend_chart_loading_data"),"\n"))}function tn(n,t){if(1&n){var e=_.Wb();_.Vb(0,"a",3),_.cc("click",function(){return _.Ec(e),_.gc(2).showStatistic()}),_.Tc(1),_.hc(2,"mytranslate"),_.Ub()}if(2&n){var o=_.gc(2);_.Db(1),_.Xc("",_.ic(2,3,"lang_powerpoint_frontend_chart_view_result")," ( ",null==o.numberStatistical?null:o.numberStatistical.answered," / ",null==o.numberStatistical?null:o.numberStatistical.total," )")}}function en(n,t){if(1&n){var e=_.Wb();_.Vb(0,"a",3),_.cc("click",function(){return _.Ec(e),_.gc(2).showStatistic()}),_.Tc(1),_.hc(2,"mytranslate"),_.Ub()}2&n&&(_.Db(1),_.Uc(_.ic(2,1,"lang_powerpoint_frontend_chart_back")))}var on=function(){return{}};function an(n,t){if(1&n&&(_.Vb(0,"div"),_.Qb(1,"azt-template-one",22),_.Ub()),2&n){var e=_.gc(2);_.Db(1),_.nc("indexQuestion",null==e.curQuestionObj?null:e.curQuestionObj.index)("questionObj",e.curQuestionObj||_.sc(5,on))("isAnswer",!0)("isShowAnswer",e.isShowAnswer)("studentAnswer","")}}function rn(n,t){if(1&n&&(_.Vb(0,"div"),_.Qb(1,"azt-template-two",22),_.Ub()),2&n){var e=_.gc(2);_.Db(1),_.nc("indexQuestion",null==e.curQuestionObj?null:e.curQuestionObj.index)("questionObj",e.curQuestionObj||_.sc(5,on))("isAnswer",!0)("isShowAnswer",e.isShowAnswer)("studentAnswer","")}}function cn(n,t){if(1&n&&(_.Vb(0,"div"),_.Qb(1,"azt-template-three",22),_.Ub()),2&n){var e=_.gc(2);_.Db(1),_.nc("indexQuestion",null==e.curQuestionObj?null:e.curQuestionObj.index)("questionObj",e.curQuestionObj||_.sc(5,on))("isAnswer",!0)("isShowAnswer",e.isShowAnswer)("studentAnswer","")}}function sn(n,t){if(1&n&&(_.Vb(0,"span",35),_.Tc(1),_.Vb(2,"span"),_.Tc(3),_.Ub(),_.Ub()),2&n){var e=_.gc().$implicit;_.Db(1),_.Vc(" ",e.countTested," "),_.Db(2),_.Vc("(",e.countPercent+"%",")")}}function un(n,t){1&n&&(_.Vb(0,"div",36),_.Qb(1,"i",37),_.Ub())}var ln=function(n,t,e,o){return{"column-one":n,"column-two":t,"column-three":e,"column-four":o}},dn=function(n){return{height:n}};function bn(n,t){if(1&n&&(_.Vb(0,"div",31),_.Vb(1,"div",32),_.Rc(2,sn,4,2,"span",33),_.Rc(3,un,2,0,"div",34),_.Ub(),_.Ub()),2&n){var e=t.$implicit,o=t.index,i=_.gc(3);_.Db(1),_.nc("ngClass",_.wc(4,ln,0==o,1==o,2==o,3==o))("ngStyle",_.tc(9,dn,e.countPercent+"%")),_.Db(1),_.nc("ngIf",i.convertNumber(null==e?null:e.countTested)>0),_.Db(1),_.nc("ngIf",(null==e?null:e.keyLabel)==i.answerResultNew())}}function hn(n,t){if(1&n&&(_.Vb(0,"div",23),_.Vb(1,"div",24),_.Vb(2,"div",25),_.Vb(3,"div",26),_.Rc(4,bn,4,11,"div",27),_.Ub(),_.Vb(5,"div",28),_.Vb(6,"div",29),_.Vb(7,"span",30),_.Tc(8,"A"),_.Ub(),_.Ub(),_.Vb(9,"div",29),_.Vb(10,"span",30),_.Tc(11,"B"),_.Ub(),_.Ub(),_.Vb(12,"div",29),_.Vb(13,"span",30),_.Tc(14,"C"),_.Ub(),_.Ub(),_.Vb(15,"div",29),_.Vb(16,"span",30),_.Tc(17,"D"),_.Ub(),_.Ub(),_.Ub(),_.Ub(),_.Ub(),_.Ub()),2&n){var e=_.gc(2);_.nc("hidden",e.isShowQuestion),_.Db(4),_.nc("ngForOf",null==e.curQuestionObj?null:e.curQuestionObj.statistic)}}function gn(n,t){if(1&n&&(_.Vb(0,"div",40),_.Vb(1,"div",26),_.Vb(2,"div",31),_.Vb(3,"div",32),_.Vb(4,"span",35),_.Tc(5),_.Vb(6,"span"),_.Tc(7),_.Ub(),_.Ub(),_.Ub(),_.Ub(),_.Ub(),_.Vb(8,"div",28),_.Vb(9,"div",29),_.Vb(10,"span",30),_.Tc(11),_.hc(12,"mytranslate"),_.Ub(),_.Ub(),_.Ub(),_.Ub()),2&n){var e=t.$implicit,o=t.index,i=_.gc(3);_.Db(3),_.nc("ngClass",_.wc(8,ln,0==i.calcIndex(o),1==i.calcIndex(o),2==i.calcIndex(o),3==i.calcIndex(o)))("ngStyle",_.tc(13,dn,e.countPercent+"%")),_.Db(2),_.Vc(" ",e.countTrue," "),_.Db(2),_.Vc("(",e.countPercent+"%",")"),_.Db(4),_.Wc("",_.ic(12,6,"lang_powerpoint_frontend_chart_question")," ",o+1<=9?"0"+(o+1):o+1,"")}}function fn(n,t){if(1&n&&(_.Vb(0,"div",23),_.Vb(1,"div",24),_.Vb(2,"div",38),_.Rc(3,gn,13,15,"div",39),_.Ub(),_.Ub(),_.Ub()),2&n){var e=_.gc(2);_.nc("hidden",e.isShowQuestion),_.Db(3),_.nc("ngForOf",e.finalStatisticObjs)}}function vn(n,t){if(1&n){var e=_.Wb();_.Vb(0,"div",8),_.Vb(1,"div",41),_.Vb(2,"div",42),_.Vb(3,"mat-slide-toggle",43),_.cc("change",function(n){return _.Ec(e),_.gc(2).toggleShowAnswer(n.checked)}),_.Ub(),_.Vb(4,"span",44),_.Tc(5),_.hc(6,"mytranslate"),_.Ub(),_.Ub(),_.Ub(),_.Ub()}if(2&n){var o=_.gc(2);_.Db(3),_.nc("checked",o.isShowAnswer),_.Db(2),_.Uc(_.ic(6,2,"lang_powerpoint_frontend_chart_view_answer"))}}function pn(n,t){if(1&n){var e=_.Wb();_.Vb(0,"div",45),_.Vb(1,"div",24),_.Vb(2,"azt-next-back-btn",46),_.cc("goToPrevEmit",function(n){return _.Ec(e),_.gc(2).prevScreenPP(n)})("goToNextEmit",function(n){return _.Ec(e),_.gc(2).nextScreenPP(n)}),_.Ub(),_.Ub(),_.Ub()}if(2&n){var o=_.gc(2);_.Db(2),_.nc("curIndex",o.curIndex)("totalQuestion",o.totalQuestion)("disableBackBtn",o.disableBackBtn)("disableNextBtn",o.disableNextBtn)}}function mn(n,t){if(1&n){var e=_.Wb();_.Vb(0,"div",7),_.Vb(1,"div",8),_.Vb(2,"div",9),_.Vb(3,"div",10),_.Vb(4,"span",11),_.cc("click",function(){return _.Ec(e),_.gc().showCopySuccess()}),_.Tc(5),_.hc(6,"mytranslate"),_.Vb(7,"span"),_.Tc(8),_.Ub(),_.Ub(),_.Ub(),_.Vb(9,"div",12),_.Vb(10,"span",13),_.Tc(11),_.hc(12,"mytranslate"),_.Vb(13,"a",14),_.Tc(14),_.Ub(),_.Ub(),_.Ub(),_.Vb(15,"div",15),_.Rc(16,tn,3,5,"a",0),_.Rc(17,en,3,3,"a",0),_.Ub(),_.Ub(),_.Ub(),_.Vb(18,"div",16),_.Vb(19,"div",17),_.Rc(20,an,2,6,"div",18),_.Rc(21,rn,2,6,"div",18),_.Rc(22,cn,2,6,"div",18),_.Ub(),_.Ub(),_.Rc(23,hn,18,2,"div",19),_.Rc(24,fn,4,2,"div",19),_.Rc(25,vn,7,4,"div",20),_.Rc(26,pn,3,4,"div",21),_.Ub()}if(2&n){var o=_.gc();_.Db(4),_.nc("cdkCopyToClipboard",o.copyCodeToClipboard(null==o.linkJoinObj?null:o.linkJoinObj.hashCode)),_.Db(1),_.Vc("",_.ic(6,17,"lang_powerpoint_frontend_chart_code_open_class"),": "),_.Db(3),_.Uc(null==o.linkJoinObj?null:o.linkJoinObj.hashCode),_.Db(3),_.Vc("",_.ic(12,19,"lang_powerpoint_frontend_chart_student_access"),": "),_.Db(2),_.oc("href",o.domainLink,_.Ic),_.Db(1),_.Uc(o.domainLink),_.Db(2),_.nc("ngIf",o.isShowQuestion),_.Db(1),_.nc("ngIf",!o.isShowQuestion),_.Db(1),_.nc("hidden",!o.isShowQuestion),_.Db(1),_.nc("ngSwitch",o.templateId),_.Db(1),_.nc("ngSwitchCase",1),_.Db(1),_.nc("ngSwitchCase",2),_.Db(1),_.nc("ngSwitchCase",3),_.Db(1),_.nc("ngIf",!o.statisticForExam),_.Db(1),_.nc("ngIf",o.statisticForExam),_.Db(1),_.nc("ngIf",o.isShowQuestion),_.Db(1),_.nc("ngIf",o.isShowQuestion)}}var wn,xn,kn=((xn=function(t){a(r,t);var o=c(r);function r(n,t,e,i,a){var c;return d(this,r),(c=o.call(this,e)).router=n,c.frontPptExamService=t,c.commonService=e,c.docxService=i,c.homeworkExamService=a,c.subscriptions=new m.a,c.status_obj={loading:!1,error:!1,error_obj:{message:""}},c.backLink="",c.statisticForExam=!1,c.curIndex=0,c.totalQuestion=0,c.disableBackBtn=!1,c.disableNextBtn=!1,c.isLoading=!1,c.numberStatistical={total:0,answered:0},c.isShowQuestion=!0,c.isShowAnswer=!1,c.domainLink="",c.templateId=1,c}return i(r,[{key:"backScreen",value:function(){window.history.back()}},{key:"prevScreenPP",value:function(n){var t,e;if(n){var o=this.curIndex>0?this.curIndex-1:0;this.curQuestionObj=null===(t=this.questionObjs)||void 0===t?void 0:t[o],void 0!==(null===(e=this.curQuestionObj)||void 0===e?void 0:e.isShowAnswer)&&(this.curQuestionObj.isShowAnswer=this.isShowAnswer),this.curIndex=o,0==o?(this.disableBackBtn=!0,this.disableNextBtn=!1):(this.disableBackBtn=!1,this.disableNextBtn=!1)}this.isShowQuestion=!0}},{key:"nextScreenPP",value:function(n){var t,e,o,i,a,r,c,s;if(n){var u=this.curIndex==(null!==(e=null===(t=this.questionObjs)||void 0===t?void 0:t.length)&&void 0!==e?e:0)-1?null!==(i=null===(o=this.questionObjs)||void 0===o?void 0:o.length)&&void 0!==i?i:0:this.curIndex+1;this.curQuestionObj=null===(a=this.questionObjs)||void 0===a?void 0:a[u],this.curIndex=u,void 0!==(null===(r=this.curQuestionObj)||void 0===r?void 0:r.isShowAnswer)&&(this.curQuestionObj.isShowAnswer=this.isShowAnswer),u==(null!==(s=null===(c=this.questionObjs)||void 0===c?void 0:c.length)&&void 0!==s?s:0)-1?(this.disableNextBtn=!0,this.disableBackBtn=!1):(this.disableNextBtn=!1,this.disableBackBtn=!1)}this.isShowQuestion=!0}},{key:"calcIndex",value:function(n){return(n+4)%4}},{key:"showStatistic",value:function(){this.isShowQuestion=!this.isShowQuestion}},{key:"foundTrueAnswer",value:function(n){var t=this,e=[];return n.forEach(function(n){var o;n=Object.assign(Object.assign({},n),{isShowAnswer:!1});var i=t.commonService.parseJson(null!==(o=n.answerResult)&&void 0!==o?o:"");if(Array.isArray(n.answerConfigParse))for(var a=0;a<n.answerConfigParse.length;a++)if(n.answerConfigParse[a].key==i[0]){n.answerConfigParse[a].isTrue=!0;break}e.push(n)}),e}},{key:"toggleShowAnswer",value:function(n){this.isShowAnswer=!this.isShowAnswer;var t=Object.assign({},this.curQuestionObj);t.isShowAnswer=n,this.curQuestionObj=t}},{key:"getData",value:function(){var n,t,e=this;this.isLoading=!0,this.subscriptions.add(this.frontPptExamService.apiFrontPptExamGetPPTQuestionResultObjsIdHashCodeTGet(null!==(n=this.linkId)&&void 0!==n?n:0,null!==(t=this.hashCode)&&void 0!==t?t:"","0").subscribe(function(n){var t,o,i,a,r,c,s,u,l,d,b,h,g,f;if(1==n.success){var v=e.commonService.castJsonToClassObjs(x.e,JSON.stringify(null===(t=n.data)||void 0===t?void 0:t.questionObjs));e.questionObjs=e.foundTrueAnswer(e.homeworkExamService.changeDataQuestions(null!=v?v:[])),e.linkJoinObj=null===(o=n.data)||void 0===o?void 0:o.linkJoinObj,e.curQuestionObj=null===(i=e.questionObjs)||void 0===i?void 0:i[0],e.curQuestionObj.answerResultParse=null!==(r=e.castJsonToObj(null!==(a=e.curQuestionObj.answerResult)&&void 0!==a?a:"[]"))&&void 0!==r?r:[],e.disableBackBtn=!0,e.totalQuestion=null!==(s=null===(c=e.questionObjs)||void 0===c?void 0:c.length)&&void 0!==s?s:0,e.templateId=null!==(d=null===(l=null===(u=n.data)||void 0===u?void 0:u.linkObj)||void 0===l?void 0:l.templateId)&&void 0!==d?d:1,(null!==(h=null===(b=e.questionObjs)||void 0===b?void 0:b.length)&&void 0!==h?h:0)<=1&&(e.disableBackBtn=!0,e.disableNextBtn=!0),(null===(g=n.data)||void 0===g?void 0:g.finalStatistic)&&n.data.finalStatistic.length>0?(e.finalStatisticObjs=n.data.finalStatistic,e.statisticForExam=!0):(e.finalStatisticObjs=new Array,e.statisticForExam=!1),e.docxService.replaceCanvasBackgroundTS(e.questionObjs),e.status_obj={loading:!1,error:!1,error_obj:{message:""}}}else e.status_obj={loading:!1,error:!1,error_obj:{message:""}},e.showErrorSnack(null!==(f=n.message)&&void 0!==f?f:"");e.isLoading=!1}))}},{key:"setupLoopGetStatisticalNumber",value:function(){var n=this;this.loopGetStatical=window.setInterval(function(){var t;n.frontPptExamService.apiFrontPptExamGetStatisticalLinkEmbedObjIdHashCodeTGet(Number(n.linkId),null!==(t=n.hashCode)&&void 0!==t?t:"","t").subscribe(function(t){1==t.success&&(n.numberStatistical=t.data)})},2e3)}},{key:"convertNumber",value:function(n){return Number(n)}},{key:"answerResultNew",value:function(){var n,t,e;return null!==(e=null===(t=null===(n=this.curQuestionObj)||void 0===n?void 0:n.answerResultParse)||void 0===t?void 0:t[0])&&void 0!==e?e:""}},{key:"ngOnInit",value:function(){var t=this;Object(w.b)([this.router.params,this.router.queryParams]).subscribe(function(e){var o;n(e),t.domainLink=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/join",t.linkId=Number(t.commonService.getMyParam(t.router,"id")),t.hashCode=null===(o=t.commonService.getMyParam(t.router,"hash_code"))||void 0===o?void 0:o.toString(),t.status_obj={loading:!0,error:!1,error_obj:{message:""}},t.getData(),t.setupLoopGetStatisticalNumber()}),e(l(r.prototype),"ngOnInit",this).call(this)}},{key:"copyCodeToClipboard",value:function(n){return null!=n?n:""}},{key:"showCopySuccess",value:function(){this.commonService.snackSuccess("Sao ch\xe9p m\xe3 v\xe0o l\u1edbp th\xe0nh c\xf4ng","")}},{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe(),0!==this.loopGetStatical&&clearInterval(this.loopGetStatical)}}]),r}(k.a)).\u0275fac=function(n){return new(n||xn)(_.Pb(h.a),_.Pb(y.E),_.Pb(O.a),_.Pb(C.a),_.Pb(P.a))},xn.\u0275cmp=_.Jb({type:xn,selectors:[["app-powerpoint-chart"]],features:[_.Ab],decls:3,vars:3,consts:[["class","view-link clickable",3,"click",4,"ngIf"],["class","app maxW1200 mt-5 text-center",4,"ngIf"],["class","app maxW1200 mt-5",4,"ngIf"],[1,"view-link","clickable",3,"click"],[2,"margin","10px","vertical-align","middle","font-size","22px"],[1,"app","maxW1200","mt-5","text-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"app","maxW1200","mt-5"],[1,"container"],[1,"row"],[1,"col-md-3","heading-row"],[1,"code-text",3,"cdkCopyToClipboard","click"],[1,"col-md-6","text-center","heading-row"],[1,"title-link"],["target","_blank",1,"link",3,"href"],[1,"col-md-3","text-right","heading-row"],[3,"hidden"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","row",3,"hidden",4,"ngIf"],["class","container",4,"ngIf"],["class","row mt-3",4,"ngIf"],[3,"indexQuestion","questionObj","isAnswer","isShowAnswer","studentAnswer"],[1,"row",3,"hidden"],[1,"col-md-12"],[1,"chart"],[1,"chart-column"],["class","column-total",4,"ngFor","ngForOf"],[1,"chart-fields"],[1,"field"],[1,"text-center"],[1,"column-total"],[1,"column-result",3,"ngClass","ngStyle"],["class","point-result",4,"ngIf"],["class","answer-true",4,"ngIf"],[1,"point-result"],[1,"answer-true"],[1,"fa","fa-check"],[1,"chart","d-flex",2,"overflow-x","scroll","white-space","nowrap"],["class","col-column",4,"ngFor","ngForOf"],[1,"col-column"],[1,"row","mt-2","justify-content-end"],[1,"col-md-3","text-right"],["color","primary",2,"vertical-align","middle",3,"checked","change"],[2,"vertical-align","middle","margin-left","5px"],[1,"row","mt-3"],[3,"curIndex","totalQuestion","disableBackBtn","disableNextBtn","goToPrevEmit","goToNextEmit"]],template:function(n,t){1&n&&(_.Rc(0,$,4,0,"a",0),_.Rc(1,nn,6,3,"div",1),_.Rc(2,mn,27,21,"div",2)),2&n&&(_.nc("ngIf",t.isShowQuestion),_.Db(1),_.nc("ngIf",t.isLoading),_.Db(1),_.nc("ngIf",!t.isLoading))},directives:[s.m,L.a,J.a,s.o,s.p,W.a,z.a,F.a,s.l,s.k,s.n,G.a,H],pipes:[S.q],styles:[".app[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden;padding-bottom:40px}.maxW1200[_ngcontent-%COMP%]{max-width:1200px}.control[_ngcontent-%COMP%]{display:flex;justify-content:center}.control-next[_ngcontent-%COMP%], .control-prev[_ngcontent-%COMP%]{margin:0 15px}.control-btn[_ngcontent-%COMP%]{color:#fff;background-color:#169bd5;padding:5px 15px}.control-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;font-weight:700;width:30px;height:30px}.heading-row[_ngcontent-%COMP%]{margin-bottom:20px}.code-text[_ngcontent-%COMP%]{font-size:18px;font-weight:500;cursor:pointer}.code-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:23px;color:#00a7d0}.title-link[_ngcontent-%COMP%]{font-size:18px}.title-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;color:#42474b}.col-column[_ngcontent-%COMP%]{display:block;width:33%}.col-column[_ngcontent-%COMP%]   .column-total[_ngcontent-%COMP%]{height:95%;width:calc(100% - 5%)!important;display:flex;align-items:flex-end}.chart[_ngcontent-%COMP%]{width:85%;height:500px;background-color:#fff;margin:0 auto}.chart-column[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;height:88%;padding:0 30px}.chart-column[_ngcontent-%COMP%]   .column-total[_ngcontent-%COMP%]{height:95%;width:calc(100%/4 - 8%);display:flex;align-items:flex-end}.chart-column[_ngcontent-%COMP%]   .column-result[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-weight:500;width:100%;min-height:5px;text-align:center;display:flex;flex-direction:column;justify-content:space-between}.chart-column[_ngcontent-%COMP%]   .column-one[_ngcontent-%COMP%]{background-color:#66c870}.chart-column[_ngcontent-%COMP%]   .column-two[_ngcontent-%COMP%]{background-color:#fb708f}.chart-column[_ngcontent-%COMP%]   .column-three[_ngcontent-%COMP%]{background-color:#2aa4e6}.chart-column[_ngcontent-%COMP%]   .column-four[_ngcontent-%COMP%]{background-color:#f5bc20}.chart-column[_ngcontent-%COMP%]   .point-result[_ngcontent-%COMP%]{margin-top:10px}.chart-column[_ngcontent-%COMP%]   .answer-true[_ngcontent-%COMP%]{margin-bottom:10px}.chart-column[_ngcontent-%COMP%]   .answer-true[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}.chart-fields[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:12%;padding:0 30px;border-top:1px solid #ddd}.chart-fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:calc(100%/4 - 8%);text-align:center;font-size:18px;font-weight:500}.view-link[_ngcontent-%COMP%]{font-size:18px}@media screen and (max-width:768px){.heading-row[_ngcontent-%COMP%]{text-align:left!important}.chart-column[_ngcontent-%COMP%], .chart-fields[_ngcontent-%COMP%]{padding:0 20px}}@media screen and (max-width:480px){.chart-fields[_ngcontent-%COMP%]{padding:0 10px}.app[_ngcontent-%COMP%]{overflow-y:inherit}.chart-column[_ngcontent-%COMP%]{padding:0 10px}}"]}),xn),_n=((wn=function(){function n(){d(this,n)}return i(n,[{key:"ngOnInit",value:function(){}}]),n}()).\u0275fac=function(n){return new(n||wn)},wn.\u0275cmp=_.Jb({type:wn,selectors:[["app-test-dashboard"]],decls:2,vars:0,consts:[["id","testbank-frontend-layout"]],template:function(n,t){1&n&&(_.Vb(0,"div",0),_.Qb(1,"router-outlet"),_.Ub())},directives:[h.m],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:0 1px 7px rgba(169,151,151,.24)}"]}),wn),yn=r("AkFM"),On=r("nzN9");function Cn(n,t){1&n&&_.Qb(0,"azt-loading-effect")}function Pn(n,t){if(1&n){var e=_.Wb();_.Vb(0,"div",2),_.Vb(1,"h2"),_.Tc(2),_.hc(3,"mytranslate"),_.Ub(),_.Vb(4,"h1"),_.Tc(5),_.Ub(),_.Vb(6,"button",3),_.cc("click",function(){return _.Ec(e),_.gc().redirectBackToDetail()}),_.Tc(7),_.hc(8,"mytranslate"),_.Ub(),_.Vb(9,"button",4),_.cc("click",function(){return _.Ec(e),_.gc().redirectBackToNext()}),_.Tc(10),_.hc(11,"mytranslate"),_.Ub(),_.Ub()}if(2&n){var o=_.gc();_.Db(2),_.Uc(_.ic(3,5,"lang_powerpoint_frontend_result_submit_succes")),_.Db(3),_.Wc("",null==o.resultObj?null:o.resultObj.totalCorrect,"/",null==o.resultObj?null:o.resultObj.totalQuestion,""),_.Db(2),_.Vc(" ",_.ic(8,7,"lang_powerpoint_frontend_result_view_answer")," "),_.Db(3),_.Vc(" ",_.ic(11,9,"lang_powerpoint_frontend_detail_continue")," ")}}var Sn,jn,Mn,Dn=[{path:"",component:_n,children:[{path:"",children:[{path:"detail/:id/:hash_code",component:T},{path:"result/:id/:hash_code",component:(Sn=function(n){a(o,n);var t=c(o);function o(n,e,i,a){var r;return d(this,o),(r=t.call(this,e)).router=n,r.commonService=e,r.frontPowerPointLinkService=i,r.browserStorageService=a,r.loading=!1,r.backLink="",r}return i(o,[{key:"GetResultObj",value:function(){var n=this;this.loading=!0,this.frontPowerPointLinkService.apiFrontPowerPointLinkGetResultObjGet(this.JoinLinkId,this.hashCode).subscribe(function(t){1==t.success?(n.resultObj=t.data,n.loading=!1):(n.loading=!1,n.commonService.snackError("L\u1ed7i: Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3","\u0110\xf3ng"))})}},{key:"redirectBackToDetail",value:function(){this.commonService.myNavigation("/powerpoint/detail/"+this.JoinLinkId+"/"+this.hashCode)}},{key:"redirectBackToNext",value:function(){this.browserStorageService.saveStorage("powerpoint_next","true"),this.commonService.myNavigation("/join")}},{key:"ngOnInit",value:function(){var n;this.JoinLinkId=Number(this.commonService.getMyParam(this.router,"id")),this.hashCode=null===(n=this.commonService.getMyParam(this.router,"hash_code"))||void 0===n?void 0:n.toString(),this.GetResultObj(),this.commonService.translateMetaData({title:"lang_cms_powerpoint_result_title",description:"lang_cms_powerpoint_result_description",image:"lang_cms_test_image"}),e(l(o.prototype),"ngOnInit",this).call(this)}}]),o}(k.a),Sn.\u0275fac=function(n){return new(n||Sn)(_.Pb(h.a),_.Pb(O.a),_.Pb(y.D),_.Pb(yn.a))},Sn.\u0275cmp=_.Jb({type:Sn,selectors:[["app-powerpoint-result"]],features:[_.Ab],decls:2,vars:2,consts:[[4,"ngIf"],["class","content",4,"ngIf"],[1,"content"],["mat-flat-button","",1,"btn-submit",3,"click"],["mat-flat-button","",1,"btn-next",3,"click"]],template:function(n,t){1&n&&(_.Rc(0,Cn,1,0,"azt-loading-effect",0),_.Rc(1,Pn,12,11,"div",1)),2&n&&(_.nc("ngIf",!0===t.loading),_.Db(1),_.nc("ngIf",!1===t.loading))},directives:[s.m,On.a,K.b],pipes:[S.q],styles:[".content[_ngcontent-%COMP%]{text-align:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#f39c12}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Arial Bold,Arial;font-weight:700;font-style:normal}.content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{background-color:#f39c12;padding:5px 25px;color:#fff;transition:all .5s}.content[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover{background-color:#e09214}.content[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:#00a7d0;padding:5px 25px;color:#fff;transition:all .5s;margin-left:5px}.content[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]:hover{background-color:#0087a8}"]}),Sn)},{path:"embed/:id/:hash_code",component:kn}]}]}],Un=((Mn=function n(){d(this,n)}).\u0275mod=_.Nb({type:Mn}),Mn.\u0275inj=_.Mb({factory:function(n){return new(n||Mn)},imports:[[h.l.forChild(Dn)],h.l,N.c]}),Mn),In=((jn=function n(){d(this,n)}).\u0275mod=_.Nb({type:jn}),jn.\u0275inj=_.Mb({factory:function(n){return new(n||jn)},imports:[[h.l,s.c,v.a,g.b,Un,u.m,u.x,b.f,p.a,f.a]]}),jn);_.Kc(T,[s.m,On.a,s.o,s.p,W.a,z.a,F.a,H,K.b],[S.q])},o9K7:function(n,t,e){"use strict";e.d(t,"a",function(){return s});var o=e("mrSG"),a=e("fXoL"),r=e("oUVn"),c=e("qJLG"),s=function(){var n=function(){function n(t,e){d(this,n),this.commonService=t,this.cdnService=e}return i(n,[{key:"convertUrlToBase64",value:function(n){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n+"?t="+(new Date).getTime());case 2:return e=t.sent,t.next=5,e.blob();case 5:return o=t.sent,t.abrupt("return",new Promise(function(n){var t=new FileReader;t.readAsDataURL(o),t.onloadend=function(){n(t.result)}}));case 7:case"end":return t.stop()}},t)}))}},{key:"convertLinkToBase64",value:function(n,t,e){var i;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var a,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t){o.next=2;break}return o.abrupt("return",e);case 2:a=0;case 3:if(!(a<(null!==(i=null==n?void 0:n.length)&&void 0!==i?i:0))){o.next=9;break}if((null==n?void 0:n[a].link)!==e){o.next=6;break}return o.abrupt("return",null==n?void 0:n[a].convert);case 6:a++,o.next=3;break;case 9:return o.next=11,this.convertUrlToBase64(e);case 11:return r=o.sent,o.abrupt("return",(null==n||n.push({convert:r,link:e}),r));case 13:case"end":return o.stop()}},o,this)}))}},{key:"replaceCanvasBackground",value:function(n,t){var e,i,a,r;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var c,s,u,l,d,b,h,g,f,v,p,m,w,x,k,_,y,O,C,P,S,j,M;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!n){o.next=111;break}c=[],s=0;case 3:if(!(s<n.length)){o.next=111;break}if(!(u=n[s])||0!==u.isImage){o.next=108;break}l=null===(e=u.questionContentParse)||void 0===e?void 0:e[0].content,u.questionContentParse&&(u.questionContentParse[0].content=""),d=void 0===l?[]:l.split("@[]"),b=0;case 10:if(!(b<d.length)){o.next=37;break}if(h=d[b],!0!==this.commonService.isJson(h)){o.next=33;break}if(!(g=JSON.parse(h)).hasOwnProperty("link")){o.next=30;break}if(f=document.body.offsetWidth,v=1,g.data.width>(j=f-30)&&(g.data={x:g.data.x*(v=j/g.data.width),y:g.data.y*v,width:g.data.width*v,height:g.data.height*v}),g.data={x:Math.floor(g.data.x),y:Math.floor(g.data.y),width:Math.floor(g.data.width),height:Math.floor(g.data.height)},o.t0=u.questionContentParse,!o.t0){o.next=26;break}return o.t1=u.questionContentParse[0].content,o.t2='<div class="background_question_'.concat(s,"_").concat(b,'"><img width="').concat(1024*v,'" height="').concat(1024*v,'" src="'),o.next=24,this.convertLinkToBase64(c,t,this.cdnService.getMyCdn(g.link));case 24:o.t3=o.sent,u.questionContentParse[0].content=o.t1+=o.t2.concat.call(o.t2,o.t3,'"></div>');case 26:p=document.createElement("style"),document.body.appendChild(p),p.textContent+=".background_question_".concat(s,"_").concat(b," {margin: 0 3px; width: ").concat(g.data.width,"px; height: ").concat(g.data.height,"px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_").concat(s,"_").concat(b," img { margin-top: -").concat(g.data.y,"px; margin-left: -").concat(g.data.x,"px;}"),o.next=31;break;case 30:u.questionContentParse&&(u.questionContentParse[0].content+=h);case 31:o.next=34;break;case 33:u.questionContentParse&&(u.questionContentParse[0].content+=h);case 34:b++,o.next=10;break;case 37:if(1!==u.answerType){o.next=76;break}m=0;case 39:if(!(m<(null!==(a=null===(i=u.answerConfigParse)||void 0===i?void 0:i.length)&&void 0!==a?a:0))){o.next=76;break}w=null===(r=u.answerConfigParse)||void 0===r?void 0:r[m].content,u.answerConfigParse&&(u.answerConfigParse[m].content=""),x=void 0===w?[]:w.split("@[]"),k=0;case 44:if(!(k<x.length)){o.next=73;break}if(_=x[k],!0!==this.commonService.isJson(_)){o.next=69;break}if(!(y=JSON.parse(_)).hasOwnProperty("link")){o.next=66;break}if(f=document.body.offsetWidth,v=1,y.data.width>(j=f-30)&&(y.data={x:y.data.x*(v=j/y.data.width),y:y.data.y*v,width:y.data.width*v,height:y.data.height*v}),y.data={x:Math.floor(y.data.x),y:Math.floor(y.data.y),width:Math.floor(y.data.width),height:Math.floor(y.data.height)},o.t4=u.answerConfigParse,!o.t4){o.next=61;break}return o.t5=u.answerConfigParse[m].content,o.t6='<div class="background_question__ans'.concat(s,"_").concat(m,"_").concat(k,'"><img width="').concat(1024*v,'" height="').concat(1024*v,'" src="'),o.next=59,this.convertLinkToBase64(c,t,this.cdnService.getMyCdn(y.link));case 59:o.t7=o.sent,u.answerConfigParse[m].content=o.t5+=o.t6.concat.call(o.t6,o.t7,'"></div>');case 61:p=document.createElement("style"),document.body.appendChild(p),p.textContent+=".background_question__ans".concat(s,"_").concat(m,"_").concat(k," {margin: 0 3px; width: ").concat(y.data.width,"px; height: ").concat(y.data.height,"px; display: inline-block; overflow: hidden;} .background_question__ans").concat(s,"_").concat(m,"_").concat(k," img { margin-top: -").concat(y.data.y,"px; margin-left: -").concat(y.data.x,"px;}"),o.next=67;break;case 66:u.answerConfigParse&&(u.answerConfigParse[m].content+=_);case 67:o.next=70;break;case 69:u.answerConfigParse&&(u.answerConfigParse[m].content+=_);case 70:k++,o.next=44;break;case 73:m++,o.next=39;break;case 76:if(!(u.answerMediaParse&&u.answerMediaParse.length>0)){o.next=108;break}O=u.answerMediaParse,u.answerMediaParse="",C=void 0===O?[]:O.split("@[]"),P=0;case 81:if(!(P<C.length)){o.next=108;break}if(S=C[P],!0!==this.commonService.isJson(S)){o.next=104;break}if(!(M=JSON.parse(S)).hasOwnProperty("link")){o.next=101;break}return f=document.body.offsetWidth,v=1,M.data.width>(j=f-30)&&(M.data={x:M.data.x*(v=j/M.data.width),y:M.data.y*v,width:M.data.width*v,height:M.data.height*v}),M.data={x:Math.floor(M.data.x),y:Math.floor(M.data.y),width:Math.floor(M.data.width),height:Math.floor(M.data.height)},o.t8=u.answerMediaParse,o.t9='<div class="background_question__ans_result'.concat(s,"_").concat(P,'"><img width="').concat(1024*v,'" height="').concat(1024*v,'" src="'),o.next=94,this.convertLinkToBase64(c,t,this.cdnService.getMyCdn(M.link));case 94:o.t10=o.sent,u.answerMediaParse=o.t8+=o.t9.concat.call(o.t9,o.t10,'"></div>'),p=document.createElement("style"),document.body.appendChild(p),p.textContent+=".background_question__ans_result".concat(s,"_").concat(P," {margin: 0 3px; width: ").concat(M.data.width,"px; height: ").concat(M.data.height,"px; display: inline-block; overflow: hidden;} .background_question__ans_result").concat(s,"_").concat(P," img { margin-top: -").concat(M.data.y,"px; margin-left: -").concat(M.data.x,"px;}"),o.next=102;break;case 101:u.answerMediaParse+=S;case 102:o.next=105;break;case 104:u.answerMediaParse+=S;case 105:P++,o.next=81;break;case 108:s++,o.next=3;break;case 111:case"end":return o.stop()}},o,this)}))}},{key:"replaceCanvasBackgroundTS",value:function(n,t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var o,i,a,r,c,s,u,l,d,b,h,g,f,v,p,m,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=0;case 2:if(!(i<n.length)){e.next=69;break}if(0!==(a=n[i]).isImage){e.next=66;break}r=a.questionContentParse[0].content,a.questionContentParse[0].content="",c=void 0===r?[]:r.split("@[]"),s=0;case 9:if(!(s<c.length)){e.next=34;break}if(u=c[s],!0!==this.commonService.isJson(u)){e.next=30;break}if(!(l=JSON.parse(u)).hasOwnProperty("link")){e.next=27;break}return d=document.body.offsetWidth,b=1,l.data.width>(m=d-30)&&(l.data={x:l.data.x*(b=m/l.data.width),y:l.data.y*b,width:l.data.width*b,height:l.data.height*b}),l.data={x:Math.floor(l.data.x),y:Math.floor(l.data.y),width:Math.floor(l.data.width),height:Math.floor(l.data.height)},e.t0=a.questionContentParse[0].content,e.t1='<div class="background_question_'.concat(i,"_").concat(s,'"><img width="').concat(1024*b,'" height="').concat(1024*b,'" src="'),e.next=21,this.convertLinkToBase64(o,t,this.cdnService.getMyCdn(l.link));case 21:e.t2=e.sent,a.questionContentParse[0].content=e.t0+=e.t1.concat.call(e.t1,e.t2,'"></div>'),h=document.createElement("style"),document.body.appendChild(h),h.textContent+=".background_question_".concat(i,"_").concat(s," {margin: 0 3px; width: ").concat(l.data.width,"px; height: ").concat(l.data.height,"px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_").concat(i,"_").concat(s," img { margin-top: -").concat(l.data.y,"px; margin-left: -").concat(l.data.x,"px;}"),e.next=28;break;case 27:a.questionContentParse[0].content+=u;case 28:e.next=31;break;case 30:a.questionContentParse[0].content+=u;case 31:s++,e.next=9;break;case 34:if(1===a.answerType&&(0==a.isImage||1==a.isImage&&a.name.startsWith("[PDFv2]")?this.replaceBackgroundAnswerConfig(a.answerConfigParse,o,i,t):this.replaceBackgroundAnswerConfig(a.answerConfigParseVer1.answerConfigV2,o,i,t)),!(a.answerMedia&&a.answerMedia.length>0)){e.next=66;break}g=a.answerMedia,a.answerMedia="",f=void 0===g?[]:g.split("@[]"),v=0;case 39:if(!(v<f.length)){e.next=66;break}if(p=f[v],!0!==this.commonService.isJson(p)){e.next=62;break}if(!(w=JSON.parse(p)).hasOwnProperty("link")){e.next=59;break}return d=document.body.offsetWidth,b=1,w.data.width>(m=d-30)&&(w.data={x:w.data.x*(b=m/w.data.width),y:w.data.y*b,width:w.data.width*b,height:w.data.height*b}),w.data={x:Math.floor(w.data.x),y:Math.floor(w.data.y),width:Math.floor(w.data.width),height:Math.floor(w.data.height)},e.t3=a.answerMedia,e.t4='<div class="background_question__ans_result'.concat(i,"_").concat(v,'"><img width="').concat(1024*b,'" height="').concat(1024*b,'" src="'),e.next=52,this.convertLinkToBase64(o,t,this.cdnService.getMyCdn(w.link));case 52:e.t5=e.sent,a.answerMedia=e.t3+=e.t4.concat.call(e.t4,e.t5,'"></div>'),h=document.createElement("style"),document.body.appendChild(h),h.textContent+=".background_question__ans_result".concat(i,"_").concat(v," {margin: 0 3px; width: ").concat(w.data.width,"px; height: ").concat(w.data.height,"px; display: inline-block; overflow: hidden;} .background_question__ans_result").concat(i,"_").concat(v," img { margin-top: -").concat(w.data.y,"px; margin-left: -").concat(w.data.x,"px;}"),e.next=60;break;case 59:a.answerMedia+=p;case 60:e.next=63;break;case 62:a.answerMedia+=p;case 63:v++,e.next=39;break;case 66:i++,e.next=2;break;case 69:return e.abrupt("return",!0);case 70:case"end":return e.stop()}},e,this)}))}},{key:"replaceBackgroundAnswerConfig",value:function(n,t,e,i){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var a,r,c,s,u,l,d,b,h;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a=0;case 1:if(!(a<n.length)){o.next=34;break}r=n[a].content,n[a].content="",c=void 0===r?[]:r.split("@[]"),s=0;case 6:if(!(s<c.length)){o.next=31;break}if(u=c[s],!0!==this.commonService.isJson(u)){o.next=27;break}if(!(l=JSON.parse(u)).hasOwnProperty("link")){o.next=24;break}return d=document.body.offsetWidth-30,b=1,l.data.width>d&&(l.data={x:l.data.x*(b=d/l.data.width),y:l.data.y*b,width:l.data.width*b,height:l.data.height*b}),l.data={x:Math.floor(l.data.x),y:Math.floor(l.data.y),width:Math.floor(l.data.width),height:Math.floor(l.data.height)},o.t0=n[a].content,o.t1='<div class="background_question__ans'.concat(e,"_").concat(a,"_").concat(s,'"><img width="').concat(1024*b,'" height="').concat(1024*b,'" src="'),o.next=18,this.convertLinkToBase64(t,i,this.cdnService.getMyCdn(l.link));case 18:o.t2=o.sent,n[a].content=o.t0+=o.t1.concat.call(o.t1,o.t2,'"></div>'),h=document.createElement("style"),document.body.appendChild(h),h.textContent+=".background_question__ans".concat(e,"_").concat(a,"_").concat(s," {margin: 0 3px; width: ").concat(l.data.width,"px; height: ").concat(l.data.height,"px; display: inline-block; overflow: hidden;} .background_question__ans").concat(e,"_").concat(a,"_").concat(s," img { margin-top: -").concat(l.data.y,"px; margin-left: -").concat(l.data.x,"px;}"),o.next=25;break;case 24:n[a].content+=u;case 25:o.next=28;break;case 27:n[a].content+=u;case 28:s++,o.next=6;break;case 31:a++,o.next=1;break;case 34:case"end":return o.stop()}},o,this)}))}}]),n}();return n.\u0275fac=function(t){return new(t||n)(a.Zb(r.a),a.Zb(c.a))},n.\u0275prov=a.Lb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()}}])}();