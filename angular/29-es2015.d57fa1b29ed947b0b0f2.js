(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{JZA2:function(t,e,n){"use strict";n.r(e),n.d(e,"AuthModule",function(){return Jn});var i=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),s=n("fB2i"),c=n("Zhhu"),a=n("sOeQ"),d=n("vvyD"),l=n("Avyq"),h=n("n1FK"),b=n("FKr1"),g=n("kmnG"),u=n("bWEQ"),m=n("gm2p"),p=n("fXoL"),f=n("oUVn"),v=n("5ete"),_=n("PYj7"),y=n("clS4"),w=n("f4AX"),V=n("NFeN"),U=n("QibW"),C=n("qFsG"),S=n("bTqV"),k=n("iWHX");function x(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",12),p.Vb(2,"div",13),p.Vb(3,"span",14),p.Tc(4),p.hc(5,"mytranslate"),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.Vc("",p.ic(5,1,"lang_cms_common_loading"),"..."))}function A(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," Email ph\u1ea3i nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng! "),p.Ub())}function O(t,e){if(1&t&&(p.Vb(0,"div",44),p.Rc(1,A,2,0,"div",11),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("email","email"))}}function P(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),p.Ub())}function D(t,e){if(1&t&&(p.Vb(0,"div",44),p.Rc(1,P,2,0,"div",11),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function T(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1! "),p.Ub())}function M(t,e){if(1&t&&(p.Vb(0,"div",44),p.Rc(1,T,2,0,"div",11),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("phone","pattern")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength"))}}function R(t,e){1&t&&(p.Vb(0,"span"),p.Tc(1,"OK"),p.Ub())}function Q(t,e){if(1&t&&(p.Vb(0,"div",15),p.Vb(1,"label",45),p.Tc(2),p.hc(3,"mytranslate"),p.Ub(),p.Ub()),2&t){const t=p.gc(2);p.Db(2),p.Vc("*** ",p.ic(3,1,t.statusObj.errorMessage),"")}}function I(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",46),p.Tc(2,"\xa0"),p.Ub())}function L(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div"),p.Vb(1,"div",15),p.Vb(2,"div",16),p.Vb(3,"div",17),p.Qb(4,"input",18),p.Vb(5,"div",19),p.Vb(6,"span",20),p.Vb(7,"mat-icon"),p.Tc(8,"account_box"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(9,"div",15),p.Vb(10,"div",16),p.Vb(11,"div",17),p.Qb(12,"input",21),p.Vb(13,"div",19),p.Vb(14,"span",20),p.Vb(15,"mat-icon"),p.Tc(16,"email"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(17,O,2,1,"div",22),p.Ub(),p.Ub(),p.Vb(18,"div",15),p.Vb(19,"div",16),p.Vb(20,"div",17),p.Qb(21,"input",23),p.Vb(22,"div",19),p.Vb(23,"span",20),p.Vb(24,"mat-icon"),p.Tc(25,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(26,D,2,1,"div",22),p.Ub(),p.Ub(),p.Vb(27,"div",15),p.Vb(28,"div",16),p.Vb(29,"div",24),p.Qb(30,"input",25),p.Vb(31,"div",19),p.Vb(32,"span",20),p.Vb(33,"mat-icon"),p.Tc(34,"phone_enabled"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(35,"a",26),p.cc("click",function(){return p.Ec(t),p.gc().goToConfirm()}),p.Tc(36,"Click v\xe0o \u0111\xe2y n\u1ebfu b\u1ea1n mu\u1ed1n \u0111\u1ed5i s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"),p.Ub(),p.Rc(37,M,2,1,"div",22),p.Ub(),p.Ub(),p.Vb(38,"div",15),p.Vb(39,"div",16),p.Vb(40,"div",27),p.Vb(41,"mat-radio-group",28),p.Vb(42,"div",2),p.Vb(43,"div",29),p.Tc(44," Gi\u1edbi t\xednh "),p.Ub(),p.Vb(45,"div",30),p.Vb(46,"mat-radio-button",31),p.Tc(47,"Nam"),p.Ub(),p.Vb(48,"mat-radio-button",32),p.Tc(49,"N\u1eef"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(50,"div",15),p.Vb(51,"div",33),p.Vb(52,"mat-form-field",34),p.Vb(53,"input",35),p.cc("click",function(){return p.Ec(t),p.Ac(58).open()}),p.Ub(),p.Vb(54,"button",36),p.cc("click",function(e){return p.Ec(t),p.Ac(58).open(),e.stopPropagation()}),p.Vb(55,"mat-icon"),p.Tc(56,"today"),p.Ub(),p.Ub(),p.Vb(57,"ngx-mat-datetime-picker",37,38),p.Rc(59,R,2,0,"ng-template"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(60,Q,4,3,"div",39),p.Vb(61,"div",15),p.Vb(62,"div",40),p.Vb(63,"button",41),p.cc("click",function(){p.Ec(t);const e=p.gc();return e.form.invalid||e.statusObj.loading||e.changeInfo()}),p.Rc(64,I,3,0,"span",11),p.Tc(65,"C\u1eadp nh\u1eadt "),p.Ub(),p.Ub(),p.Ub(),p.Vb(66,"div",42),p.Vb(67,"a",43),p.cc("click",function(){return p.Ec(t),p.gc().goBack()}),p.Tc(68,"Quay l\u1ea1i trang ch\u1ee7"),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.Ac(58),e=p.gc();p.Db(17),p.nc("ngIf",e.form.controls.email.invalid&&e.form.controls.email.dirty),p.Db(9),p.nc("ngIf",e.form.controls.password.invalid&&(e.form.controls.password.dirty||e.form.controls.password.touched)),p.Db(4),p.Eb("disabled",!0),p.Db(7),p.nc("ngIf",e.form.controls.phone.invalid&&(e.form.controls.phone.dirty||e.form.controls.phone.touched)),p.Db(16),p.nc("ngxMatDatetimePicker",t),p.Db(4),p.nc("hideTime",!0),p.Db(3),p.nc("ngIf",e.statusObj.errorMessage),p.Db(3),p.nc("disabled",e.form.invalid||e.statusObj.loading),p.Db(1),p.nc("ngIf",e.statusObj.loading)}}const E={parse:{dateInput:"l, LTS"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let B=(()=>{class t extends m.a{constructor(t,e,n,i,r,s,c){super(e),this.formBuilder=t,this.commonService=e,this.baseApiService=n,this.authService=i,this.redirectService=r,this.userService=s,this.datepipe=c,this.form=new o.k({}),this.startDate=new Date(1990,1,1),this.gender=0,this.prevData="",this.returnUrl=""}getErrorType(t,e){var n,i,o,r,s,c;return!!(null===(o=null===(i=null===(n=this.form.controls)||void 0===n?void 0:n[t])||void 0===i?void 0:i.errors)||void 0===o?void 0:o[e])&&(null===(c=null===(s=null===(r=this.form.controls)||void 0===r?void 0:r[t])||void 0===s?void 0:s.errors)||void 0===c?void 0:c[e])}goToConfirm(){this.returnUrl="/auth/change-info";var t="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=change_phone";this.commonService.myNavigationWithQueryString("/auth/checking_service",t)}allowChangePhone(){var t=this.baseApiService.getUserObj(),e=t.zaloId?t.zaloId:"";return""!=e&&e==(t.phone?t.phone:"")}changeInfo(){var t;if(this.form.valid){var e=this.commonService.getFormObj(this.form),n=e.birthday?new Date(Date.parse(e.birthday)):this.startDate,i={fullName:e.fullName,birthday:null!==(t=this.datepipe.transform(n,"yyyy-MM-ddTHH:mm:ss"))&&void 0!==t?t:"",email:e.email,gender:e.gender,password:e.password};this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthUpdateInfoPost(i).subscribe(t=>{1==t.success?this.successStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!",!0):this.errorStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin kh\xf4ng th\xe0nh c\xf4ng!",!0)}))}}goBack(){this.baseApiService.redirectLoginByRole("")}getInfo(){var t,e=this.baseApiService.getUserObj(),n=e.birthday?new Date(e.birthday):new Date(1990,1,1);this.startDate=n,this.gender=null!==(t=e.gender)&&void 0!==t?t:0,this.form.patchValue({fullName:this.userService.isAnonymousName(e)?"":e.fullName,email:e.email?e.email:"",phone:e.phone?e.phone:"",gender:1!=this.gender?"0":"1"}),this.form.controls.birthday.setValue(n)}ngOnInit(){this.form=this.formBuilder.group({fullName:new o.h(""),email:new o.h("",o.z.email),phone:new o.h("",[o.z.pattern("^[0-9]*$")]),gender:new o.h(""),birthday:new o.h(""),password:new o.h("",[o.z.minLength(6)])}),this.baseApiService.isAnonymousRole()?this.redirectService.redirectSimpleRegister():(this.getInfo(),this.form.valueChanges.subscribe(t=>{let e=JSON.stringify(t);e!=this.prevData&&(this.prevData=e,this.form.patchValue(t))}),this.commonService.translateMetaData({title:"lang_cms_auth_change_info_title",description:"lang_cms_auth_change_info_description",image:"lang_cms_test_image"}),super.ngOnInit())}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(o.g),p.Pb(f.a),p.Pb(v.a),p.Pb(_.d),p.Pb(y.a),p.Pb(w.a),p.Pb(i.e))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-change-info"]],features:[p.Cb([i.e,{provide:h.b,useClass:u.a,deps:[b.f,u.b]},{provide:h.a,useValue:E},{provide:g.b,useValue:{floatLabel:"never"}}]),p.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","fullName",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","text","placeholder","Email","formControlName","email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group","mb-1"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"clickable","text-info",2,"font-size","13px","padding-left","5px",3,"click"],[1,"input-group","input-custom"],["formControlName","gender","color","primary",2,"width","100%"],[1,"col-5"],[1,"col-7"],["value","1",1,"col-6","p-0"],["value","0"],[1,"col-sm-12","studentBirthDay"],["id","birthday",1,"myTimePicker",2,"border","1px solid #ced4da","border-radius","3px","padding-top","2px"],["matInput","","placeholder","Ng\xe0y sinh","formControlName","birthday","readonly","",1,"form-birthday","bg-white",3,"ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",3,"click"],[3,"hideTime"],["birthDay",""],["class","form-group",4,"ngIf"],[1,"col-sm-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"form",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h2",5),p.Qb(6,"img",6),p.Ub(),p.Vb(7,"div",7),p.Vb(8,"div",8),p.Vb(9,"span",9),p.Tc(10,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),p.Ub(),p.Ub(),p.Vb(11,"div",10),p.Rc(12,x,6,3,"div",11),p.Rc(13,L,69,9,"div",11),p.Ub(),p.Ub(),p.Ub(),p.Qb(14,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(1),p.nc("formGroup",e.form),p.Db(11),p.nc("ngIf",e.statusObj.loading),p.Db(1),p.nc("ngIf",!e.statusObj.loading))},directives:[o.B,o.s,o.l,i.m,o.d,o.r,o.j,V.a,U.b,U.a,g.d,C.b,h.c,S.b,g.h,h.d],pipes:[k.q],styles:[".mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em;font-weight:400;color:rgba(0,0,0,.54);font-size:16px}.form-birthday[_ngcontent-%COMP%]{display:block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}#birthday[_ngcontent-%COMP%]:active, #birthday[_ngcontent-%COMP%]:focus, #birthday[_ngcontent-%COMP%]:focus-visible, #birthday[_ngcontent-%COMP%]:focus-within, #birthday[_ngcontent-%COMP%]:target, #birthday[_ngcontent-%COMP%]:visited{background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.hover-cancel[_ngcontent-%COMP%]:hover{background-color:#ebe9e9}.input-custom[_ngcontent-%COMP%]{border:1px solid #e2e2e2;border-radius:3px;padding-left:12px;padding-top:10px}"]}),t})(),j=(()=>{class t extends m.a{constructor(t,e,n){super(t),this.commonService=t,this.baseApiService=e,this.authService=n}get returnUrl(){var t;return null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""}get confirm_type(){var t;return null!==(t=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==t?t:""}ngOnInit(){this.authService.apiAuthGetFirebaseConfigGet().subscribe(t=>{var e;if(1==t.success){let n=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.app);window.location.href=n.toString()}else this.commonService.snackError("C\xf3 l\u1ed7i khi ki\u1ec3m tra d\u1ecbch v\u1ee5","")})}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(f.a),p.Pb(v.a),p.Pb(_.d))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-checking-service"]],features:[p.Ab],decls:3,vars:0,consts:[[1,"mt-5","text-center"],["role","status",1,"spinner-border","spinner-border-md",2,"color","#2361ae"]],template:function(t,e){1&t&&(p.Vb(0,"h2",0),p.Qb(1,"span",1),p.Tc(2,"\xa0 \u0110ang ki\u1ec3m tra d\u1ecbch v\u1ee5..."),p.Ub())},encapsulation:2}),t})();var z=n("Jgta"),q=n("6nsN"),F=n("quSY");let N=(()=>{class t{get windowRef(){return window}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=p.Lb({token:t,factory:t.\u0275fac}),t})();var W=n("AytR"),H=n("AkFM");const G=["verifyCode"];function Y(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 10 k\xfd t\u1ef1! "),p.Ub())}function K(t,e){if(1&t&&(p.Vb(0,"div",34),p.Rc(1,Y,2,0,"div",31),p.Ub()),2&t){const t=p.gc();p.Db(1),p.nc("ngIf",t.getErrorType("phone","required")||t.getErrorType("phone","minlength"))}}function Z(t,e){if(1&t&&(p.Vb(0,"div",13),p.Vb(1,"label",35),p.Tc(2),p.hc(3,"mytranslate"),p.Ub(),p.Ub()),2&t){const t=p.gc();p.Db(2),p.Vc("*** ",p.ic(3,1,t.statusObj.errorMessage),"")}}function J(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",36),p.Tc(1," Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c m\xe3 x\xe1c th\u1ef1c? "),p.Vb(2,"b",21),p.cc("click",function(){return p.Ec(t),p.gc().resendCode()}),p.Tc(3,"G\u1eedi l\u1ea1i!"),p.Ub(),p.Ub()}}function $(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",37),p.Tc(2,"\xa0"),p.Ub())}const X=function(t){return{"margin-left":t}};let tt=(()=>{class t extends m.a{constructor(t,e,n,i,r,s,c){super(e),this.formBuilder=t,this.commonService=e,this.window=n,this.baseApiService=i,this.authService=r,this.redirectService=s,this.browserStorageService=c,this.subscriptions=new F.a,this.form=new o.k({}),this.confirm_type="forgot_password",this.isVerifying=!1,this.smsSent=!1,this.timeOut=60,this.captchaWidgetId="",this.isLoading=!0}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}get firebaseApp(){var t;return null!==(t=this.commonService.getMyQueryParam("app_name"))&&void 0!==t?t:""}get returnUrl(){var t;return null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""}getConfirmType(){var t;return null!==(t=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==t?t:""}skipVerifyPhone(){var t=Math.round((new Date).getTime()/1e3);this.browserStorageService.saveSimpleStorage("skip_verify_phone",t.toString()),this.baseApiService.redirectLoginByRole("");let e=this.getConfirmType();this.commonService.myNavigation("confirm_phone_register"==e?"/admin/student/manage-class/0":"/admin/testbank/dashboard")}handleConfirmUsage(){const t=this.form.value.phone;let e=this.getConfirmType();if(""!=t)switch(e){case"forgot_password":this.commonService.gaEvent("confirm_event_forgot_password"),this.authService.apiAuthCheckPhoneExistsGet(t).subscribe(e=>{1==e.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())});break;case"change_phone":this.commonService.gaEvent("confirm_event_change_phone"),this.authService.apiAuthCheckPhoneExistsGet(t).subscribe(e=>{1!=e.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())});break;default:this.commonService.gaEvent("confirm_event_confirm_phone"),this.authService.apiAuthCheckUpdatePhoneExistsGet(t).subscribe(e=>{1!=e.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())})}else this.commonService.snackError("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!",""),this.reRenderCaptcha()}sendLoginCode(t){const e=this.windowRef.recaptchaVerifier,n=Object(q.b)();Object(q.d)(n,t,e).then(t=>{this.windowRef.confirmationResult=t,this.smsSent=!0,this.timeOut=60,this.countDownTime()}).catch(t=>{console.log(t),"auth/quota-exceeded"==t.code?this.authService.apiAuthFirebaseOverQuotaGet(this.firebaseApp).subscribe(t=>{1==t.success?this.authService.apiAuthGetFirebaseConfigGet().subscribe(t=>{var e,n,i,o,r;if(1==t.success)if((null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.app)!==this.firebaseApp){var s=this.commonService.getMyQueryParam("interval_app");if(s&&s!=(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.app)){s=s||(null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.app)&&void 0!==o?o:"");let e=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.app)+"&interval_app="+s;window.location.href=e.toString()}else this.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","")}else this.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","");else this.commonService.snackError("Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c th\xf4ng tin FirebaseApp","")}):this.commonService.snackError("Kh\xf4ng \u0111\xe1nh d\u1ea5u \u0111\u01b0\u1ee3c firebase h\u1ebft quoata","")}):(this.commonService.gaEvent("confirm_event_error_send_code"),this.smsSent=!1,this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+t.code))})}verify_code(t){this.windowRef.confirmationResult?(this.isVerifying=!0,this.windowRef.confirmationResult.confirm(t).then(t=>{this.isVerifying=!1;const e=t.user;let n=this.getConfirmType();switch(n){case"forgot_password":this.commonService.myNavigationWithQueryString("/auth/set_new_password","?app_name="+this.firebaseApp+"&token="+encodeURIComponent(e.za));break;default:this.authService.apiAuthUpdatePhoneOrPasswordByFirebasePost({firebaseToken:e.accessToken,password:"",appName:this.firebaseApp}).subscribe(t=>{1==t.success?(this.showSuccessSnack("C\u1eadp nh\u1eadt s\u1ed1 \u0111i\u1ec7n tho\u1ea1i th\xe0nh c\xf4ng!"),"confirm_phone_register"==n?this.commonService.myNavigation("/admin/student/manage-class/0"):this.baseApiService.redirectLoginByRole("")):this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+t.message)})}}).catch(t=>{console.log(t),this.isVerifying=!1,this.commonService.gaEvent("confirm_event_error_verify_code"),this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+t.code)})):(this.isVerifying=!1,this.showErrorSnack("M\xe3 x\xe1c th\u1ef1c kh\xf4ng \u0111\xfang, vui l\xf2ng ki\u1ec3m tra l\u1ea1i"))}resendCode(){var t;this.reRenderCaptcha(),null===(t=document.getElementById("recaptcha-container"))||void 0===t||t.click()}countDownTime(){this.myCountDown=window.setInterval(()=>{this.timeOut>0&&this.timeOut--},1e3)}initForm(){this.form=this.formBuilder.group({phone:["",[o.z.required,o.z.minLength(10)]]})}handleClickLogout(){"forgot_password"==this.confirm_type||"change_phone"==this.confirm_type?this.baseApiService.redirectLoginByRole(""):(this.baseApiService.logout(),this.redirectService.redirectSimpleLogin())}reRenderCaptcha(){this.windowRef.recaptchaVerifier.reset(this.windowRef.recaptchaWidgetId)}handleEnterVerify(t,e){"Enter"==t.key&&(this.commonService.gaEvent("confirm_event_verify_code_by_press_enter"),this.verify_code(e))}ngOnInit(){this.initForm(),Object(z.a)(W.a["firebaseConfig_"+this.firebaseApp]),Object(q.b)().useDeviceLanguage();let t=this.getConfirmType();switch(this.confirm_type=this.getConfirmType(),"forgot_password"!=t&&this.authService.apiAuthInfoGet().subscribe(e=>{var n,i,o,r;1==e.success?1==(null===(n=null==e?void 0:e.new_user)||void 0===n?void 0:n.isVerifyPhone)?"change_phone"!=t&&this.baseApiService.redirectLoginByRole(""):(null===(i=null==e?void 0:e.new_user)||void 0===i?void 0:i.phone)&&(null===(o=null==e?void 0:e.new_user)||void 0===o?void 0:o.phone.length)<=10?this.form.setValue({phone:null===(r=null==e?void 0:e.new_user)||void 0===r?void 0:r.phone}):(this.form.setValue({phone:""}),console.log("enter phone plz")):this.showErrorSnack(e.message?"C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+e.message:"")}),t){case"forgot_password":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"});break;case"change_phone":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_change_phone_title",description:"lang_cms_auth_confirm_change_phone_description",image:"lang_cms_test_image"});break;default:this.commonService.translateMetaData({title:"lang_cms_auth_confirm_confirm_phone_title",description:"lang_cms_auth_confirm_confirm_phone_description",image:"lang_cms_test_image"})}super.ngOnInit()}ngAfterViewInit(){this.countDownTime(),this.windowRef=this.window.windowRef;const t=Object(q.b)();if(this.windowRef.recaptchaVerifier=new q.a("recaptcha-container",{size:"invisible",callback:()=>{this.handleConfirmUsage()}},t),this.windowRef.recaptchaVerifier.render().then(t=>{this.windowRef.recaptchaWidgetId=t}),this.verifyCode&&""!=this.verifyCode.nativeElement.value){let t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.addEventListener("keyup",e=>this.handleEnterVerify(e,t))}}ngOnDestroy(){if(clearInterval(this.myCountDown),this.verifyCode){let t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.removeEventListener("keyup",e=>this.handleEnterVerify(e,t))}super.ngDestroy()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(o.g),p.Pb(f.a),p.Pb(N),p.Pb(v.a),p.Pb(_.d),p.Pb(y.a),p.Pb(H.a))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-confirm-account"]],viewQuery:function(t,e){if(1&t&&p.bd(G,!0),2&t){let t;p.zc(t=p.dc())&&(e.verifyCode=t.first)}},features:[p.Cb([N]),p.Ab],decls:50,vars:13,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"card-body"],["id","verify_wrap"],["id","enter_phone_area",3,"ngStyle"],["id","enter_phone_wrap"],[1,"form-horizontal",3,"formGroup"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["id","phoneInput","type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","off",1,"form-control"],["phoneInput",""],["class","alert alert-danger",4,"ngIf"],["id","recaptcha-container","color","primary","mat-raised-button",""],[1,"mt-3","text-center"],[1,"clickable",3,"click"],["class","form-group",4,"ngIf"],["id","verify_area",1,"form-group"],[1,"sms-info"],[2,"text-align","right","font-size","12px","margin-bottom","3px"],["class","mb-2 mt-2 resend-code",4,"ngIf"],["type","string","placeholder","M\xe3 x\xe1c th\u1ef1c","autocomplete","off",1,"form-control"],["verifyCode",""],[1,"input-group-append","ml-1"],["id","buttonVerify","mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[1,"text-center","mt-3"],[1,"text-normal","clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],[1,"mb-2","mt-2","resend-code"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h2",5),p.Qb(6,"img",6),p.Ub(),p.Vb(7,"div",7),p.Vb(8,"div",8),p.Vb(9,"h2"),p.Tc(10),p.Ub(),p.Vb(11,"div"),p.Vb(12,"div",9),p.Vb(13,"div",10),p.Vb(14,"div",11),p.Vb(15,"form",12),p.Vb(16,"div",13),p.Vb(17,"div",14),p.Vb(18,"div",15),p.Qb(19,"input",16,17),p.Ub(),p.Rc(21,K,2,1,"div",18),p.Vb(22,"button",19),p.Tc(23,"Ti\u1ebfp t\u1ee5c"),p.Ub(),p.Vb(24,"div",20),p.Vb(25,"a",21),p.cc("click",function(){return e.skipVerifyPhone()}),p.Tc(26,"B\u1ecf qua"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(27,Z,4,3,"div",22),p.Ub(),p.Ub(),p.Vb(28,"div",23),p.Vb(29,"div",14),p.Vb(30,"div",24),p.Tc(31," M\u1ed9t tin nh\u1eafn ch\u1ee9a m\xe3 x\xe1c th\u1ef1c v\u1eeba \u0111\u01b0\u1ee3c g\u1eedi t\u1edbi s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),p.Vb(32,"b"),p.Tc(33),p.Ub(),p.Tc(34,". Vui l\xf2ng nh\u1eadp m\xe3 n\xe0y v\xe0o \xf4 d\u01b0\u1edbi \u0111\xe2y r\u1ed3i \u1ea5n x\xe1c th\u1ef1c "),p.Ub(),p.Vb(35,"div",25),p.Tc(36),p.Ub(),p.Rc(37,J,4,0,"div",26),p.Vb(38,"div",15),p.Qb(39,"input",27,28),p.Vb(41,"div",29),p.Vb(42,"button",30),p.cc("click",function(){p.Ec(t);const n=p.Ac(40);return e.verify_code(n.value)}),p.Rc(43,$,3,0,"span",31),p.Tc(44,"X\xe1c th\u1ef1c "),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(45,"hr"),p.Vb(46,"div",32),p.Vb(47,"a",33),p.cc("click",function(){return e.handleClickLogout()}),p.Tc(48),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(49,"div",3),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.Ac(40);p.Db(10),p.Uc("change_phone"==e.confirm_type?"Nh\u1eadp v\xe0o s\u1ed1 \u0111i\u1ec7n tho\u1ea1i m\u1edbi":"X\xe1c th\u1ef1c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n"),p.Db(3),p.nc("ngStyle",p.tc(11,X,e.smsSent?"-100%":"0")),p.Db(2),p.nc("formGroup",e.form),p.Db(6),p.nc("ngIf",e.form.controls.phone.invalid&&(e.form.controls.phone.dirty||e.form.controls.phone.touched)),p.Db(6),p.nc("ngIf",e.statusObj.errorMessage),p.Db(6),p.Uc(e.form.value.phone),p.Db(3),p.Vc("",e.timeOut," s"),p.Db(1),p.nc("ngIf",0==e.timeOut),p.Db(5),p.nc("disabled",""==t.value||e.isVerifying),p.Db(1),p.nc("ngIf",e.statusObj.loading),p.Db(5),p.Uc("forgot_password"==e.confirm_type?"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n":"change_phone"==e.confirm_type?"Quay l\u1ea1i m\xe0n h\xecnh ch\xednh":"\u0110\u0103ng xu\u1ea5t")}},directives:[i.n,o.B,o.s,o.l,o.d,o.r,o.j,i.m,S.b],pipes:[k.q],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}"]}),t})();function et(t,e){if(1&t&&(p.Vb(0,"div",13),p.Vb(1,"div",14),p.Vb(2,"div",15),p.Qb(3,"div",16),p.Qb(4,"div",16),p.Qb(5,"div",16),p.Ub(),p.Ub(),p.Ub()),2&t){const t=p.gc();p.Db(3),p.nc("ngClass",1==t.step_by_step?"active":t.step_by_step>1?"active pro":""),p.Db(1),p.nc("ngClass",2==t.step_by_step?"active":t.step_by_step>2?"active pro":""),p.Db(1),p.nc("ngClass",3==t.step_by_step?"active":t.step_by_step>3?"active pro":"")}}function nt(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",17),p.Vb(2,"div",18),p.Vb(3,"span",19),p.Tc(4),p.hc(5,"mytranslate"),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.Vc("",p.ic(5,1,"lang_cms_common_loading"),"..."))}function it(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng! "),p.Ub())}function ot(t,e){if(1&t&&(p.Vb(0,"div",41),p.Rc(1,it,2,0,"div",12),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("phone","required"))}}function rt(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),p.Ub())}function st(t,e){if(1&t&&(p.Vb(0,"div",41),p.Rc(1,rt,2,0,"div",12),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function ct(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),p.Ub())}function at(t,e){if(1&t&&(p.Vb(0,"div",41),p.Rc(1,ct,2,0,"div",12),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("repassword","confirm_pass"))}}function dt(t,e){if(1&t&&(p.Vb(0,"div",20),p.Vb(1,"label",42),p.Tc(2),p.hc(3,"mytranslate"),p.Ub(),p.Ub()),2&t){const t=p.gc(2);p.Db(2),p.Vc("*** ",p.ic(3,1,t.statusObj.errorMessage),"")}}function lt(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",43),p.Tc(2,"\xa0"),p.Ub())}const ht=function(t){return[t]};function bt(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div"),p.Vb(1,"div",20),p.Vb(2,"div",21),p.Vb(3,"div",22),p.Qb(4,"input",23),p.Vb(5,"div",24),p.Vb(6,"span",25),p.Vb(7,"mat-icon"),p.Tc(8,"phone"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(9,ot,2,1,"div",26),p.Ub(),p.Ub(),p.Vb(10,"div",20),p.Vb(11,"div",21),p.Vb(12,"div",22),p.Qb(13,"input",27),p.Vb(14,"div",24),p.Vb(15,"span",25),p.Vb(16,"mat-icon"),p.Tc(17,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(18,st,2,1,"div",26),p.Ub(),p.Ub(),p.Vb(19,"div",20),p.Vb(20,"div",21),p.Vb(21,"div",22),p.Qb(22,"input",28),p.Vb(23,"div",24),p.Vb(24,"span",25),p.Vb(25,"mat-icon"),p.Tc(26,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(27,at,2,1,"div",26),p.Ub(),p.Ub(),p.Rc(28,dt,4,3,"div",29),p.Vb(29,"div",20),p.Vb(30,"div",21),p.Vb(31,"div",30),p.Vb(32,"button",31),p.cc("click",function(){p.Ec(t);const e=p.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),p.Rc(33,lt,3,0,"span",12),p.Tc(34,"Ti\u1ebfp t\u1ee5c "),p.Ub(),p.Vb(35,"div",32),p.Vb(36,"span",33),p.Tc(37,"Ho\u1eb7c"),p.Ub(),p.Ub(),p.Vb(38,"div",5),p.Vb(39,"a",34),p.hc(40,"localize"),p.Vb(41,"span",35),p.Vb(42,"mat-icon",36),p.Tc(43,"center_focus_strong"),p.Ub(),p.Tc(44," S\u1eed d\u1ee5ng m\xe3 QR qu\xean m\u1eadt kh\u1ea9u"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(45,"hr"),p.Vb(46,"div",37),p.Vb(47,"div",38),p.Vb(48,"a",39),p.Tc(49,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),p.Ub(),p.Ub(),p.Vb(50,"div"),p.Vb(51,"a",40),p.hc(52,"localize"),p.Tc(53,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc();p.Db(9),p.nc("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched)),p.Db(9),p.nc("ngIf",t.form.controls.password.invalid&&t.form.controls.password.dirty),p.Db(9),p.nc("ngIf",t.getErrorType("repassword","confirm_pass")&&t.form.controls.repassword.touched),p.Db(1),p.nc("ngIf",t.statusObj.errorMessage),p.Db(4),p.nc("disabled",t.form.invalid||t.statusObj.loading||0!=t.getErrorType("repassword","confirm_pass")),p.Db(1),p.nc("ngIf",t.statusObj.loading),p.Db(6),p.nc("routerLink",p.tc(12,ht,p.ic(40,8,"/auth/confirm_forgot_password_qr"))),p.Db(12),p.nc("routerLink",p.tc(14,ht,p.ic(52,10,"/auth/login")))}}function gt(t,e){if(1&t&&(p.Vb(0,"div",47),p.Vb(1,"a"),p.Tc(2,"( Click v\xe0o \u0111\xe2y \u0111\u1ec3 g\u1eedi ngay )"),p.Ub(),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.Eb("href","sms:"+t.phone_send+"?body=MK "+t.response_change_pass.otp,p.Ic)}}function ut(t,e){if(1&t){const t=p.Wb();p.Vb(0,"button",50),p.cc("click",function(){return p.Ec(t),p.gc(2).changeStepByNext()}),p.Tc(1," Ti\u1ebfp t\u1ee5c "),p.Ub()}}function mt(t,e){if(1&t&&(p.Vb(0,"div",51),p.Vb(1,"div",52),p.Qb(2,"span",43),p.Ub(),p.Vb(3,"div",53),p.Tc(4),p.Ub(),p.Ub()),2&t){const t=p.gc(2);p.Db(4),p.Uc(t.currentMessage)}}function pt(t,e){if(1&t&&(p.Vb(0,"div"),p.Vb(1,"div",21),p.Vb(2,"div",44),p.Tc(3," Th\xf4ng tin m\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c ghi nh\u1eadn. \u0110\u1ec3 k\xedch ho\u1ea1t m\u1eadt kh\u1ea9u v\u1eeba t\u1ea1o vui l\xf2ng s\u1eed d\u1ee5ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),p.Vb(4,"strong"),p.Tc(5),p.Ub(),p.Tc(6," v\xe0 so\u1ea1n tin nh\u1eafn: "),p.Ub(),p.Vb(7,"div",45),p.Vb(8,"strong"),p.Tc(9),p.Ub(),p.Tc(10," g\u1eedi "),p.Vb(11,"strong"),p.Tc(12),p.Ub(),p.Ub(),p.Rc(13,gt,3,1,"div",46),p.Vb(14,"div",47),p.Tc(15,' "C\u01b0\u1edbc ph\xed tin nh\u1eafn \u0111\u01b0\u1ee3c t\xednh theo gi\xe1 c\u01b0\u1edbc ph\xed th\xf4ng th\u01b0\u1eddng c\u1ee7a nh\xe0 m\u1ea1ng" '),p.Ub(),p.Vb(16,"div",47),p.Tc(17," Sau khi g\u1eedi tin nh\u1eafn vui l\xf2ng b\u1ea5m n\xfat b\xean d\u01b0\u1edbi \u0111\u1ec3 ti\u1ebfp t\u1ee5c "),p.Ub(),p.Vb(18,"div",22),p.Rc(19,ut,2,0,"button",48),p.Rc(20,mt,5,1,"div",49),p.Ub(),p.Ub(),p.Ub()),2&t){const t=p.gc();p.Db(5),p.Uc(t.data_change_pass.phone),p.Db(4),p.Vc("MK ",t.response_change_pass.otp,""),p.Db(3),p.Uc(t.phone_send),p.Db(1),p.nc("ngIf",t.is_mobile),p.Db(6),p.nc("ngIf",2==t.step_by_step),p.Db(1),p.nc("ngIf",3==t.step_by_step)}}function ft(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",21),p.Vb(2,"div",44),p.Tc(3," M\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t th\xe0nh c\xf4ng. "),p.Ub(),p.Vb(4,"div",37),p.Vb(5,"div",38),p.Vb(6,"a",54),p.hc(7,"localize"),p.Tc(8,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),p.Ub(),p.Ub(),p.Vb(9,"div"),p.Vb(10,"a",55),p.Tc(11,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(6),p.nc("routerLink",p.tc(3,ht,p.ic(7,1,"/auth/login"))))}let vt=(()=>{class t extends m.a{constructor(t,e,n){super(e),this.formBuilder=t,this.commonService=e,this.smsService=n,this.form=new o.k({}),this.step_by_step=1,this.currentMessage="",this.phone_send="",this.is_mobile=/Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.is_mobile_ios=/webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),this.response_change_pass={},this.data_change_pass={}}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return"repassword"===t&&"confirm_pass"===e?this.form.controls.repassword.value!=this.form.controls.password.value:!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}randomPhone(t){if(t.includes(",")){let e=t.split(",");return e[this.commonService.getRandomNumber(0,e.length-1)]}return t}changePassword(){if(this.form.valid){this.initStatusObj();var t=this.commonService.getFormObj(this.form),e={phone:t.phone,password:t.password};this.smsService.apiSmsChangePassPost(e).subscribe(t=>{var n,i;1==t.success?(this.successStatusObj(),this.step_by_step=2,this.response_change_pass=null!==(n=t.data)&&void 0!==n?n:{},this.data_change_pass=e):this.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"")})}}getPhone(){this.initStatusObj(),this.smsService.apiSmsGetPhoneGet().subscribe(t=>{var e,n,i;1==t.success?(this.successStatusObj(),this.phone_send=this.randomPhone(null!==(n=null===(e=t.data)||void 0===e?void 0:e.phone)&&void 0!==n?n:"")):this.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"",!0)})}changeStepByNext(){this.initStatusObj(),this.currentMessage="\u0110ang x\u1eed l\xfd d\u1eef li\u1ec7u",this.step_by_step=3,this.loop_check=window.setInterval(()=>{this.smsService.apiSmsCheckStatusGet(this.data_change_pass.phone).subscribe(t=>{var e,n;1==t.success?(this.successStatusObj(),1==(null===(e=t.data)||void 0===e?void 0:e.status)&&(this.step_by_step=4,clearInterval(this.loop_check))):(this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:""),this.currentMessage="H\u1ec7 th\u1ed1ng t\u1ea1m th\u1eddi kh\xf4ng th\u1ec3 x\u1eed l\xfd, vui l\xf2ng th\u1eed l\u1ea1i sau.",clearInterval(this.loop_check))})},1e3)}ngOnInit(){this.form=this.formBuilder.group({phone:["",[o.z.required]],password:["",[o.z.required,o.z.minLength(6)]],repassword:["",[o.z.required,o.z.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.getPhone(),super.ngOnInit()}ngOnDestroy(){this.loop_check&&clearInterval(this.loop_check),super.ngDestroy()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(o.g),p.Pb(f.a),p.Pb(_.W))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-confirm-forgot-password"]],features:[p.Ab],decls:18,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["class","row m-0",4,"ngIf"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"row","m-0"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","new-phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[1,"text-center","mt-2"],[1,"text-mute"],[1,"btn","btn-outline-primary","mt-2","w-100",3,"routerLink"],[1,"link-center"],[1,"mr-1"],[1,"text-center","mt-3"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal",3,"routerLink"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sms-info"],[2,"text-align","right","font-size","15px","margin","10px 0","text-align","center"],["class","sms-info text-center mb-3",4,"ngIf"],[1,"sms-info","text-center","mb-3"],["class","btn btn-block","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"click"],[1,"loading"],[1,"icon"],[1,"text"],[3,"routerLink"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank",1,"text-normal"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"form",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h2",5),p.Qb(6,"img",6),p.Ub(),p.Rc(7,et,6,3,"div",7),p.Vb(8,"div",8),p.Vb(9,"div",9),p.Vb(10,"span",10),p.Tc(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),p.Ub(),p.Ub(),p.Vb(12,"div",11),p.Rc(13,nt,6,3,"div",12),p.Rc(14,bt,54,16,"div",12),p.Rc(15,pt,21,6,"div",12),p.Rc(16,ft,12,5,"div",12),p.Ub(),p.Ub(),p.Ub(),p.Qb(17,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(1),p.nc("formGroup",e.form),p.Db(6),p.nc("ngIf",!e.statusObj.loading),p.Db(6),p.nc("ngIf",e.statusObj.loading),p.Db(1),p.nc("ngIf",!e.statusObj.loading&&1==e.step_by_step),p.Db(1),p.nc("ngIf",1!=e.statusObj.loading&&(2==e.step_by_step||3==e.step_by_step)),p.Db(1),p.nc("ngIf",!e.statusObj.loading&&4==e.step_by_step))},directives:[o.B,o.s,o.l,i.m,i.k,o.d,o.r,o.j,V.a,S.b,r.k],pipes:[k.q,l.d],styles:['@charset "UTF-8";#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),t})();function _t(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",12),p.Vb(2,"div",13),p.Vb(3,"span",14),p.Tc(4),p.hc(5,"mytranslate"),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.Vc("",p.ic(5,1,"lang_cms_common_loading"),"..."))}function yt(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),p.Ub())}function wt(t,e){if(1&t&&(p.Vb(0,"div",27),p.Rc(1,yt,2,0,"div",11),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Vt(t,e){if(1&t&&(p.Vb(0,"div",15),p.Vb(1,"label",28),p.Tc(2),p.hc(3,"mytranslate"),p.Ub(),p.Ub()),2&t){const t=p.gc(2);p.Db(2),p.Vc("*** ",p.ic(3,1,t.statusObj.errorMessage),"")}}function Ut(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",29),p.Tc(2,"\xa0"),p.Ub())}const Ct=function(t){return[t]};function St(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div"),p.Vb(1,"div",15),p.Vb(2,"div",16),p.Vb(3,"div",17),p.Qb(4,"input",18),p.Vb(5,"div",19),p.Vb(6,"span",20),p.Vb(7,"mat-icon"),p.Tc(8,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(9,wt,2,1,"div",21),p.Ub(),p.Ub(),p.Rc(10,Vt,4,3,"div",22),p.Vb(11,"div",15),p.Vb(12,"div",16),p.Vb(13,"div",23),p.Vb(14,"button",24),p.cc("click",function(){p.Ec(t);const e=p.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),p.Rc(15,Ut,3,0,"span",11),p.Tc(16,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(17,"hr"),p.Vb(18,"div",25),p.Vb(19,"a",26),p.hc(20,"localize"),p.Tc(21,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc();p.Db(9),p.nc("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),p.Db(1),p.nc("ngIf",t.statusObj.errorMessage),p.Db(4),p.nc("disabled",t.form.invalid||t.statusObj.loading),p.Db(1),p.nc("ngIf",t.statusObj.loading),p.Db(4),p.nc("routerLink",p.tc(7,Ct,p.ic(20,5,"/auth/login")))}}let kt=(()=>{class t extends m.a{constructor(t,e,n,i){super(e),this.formBuilder=t,this.commonService=e,this.baseApiService=n,this.authService=i,this.form=new o.k({})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}changePassword(){if(this.form.valid){var t=this.commonService.getFormObj(this.form),e=this.commonService.getMyQueryParam("token");this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConfirmForgotPasswordGet(e,t.password).subscribe(t=>{var e;1==t.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(e=t.message)&&void 0!==e?e:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[o.z.required,o.z.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(o.g),p.Pb(f.a),p.Pb(v.a),p.Pb(_.d))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-confirm-forgot-password-admin"]],features:[p.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"form",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h2",5),p.Qb(6,"img",6),p.Ub(),p.Vb(7,"div",7),p.Vb(8,"div",8),p.Vb(9,"span",9),p.Tc(10,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),p.Ub(),p.Ub(),p.Vb(11,"div",10),p.Rc(12,_t,6,3,"div",11),p.Rc(13,St,22,9,"div",11),p.Ub(),p.Ub(),p.Ub(),p.Qb(14,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(1),p.nc("formGroup",e.form),p.Db(11),p.nc("ngIf",e.statusObj.loading),p.Db(1),p.nc("ngIf",!e.statusObj.loading))},directives:[o.B,o.s,o.l,i.m,o.d,o.r,o.j,V.a,S.b,r.k],pipes:[k.q,l.d],encapsulation:2}),t})();var xt=n("0pw4"),At=n("Ik8O");class Ot{constructor(t,e,n,i,o){this._legacyCanvasSize=Ot.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),n&&"object"==typeof n?this._onDecode=e:(n||i||o?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=e),this._onDecodeError=(e="object"==typeof n?n:{}).onDecodeError||("function"==typeof n?n:this._onDecodeError),this._calculateScanRegion=e.calculateScanRegion||("function"==typeof i?i:this._calculateScanRegion),this._preferredCamera=e.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize="number"==typeof n?n:"number"==typeof i?i:this._legacyCanvasSize,this._maxScansPerSecond=e.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let r=!1;if(t.hidden&&(t.hidden=!1,r=!0),document.body.contains(t)||(document.body.appendChild(t),r=!0),n=t.parentElement,e.highlightScanRegion||e.highlightCodeOutline){if(i=!!e.overlay,this.$overlay=e.overlay||document.createElement("div"),(o=this.$overlay.style).position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&e.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(s){}n.insertBefore(this.$overlay,this.$video.nextSibling)}e.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let e=window.getComputedStyle(t);"none"===e.display&&(t.style.setProperty("display","block","important"),r=!0),"visible"!==e.visibility&&(t.style.setProperty("visibility","visible","important"),r=!0),r&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=Ot.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await Ot.listCameras(!1)).length}catch(t){return!1}}static async listCameras(t=!1){if(!navigator.mediaDevices)return[];let e,n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(t=>"videoinput"===t.kind);try{t&&(await n()).every(t=>!t.label)&&(e=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(i){}try{return(await n()).map((t,e)=>({id:t.deviceId,label:t.label||(0===e?"Default Camera":"Camera "+(e+1))}))}finally{e&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),Ot._stopVideoStream(e))}}async hasFlash(){let t;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;t=this.$video.srcObject}else t=(await this._getCameraStream()).stream;return"torch"in t.getVideoTracks()[0].getSettings()}catch(e){return!1}finally{t&&t!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),Ot._stopVideoStream(t))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!(await this.hasFlash()))throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(t){throw this._flashOn=!1,t}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),Ot._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:t,facingMode:e}=await this._getCameraStream();!this._active||this._paused?Ot._stopVideoStream(t):(this._setVideoMirror(e),this.$video.srcObject=t,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(t){if(!this._paused)throw this._active=!1,t}}stop(){this.pause(),this._active=!1}async pause(t=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let e=()=>{this.$video.srcObject instanceof MediaStream&&(Ot._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return t?(e(),!0):(await new Promise(t=>setTimeout(t,300)),!!this._paused&&(e(),!0))}async setCamera(t){t!==this._preferredCamera&&(this._preferredCamera=t,await this._restartVideoStream())}static async scanImage(t,e,n,i,o=!1,r=!1){let s,c=!1;e&&("scanRegion"in e||"qrEngine"in e||"canvas"in e||"disallowCanvasResizing"in e||"alsoTryWithoutScanRegion"in e||"returnDetailedScanResult"in e)?(s=e.scanRegion,n=e.qrEngine,i=e.canvas,o=e.disallowCanvasResizing||!1,r=e.alsoTryWithoutScanRegion||!1,c=!0):e||n||i||o||r?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),e=!!n;try{let a,d,l;if([n,a]=await Promise.all([n||Ot.createQrEngine(),Ot._loadImage(t)]),[i,d]=Ot._drawToCanvas(a,s,i,o),n instanceof Worker){let t=n;e||Ot._postWorkerMessageSync(t,"inversionMode","both"),l=await new Promise((e,n)=>{let o,r,c,a=-1;r=i=>{i.data.id===a&&(t.removeEventListener("message",r),t.removeEventListener("error",c),clearTimeout(o),null!==i.data.data?e({data:i.data.data,cornerPoints:Ot._convertPoints(i.data.cornerPoints,s)}):n(Ot.NO_QR_CODE_FOUND))},c=e=>{t.removeEventListener("message",r),t.removeEventListener("error",c),clearTimeout(o),n("Scanner error: "+(e?e.message||e:"Unknown Error"))},t.addEventListener("message",r),t.addEventListener("error",c),o=setTimeout(()=>c("timeout"),1e4);let l=d.getImageData(0,0,i.width,i.height);a=Ot._postWorkerMessageSync(t,"decode",l,[l.data.buffer])})}else l=await Promise.race([new Promise((t,e)=>window.setTimeout(()=>e("Scanner error: timeout"),1e4)),(async()=>{try{var[e]=await n.detect(i);if(!e)throw Ot.NO_QR_CODE_FOUND;return{data:e.rawValue,cornerPoints:Ot._convertPoints(e.cornerPoints,s)}}catch(c){if(/not implemented|service unavailable/.test(e=c.message||c))return Ot._disableBarcodeDetector=!0,Ot.scanImage(t,{scanRegion:s,canvas:i,disallowCanvasResizing:o,alsoTryWithoutScanRegion:r});throw"Scanner error: "+e}})()]);return c?l:l.data}catch(a){if(!s||!r)throw a;let e=await Ot.scanImage(t,{qrEngine:n,canvas:i,disallowCanvasResizing:o});return c?e:e.data}finally{e||Ot._postWorkerMessage(n,"close")}}setGrayscaleWeights(t,e,n,i=!0){Ot._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:e,blue:n,useIntegerApproximation:i})}setInversionMode(t){Ot._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static async createQrEngine(t){return t&&console.warn("Specifying a worker path is not required and not supported anymore."),!Ot._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")?new BarcodeDetector({formats:["qr_code"]}):n.e(34).then(n.bind(null,"hyQ9")).then(t=>t.createWorker())}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let e=Math.round(2/3*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-e)/2),y:Math.round((t.videoHeight-e)/2),width:e,height:e,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,e=t.videoWidth,n=t.videoHeight,i=t.offsetWidth,o=t.offsetHeight,r=t.offsetLeft,s=t.offsetTop,c=window.getComputedStyle(t),a=c.objectFit,d=e/n,l=i/o;switch(a){case"none":var h=e,b=n;break;case"fill":h=i,b=o;break;default:("cover"===a?d>l:d<l)?h=(b=o)*d:b=(h=i)/d,"scale-down"===a&&(h=Math.min(h,e),b=Math.min(b,n))}var[g,u]=c.objectPosition.split(" ").map((t,e)=>{const n=parseFloat(t);return t.endsWith("%")?(e?o-b:i-h)*n/100:n});l=this._scanRegion.height||n,a=this._scanRegion.x||0;var m=this._scanRegion.y||0;(d=this.$overlay.style).width=(c=this._scanRegion.width||e)/e*h+"px",d.height=l/n*b+"px",d.top=s+u+m/n*b+"px",n=/scaleX\(-1\)/.test(t.style.transform),d.left=r+(n?i-g-h:g)+(n?e-a-c:a)/e*h+"px",d.transform=t.style.transform}})}static _convertPoints(t,e){if(!e)return t;let n=e.x||0,i=e.y||0,o=e.width&&e.downScaledWidth?e.width/e.downScaledWidth:1;e=e.height&&e.downScaledHeight?e.height/e.downScaledHeight:1;for(let r of t)r.x=r.x*o+n,r.y=r.y*e+i;return t}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var t=Date.now()-this._lastScanTimestamp,e=1e3/this._maxScansPerSecond;t<e&&await new Promise(n=>setTimeout(n,e-t)),this._lastScanTimestamp=Date.now();try{var n=await Ot.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(i){if(!this._active)return;this._onDecodeError(i)}!Ot._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=Ot.createQrEngine()),n?(this._onDecode?this._onDecode(n):this._legacyOnDecode&&this._legacyOnDecode(n.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",(this._scanRegion.x||0)+" "+(this._scanRegion.y||0)+" "+(this._scanRegion.width||this.$video.videoWidth)+" "+(this._scanRegion.height||this.$video.videoHeight)),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",n.cornerPoints.map(({x:t,y:e})=>`${t},${e}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(t){t!==Ot.NO_QR_CODE_FOUND&&console.log(t)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",e=[{width:{min:1024}},{width:{min:768}},{}],n=e.map(e=>Object.assign({},e,{[t]:{exact:this._preferredCamera}}));for(let o of[...n,...e])try{let t=await navigator.mediaDevices.getUserMedia({video:o,audio:!1});return{stream:t,facingMode:this._getFacingMode(t)||(o.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment")}}catch(i){}throw"Camera not found."}async _restartVideoStream(){let t=this._paused;await this.pause(!0)&&!t&&this._active&&await this.start()}static _stopVideoStream(t){for(let e of t.getTracks())e.stop(),t.removeTrack(e)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,e,n,i=!1){n=n||document.createElement("canvas");let o=e&&e.x?e.x:0,r=e&&e.y?e.y:0,s=e&&e.width?e.width:t.videoWidth||t.width,c=e&&e.height?e.height:t.videoHeight||t.height;return i||(i=e&&e.downScaledWidth?e.downScaledWidth:s,e=e&&e.downScaledHeight?e.downScaledHeight:c,n.width!==i&&(n.width=i),n.height!==e&&(n.height=e)),(e=n.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,e.drawImage(t,o,r,s,c,0,0,n.width,n.height),[n,e]}static async _loadImage(t){if(t instanceof Image)return await Ot._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let e=new Image;e.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return await Ot._awaitImageLoad(e),e}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(e.src)}}}static async _awaitImageLoad(t){t.complete&&0!==t.naturalWidth||await new Promise((e,n)=>{let i=o=>{t.removeEventListener("load",i),t.removeEventListener("error",i),o instanceof ErrorEvent?n("Image load error"):e()};t.addEventListener("load",i),t.addEventListener("error",i)})}static async _postWorkerMessage(t,e,n,i){return Ot._postWorkerMessageSync(await t,e,n,i)}static _postWorkerMessageSync(t,e,n,i){if(!(t instanceof Worker))return-1;let o=Ot._workerMessageId++;return t.postMessage({id:o,type:e,data:n},i),o}}Ot.DEFAULT_CANVAS_SIZE=400,Ot.NO_QR_CODE_FOUND="No QR code found",Ot._disableBarcodeDetector=!1,Ot._workerMessageId=0;var Pt=Ot,Dt=n("2Vo4"),Tt=n("Zmss"),Mt=n("IyRd");function Rt(t,e){if(1&t){const t=p.Wb();p.Vb(0,"zxing-scanner",7),p.cc("deviceChange",function(e){return p.Ec(t),p.gc().currentDevice=e})("scanSuccess",function(e){return p.Ec(t),p.gc().onCodeResult(e)})("permissionResponse",function(e){return p.Ec(t),p.gc().onHasPermission(e)})("camerasFound",function(e){return p.Ec(t),p.gc().onCamerasFound(e)})("torchCompatible",function(e){return p.Ec(t),p.gc().onTorchCompatible(e)}),p.Ub()}if(2&t){const t=p.gc();p.nc("torch",t.torchEnabled)("device",t.currentDevice)("tryHarder",t.tryHarder)("formats",t.formatsEnabled)}}function Qt(t,e){if(1&t&&(p.Vb(0,"span",8),p.Tc(1),p.Ub()),2&t){const t=p.gc();p.Db(1),p.Vc("( ",t.contentResult," )")}}let It=(()=>{class t extends m.a{constructor(t){super(t),this.commonService=t,this.outContentScan=new p.o,this.outNotCamAllow=new p.o,this.isShowDebugLog=!1,this.isShowScanner=!1,this.availableDevices=[],this.currentDevice=void 0,this.hasDevices=!1,this.hasPermission=!1,this.qrResultString="",this.torchEnabled=!1,this.torchAvailable$=new Dt.a(!1),this.tryHarder=!1,this.formatsEnabled=[At.BarcodeFormat.CODE_128,At.BarcodeFormat.DATA_MATRIX,At.BarcodeFormat.EAN_13,At.BarcodeFormat.QR_CODE],this.deviceCamSelect=0,this.contentResult=null,this.isShowLog=!1,this.snd=new Audio,this.snd=new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=")}clearResult(){this.qrResultString=""}onCamerasFound(t){this.availableDevices=t,this.hasDevices=Boolean(t&&t.length)}onCodeResult(t){this.qrResultString=t,Tt.a.isEncode(t)?this.switchChangeContent(Tt.a.decode(t)):this.switchChangeContent(null)}onDeviceSelectChange(t){const e=this.availableDevices.find(e=>e.deviceId===t);this.currentDevice=e||void 0}onHasPermission(t){this.hasPermission=t}onTorchCompatible(t){this.torchAvailable$.next(t||!1)}toggleTorch(){this.torchEnabled=!this.torchEnabled}toggleTryHarder(){this.tryHarder=!this.tryHarder}switchVideoScan(){this.deviceCamSelect++,this.deviceCamSelect>=this.availableDevices.length&&(this.deviceCamSelect=0),this.currentDevice=this.availableDevices[this.deviceCamSelect]}unInitSscanCam(){this.isShowScanner=!1}initVideoScan(){this.isShowScanner=!0}initScanCam(){this.isShowScanner=!0}onFileSelected(t){let e=t.target.files;if(null==e?void 0:e.length){var n=e[0];if(!n)return;this.scanProcessSelectFile(t,n,0)}else console.log("jel"),this.switchChangeContent(null)}scanProcessSelectFile(t,e,n){Pt.scanImage(e,{returnDetailedScanResult:!0}).then(e=>{this.thatLog("onFileSelected: 0 "+JSON.stringify(e)),t.target.value="";var n=e.data;this.thatLog("onFileSelected: 1 "+n),Tt.a.isEncode(n)?this.switchChangeContent(Tt.a.decode(n)):this.switchChangeContent(null)}).catch(i=>{n>=2?(t.target.value="",this.thatLog("onFileSelected: 2 "+JSON.stringify(i)),this.switchChangeContent(null)):this.scanProcessSelectFile(t,e,n++)})}pauseScanQrcode(){this.isShowScanner=!1}switchChangeContent(t){this.contentResult=t,this.pauseScanQrcode(),this.beep(),navigator&&navigator.vibrate&&navigator.vibrate(200),this.thatLog("switchChangeContent: "+t),this.outContentScan.emit(this.contentResult)}thatLog(t){!0===this.isShowDebugLog&&console.log("__AZT SCAN__ :: "+t)}beep(){this.snd&&this.snd.play()}ngOnDestroy(){this.unInitSscanCam(),super.ngDestroy()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(f.a))},t.\u0275cmp=p.Jb({type:t,selectors:[["azt-scan-qrcode"]],outputs:{outContentScan:"outContentScan",outNotCamAllow:"outNotCamAllow"},features:[p.Ab],decls:10,vars:2,consts:[[1,"scan__card-video"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible",4,"ngIf"],[1,"text-center","mt-3"],["class","text-center",4,"ngIf"],["type","file","name","fileQrcode",2,"display","none",3,"change"],["formChoseFile",""],[1,"link-center",3,"click"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible"],[1,"text-center"]],template:function(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",0),p.Rc(1,Rt,1,4,"zxing-scanner",1),p.Ub(),p.Vb(2,"div",2),p.Rc(3,Qt,2,1,"span",3),p.Vb(4,"input",4,5),p.cc("change",function(t){return e.onFileSelected(t)}),p.Ub(),p.Vb(6,"a",6),p.cc("click",function(){return p.Ec(t),p.Ac(5).click()}),p.Vb(7,"mat-icon"),p.Tc(8,"upload"),p.Ub(),p.Tc(9," T\u1ea3i l\xean m\xe3 c\xf3 s\u1eb5n"),p.Ub(),p.Ub()}2&t&&(p.Db(1),p.nc("ngIf",e.isShowScanner),p.Db(2),p.nc("ngIf",e.isShowLog))},directives:[i.m,V.a,Mt.a],styles:[".scan__card-img[_ngcontent-%COMP%], .scan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.scan__card-video[_ngcontent-%COMP%]{position:relative}.scan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.scan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.43137254901960786);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),t})();const Lt=["aztScanQrcode"];function Et(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),p.Ub())}function Bt(t,e){if(1&t&&(p.Vb(0,"div",36),p.Rc(1,Et,2,0,"div",34),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function jt(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),p.Ub())}function zt(t,e){if(1&t&&(p.Vb(0,"div",36),p.Rc(1,jt,2,0,"div",34),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("repassword","confirm_pass"))}}function qt(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",37),p.Tc(2,"\xa0"),p.Ub())}function Ft(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",38),p.Vb(1,"p",39),p.Tc(2,"Kh\xf4ng th\u1ec3 x\xe1c nh\u1eadn y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u. M\xe3 Qrcode v\xe0 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u0103ng nh\u1eadp kh\xf4ng tr\xf9ng kh\u1edbp. Vui l\xf2ng th\u1eed l\u1ea1i."),p.Ub(),p.Vb(3,"button",40),p.cc("click",function(){return p.Ec(t),p.gc(2).reloadProcessForgot()}),p.Tc(4,"Th\u1eed l\u1ea1i"),p.Ub(),p.Ub()}}function Nt(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",22),p.Vb(1,"div",23),p.Vb(2,"div",24),p.Vb(3,"div",25),p.Qb(4,"input",26),p.Vb(5,"div",27),p.Vb(6,"span",28),p.Vb(7,"mat-icon"),p.Tc(8,"qr_code"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(9,"div",23),p.Vb(10,"div",24),p.Vb(11,"div",25),p.Qb(12,"input",29),p.Vb(13,"div",27),p.Vb(14,"span",28),p.Vb(15,"mat-icon"),p.Tc(16,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(17,Bt,2,1,"div",30),p.Ub(),p.Ub(),p.Vb(18,"div",23),p.Vb(19,"div",24),p.Vb(20,"div",25),p.Qb(21,"input",31),p.Vb(22,"div",27),p.Vb(23,"span",28),p.Vb(24,"mat-icon"),p.Tc(25,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(26,zt,2,1,"div",30),p.Ub(),p.Ub(),p.Vb(27,"div",23),p.Vb(28,"div",24),p.Vb(29,"div",32),p.Vb(30,"button",33),p.cc("click",function(){p.Ec(t);const e=p.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),p.Rc(31,qt,3,0,"span",34),p.Tc(32,"Ti\u1ebfp t\u1ee5c "),p.Ub(),p.Ub(),p.Ub(),p.Rc(33,Ft,5,0,"div",35),p.Ub(),p.Ub()}if(2&t){const t=p.gc();p.Db(4),p.Eb("disabled",!0),p.Db(13),p.nc("ngIf",t.form.controls.password.invalid&&t.form.controls.password.dirty),p.Db(9),p.nc("ngIf",0!=t.getErrorType("repassword","confirm_pass")&&t.form.controls.repassword.touched),p.Db(4),p.nc("disabled",t.statusObj.errorMessage||t.form.invalid||t.statusObj.loading||0!=t.getErrorType("repassword","confirm_pass")),p.Db(1),p.nc("ngIf",!0===t.statusObj.loading),p.Db(2),p.nc("ngIf",t.statusObj.errorMessage)}}const Wt=function(t){return{"d-none":t}},Ht=function(t){return[t]};let Gt=(()=>{class t extends m.a{constructor(t,e,n,i){super(t),this.commonService=t,this.localStorageObjetct=e,this.formBuilder=n,this.qrCodeForgotPasswordService=i,this.subscriptions=new F.a,this.form=new o.k({}),this.stepByStep=0,this.sussScanNextConf=!1}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return"repassword"===t&&"confirm_pass"===e?this.form.controls.repassword.value!=this.form.controls.password.value:!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}reloadProcessForgot(){this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam(),this.stepByStep=0,this.form.reset(),this.initStatusObj(),this.sussScanNextConf=!1}outContentScan(t){null!==t?this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordAnonymousCheckForgotPasswordQrCodePost({hash:t}).subscribe(e=>{var n;1==e.success&&1==(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.status)?(this.stepByStep=1,this.form.controls.hash.setValue(t),this.sussScanNextConf=!0):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}changePassword(){this.initStatusObj();var t=this.commonService.getFormObj(this.form);this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordChangePasswordByQrcodePost({hash:t.hash,password:t.password}).subscribe(t=>{0!=t.success?(this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng.",!0),this.commonService.myNavigation("/auth/forgot_password_susscess")):(this.errorStatusObj("Y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u th\u1ea5t b\u1ea1i.",!0),this.successStatusObj())})}ngAfterViewInit(){setTimeout(()=>{this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam()},0)}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.form=this.formBuilder.group({hash:["",[o.z.required]],password:["",[o.z.required,o.z.minLength(6)]],repassword:["",[o.z.required,o.z.minLength(6)]]}),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(f.a),p.Pb(xt.a),p.Pb(o.g),p.Pb(_.S))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-confirm-forgot-password"]],viewQuery:function(t,e){if(1&t&&p.bd(Lt,!0),2&t){let t;p.zc(t=p.dc())&&(e.elementaztScanQrcode=t.first)}},features:[p.Ab],decls:33,vars:13,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"loginscan_scanmode_cam",3,"ngClass"],[1,"text-center","mb-3"],[3,"outContentScan"],["aztScanQrcode",""],["class","loginscan_scanmode_conf",4,"ngIf"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal","mt-1",3,"routerLink"],[1,"loginscan_scanmode_conf"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\xe3 x\xe1c th\u1ef1c","formControlName","hash",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[4,"ngIf"],["class","col-sm-12 mt-2",4,"ngIf"],[1,"alert","alert-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-sm-12","mt-2"],[1,"text-danger"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"form",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h2",5),p.Qb(6,"img",6),p.Ub(),p.Vb(7,"div",7),p.Vb(8,"div",8),p.Qb(9,"div",9),p.Qb(10,"div",9),p.Qb(11,"div",9),p.Ub(),p.Ub(),p.Vb(12,"div",10),p.Vb(13,"div",11),p.Vb(14,"span",12),p.Tc(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi b\u1eb1ng m\xe3 QRCode"),p.Ub(),p.Ub(),p.Vb(16,"div",13),p.Vb(17,"div",14),p.Vb(18,"div",15),p.Tc(19," Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode "),p.Ub(),p.Vb(20,"azt-scan-qrcode",16,17),p.cc("outContentScan",function(t){return e.outContentScan(t)}),p.Ub(),p.Ub(),p.Rc(22,Nt,34,6,"div",18),p.Ub(),p.Qb(23,"hr"),p.Vb(24,"div",15),p.Vb(25,"div",19),p.Vb(26,"a",20),p.Tc(27,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),p.Ub(),p.Ub(),p.Vb(28,"div"),p.Vb(29,"a",21),p.hc(30,"localize"),p.Tc(31,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(32,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(1),p.nc("formGroup",e.form),p.Db(8),p.nc("ngClass",e.stepByStep+2==1?"active":e.stepByStep+2>1?"active pro":""),p.Db(1),p.nc("ngClass",e.stepByStep+2==2?"active":e.stepByStep+2>2?"active pro":""),p.Db(1),p.nc("ngClass",e.stepByStep+2==3?"active":e.stepByStep+2>3?"active pro":""),p.Db(6),p.nc("ngClass",p.tc(9,Wt,e.sussScanNextConf)),p.Db(5),p.nc("ngIf",e.sussScanNextConf),p.Db(7),p.nc("routerLink",p.tc(11,Ht,p.ic(30,7,"/auth/login"))))},directives:[o.B,o.s,o.l,i.k,It,i.m,r.k,o.d,o.r,o.j,V.a,S.b],pipes:[l.d],styles:['@charset "UTF-8";#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),t})();var Yt=n("0IaG"),Kt=n("hZBc"),Zt=n("k3bj");function Jt(t,e){if(1&t&&(p.Vb(0,"div",3),p.Vb(1,"mat-icon",4),p.Tc(2,"access_time"),p.Ub(),p.Tc(3),p.Ub()),2&t){const t=p.gc();p.Db(3),p.Vc(" ",t.stringDuration,"")}}let $t=(()=>{class t extends m.a{constructor(){super(...arguments),this.content="",this.width=0,this.height=0,this.expired=0,this.expiredAction=new p.o,this.startDuration=0,this.isDuration=!1,this.stringDuration="__ : __"}ngAfterViewInit(){setTimeout(()=>{this.reInitComponent()},0)}reInitComponent(){this.bindUrlToQrCode(),0!=this.expired&&(this.isDuration=!0,this.startDuration=Math.floor(Date.now()/1e3),this.initLoopDuration())}initLoopDuration(){this.loopDuration=setInterval(()=>{var t=Math.floor(Date.now()/1e3),e=this.expired-(t-this.startDuration);if(e<0)this.clearLoopDuration(),this.qrcode.clear(),this.expiredAction.emit();else{var n=Math.floor(e/60),i=e-60*n;this.stringDuration=(n<10?"0"+n:""+n)+" : "+(i<10?"0"+i:""+i)}},1e3)}clearLoopDuration(){this.loopDuration&&clearInterval(this.loopDuration)}bindUrlToQrCode(){this.qrcode=this.commonService.createObjectQrcode(this.content,this.width,this.height,"text",!0,"image-qrcode-created"),this.qrcode._oDrawing._elCanvas.style.width="100%",this.qrcode._oDrawing._elCanvas.style.opacity=".9"}downloadQrcode(t){t||(t="azota-qr"),t=this.getTimeSaveQrcode()+"_"+t+".jpg";var e=this.createFrameQrcodeSaveLocal(this.qrcode._oDrawing._elCanvas),n=document.createElement("a");document.body.appendChild(n),n.setAttribute("href",e),n.setAttribute("download",t),n.click()}getTimeSaveQrcode(){var t=new Date,e=t.getMonth()+1,n=t.getDate();return[t.getFullYear(),(e>9?"":"0")+e,(n>9?"":"0")+n].join("_")}createFrameQrcodeSaveLocal(t){var e=document.createElement("canvas");const n=e.getContext("2d");return e.width=420,e.height=420,n&&(n.fillStyle="white",n.fillRect(0,0,e.width,e.height),n.drawImage(t,0,0,t.width,t.height,Math.floor((e.height-t.height)/2),(e.width-t.width)/2,t.width,t.height)),e.toDataURL("image/jpeg",1)}}return t.\u0275fac=function(e){return Xt(e||t)},t.\u0275cmp=p.Jb({type:t,selectors:[["azt-create-qr-image"]],inputs:{content:"content",width:"width",height:"height",expired:"expired"},outputs:{expiredAction:"expiredAction"},features:[p.Ab],decls:3,vars:1,consts:[[1,"qr-scan-box"],["class","duration",4,"ngIf"],["id","image-qrcode-created"],[1,"duration"],[2,"font-size","18px"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Rc(1,Jt,4,1,"div",1),p.Qb(2,"div",2),p.Ub()),2&t&&(p.Db(1),p.nc("ngIf",e.isDuration))},directives:[i.m,V.a],styles:[".qr-scan-box[_ngcontent-%COMP%]{border:1px solid #e0e0e0}#image-qrcode-created[_ngcontent-%COMP%]{margin:20px}.duration[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;font-weight:500}"]}),t})();const Xt=p.Xb($t),te=["elementCreateQr"];function ee(t,e){1&t&&p.Qb(0,"header-backend",13),2&t&&p.nc("headerTitle","")("back_link","/admin/testbank/dashboard")}function ne(t,e){1&t&&p.Qb(0,"header-frontend",14),2&t&&p.nc("headerTitle","")("back_link","/student/dashboard/0")}function ie(t,e){if(1&t&&(p.Vb(0,"div",15),p.Qb(1,"azt-create-qr-image",16,17),p.Ub()),2&t){const t=p.gc();p.Db(1),p.nc("content",t.contentQrcodeHash)("width",350)("height",350)("expired",0)}}function oe(t,e){if(1&t&&(p.Vb(0,"div",18),p.Vb(1,"div",19),p.Vb(2,"mat-icon"),p.Tc(3,"visibility_off"),p.Ub(),p.Ub(),p.Vb(4,"div",20),p.Tc(5),p.Ub(),p.Ub()),2&t){const t=p.gc();p.Db(5),p.Vc(" ",t.notiContentString," ")}}function re(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",7),p.Vb(1,"button",21),p.cc("click",function(){return p.Ec(t),p.gc().downloadQrCode()}),p.Vb(2,"mat-icon",22),p.Tc(3,"download"),p.Ub(),p.Tc(4," T\u1ea3i xu\u1ed1ng m\xe3"),p.Ub(),p.Ub()}}function se(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",7),p.Vb(1,"button",21),p.cc("click",function(){return p.Ec(t),p.gc().openDialog()}),p.Vb(2,"mat-icon",22),p.Tc(3,"add_photo_alternate"),p.Ub(),p.Tc(4," T\u1ea1o m\xe3 qu\xean m\u1eadt kh\u1ea9u m\u1edbi"),p.Ub(),p.Ub()}}let ce=(()=>{class t extends m.a{constructor(t,e,n,i){super(t),this.commonService=t,this.dialog=e,this.activeRoute=n,this.qrCodeForgotPasswordService=i,this.notiContentString="",this.contentQrcodeHash="",this.role=0}checkQrThisMe(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCheckForgotPasswordQrCodeGet().subscribe(t=>{var e;1==t.success?this.notiContentString=0!=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.status)?"M\xe3 Qrcode \u0111\xe3 t\u1ed3n t\u1ea1i. B\u1ea1n kh\xf4ng th\u1ec3 xem m\xe3 hi\u1ec7n t\u1ea1i. T\u1ea1o m\xe3 m\u1edbi trong tr\u01b0\u1eddng h\u1ee3p b\u1ea1n \u0111\xe3 m\u1ea5t m\xe3 Qrcode.":"B\u1ea1n ch\u01b0a t\u1ea1o m\xe3 Qrcode d\xf9ng trong tr\u01b0\u1eddng h\u1ee3p qu\xean m\u1eadt kh\u1ea9u. Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi.":this.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}createQrcodeForgot(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCreateForgotPasswordQrCodeGet().subscribe(t=>{var e,n;1==t.success?this.contentQrcodeHash=null!==(n=null===(e=t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"":this.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}openDialog(){this.dialog.open(ae).afterClosed().subscribe(t=>{!0===t&&this.createQrcodeForgot()})}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-forgot")}ngOnInit(){var t,e=null!==(t=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==t?t:"0";this.role=parseInt(e,10),this.checkQrThisMe(),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(f.a),p.Pb(Yt.b),p.Pb(r.a),p.Pb(_.S))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-gzip-tool"]],viewQuery:function(t,e){if(1&t&&p.bd(te,!0),2&t){let t;p.zc(t=p.dc())&&(e.elementCreateQr=t.first)}},features:[p.Ab],decls:16,vars:6,consts:[["class","mb-3",3,"headerTitle","back_link",4,"ngIf"],[3,"headerTitle","back_link",4,"ngIf"],[1,"container","component-wrap","centerBoth","hasBg","mt-3"],[1,"card","mb-5"],[1,"card-body"],[1,"text-center"],[1,"card-content","mt-3","text-center"],[1,"card-center-row"],[1,"qrcode-block","card-center-row"],[1,"qrcode-block-fake","card-center-row"],["class","qrcode-block-real",4,"ngIf"],["class","qrcode-block-fake-content",4,"ngIf"],["class","card-center-row",4,"ngIf"],[1,"mb-3",3,"headerTitle","back_link"],[3,"headerTitle","back_link"],[1,"qrcode-block-real"],[3,"content","width","height","expired"],["elementCreateQr",""],[1,"qrcode-block-fake-content"],[1,"qrcode-block-icon"],[1,"qrcode-block-note"],[1,"card-center-row","btn","btn-outline-primary",3,"click"],[2,"margin-right","10px"]],template:function(t,e){1&t&&(p.Rc(0,ee,1,2,"header-backend",0),p.Rc(1,ne,1,2,"header-frontend",1),p.Vb(2,"div",2),p.Vb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h3",5),p.Vb(6,"b"),p.Tc(7,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),p.Ub(),p.Ub(),p.Vb(8,"div",6),p.Vb(9,"div",7),p.Vb(10,"div",8),p.Vb(11,"div",9),p.Rc(12,ie,3,4,"div",10),p.Rc(13,oe,6,1,"div",11),p.Ub(),p.Ub(),p.Ub(),p.Rc(14,re,5,0,"div",12),p.Rc(15,se,5,0,"div",12),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.nc("ngIf",0==e.role),p.Db(1),p.nc("ngIf",1==e.role),p.Db(11),p.nc("ngIf",e.contentQrcodeHash),p.Db(1),p.nc("ngIf",!e.contentQrcodeHash),p.Db(1),p.nc("ngIf",e.contentQrcodeHash),p.Db(1),p.nc("ngIf",!e.contentQrcodeHash))},directives:[i.m,Kt.a,Zt.a,$t,V.a],styles:[".card-center-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.qrcode-block[_ngcontent-%COMP%]{padding:10px;border:1px solid #e0e0e0;margin-bottom:20px;max-width:400px;max-height:400px;min-width:300px;min-height:300px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.qrcode-block-fake[_ngcontent-%COMP%]{width:100%;height:100%}.qrcode-block-fake-content[_ngcontent-%COMP%]{padding:10px}.qrcode-block-note[_ngcontent-%COMP%]{line-height:30px}"]}),t})(),ae=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Jb({type:t,selectors:[["dialog-conf-content-qrcode-dialog"]],decls:16,vars:1,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-dialog-close","",1,"btn","btn-default","mr-3"],["cdkFocusInitial","",1,"btn","btn-outline-primary",3,"mat-dialog-close"]],template:function(t,e){1&t&&(p.Vb(0,"h2",0),p.Tc(1,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),p.Ub(),p.Vb(2,"mat-dialog-content",1),p.Vb(3,"h3"),p.Tc(4,'B\u1ea5m "X\xe1c nh\u1eadn" \u0111\u1ed3ng ngh\u0129a v\u1edbi vi\u1ec7c b\u1ea1n \u0111\xe3 hi\u1ec3u v\u1ec1 c\xe1c \u0111i\u1ec1u sau'),p.Ub(),p.Vb(5,"p"),p.Tc(6,"1. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 duy nh\u1ea5t. Khi b\u1ea1n t\u1ea1o m\u1edbi m\xe3, m\xe3 c\u0169 s\u1ebd kh\xf4ng c\xf2n gi\xe1 tr\u1ecb s\u1eed d\u1ee5ng."),p.Ub(),p.Vb(7,"p"),p.Tc(8,"2. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 ch\xeca kho\xe1. Vui l\xf2ng kh\xf4ng chia s\u1ebb hay \u0111\u1ec3 ng\u01b0\u1eddi kh\xe1c c\xf3 \u0111\u01b0\u1ee3c m\xe3 qrcode c\u1ee7a b\u1ea1n."),p.Qb(9,"br"),p.Tc(10,"Sau khi t\u1ea1o th\xe0nh c\xf4ng, vui l\xf2ng t\u1ea3i xu\u1ed1ng m\xe3 Qrcode \u0111\u1ec3 s\u1eed d\u1ee5ng cho m\u1ee5c \u0111\xedch qu\xean m\u1eadt kh\u1ea9u sau n\xe0y."),p.Ub(),p.Ub(),p.Vb(11,"mat-dialog-actions",2),p.Vb(12,"button",3),p.Tc(13,"Hu\u1ef7"),p.Ub(),p.Vb(14,"button",4),p.Tc(15,"X\xe1c nh\u1eadn"),p.Ub(),p.Ub()),2&t&&(p.Db(14),p.nc("mat-dialog-close",!0))},directives:[Yt.h,Yt.e,Yt.c,Yt.d],encapsulation:2}),t})(),de=(()=>{class t extends m.a{constructor(){super(...arguments),this.step_by_step=3}redirectToCreateQrCode(){this.commonService.myNavigation("/auth/create-qr-forgot-pass/0")}redirectToHome(){this.commonService.myNavigation("/admin/testbank/dashboard")}}return t.\u0275fac=function(e){return le(e||t)},t.\u0275cmp=p.Jb({type:t,selectors:[["app-confirm-forgot-password"]],features:[p.Ab],decls:25,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"btn-block-center"],[1,"btn","btn-outline-info","w-100","mr-3",3,"click"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h2",5),p.Qb(6,"img",6),p.Ub(),p.Vb(7,"div",7),p.Vb(8,"div",8),p.Qb(9,"div",9),p.Qb(10,"div",9),p.Qb(11,"div",9),p.Ub(),p.Ub(),p.Vb(12,"div",10),p.Vb(13,"div",11),p.Vb(14,"span",12),p.Tc(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng"),p.Ub(),p.Ub(),p.Vb(16,"div",13),p.Vb(17,"p"),p.Tc(18,"B\u1ea1n \u0111\xe3 \u0111\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng. M\xe3 Qrcode \u0111\xe3 s\u1eed d\u1ee5ng c\xf3 th\u1ec3 s\u1eed d\u1ee5ng l\u1ea1i. \u0110\u1ec3 \u0111\u1ea3m b\u1ea3o an to\xe0n, b\u1ea1n n\xean t\u1ea1o l\u1ea1i m\xe3 Qrcode."),p.Ub(),p.Vb(19,"div",14),p.Vb(20,"a",15),p.cc("click",function(){return e.redirectToHome()}),p.Tc(21,"B\u1ecf qua v\xe0 v\u1ec1 trang ch\u1ee7"),p.Ub(),p.Vb(22,"a",16),p.cc("click",function(){return e.redirectToCreateQrCode()}),p.Tc(23,"T\u1ea1o l\u1ea1i m\xe3 Qrcode"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(24,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(9),p.nc("ngClass",e.step_by_step+2==1?"active":e.step_by_step+2>1?"active pro":""),p.Db(1),p.nc("ngClass",e.step_by_step+2==2?"active":e.step_by_step+2>2?"active pro":""),p.Db(1),p.nc("ngClass",e.step_by_step+2==3?"active":e.step_by_step+2>3?"active pro":""))},directives:[i.k],styles:['@charset "UTF-8";#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.btn-block-center[_ngcontent-%COMP%], .link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),t})();const le=p.Xb(de);var he=n("rlhx");const be=["elementCreateQr"],ge=["aztScanQrcode"];function ue(t,e){1&t&&(p.Vb(0,"h2",25),p.Qb(1,"img",26),p.Ub())}function me(t,e){1&t&&(p.Vb(0,"div",20),p.Tc(1,"\u0110\u1ec3 \u0111\u0103ng nh\u1eadp l\xean thi\u1ebft b\u1ecb n\xe0y, vui l\xf2ng t\u1ea1o m\xe3 \u0111\u1ec3 thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp qu\xe9t."),p.Ub())}function pe(t,e){1&t&&(p.Vb(0,"div",20),p.Tc(1,"D\xf9ng thi\u1ebft b\u1ecb c\u1ea7n \u0111\u0103ng nh\u1eadp qu\xe9t m\xe3 b\xean d\u01b0\u1edbi"),p.Ub())}function fe(t,e){if(1&t&&(p.Vb(0,"div",27),p.Qb(1,"span",28),p.Tc(2),p.Ub()),2&t){const t=p.gc();p.Db(2),p.Vc("\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode: ",t.nameSessionConfirm,"")}}function ve(t,e){1&t&&(p.Vb(0,"div",27),p.Qb(1,"span",28),p.Tc(2,"\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode"),p.Ub())}function _e(t,e){if(1&t&&(p.Vb(0,"span"),p.Tc(1,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),p.Qb(2,"br"),p.Tc(3),p.Ub()),2&t){const t=p.gc(2);p.Db(3),p.Vc("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",t.nameSessionConfirm,"")}}function ye(t,e){1&t&&(p.Vb(0,"div"),p.Qb(1,"span",28),p.Tc(2,"\xa0 "),p.Vb(3,"span",36),p.Tc(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),p.Ub(),p.Ub())}function we(t,e){if(1&t&&(p.Vb(0,"div",37),p.Tc(1),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.Uc(t.textResultErr)}}function Ve(t,e){if(1&t&&(p.Vb(0,"div",38),p.Tc(1),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.Uc(t.textResultSuss)}}function Ue(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",28),p.Tc(2,"\xa0"),p.Ub())}function Ce(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",28),p.Tc(2,"\xa0"),p.Ub())}function Se(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",39),p.Vb(1,"button",40),p.cc("click",function(){return p.Ec(t),p.gc(2).confContentPendingLogin(1)}),p.Rc(2,Ue,3,0,"span",32),p.Tc(3," Ch\u1ea5p nh\u1eadn "),p.Ub(),p.Vb(4,"button",41),p.cc("click",function(){return p.Ec(t),p.gc(2).confContentPendingLogin(2)}),p.Rc(5,Ce,3,0,"span",32),p.Tc(6," T\u1eeb ch\u1ed1i "),p.Ub(),p.Ub()}if(2&t){const t=p.gc(2);p.Db(1),p.nc("disabled",t.isLoadingBtn||t.textResultErr),p.Db(1),p.nc("ngIf",t.isLoadingBtn),p.Db(2),p.nc("disabled",t.isLoadingBtn||t.textResultErr),p.Db(1),p.nc("ngIf",t.isLoadingBtn)}}function ke(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div"),p.Vb(1,"button",42),p.cc("click",function(){return p.Ec(t),p.gc(2).backScanActionWithIsLogin()}),p.Tc(2,"Quay l\u1ea1i"),p.Ub(),p.Ub()}}function xe(t,e){if(1&t&&(p.Vb(0,"div",29),p.Vb(1,"div",30),p.Vb(2,"div",31),p.Rc(3,_e,4,1,"span",32),p.Ub(),p.Rc(4,ye,5,0,"div",32),p.Rc(5,we,2,1,"div",33),p.Rc(6,Ve,2,1,"div",34),p.Rc(7,Se,7,4,"div",35),p.Rc(8,ke,3,0,"div",32),p.Ub(),p.Ub()),2&t){const t=p.gc();p.Db(3),p.nc("ngIf",t.nameSessionConfirm),p.Db(1),p.nc("ngIf",t.isLoadingBtn),p.Db(1),p.nc("ngIf",t.textResultErr),p.Db(1),p.nc("ngIf",t.textResultSuss),p.Db(1),p.nc("ngIf",!t.textResultSuss||!t.isConfirmBtn),p.Db(1),p.nc("ngIf",t.isLogin&&!1===t.isLoadingBtn&&!0===t.isConfirmBtn)}}function Ae(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",46),p.cc("click",function(){return p.Ec(t),p.gc(2).createRequestLoginHashCodeAction()}),p.Vb(1,"div",47),p.Vb(2,"div"),p.Vb(3,"mat-icon"),p.Tc(4,"sync"),p.Ub(),p.Ub(),p.Vb(5,"div"),p.Tc(6,"T\u1ea1o m\u1edbi m\xe3"),p.Ub(),p.Ub(),p.Ub()}}function Oe(t,e){if(1&t){const t=p.Wb();p.Vb(0,"azt-create-qr-image",48,49),p.cc("expiredAction",function(){return p.Ec(t),p.gc(2).expiredQrcodeAction()}),p.Ub()}if(2&t){const t=p.gc(2);p.nc("content",t.contentCreateQrcode)("width",350)("height",350)("expired",t.durationQrcodeExpire)}}function Pe(t,e){if(1&t&&(p.Vb(0,"div",43),p.Rc(1,Ae,7,0,"div",44),p.Rc(2,Oe,2,4,"azt-create-qr-image",45),p.Ub()),2&t){const t=p.gc();p.Db(1),p.nc("ngIf",!1===t.isLogin&&!t.contentCreateQrcode),p.Db(1),p.nc("ngIf",t.contentCreateQrcode)}}function De(t,e){if(1&t){const t=p.Wb();p.Vb(0,"a",50),p.cc("click",function(){return p.Ec(t),p.gc().downloadQrCode()}),p.Vb(1,"mat-icon"),p.Tc(2,"download"),p.Ub(),p.Tc(3," T\u1ea3i xu\u1ed1ng m\xe3"),p.Ub()}}function Te(t,e){1&t&&(p.Vb(0,"div",16),p.Vb(1,"span"),p.Tc(2,"- HO\u1eb6C B\u1ea0N C\xd3 TH\u1ec2 -"),p.Ub(),p.Ub())}function Me(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",16),p.Vb(1,"a",51),p.cc("click",function(){return p.Ec(t),p.gc().switchModeView()}),p.Vb(2,"span",52),p.Vb(3,"mat-icon",53),p.Tc(4,"center_focus_strong"),p.Ub(),p.Tc(5," Qu\xe9t m\xe3 QR c\xf3 s\u1eb5n"),p.Ub(),p.Ub(),p.Ub()}}function Re(t,e){if(1&t&&(p.Vb(0,"div",37),p.Tc(1),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.Uc(t.textResultErr)}}function Qe(t,e){if(1&t&&(p.Vb(0,"div",38),p.Tc(1),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.Uc(t.textResultSuss)}}function Ie(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",28),p.Tc(2,"\xa0"),p.Ub())}function Le(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",39),p.Vb(1,"button",40),p.cc("click",function(){return p.Ec(t),p.gc(2).confContentLogin()}),p.Rc(2,Ie,3,0,"span",32),p.Tc(3," \u0110\u0103ng nh\u1eadp "),p.Ub(),p.Vb(4,"button",41),p.cc("click",function(){return p.Ec(t),p.gc(2).reopenScanCamInit()}),p.Tc(5,"Th\u1eed l\u1ea1i"),p.Ub(),p.Ub()}if(2&t){const t=p.gc(2);p.Db(1),p.nc("disabled",t.isLoadingBtn||t.textResultErr),p.Db(1),p.nc("ngIf",t.isLoadingBtn),p.Db(2),p.nc("disabled",t.isLoadingBtn)}}function Ee(t,e){if(1&t&&(p.Vb(0,"div",29),p.Vb(1,"div",30),p.Vb(2,"div",31),p.Tc(3,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),p.Qb(4,"br"),p.Tc(5,"v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n"),p.Ub(),p.Rc(6,Re,2,1,"div",33),p.Rc(7,Qe,2,1,"div",34),p.Rc(8,Le,6,3,"div",35),p.Ub(),p.Ub()),2&t){const t=p.gc();p.Db(6),p.nc("ngIf",t.textResultErr),p.Db(1),p.nc("ngIf",t.textResultSuss),p.Db(1),p.nc("ngIf",!t.textResultSuss)}}function Be(t,e){1&t&&(p.Vb(0,"div"),p.Qb(1,"span",28),p.Tc(2,"\xa0 "),p.Vb(3,"span",36),p.Tc(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),p.Ub(),p.Ub())}function je(t,e){if(1&t&&p.Qb(0,"div",56),2&t){const t=p.gc(2);p.nc("innerHTML",t.textResultErr,p.Fc)}}function ze(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",28),p.Tc(2,"\xa0"),p.Ub())}function qe(t,e){if(1&t&&(p.Vb(0,"button",57),p.Rc(1,ze,3,0,"span",32),p.Tc(2),p.Ub()),2&t){const t=p.gc(2);p.nc("disabled",!t.textResultSuss),p.Db(1),p.nc("ngIf",t.isLoadingBtn),p.Db(1),p.Vc(" ",t.textResultSuss," ")}}function Fe(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",29),p.Vb(1,"div",30),p.Vb(2,"div",31),p.Vb(3,"span"),p.Tc(4,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),p.Qb(5,"br"),p.Tc(6),p.Ub(),p.Ub(),p.Rc(7,Be,5,0,"div",32),p.Rc(8,je,1,1,"div",54),p.Vb(9,"div",39),p.Rc(10,qe,3,3,"button",55),p.Vb(11,"button",41),p.cc("click",function(){return p.Ec(t),p.gc().reopenScanCamInit()}),p.Tc(12,"Th\u1eed l\u1ea1i"),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc();p.Db(6),p.Vc("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",t.nameSessionConfirm,""),p.Db(1),p.nc("ngIf",t.isLoadingBtn),p.Db(1),p.nc("ngIf",t.textResultErr),p.Db(2),p.nc("ngIf",!t.textResultSuss&&t.isLoadingBtn),p.Db(1),p.nc("disabled",t.isLoadingBtn)}}const Ne=function(t){return[t]},We=function(t){return{return_url:t}},He=function(t){return{"d-none":t}};let Ge=(()=>{class t extends m.a{constructor(t,e,n,i,o,r){super(t),this.commonService=t,this.baseApiService=e,this.localStorageObjetct=n,this.activeRoute=i,this.qrCodeLoginService=o,this.redirectService=r,this.returnUrl="",this.isLogin=!1,this.modeShowInit="create",this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.pendingDuration=!1,this.role=0,this.backLink=""}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}reloadLogin(){this.isLogin&&this.redirectService.redirectToDashboard()}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-login")}switchModeView(){this.modeShowInit="create"===this.modeShowInit?"scan":"create",this.elementaztScanQrcode&&("scan"===this.modeShowInit?(this.elementaztScanQrcode.initScanCam(),this.clearLoopRefLogin(),this.clearLoopPendingLogin()):(this.elementaztScanQrcode.unInitSscanCam(),this.initLoopRefLogin(),this.initPendingLoadingConfirm()))}clearLoopPendingLogin(){this.loopPendingLogin&&clearInterval(this.loopPendingLogin)}clearLoopRefLogin(){this.loopRefCheckQrcodeLogin&&clearInterval(this.loopRefCheckQrcodeLogin)}reopenScanCamInit(){this.textResultErr="",this.textResultSuss="",this.elementaztScanQrcode&&(this.elementaztScanQrcode.initScanCam(),this.sussScanNextConf=!1)}backScanActionWithIsLogin(){this.isLogin&&(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.createQrCodeWithUser())}expiredQrcodeAction(){this.pendingDuration||(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.isLogin?(this.createQrCodeWithUser(),this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, \u0111\xe3 t\u1ea1o m\xe3 qrcode m\u1edbi. Vui l\xf2ng thao t\xe1c l\u1ea1i.")):this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, vui l\xf2ng t\u1ea1o m\u1edbi v\xe0 thao t\xe1c l\u1ea1i."))}createQrCodeWithUser(){this.initStatusObj(),this.subscriptions.add(this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeGet().subscribe(t=>{var e,n,i,o;1==t.success?(this.successStatusObj(),this.contentCreateQrcode=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"",this.durationQrcodeExpire=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.duration)&&void 0!==o?o:0,this.initPendingLoadingConfirm()):this.errorStatusObj("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u",!0)}))}outContentScan(t){var e;null!==t?(this.scanQrContent=t,this.sussScanNextConf=!0,this.isLogin||(null===(e=this.elementaztScanQrcode)||void 0===e||e.pauseScanQrcode(),this.isLoadingBtn=!0,this.textResultSuss="",this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeRequestPost({qrCode:this.scanQrContent}).subscribe(t=>{var e,n,i,o;this.isLoadingBtn=!1,console.log(t),1==t.success?(this.isLoadingBtn=!0,this.scanQrContentConfirm=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"",this.nameSessionConfirm=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",this.textResultSuss="",this.initLoopPendingLogin()):(this.textResultSuss="",this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.")}))):(this.sussScanNextConf=!0,this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng \u0111\xfang. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",""))}initLoopPendingLogin(){this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginCheckLoginQrCodeRequestConfirmedPost({qrCode:this.scanQrContentConfirm}).subscribe(t=>{var e,n;1==t.success&&(1==(null===(e=t.data)||void 0===e?void 0:e.status)?(this.clearLoopPendingLogin(),this.commonService.gaEvent("sign_in_login_in"),this.isLoadingBtn=!1,this.textResultSuss="",this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng.",!0),this.baseApiService.redirectLoginByRole(null!==(n=this.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:"")):t.data&&2===t.data.status&&(this.clearLoopPendingLogin(),this.isLoadingBtn=!1,this.errorStatusObj("X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",!0),this.textResultErr="X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i.<br/> M\xe3 Qr kh\xf4ng c\xf2n ho\u1ea1t \u0111\u1ed9ng.<br/> Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi \u0111\u1ec3 \u0111\u0103ng nh\u1eadp l\u1ea1i.",this.textResultSuss=""))})},3e3)}initPendingLoadingConfirm(){this.isLogin&&(this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginGetFirstQrCodeLoginRequestGet().subscribe(t=>{var e,n,i,o;1==t.success&&t.data&&""!==t.data.qrCode&&(this.pendingDuration=!0,this.scanQrContentConfirm=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"",this.nameSessionConfirm=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",this.clearLoopPendingLogin())})},3e3))}confContentPendingLogin(t){this.isLogin&&(this.isLoadingBtn=!0,this.qrCodeLoginService.apiQrCodeLoginConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContentConfirm,status:t}).subscribe(e=>{1==e.success?this.textResultSuss=1==t?"X\xe1c nh\u1eadn th\xe0nh c\xf4ng":"T\u1eeb ch\u1ed1i th\xe0nh c\xf4ng":this.textResultErr="H\u1ec7 th\u1ed1ng kh\xf4ng ph\u1ea3n h\u1ed3i. Vui l\xf2ng t\u1ea3i l\u1ea1i trang \u0111\u1ec3 th\u1eed l\u1ea1i.",this.isConfirmBtn=!0,this.isLoadingBtn=!1}))}createRequestLoginHashCodeAction(){this.isLogin||this.qrCodeLoginService.apiQrCodeLoginAnonymousCreateLoginQrCodePost().subscribe(t=>{var e,n,i,o,r,s;1==t.success&&(this.contentCreateQrcode=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"",this.nameSessionConfirm=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",this.durationQrcodeExpire=null!==(s=null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.duration)&&void 0!==s?s:0,this.initLoopRefLogin())})}initLoopRefLogin(){0==this.isLogin&&(this.loopRefCheckQrcodeLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginAnonymousCheckLoginQrCodeRequestConfimedPost({qrCode:this.contentCreateQrcode,status:0}).subscribe(t=>{var e,n;1===t.success&&404!=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.status)&&(this.commonService.gaEvent("sign_in_login_in"),this.commonService.snackSuccess("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng."),this.baseApiService.redirectLoginByRole(null!==(n=this.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:""))})},3e3))}confContentLogin(){this.isLoadingBtn=!0,this.isLogin&&this.qrCodeLoginService.apiQrCodeLoginAnonymousConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContent,status:1}).subscribe(t=>{this.isLoadingBtn=!1,1===t.success?this.textResultSuss="X\xe1c nh\u1eadn th\xe0nh c\xf4ng. Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c ph\xea duy\u1ec7t":this.textResultErr="Thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp ho\u1eb7c m\xe3 \u0111\u0103ng nh\u1eadp kh\xf4ng h\u1ee3p l\u1ec7. Vui l\xf2ng ki\u1ec3m tra v\xe0 thao t\xe1c l\u1ea1i"})}ngOnInit(){var t,e=null!==(t=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==t?t:"0";switch(this.role=parseInt(e,10),this.role){case 0:this.backLink="/admin/testbank/dashboard";break;case 1:this.backLink="/student/dashboard/0";break;case 2:this.backLink="/auth/login"}this.isLogin=this.baseApiService.isLogin(),this.isLogin&&this.createQrCodeWithUser(),this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.clearLoopRefLogin(),this.clearLoopPendingLogin(),super.ngDestroy()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(f.a),p.Pb(v.a),p.Pb(xt.a),p.Pb(r.a),p.Pb(he.a),p.Pb(y.a))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-login"]],viewQuery:function(t,e){if(1&t&&(p.bd(be,!0),p.bd(ge,!0)),2&t){let t;p.zc(t=p.dc())&&(e.elementCreateQr=t.first),p.zc(t=p.dc())&&(e.elementaztScanQrcode=t.first)}},features:[p.Ab],decls:39,vars:37,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6","mb-5"],["class","text-center",4,"ngIf"],[1,"card"],[1,"text-center","loginscan__card-header"],[1,"back-btn",2,"font-size","16px","color","#6d6d6d",3,"routerLink","queryParams"],[2,"font-size","16px","color","#6d6d6d","font-weight","500"],[1,"loginscan__card-body"],[1,"loginscan_createmode",3,"ngClass"],["class","text-center mb-3",4,"ngIf"],["class","text-center mb-3 block-inline-center",4,"ngIf"],["class","loginscan_scanmode_conf",4,"ngIf"],["class","loginscan__card-img",4,"ngIf"],[1,"text-center","mt-3"],["class","link-center",3,"click",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[1,"loginscan_scanmode",3,"ngClass"],[1,"text-center","mb-3"],[3,"routerLink","queryParams"],[1,"loginscan_scanmode_cam",3,"ngClass"],[3,"outContentScan"],["aztScanQrcode",""],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"text-center","mb-3","block-inline-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"loginscan_scanmode_conf"],[1,"loginscan_scanmode_conf--box"],[1,"boxtext"],[4,"ngIf"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336",4,"ngIf"],["class","boxtext-suss","style","font-size: 20px; margin-bottom: 20px; color: #009688",4,"ngIf"],["class","mt-3",4,"ngIf"],[2,"font-size","18px"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336"],[1,"boxtext-suss",2,"font-size","20px","margin-bottom","20px","color","#009688"],[1,"mt-3"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled","click"],["type","button",1,"btn","btn-warning",3,"disabled","click"],["type","button",1,"btn","btn-primary","mr-3",3,"click"],[1,"loginscan__card-img"],["class","box-create-login-img",3,"click",4,"ngIf"],[3,"content","width","height","expired","expiredAction",4,"ngIf"],[1,"box-create-login-img",3,"click"],[1,"box-create-login-content"],[3,"content","width","height","expired","expiredAction"],["elementCreateQr",""],[1,"link-center",3,"click"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"link-center"],[1,"mr-1"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336; line-height: 30px",3,"innerHTML",4,"ngIf"],["type","button","class","btn btn-primary mr-3",3,"disabled",4,"ngIf"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336","line-height","30px",3,"innerHTML"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Rc(5,ue,2,0,"h2",5),p.Vb(6,"div",6),p.Vb(7,"div",7),p.Vb(8,"a",8),p.hc(9,"localize"),p.Vb(10,"mat-icon"),p.Tc(11,"arrow_back"),p.Ub(),p.Ub(),p.Vb(12,"span",9),p.Tc(13,"\u0110\u0103ng nh\u1eadp v\u1edbi m\xe3 qr code"),p.Ub(),p.Ub(),p.Vb(14,"div",10),p.Vb(15,"div",11),p.Rc(16,me,2,0,"div",12),p.Rc(17,pe,2,0,"div",12),p.Rc(18,fe,3,1,"div",13),p.Rc(19,ve,3,0,"div",13),p.Rc(20,xe,9,6,"div",14),p.Rc(21,Pe,3,2,"div",15),p.Vb(22,"div",16),p.Rc(23,De,4,0,"a",17),p.Ub(),p.Rc(24,Te,3,0,"div",18),p.Rc(25,Me,6,0,"div",18),p.Ub(),p.Vb(26,"div",19),p.Vb(27,"div",20),p.Tc(28,"Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode \u0111\u0103ng nh\u1eadp ( "),p.Vb(29,"a",21),p.hc(30,"localize"),p.Tc(31,"H\u01b0\u1edbng d\u1eabn"),p.Ub(),p.Tc(32," )"),p.Ub(),p.Vb(33,"div",22),p.Vb(34,"azt-scan-qrcode",23,24),p.cc("outContentScan",function(t){return e.outContentScan(t)}),p.Ub(),p.Ub(),p.Rc(36,Ee,9,3,"div",14),p.Rc(37,Fe,13,5,"div",14),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(38,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(5),p.nc("ngIf",!e.isLogin),p.Db(3),p.nc("routerLink",p.tc(23,Ne,p.ic(9,19,e.backLink)))("queryParams",p.tc(25,We,e.returnUrl)),p.Db(7),p.nc("ngClass",p.tc(27,He,"create"!==e.modeShowInit)),p.Db(1),p.nc("ngIf",!e.isLogin),p.Db(1),p.nc("ngIf",e.isLogin),p.Db(1),p.nc("ngIf",!e.isLogin&&e.contentCreateQrcode),p.Db(1),p.nc("ngIf",e.isLogin&&e.contentCreateQrcode&&!e.scanQrContentConfirm),p.Db(1),p.nc("ngIf",e.scanQrContentConfirm&&e.isLogin),p.Db(1),p.nc("ngIf",!e.scanQrContentConfirm),p.Db(2),p.nc("ngIf",e.contentCreateQrcode&&!e.scanQrContentConfirm),p.Db(1),p.nc("ngIf",!e.scanQrContentConfirm),p.Db(1),p.nc("ngIf",!e.scanQrContentConfirm),p.Db(1),p.nc("ngClass",p.tc(29,He,"scan"!==e.modeShowInit)),p.Db(3),p.nc("routerLink",p.tc(31,Ne,p.ic(30,21,"/auth/register")))("queryParams",p.tc(33,We,e.returnUrl)),p.Db(4),p.nc("ngClass",p.tc(35,He,!1!==e.sussScanNextConf)),p.Db(3),p.nc("ngIf",!0===e.sussScanNextConf&&e.isLogin),p.Db(1),p.nc("ngIf",!0===e.sussScanNextConf&&!e.isLogin))},directives:[i.m,r.k,V.a,i.k,It,$t],pipes:[l.d],styles:[".loginscan__card-header[_ngcontent-%COMP%]{padding:15px;text-transform:uppercase;display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-body[_ngcontent-%COMP%]{padding:15px}.loginscan__card-img[_ngcontent-%COMP%], .loginscan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.loginscan__card-video[_ngcontent-%COMP%]{position:relative}.loginscan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.loginscan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.43137254901960786);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.box-create-login-img[_ngcontent-%COMP%], .link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.box-create-login-img[_ngcontent-%COMP%]{height:100px;background:#f5f5f5;border:1px solid #e0e0e0;padding:10px;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.box-create-login-img[_ngcontent-%COMP%]:hover{background:#eceff1}.box-create-login-content[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf[_ngcontent-%COMP%]{width:100%;background:#e0f2f1;padding:10px;display:flex;align-items:center;justify-content:center;height:300px}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]   .boxtext[_ngcontent-%COMP%]{font-size:20px;line-height:30px;margin-bottom:20px}.block-inline-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.back-btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:14px}.back-btn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),t})();function Ye(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",12),p.Vb(2,"div",13),p.Vb(3,"span",14),p.Tc(4),p.hc(5,"mytranslate"),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.Vc("",p.ic(5,1,"lang_cms_common_loading"),"..."))}function Ke(t,e){if(1&t&&(p.Vb(0,"div",19),p.Vb(1,"label",35),p.Tc(2),p.hc(3,"mytranslate"),p.Ub(),p.Ub()),2&t){const t=p.gc(2);p.Db(2),p.Vc("*** ",p.ic(3,1,t.statusObj.errorMessage),"")}}function Ze(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",36),p.Tc(2,"\xa0"),p.Ub())}const Je=function(t){return[t]},$e=function(t){return{return_url:t}};function Xe(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div"),p.Vb(1,"div",15),p.Vb(2,"a",16),p.cc("click",function(){return p.Ec(t),p.gc().loginZalo()}),p.Qb(3,"img",17),p.Vb(4,"span"),p.Tc(5,"\u0110\u0103ng nh\u1eadp b\u1eb1ng Zalo"),p.Ub(),p.Ub(),p.Qb(6,"br"),p.Qb(7,"br"),p.Vb(8,"div",5),p.Vb(9,"span",18),p.Tc(10,"- HO\u1eb6C -"),p.Ub(),p.Ub(),p.Qb(11,"br"),p.Ub(),p.Vb(12,"div",19),p.Vb(13,"div",20),p.Vb(14,"div",21),p.Qb(15,"input",22),p.Vb(16,"div",23),p.Vb(17,"span",24),p.Vb(18,"mat-icon"),p.Tc(19,"phone_enabled"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(20,"div",19),p.Vb(21,"div",20),p.Vb(22,"div",21),p.Qb(23,"input",25),p.Vb(24,"div",23),p.Vb(25,"span",24),p.Vb(26,"mat-icon"),p.Tc(27,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(28,Ke,4,3,"div",26),p.Vb(29,"div",19),p.Vb(30,"div",27),p.Vb(31,"div",15),p.Vb(32,"button",28),p.cc("click",function(){p.Ec(t);const e=p.gc();return e.form.invalid||e.statusObj.loading||e.login()}),p.Rc(33,Ze,3,0,"span",11),p.Tc(34,"\u0110\u0103ng nh\u1eadp "),p.Ub(),p.Vb(35,"a",29),p.hc(36,"mylocalize"),p.Vb(37,"mat-icon",30),p.Tc(38,"center_focus_strong"),p.Ub(),p.Vb(39,"span"),p.Tc(40,"\u0110\u0103ng nh\u1eadp b\u1eb1ng m\xe3 Qrcode"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(41,"div",31),p.Vb(42,"a",32),p.hc(43,"localize"),p.Tc(44,"\u0110\u0103ng k\xfd th\xe0nh vi\xean m\u1edbi"),p.Ub(),p.Ub(),p.Vb(45,"div",33),p.Vb(46,"a",34),p.cc("click",function(){return p.Ec(t),p.gc().forgotPassword()}),p.Tc(47,"Qu\xean m\u1eadt kh\u1ea9u?"),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc();p.Db(28),p.nc("ngIf",t.statusObj.errorMessage),p.Db(4),p.nc("disabled",t.form.invalid||t.statusObj.loading),p.Db(1),p.nc("ngIf",t.statusObj.loading),p.Db(2),p.nc("routerLink",p.tc(10,Je,p.ic(36,6,"/auth/login-scan/2"))),p.Db(7),p.nc("routerLink",p.tc(12,Je,p.ic(43,8,"/auth/register")))("queryParams",p.tc(14,$e,t.returnUrl))}}let tn=(()=>{class t extends m.a{constructor(t,e,n,i,r){super(e),this.formBuilder=t,this.commonService=e,this.baseApiService=n,this.localStorageObjetct=i,this.authService=r,this.form=new o.k({}),this.zaloAccessTkn="",this.returnUrl="",this.zaloLoginUrl="",this.initStatusObj()}getError(t){return!(!this.form.controls[t]||!this.form.controls[t].errors)&&this.form.controls[t].errors}loginZalo(){this.commonService.gaEvent("sign_in_click_sign_in_by_zalo"),window.location.href=this.zaloLoginUrl}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}login(){if(this.form.valid){this.commonService.gaEvent("sign_in_login_in");var t=this.commonService.getFormObj(this.form);this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthLoginPost({phone:t.phone,password:t.password}).subscribe(t=>{var e,n;1==t.success?(this.localStorageObjetct.clearAllCache(),this.successStatusObj(),this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"")):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))}}loginAnonymous(){this.commonService.gaEvent("sign_in_login_anonymous"),this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthLoginAnonymousFromWebGet().subscribe(t=>{var e,n;1==t.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"")):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))}loginWithZaloAccessToken(t){this.commonService.gaEvent("sign_in_login_by_zalo"),this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthLoginByTokenGet(t).subscribe(t=>{var e,n;1==t.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"")):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))}ngOnInit(){var t,e,n;this.form=this.formBuilder.group({phone:["",o.z.required],password:["",o.z.required]}),this.zaloAccessTkn=null!==(t=this.commonService.getMyQueryParam("access_token"))&&void 0!==t?t:"",this.commonService.getMyQueryParam("not_register")?this.commonService.myNavigation("/auth/register"):this.zaloAccessTkn?(this.commonService.getMyQueryParam("register")&&this.commonService.gaEvent("sign_in_sign_up_by_zalo"),this.loginWithZaloAccessToken(this.zaloAccessTkn)):this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole()?this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:""):(this.returnUrl=this.commonService.getMyQueryParam("return_url")||"",-1===this.returnUrl.indexOf("/test/")&&-1===this.returnUrl.indexOf("/de-thi/")&&-1===this.returnUrl.indexOf("/bai-tap/")||"register"==this.commonService.getMyQueryParam("from")?(this.zaloLoginUrl=W.a.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_login=1"),this.stopStatusObj()):this.baseApiService.isLogin()?this.baseApiService.redirectLoginByRole(null!==(n=this.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:""):this.loginAnonymous()),this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(o.g),p.Pb(f.a),p.Pb(v.a),p.Pb(xt.a),p.Pb(_.d))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-login"]],features:[p.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"col-md-12"],[1,"btn","btn-outline-primary","mt-2",2,"width","100%",3,"click"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/zaloicon.png","alt","Zalo Icon",1,"img-responsive","zalo-icon"],[1,"h6","mute-text"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","tel","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password",1,"form-control"],["class","form-group",4,"ngIf"],[2,"display","flex"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],[1,"btn","btn-outline-primary","mt-3",2,"width","100%","display","flex","align-items","center","justify-content","center",3,"routerLink"],[2,"margin-right","10px"],[1,"text-center","mt-3"],[3,"routerLink","queryParams"],[1,"text-center","mt-1"],[2,"color","rgb(216, 2, 2)",3,"click"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"form",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h2",5),p.Qb(6,"img",6),p.Ub(),p.Vb(7,"div",7),p.Vb(8,"div",8),p.Vb(9,"span",9),p.Tc(10,"\u0110\u0103ng nh\u1eadp"),p.Ub(),p.Ub(),p.Vb(11,"div",10),p.Rc(12,Ye,6,3,"div",11),p.Rc(13,Xe,48,16,"div",11),p.Ub(),p.Ub(),p.Ub(),p.Qb(14,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(1),p.nc("formGroup",e.form),p.Db(11),p.nc("ngIf",e.statusObj.loading),p.Db(1),p.nc("ngIf",!e.statusObj.loading))},directives:[o.B,o.s,o.l,i.m,o.d,o.r,o.j,V.a,S.b,r.k],pipes:[k.q,k.p,l.d],styles:[".checkboxInput[_ngcontent-%COMP%]{padding:5px 15px;font-size:1rem;font-weight:400;line-height:2}.zalo-icon[_ngcontent-%COMP%]{height:30px;margin-right:10px}"]}),t})(),en=(()=>{class t extends m.a{constructor(t,e,n){super(t),this.commonService=t,this.baseApiService=e,this.redirectService=n}ngOnInit(){this.baseApiService.logout();var t=this.commonService.getMyQueryParam("return_url")||null;t?this.redirectService.redirectSimpleLoginWithReturnUrl(t):this.redirectService.redirectSimpleLogin(),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(f.a),p.Pb(v.a),p.Pb(y.a))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-register"]],features:[p.Ab],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();var nn=n("1yaQ"),on=n("jCJ1");function rn(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",13),p.Vb(2,"div",14),p.Vb(3,"span",15),p.Tc(4),p.hc(5,"mytranslate"),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.Vc("",p.ic(5,1,"lang_cms_common_loading"),"..."))}function sn(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",16),p.Vb(1,"div",17),p.cc("click",function(){return p.Ec(t),p.gc().changeRegisterType(1)}),p.Vb(2,"div",18),p.Qb(3,"i",19),p.Vb(4,"p"),p.Tc(5,"T\xf4i l\xe0 h\u1ecdc sinh"),p.Ub(),p.Ub(),p.Ub(),p.Vb(6,"div",17),p.cc("click",function(){return p.Ec(t),p.gc().changeRegisterType(2)}),p.Vb(7,"div",18),p.Qb(8,"img",20),p.Vb(9,"p"),p.Tc(10,"T\xf4i l\xe0 gi\xe1o vi\xean"),p.Ub(),p.Ub(),p.Ub(),p.Ub()}}function cn(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," Y\xeau c\u1ea7u nh\u1eadp h\u1ecd t\xean \u0111\u1ea7y \u0111\u1ee7! "),p.Ub())}function an(t,e){if(1&t&&(p.Vb(0,"div",53),p.Rc(1,cn,2,0,"div",10),p.Ub()),2&t){const t=p.gc(3);p.Db(1),p.nc("ngIf",t.getErrorType("fullName","required"))}}function dn(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," Y\xeau c\u1ea7u nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i! "),p.Ub())}function ln(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1! "),p.Ub())}function hn(t,e){if(1&t&&(p.Vb(0,"div",53),p.Rc(1,dn,2,0,"div",10),p.Rc(2,ln,2,0,"div",10),p.Ub()),2&t){const t=p.gc(3);p.Db(1),p.nc("ngIf",t.getErrorType("phone","required")),p.Db(1),p.nc("ngIf",t.getErrorType("phone","pattern")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength"))}}function bn(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),p.Ub())}function gn(t,e){if(1&t&&(p.Vb(0,"div",53),p.Rc(1,bn,2,0,"div",10),p.Ub()),2&t){const t=p.gc(3);p.Db(1),p.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function un(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," Email b\u1ea1n nh\u1eadp sai \u0111\u1ecbnh d\u1ea1ng! "),p.Ub())}function mn(t,e){if(1&t&&(p.Vb(0,"div",53),p.Rc(1,un,2,0,"div",10),p.Ub()),2&t){const t=p.gc(3);p.Db(1),p.nc("ngIf",t.getErrorType("email","email"))}}function pn(t,e){if(1&t&&(p.Vb(0,"div",39),p.Vb(1,"label",54),p.Tc(2),p.hc(3,"mytranslate"),p.Ub(),p.Ub()),2&t){const t=p.gc(3);p.Db(2),p.Vc("*** ",p.ic(3,1,t.statusObj.errorMessage),"")}}function fn(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",55),p.Tc(2,"\xa0"),p.Ub())}function vn(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",36),p.Vb(1,"form",37),p.Vb(2,"div",27),p.Vb(3,"div",38),p.Vb(4,"div",39),p.Vb(5,"div",40),p.Vb(6,"div",41),p.Qb(7,"input",42),p.Vb(8,"div",43),p.Vb(9,"span",44),p.Vb(10,"mat-icon"),p.Tc(11,"account_box"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(12,an,2,1,"div",45),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(13,"div",27),p.Vb(14,"div",38),p.Vb(15,"div",39),p.Vb(16,"div",40),p.Vb(17,"div",41),p.Qb(18,"input",46),p.Vb(19,"div",43),p.Vb(20,"span",47),p.Vb(21,"mat-icon"),p.Tc(22,"phone_enabled"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(23,hn,3,2,"div",45),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(24,"div",27),p.Vb(25,"div",38),p.Vb(26,"div",39),p.Vb(27,"div",40),p.Vb(28,"div",41),p.Qb(29,"input",48),p.Vb(30,"div",43),p.Vb(31,"span",49),p.Vb(32,"mat-icon"),p.Tc(33,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(34,gn,2,1,"div",45),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(35,"div",27),p.Vb(36,"div",38),p.Vb(37,"div",39),p.Vb(38,"div",40),p.Vb(39,"div",41),p.Qb(40,"input",50),p.Vb(41,"div",43),p.Vb(42,"span",47),p.Vb(43,"mat-icon"),p.Tc(44,"email"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(45,mn,2,1,"div",45),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(46,pn,4,3,"div",51),p.Vb(47,"div",39),p.Vb(48,"div",27),p.Vb(49,"div",38),p.Vb(50,"button",52),p.cc("click",function(){p.Ec(t);const e=p.gc(2);return e.form.invalid||e.statusObj.loading||e.registerForTeacher()}),p.Rc(51,fn,3,0,"span",10),p.Tc(52,"\u0110\u0103ng k\xfd "),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc(2);p.Db(1),p.nc("formGroup",t.form),p.Db(11),p.nc("ngIf",t.form.controls.fullName.invalid&&(t.form.controls.fullName.dirty||t.form.controls.fullName.touched)),p.Db(11),p.nc("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched)),p.Db(11),p.nc("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),p.Db(11),p.nc("ngIf",t.form.controls.email.invalid&&(t.form.controls.email.dirty||t.form.controls.email.touched)),p.Db(1),p.nc("ngIf",t.statusObj.errorMessage),p.Db(4),p.nc("disabled",t.form.invalid||t.statusObj.loading),p.Db(1),p.nc("ngIf",t.statusObj.loading)}}function _n(t,e){1&t&&(p.Vb(0,"div",63),p.Tc(1," B\u1ea1n ph\u1ea3i nh\u1eadp h\u1ecd v\xe0 t\xean c\u1ee7a b\u1ea1n. "),p.Ub())}function yn(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," B\u1ea1n ph\u1ea3i nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i. "),p.Ub())}function wn(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i l\xe0 10 s\u1ed1. "),p.Ub())}function Vn(t,e){if(1&t&&(p.Vb(0,"div",63),p.Rc(1,yn,2,0,"div",10),p.Rc(2,wn,2,0,"div",10),p.Ub()),2&t){const t=p.gc(3);p.Db(1),p.nc("ngIf",t.getErrorForm("studentPhone","required")),p.Db(1),p.nc("ngIf",t.getErrorForm("studentPhone","minlength")||t.getErrorForm("studentPhone","maxlength"))}}function Un(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," B\u1ea1n ph\u1ea3i nh\u1eadp m\u1eadt kh\u1ea9u. "),p.Ub())}function Cn(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u bao g\u1ed3m 6 k\xfd t\u1ef1. "),p.Ub())}function Sn(t,e){if(1&t&&(p.Vb(0,"div",63),p.Rc(1,Un,2,0,"div",10),p.Rc(2,Cn,2,0,"div",10),p.Ub()),2&t){const t=p.gc(3);p.Db(1),p.nc("ngIf",t.getErrorForm("passWord","required")),p.Db(1),p.nc("ngIf",t.getErrorForm("passWord","minlength"))}}function kn(t,e){if(1&t&&(p.Vb(0,"div",39),p.Vb(1,"label",54),p.Tc(2),p.hc(3,"mytranslate"),p.Ub(),p.Ub()),2&t){const t=p.gc(3);p.Db(2),p.Vc("*** ",p.ic(3,1,t.statusObj.errorMessage),"")}}function xn(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",55),p.Tc(2,"\xa0"),p.Ub())}function An(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",56),p.Vb(1,"form",57),p.Vb(2,"div",39),p.Qb(3,"input",58),p.Rc(4,_n,2,0,"div",59),p.Ub(),p.Vb(5,"div",39),p.Qb(6,"input",60),p.Rc(7,Vn,3,2,"div",59),p.Ub(),p.Vb(8,"div",39),p.Qb(9,"input",61),p.Rc(10,Sn,3,2,"div",59),p.Ub(),p.Ub(),p.Rc(11,kn,4,3,"div",51),p.Qb(12,"br"),p.Vb(13,"button",62),p.cc("click",function(){p.Ec(t);const e=p.gc(2);return e.formRegister.invalid||e.statusObj.loading||e.registerForStudent()}),p.Rc(14,xn,3,0,"span",10),p.Tc(15," Ho\xe0n Th\xe0nh \u0110\u0103ng K\xfd "),p.Ub(),p.Ub()}if(2&t){const t=p.gc(2);p.Db(1),p.nc("formGroup",t.formRegister),p.Db(3),p.nc("ngIf",t.formRegister.controls.studentFullName.invalid&&(t.formRegister.controls.studentFullName.dirty||t.formRegister.controls.studentFullName.touched)),p.Db(3),p.nc("ngIf",t.formRegister.controls.studentPhone.invalid&&(t.formRegister.controls.studentPhone.dirty||t.formRegister.controls.studentPhone.touched)),p.Db(3),p.nc("ngIf",t.formRegister.controls.passWord.invalid&&(t.formRegister.controls.passWord.dirty||t.formRegister.controls.passWord.touched)),p.Db(1),p.nc("ngIf",t.statusObj.errorMessage),p.Db(2),p.nc("disabled",t.formRegister.invalid||t.statusObj.loading),p.Db(1),p.nc("ngIf",t.statusObj.loading)}}const On=function(t){return[t]},Pn=function(t){return{return_url:t,from:"register"}};function Dn(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div",21),p.Vb(1,"div",22),p.Vb(2,"div",23),p.Vb(3,"a",24),p.cc("click",function(){return p.Ec(t),p.gc().changeRegisterType(1)}),p.Qb(4,"i",25),p.Tc(5,"\xa0 T\xf4i l\xe0 h\u1ecdc sinh"),p.Ub(),p.Ub(),p.Vb(6,"div",23),p.Vb(7,"a",24),p.cc("click",function(){return p.Ec(t),p.gc().changeRegisterType(2)}),p.Qb(8,"i",26),p.Tc(9,"\xa0 T\xf4i l\xe0 gi\xe1o vi\xean"),p.Ub(),p.Ub(),p.Ub(),p.Vb(10,"div",27),p.Vb(11,"div",28),p.Qb(12,"hr"),p.Ub(),p.Ub(),p.Rc(13,vn,53,8,"div",29),p.Rc(14,An,16,7,"div",30),p.Vb(15,"div",31),p.Tc(16,' B\u1eb1ng c\xe1ch \u1ea5n v\xe0o n\xfat "\u0110\u0102NG K\xdd", t\xf4i \u0111\u1ed3ng \xfd v\u1edbi '),p.Vb(17,"a",32),p.Tc(18," \u0110i\u1ec1u Kho\u1ea3n S\u1eed D\u1ee5ng "),p.Ub(),p.Tc(19," v\xe0 "),p.Vb(20,"a",32),p.Tc(21," Ch\xednh S\xe1ch B\u1ea3o M\u1eadt c\u1ee7a AZOTA."),p.Ub(),p.Ub(),p.Vb(22,"div",33),p.Vb(23,"p",34),p.Tc(24,"B\u1ea1n \u0111\xe3 c\xf3 t\xe0i kho\u1ea3n?"),p.Ub(),p.Vb(25,"p"),p.Vb(26,"a",35),p.hc(27,"localize"),p.Tc(28,"\u0110\u0103ng nh\u1eadp"),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc();p.nc("hidden",t.isShowOption),p.Db(3),p.Hb("select-style-active",t.isStudent),p.Db(4),p.Hb("select-style-active",t.isTeacher),p.Db(6),p.nc("ngIf",1==t.isTeacher),p.Db(1),p.nc("ngIf",1==t.isStudent),p.Db(12),p.nc("routerLink",p.tc(11,On,p.ic(27,9,"/auth/login")))("queryParams",p.tc(13,Pn,t.returnUrl))}}const Tn={parse:{dateInput:"LL"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let Mn=(()=>{class t extends m.a{constructor(t,e,n,i,r,s,c){super(i),this.formBuilder=t,this.activeRoute=e,this.titleCasePipe=n,this.commonService=i,this.baseApiService=r,this.recaptchaV3Service=s,this.authService=c,this.form=new o.k({}),this.formRegister=new o.k({}),this.returnUrl="",this.zaloLoginUrl="",this.isHiddenFormRegister=!0,this.isTeacher=!1,this.isStudent=!1,this.yesterday=new Date,this.isShowOption=!0,this.isShowRegisterForStudent=!1,this.isShowRegisterForTeacher=!1,this.initStatusObj()}executeImportantAction(){return new Promise(t=>{this.recaptchaV3Service.execute("importantAction").subscribe(e=>{t(e)})})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}getErrorForm(t,e){var n,i;return!!(null===(n=this.formRegister.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.formRegister.controls[t].errors)||void 0===i?void 0:i[e])}goToConfirm(){var t;this.returnUrl=null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:"";var e="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=confirm_phone_register";this.commonService.myNavigationWithQueryString("/auth/checking_service",e)}changeRegisterType(t){this.isShowOption=!1,1==t?(this.commonService.gaEvent("sign_up_switch_to_student"),this.isTeacher=!1,this.isStudent=!0):(this.commonService.gaEvent("sign_up_switch_to_teacher"),this.isTeacher=!0,this.isStudent=!1)}loginZalo(){this.commonService.gaEvent("sign_up_teacher_by_zalo"),window.location.href=this.zaloLoginUrl}registerForTeacher(){this.form.valid&&this.executeImportantAction().then(t=>{var e=this.commonService.getFormObj(this.form);this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRegisterPost({fullName:e.fullName,phone:e.phone,email:e.email,password:e.password,tokenCaptcha:t}).subscribe(t=>{var e,n;1==t.success?(this.commonService.gaEvent("sign_up_teacher"),this.successStatusObj(),this.baseApiService.redirectLoginByRoleForRegister(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"")):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))})}registerForStudent(){this.executeImportantAction().then(t=>{this.commonService.gaEvent("sign_up_student");var e=this.commonService.getFormObj(this.formRegister);this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRegisterForStudentPost({phone:e.studentPhone,fullName:e.studentFullName,password:e.passWord,tokenCaptcha:t}).subscribe(t=>{var e,n;1==t.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"")):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))})}ngOnInit(){var t;if(this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole())this.baseApiService.redirectLoginByRole("");else{var e=this.commonService.getMyParam(this.activeRoute,"type");if(null!=e){var n=parseInt(null==e?void 0:e.toString(),10);this.changeRegisterType(0==n?0:1)}this.yesterday.setDate(this.yesterday.getDate()-1),this.form=this.formBuilder.group({fullName:["",o.z.required],phone:["",[o.z.required,o.z.pattern("^[0-9]*$"),o.z.minLength(10),o.z.maxLength(10)]],password:["",[o.z.required,o.z.minLength(6)]],email:["",o.z.email]}),this.formRegister=this.formBuilder.group({studentPhone:["",[o.z.required,o.z.pattern("^[0-9]*$"),o.z.minLength(10),o.z.maxLength(10)]],studentFullName:["",o.z.required],passWord:["",[o.z.required,o.z.minLength(6)]]}),null===(t=this.form.get("fullName"))||void 0===t||t.valueChanges.subscribe(t=>{var e=this.titleCasePipe.transform(t);t!=e&&this.form.controls.fullName.setValue(e)}),this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getLocalRouter("/admin/testbank/dashboard"),this.zaloLoginUrl=W.a.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_register=1"),this.commonService.translateMetaData({title:"lang_cms_auth_register_title",description:"lang_cms_auth_register_description",image:"lang_cms_test_image"}),this.stopStatusObj()}super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(o.g),p.Pb(r.a),p.Pb(i.v),p.Pb(f.a),p.Pb(v.a),p.Pb(on.b),p.Pb(_.d))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-register"]],features:[p.Cb([i.v,{provide:b.c,useClass:nn.b,deps:[b.f]},{provide:b.e,useValue:Tn}]),p.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"row","py-5"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],["class","row","style","justify-content: space-around;",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"row",2,"justify-content","space-around"],[1,"col-sm-4","border-card","mb-3",3,"click"],[1,"df-logo"],[1,"fas","fa-graduation-cap","pb-3",2,"font-size","36px"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/teacher.png","width","36px","height","45px",1,"mb-3"],[3,"hidden"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-6","text-center","mb-3"],[1,"clickable","select-style",3,"click"],[1,"fas","fa-graduation-cap"],[1,"fas","fa-user-alt"],[1,"row"],[1,"col-12"],["id","teacher",4,"ngIf"],["id","chilren",4,"ngIf"],[1,"mt-2",2,"text-align","justify","font-size","13px"],["href","/privacy/index.html","target","_blank"],[1,"text-center","mt-3"],[1,"text-normal"],[3,"routerLink","queryParams"],["id","teacher"],[1,"form-horizontal",3,"formGroup"],[1,"col-sm-12"],[1,"form-group"],[1,"col-sm-12","p-0"],[1,"input-group","mb-3"],["type","text","placeholder","H\u1ecd t\xean","formControlName","fullName","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","phone","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","new-password",1,"form-control"],["id","basic-addon2",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password","autocomplete","new-password",1,"form-control"],["id","basic-addon3",1,"input-group-text"],["type","phone","placeholder","Email (kh\xf4ng b\u1eaft bu\u1ed9c nh\u1eadp)","formControlName","email","autocomplete","new-password",1,"form-control"],["class","form-group",4,"ngIf"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],["id","chilren"],["autocomplete","off",1,"form-horinzal",3,"formGroup"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","studentFullName","autocomplete","new-password",1,"form-control"],["class","alert alert-danger mt-3",4,"ngIf"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","studentPhone","autocomplete","new-password",1,"form-control"],["type","password","placeholder","M\u1eadt Kh\u1ea9u","formControlName","passWord","autocomplete","new-password",1,"form-control"],["mat-raised-button","",1,"button-color","text-uppercase",2,"width","100%",3,"disabled","click"],[1,"alert","alert-danger","mt-3"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Qb(2,"div",2),p.Vb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"div",5),p.Vb(6,"h2",6),p.Qb(7,"img",7),p.Ub(),p.Vb(8,"h3",8),p.Tc(9,"N\u1ec1n t\u1ea3ng gi\xe1o d\u1ee5c s\u1ed1"),p.Ub(),p.Ub(),p.Vb(10,"div",9),p.Rc(11,rn,6,3,"div",10),p.Rc(12,sn,11,0,"div",11),p.Rc(13,Dn,29,15,"div",12),p.Ub(),p.Ub(),p.Ub(),p.Qb(14,"div",2),p.Ub(),p.Ub()),2&t&&(p.Db(11),p.nc("ngIf",e.statusObj.loading),p.Db(1),p.nc("ngIf",1==e.isShowOption),p.Db(1),p.nc("ngIf",!e.statusObj.loading))},directives:[i.m,r.k,o.B,o.s,o.l,o.d,o.r,o.j,V.a,S.b],pipes:[k.q,l.d],styles:['.zalo-icon[_ngcontent-%COMP%]{height:40px;margin-right:10px}.select-style[_ngcontent-%COMP%]{color:#868686!important}.select-style[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.select-style[_ngcontent-%COMP%]:hover{color:#0eafc0!important}.select-style-active[_ngcontent-%COMP%]{color:#0eafc0!important}.df-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.register--login[_ngcontent-%COMP%]{width:88px;height:88px}.two-button[_ngcontent-%COMP%]{width:80%;margin:auto}.register-button[_ngcontent-%COMP%], .two-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100vh}.register-button[_ngcontent-%COMP%]{width:100%}.btn-max-width[_ngcontent-%COMP%]{width:100%;padding-top:1.25rem;padding-bottom:1.25rem;font-size:1.5rem}.responsive__text[_ngcontent-%COMP%]{width:90%;margin-left:auto;margin-right:auto}.btn-outline-primary[_ngcontent-%COMP%]{color:#0eafc0!important;border-color:#0eafc0!important}.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#0eafc0!important;background-color:#0eafc0!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b818e!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#0eafc0!important;border-color:#0eafc0!important;background-color:rgba(14,172,190,.15)}.btn-border-fix[_ngcontent-%COMP%]{border-radius:10px!important}.border-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid hsla(0,0%,86.3%,.8);border-radius:8px;cursor:pointer;padding:12px;align-items:center;text-align:center}.border-card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 20px rgba(0,0,0,.07),-10px -10px 20px hsla(0,0%,100%,.8)}.button-color[_ngcontent-%COMP%]{background-color:#0eafc0!important;color:#fff!important}.text-line[_ngcontent-%COMP%]{position:relative;text-align:center}.text-line[_ngcontent-%COMP%]:before{content:"";display:block;width:45%;height:.5px;position:absolute;right:0;background-color:#868686;top:50%}.text-line[_ngcontent-%COMP%]:after{content:"";display:block;width:45%;height:.5px;position:absolute;left:0;background-color:#868686;top:50%}.border-select-box[_ngcontent-%COMP%]{border:1px solid #ccd0d5;border-radius:4px;padding:8px 16px}  .mat-radio-label{margin-bottom:0!important}  .mat-radio-label-content{padding-left:16px!important}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%],   .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#0eafc0!important}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#0eafc0!important}  .mat-input-element{font-size:18px!important;caret-color:#0eafc0!important}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-datepicker-toggle-default-icon[_ngcontent-%COMP%],   .mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon{width:1.5em!important}button[_ngcontent-%COMP%]:disabled{background-color:rgba(0,0,0,.12)!important}@media only screen and (max-width:424px){.btn-max-width[_ngcontent-%COMP%]{font-size:1rem}}@media only screen and (max-width:364px){.text-line[_ngcontent-%COMP%]:after, .text-line[_ngcontent-%COMP%]:before{width:40%}}']}),t})();function Rn(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",12),p.Vb(2,"div",13),p.Vb(3,"span",14),p.Tc(4),p.hc(5,"mytranslate"),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.Vc("",p.ic(5,1,"lang_cms_common_loading"),"..."))}function Qn(t,e){1&t&&(p.Vb(0,"div"),p.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),p.Ub())}function In(t,e){if(1&t&&(p.Vb(0,"div",28),p.Rc(1,Qn,2,0,"div",11),p.Ub()),2&t){const t=p.gc(2);p.Db(1),p.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Ln(t,e){if(1&t&&(p.Vb(0,"div",15),p.Vb(1,"label",29),p.Tc(2),p.hc(3,"mytranslate"),p.Ub(),p.Ub()),2&t){const t=p.gc(2);p.Db(2),p.Vc("*** ",p.ic(3,1,t.statusObj.errorMessage),"")}}function En(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",30),p.Tc(2,"\xa0"),p.Ub())}const Bn=function(t){return[t]};function jn(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div"),p.Vb(1,"div",15),p.Vb(2,"div",16),p.Vb(3,"div",17),p.Qb(4,"input",18),p.Vb(5,"div",19),p.Vb(6,"span",20),p.Vb(7,"mat-icon"),p.Tc(8,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(9,"div",17),p.Qb(10,"input",21),p.Vb(11,"div",19),p.Vb(12,"span",20),p.Vb(13,"mat-icon"),p.Tc(14,"lock"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Rc(15,In,2,1,"div",22),p.Ub(),p.Ub(),p.Rc(16,Ln,4,3,"div",23),p.Vb(17,"div",15),p.Vb(18,"div",16),p.Vb(19,"div",24),p.Vb(20,"button",25),p.cc("click",function(){p.Ec(t);const e=p.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),p.Rc(21,En,3,0,"span",11),p.Tc(22,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(23,"hr"),p.Vb(24,"div",26),p.Vb(25,"a",27),p.hc(26,"localize"),p.Tc(27,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc();p.Db(15),p.nc("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),p.Db(1),p.nc("ngIf",t.statusObj.errorMessage),p.Db(4),p.nc("disabled",t.form.invalid||t.statusObj.loading),p.Db(1),p.nc("ngIf",t.statusObj.loading),p.Db(4),p.nc("routerLink",p.tc(7,Bn,p.ic(26,5,"/auth/login")))}}function zn(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",13),p.Vb(2,"div",14),p.Vb(3,"span",15),p.Tc(4),p.hc(5,"mytranslate"),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.Vc("",p.ic(5,1,"lang_cms_common_loading"),"..."))}function qn(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",21),p.Tc(2,"\xa0"),p.Ub())}function Fn(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div"),p.Vb(1,"div",16),p.Vb(2,"div",17),p.Vb(3,"button",18),p.cc("click",function(){p.Ec(t);const e=p.gc(2);return e.statusObj.loading||e.becomeTeacher()}),p.Rc(4,qn,3,0,"span",12),p.Tc(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 tr\u1edf th\xe0nh gi\xe1o vi\xean "),p.Ub(),p.Ub(),p.Ub(),p.Vb(6,"div",19),p.Vb(7,"a",20),p.cc("click",function(){return p.Ec(t),p.gc(2).goBack()}),p.Tc(8,"Quay l\u1ea1i trang ch\u1ee7"),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc(2);p.Db(3),p.nc("disabled",t.statusObj.loading),p.Db(1),p.nc("ngIf",t.statusObj.loading)}}function Nn(t,e){if(1&t&&(p.Vb(0,"div",5),p.Vb(1,"h2",6),p.Qb(2,"img",7),p.Ub(),p.Vb(3,"div",8),p.Vb(4,"div",9),p.Vb(5,"span",10),p.Tc(6,"T\xf4i mu\u1ed1n th\xe0nh gi\xe1o vi\xean"),p.Ub(),p.Ub(),p.Vb(7,"div",11),p.Rc(8,zn,6,3,"div",12),p.Rc(9,Fn,9,2,"div",12),p.Ub(),p.Ub(),p.Ub()),2&t){const t=p.gc();p.Db(8),p.nc("ngIf",t.statusObj.loading),p.Db(1),p.nc("ngIf",!t.statusObj.loading)}}function Wn(t,e){1&t&&(p.Vb(0,"div"),p.Vb(1,"div",13),p.Vb(2,"div",14),p.Vb(3,"span",15),p.Tc(4),p.hc(5,"mytranslate"),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.Vc("",p.ic(5,1,"lang_cms_common_loading"),"..."))}function Hn(t,e){1&t&&(p.Vb(0,"span"),p.Qb(1,"span",21),p.Tc(2,"\xa0"),p.Ub())}function Gn(t,e){if(1&t){const t=p.Wb();p.Vb(0,"div"),p.Vb(1,"div",16),p.Vb(2,"div",17),p.Vb(3,"button",18),p.cc("click",function(){p.Ec(t);const e=p.gc(2);return e.statusObj.loading||e.becomeStudent()}),p.Rc(4,Hn,3,0,"span",12),p.Tc(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 b\u1ecf quy\u1ec1n gi\xe1o vi\xean "),p.Ub(),p.Ub(),p.Ub(),p.Vb(6,"div",19),p.Vb(7,"a",20),p.cc("click",function(){return p.Ec(t),p.gc(2).goBack()}),p.Tc(8,"Quay l\u1ea1i trang ch\u1ee7"),p.Ub(),p.Ub(),p.Ub()}if(2&t){const t=p.gc(2);p.Db(3),p.nc("disabled",t.statusObj.loading),p.Db(1),p.nc("ngIf",t.statusObj.loading)}}function Yn(t,e){if(1&t&&(p.Vb(0,"div",5),p.Vb(1,"h2",6),p.Qb(2,"img",7),p.Ub(),p.Vb(3,"div",8),p.Vb(4,"div",9),p.Vb(5,"span",10),p.Tc(6,"T\xf4i mu\u1ed1n b\u1ecf quy\u1ec1n gi\xe1o vi\xean"),p.Ub(),p.Ub(),p.Vb(7,"div",11),p.Rc(8,Wn,6,3,"div",12),p.Rc(9,Gn,9,2,"div",12),p.Ub(),p.Ub(),p.Ub()),2&t){const t=p.gc();p.Db(8),p.nc("ngIf",t.statusObj.loading),p.Db(1),p.nc("ngIf",!t.statusObj.loading)}}const Kn=[{path:"",children:[{path:"",children:[{path:"login",component:tn},{path:"login-scan/:role",component:Ge},{path:"register",component:Mn},{path:"register/:type",component:Mn},{path:"logout",component:en},{path:"confirm_forgot_password",component:vt},{path:"forgot_password_susscess",component:de},{path:"confirm_forgot_password_qr",component:Gt},{path:"confirm_forgot_password_old",component:kt},{path:"confirm_account",component:tt},{path:"checking_service",component:j},{path:"set_new_password",component:(()=>{class t extends m.a{constructor(t,e,n,i){super(e),this.formBuilder=t,this.commonService=e,this.baseApiService=n,this.authService=i,this.form=new o.k({})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}changePassword(){if(this.form.valid)if(this.form.value.password!=this.form.value.confirm_password)this.showErrorSnack("X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp");else{this.initStatusObj();var t=this.commonService.getFormObj(this.form),e=this.commonService.getMyQueryParam("token"),n=this.commonService.getMyQueryParam("app_name");this.subscriptions.add(this.authService.apiAuthChangePasswordByFirebasePost({firebaseToken:e,newPassword:t.password,appName:n}).subscribe(t=>{var e;1==t.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(e=t.message)&&void 0!==e?e:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[o.z.required,o.z.minLength(6)]],confirm_password:""}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(o.g),p.Pb(f.a),p.Pb(v.a),p.Pb(_.d))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-confirm-forgot-password"]],features:[p.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","off",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u","formControlName","confirm_password","autocomplete","off",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"form",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Vb(4,"div",4),p.Vb(5,"h2",5),p.Qb(6,"img",6),p.Ub(),p.Vb(7,"div",7),p.Vb(8,"div",8),p.Vb(9,"span",9),p.Tc(10,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),p.Ub(),p.Ub(),p.Vb(11,"div",10),p.Rc(12,Rn,6,3,"div",11),p.Rc(13,jn,28,9,"div",11),p.Ub(),p.Ub(),p.Ub(),p.Qb(14,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(1),p.nc("formGroup",e.form),p.Db(11),p.nc("ngIf",e.statusObj.loading),p.Db(1),p.nc("ngIf",!e.statusObj.loading))},directives:[o.B,o.s,o.l,i.m,o.d,o.r,o.j,V.a,S.b,r.k],pipes:[k.q,l.d],encapsulation:2}),t})()},{path:"change-info",component:B},{path:"switch-teacher-student",component:(()=>{class t extends m.a{constructor(t,e,n){super(n),this.baseApiService=t,this.authService=e,this.commonService=n,this.isTeacher=!1,this.isStudent=!1}goBack(){this.baseApiService.redirectLoginByRole("")}becomeTeacher(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConvertToTeacherGet().subscribe(t=>{var e;1==t.success?this.baseApiService.redirectLoginByRole(""):this.errorStatusObj(null!==(e=t.message)&&void 0!==e?e:"",!0)}))}becomeStudent(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRemoveTeacherRoleGet().subscribe(t=>{var e;1==t.success?this.baseApiService.redirectLoginByRole(this.commonService.getLocalRouter("/student/dashboard/0")):this.errorStatusObj(null!==(e=t.message)&&void 0!==e?e:"",!0)}))}ngOnInit(){this.commonService.translateMetaData({title:"\u0110\u1ed5i Vai Tr\xf2",description:"\u0110\u1ed5i Vai Tr\xf2",image:"lang_cms_test_image"}),this.isTeacher=this.baseApiService.isTeacherRole(),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(v.a),p.Pb(_.d),p.Pb(f.a))},t.\u0275cmp=p.Jb({type:t,selectors:[["app-switch-teacher-student"]],features:[p.Ab],decls:7,vars:2,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Qb(3,"div",3),p.Rc(4,Nn,10,2,"div",4),p.Rc(5,Yn,10,2,"div",4),p.Qb(6,"div",3),p.Ub(),p.Ub(),p.Ub()),2&t&&(p.Db(4),p.nc("ngIf",0==e.isTeacher),p.Db(1),p.nc("ngIf",1==e.isTeacher))},directives:[i.m,S.b],pipes:[k.q],styles:[""]}),t})()},{path:"create-qr-forgot-pass/:role",component:ce}]}]}];let Zn=(()=>{class t{}return t.\u0275mod=p.Nb({type:t}),t.\u0275inj=p.Mb({factory:function(e){return new(e||t)},imports:[[r.l.forChild(Kn)],r.l,l.c]}),t})(),Jn=(()=>{class t{}return t.\u0275mod=p.Nb({type:t}),t.\u0275inj=p.Mb({factory:function(e){return new(e||t)},imports:[[r.l,i.c,o.m,s.b,d.a,o.x,Zn,c.a,a.a]]}),t})()},bWEQ:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return d});var i=n("n1FK"),o=n("fXoL"),r=n("wd/R");const s=n.n(r).a||r,c=new o.s("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function a(t,e){const n=Array(t);for(let i=0;i<t;i++)n[i]=e(i);return n}let d=(()=>{class t extends i.b{constructor(t){super(),this._options=t,this._localeData={firstDayOfWeek:0,longMonths:"",shortMonths:"",dates:"",longDaysOfWeek:"",shortDaysOfWeek:"",narrowDaysOfWeek:""};let e="vi";-1===window.location.href.indexOf("en")&&(e="vi"),s.locale(),this.setLocale(e||s.locale())}setLocale(t){super.setLocale(t);const e=s.localeData(t);this._localeData={firstDayOfWeek:e.firstDayOfWeek(),longMonths:e.months(),shortMonths:e.monthsShort(),dates:a(31,t=>this.createDate(2017,0,t+1).format("D")),longDaysOfWeek:e.weekdays(),shortDaysOfWeek:e.weekdaysShort(),narrowDaysOfWeek:e.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"===t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"===t?this._localeData.longDaysOfWeek:"short"===t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,e,n){if(e<0||e>11)throw Error(`Invalid month index "${e}". Month index has to be between 0 and 11.`);if(n<1)throw Error(`Invalid date "${n}". Date has to be greater than 0.`);const i=this._createMoment({year:t,month:e,date:n}).locale(this.locale);if(!i.isValid())throw Error(`Invalid date "${n}" for month with index "${e}".`);return i}today(){return this._createMoment().locale(this.locale)}parse(t,e){return t&&"string"==typeof t?this._createMoment(t,e,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,e){if(t=this.clone(t),!this.isValid(t))throw Error("MomentDateAdapter: Cannot format invalid date.");return t.format(e)}addCalendarYears(t,e){return this.clone(t).add({years:e})}addCalendarMonths(t,e){return this.clone(t).add({months:e})}addCalendarDays(t,e){return this.clone(t).add({days:e})}toIso8601(t){return this.clone(t).format()}deserialize(t){let e;if(t instanceof Date)e=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;e=this._createMoment(t,s.ISO_8601).locale(this.locale)}return e&&this.isValid(e)?this._createMoment(e).locale(this.locale):super.deserialize(t)}isDateInstance(t){return s.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return s.invalid()}getHour(t){return t.hours()}getMinute(t){return t.minutes()}getSecond(t){return t.seconds()}setHour(t,e){t.hours(e)}setMinute(t,e){t.minutes(e)}setSecond(t,e){t.seconds(e)}_createMoment(t,e,n){const{strict:i,useUtc:o}=this._options||{};return o?s.utc(t,e,n,i):s(t,e,n,i)}}return t.\u0275fac=function(e){return new(e||t)(o.Zb(c,8))},t.\u0275prov=o.Lb({token:t,factory:t.\u0275fac}),t})()}}]);