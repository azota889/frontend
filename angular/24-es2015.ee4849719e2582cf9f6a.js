(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{JZA2:function(t,e,n){"use strict";n.r(e),n.d(e,"AuthModule",function(){return ri});var i=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),s=n("fB2i"),c=n("Zhhu"),a=n("sOeQ"),d=n("vvyD"),l=n("Avyq"),h=n("n1FK"),b=n("FKr1"),g=n("kmnG"),u=n("bWEQ"),m=n("gm2p"),p=n("atsk"),f=n("fXoL"),v=n("oUVn"),_=n("5ete"),y=n("PYj7"),w=n("clS4"),V=n("f4AX"),U=n("NFeN"),C=n("QibW"),S=n("qFsG"),k=n("bTqV"),A=n("iWHX");function x(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",12),f.Vb(2,"div",13),f.Vb(3,"span",14),f.Tc(4),f.hc(5,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.Vc("",f.ic(5,1,"lang_cms_common_loading"),"..."))}function O(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," Email ph\u1ea3i nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng! "),f.Ub())}function P(t,e){if(1&t&&(f.Vb(0,"div",44),f.Rc(1,O,2,0,"div",11),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("email","email"))}}function D(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),f.Ub())}function T(t,e){if(1&t&&(f.Vb(0,"div",44),f.Rc(1,D,2,0,"div",11),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function M(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1! "),f.Ub())}function R(t,e){if(1&t&&(f.Vb(0,"div",44),f.Rc(1,M,2,0,"div",11),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("phone","pattern")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength"))}}function I(t,e){1&t&&(f.Vb(0,"span"),f.Tc(1,"OK"),f.Ub())}function Q(t,e){if(1&t&&(f.Vb(0,"div",15),f.Vb(1,"label",45),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Ub()),2&t){const t=f.gc(2);f.Db(2),f.Vc("*** ",f.ic(3,1,t.statusObj.errorMessage),"")}}function L(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",46),f.Tc(2,"\xa0"),f.Ub())}function E(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",15),f.Vb(2,"div",16),f.Vb(3,"div",17),f.Qb(4,"input",18),f.Vb(5,"div",19),f.Vb(6,"span",20),f.Vb(7,"mat-icon"),f.Tc(8,"account_box"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(9,"div",15),f.Vb(10,"div",16),f.Vb(11,"div",17),f.Qb(12,"input",21),f.Vb(13,"div",19),f.Vb(14,"span",20),f.Vb(15,"mat-icon"),f.Tc(16,"email"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(17,P,2,1,"div",22),f.Ub(),f.Ub(),f.Vb(18,"div",15),f.Vb(19,"div",16),f.Vb(20,"div",17),f.Qb(21,"input",23),f.Vb(22,"div",19),f.Vb(23,"span",20),f.Vb(24,"mat-icon"),f.Tc(25,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(26,T,2,1,"div",22),f.Ub(),f.Ub(),f.Vb(27,"div",15),f.Vb(28,"div",16),f.Vb(29,"div",24),f.Qb(30,"input",25),f.Vb(31,"div",19),f.Vb(32,"span",20),f.Vb(33,"mat-icon"),f.Tc(34,"phone_enabled"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(35,"a",26),f.cc("click",function(){return f.Ec(t),f.gc().goToConfirm()}),f.Tc(36,"Click v\xe0o \u0111\xe2y n\u1ebfu b\u1ea1n mu\u1ed1n \u0111\u1ed5i s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"),f.Ub(),f.Rc(37,R,2,1,"div",22),f.Ub(),f.Ub(),f.Vb(38,"div",15),f.Vb(39,"div",16),f.Vb(40,"div",27),f.Vb(41,"mat-radio-group",28),f.Vb(42,"div",2),f.Vb(43,"div",29),f.Tc(44," Gi\u1edbi t\xednh "),f.Ub(),f.Vb(45,"div",30),f.Vb(46,"mat-radio-button",31),f.Tc(47,"Nam"),f.Ub(),f.Vb(48,"mat-radio-button",32),f.Tc(49,"N\u1eef"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(50,"div",15),f.Vb(51,"div",33),f.Vb(52,"mat-form-field",34),f.Vb(53,"input",35),f.cc("click",function(){return f.Ec(t),f.Ac(58).open()}),f.Ub(),f.Vb(54,"button",36),f.cc("click",function(e){return f.Ec(t),f.Ac(58).open(),e.stopPropagation()}),f.Vb(55,"mat-icon"),f.Tc(56,"today"),f.Ub(),f.Ub(),f.Vb(57,"ngx-mat-datetime-picker",37,38),f.Rc(59,I,2,0,"ng-template"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(60,Q,4,3,"div",39),f.Vb(61,"div",15),f.Vb(62,"div",40),f.Vb(63,"button",41),f.cc("click",function(){f.Ec(t);const e=f.gc();return e.form.invalid||e.statusObj.loading||e.changeInfo()}),f.Rc(64,L,3,0,"span",11),f.Tc(65,"C\u1eadp nh\u1eadt "),f.Ub(),f.Ub(),f.Ub(),f.Vb(66,"div",42),f.Vb(67,"a",43),f.cc("click",function(){return f.Ec(t),f.gc().goBack()}),f.Tc(68,"Quay l\u1ea1i trang ch\u1ee7"),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.Ac(58),e=f.gc();f.Db(17),f.nc("ngIf",e.form.controls.email.invalid&&e.form.controls.email.dirty),f.Db(9),f.nc("ngIf",e.form.controls.password.invalid&&(e.form.controls.password.dirty||e.form.controls.password.touched)),f.Db(4),f.Eb("disabled",!0),f.Db(7),f.nc("ngIf",e.form.controls.phone.invalid&&(e.form.controls.phone.dirty||e.form.controls.phone.touched)),f.Db(16),f.nc("ngxMatDatetimePicker",t),f.Db(4),f.nc("hideTime",!0),f.Db(3),f.nc("ngIf",e.statusObj.errorMessage),f.Db(3),f.nc("disabled",e.form.invalid||e.statusObj.loading),f.Db(1),f.nc("ngIf",e.statusObj.loading)}}const B={parse:{dateInput:"l, LTS"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let j=(()=>{class t extends m.a{constructor(t,e,n,i,r,s,c){super(e),this.formBuilder=t,this.commonService=e,this.baseApiService=n,this.authService=i,this.redirectService=r,this.userService=s,this.datepipe=c,this.form=new o.k({}),this.startDate=new Date(1990,1,1),this.gender=0,this.prevData="",this.returnUrl=""}getErrorType(t,e){var n,i,o,r,s,c;return!!(null===(o=null===(i=null===(n=this.form.controls)||void 0===n?void 0:n[t])||void 0===i?void 0:i.errors)||void 0===o?void 0:o[e])&&(null===(c=null===(s=null===(r=this.form.controls)||void 0===r?void 0:r[t])||void 0===s?void 0:s.errors)||void 0===c?void 0:c[e])}goToConfirm(){this.returnUrl="/auth/change-info";var t="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=change_phone";this.commonService.myNavigationWithQueryString("/auth/checking_service",t)}allowChangePhone(){var t=this.baseApiService.getUserObj(),e=t.zaloId?t.zaloId:"";return""!=e&&e==(t.phone?t.phone:"")}changeInfo(){var t;if(this.form.valid){var e=this.commonService.getFormObj(this.form),n=e.birthday?new Date(Date.parse(e.birthday)):this.startDate,i={fullName:e.fullName,birthday:null!==(t=this.datepipe.transform(n,"yyyy-MM-ddTHH:mm:ss"))&&void 0!==t?t:"",email:e.email,gender:e.gender,password:e.password};this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthUpdateInfoPost(i).subscribe(t=>{1==t.success?this.successStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!",!0):this.errorStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin kh\xf4ng th\xe0nh c\xf4ng!",!0)}))}}goBack(){this.baseApiService.redirectLoginByRole("")}getInfo(){var t,e=this.baseApiService.getUserObj(),n=e.birthday?new Date(e.birthday):new Date(1990,1,1);this.startDate=n,this.gender=null!==(t=e.gender)&&void 0!==t?t:0,this.form.patchValue({fullName:this.userService.isAnonymousName(e)?"":e.fullName,email:e.email?e.email:"",phone:e.phone?e.phone:"",gender:1!=this.gender?"0":"1"}),this.form.controls.birthday.setValue(n)}ngOnInit(){this.form=this.formBuilder.group({fullName:new o.h("",[o.A.required,p.a.noWhiteSpace]),email:new o.h("",o.A.email),phone:new o.h("",[o.A.pattern("^[0-9]*$")]),gender:new o.h(""),birthday:new o.h(""),password:new o.h("",[o.A.minLength(6)])}),this.baseApiService.isAnonymousRole()?this.redirectService.redirectSimpleRegister():(this.getInfo(),this.form.valueChanges.subscribe(t=>{let e=JSON.stringify(t);e!=this.prevData&&(this.prevData=e,this.form.patchValue(t))}),this.commonService.translateMetaData({title:"lang_cms_auth_change_info_title",description:"lang_cms_auth_change_info_description",image:"lang_cms_test_image"}),super.ngOnInit())}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(o.g),f.Pb(v.a),f.Pb(_.a),f.Pb(y.g),f.Pb(w.a),f.Pb(V.a),f.Pb(i.e))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-change-info"]],features:[f.Cb([i.e,{provide:h.b,useClass:u.a,deps:[b.f,u.b]},{provide:h.a,useValue:B},{provide:g.b,useValue:{floatLabel:"never"}}]),f.Ab],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","fullName",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","text","placeholder","Email","formControlName","email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group","mb-1"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"clickable","text-info",2,"font-size","13px","padding-left","5px",3,"click"],[1,"input-group","input-custom"],["formControlName","gender","color","primary",2,"width","100%"],[1,"col-5"],[1,"col-7"],["value","1",1,"col-6","p-0"],["value","0"],[1,"col-sm-12","studentBirthDay"],["id","birthday",1,"myTimePicker",2,"border","1px solid #ced4da","border-radius","3px","padding-top","2px"],["matInput","","placeholder","Ng\xe0y sinh","formControlName","birthday","readonly","",1,"form-birthday","bg-white",3,"ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",3,"click"],[3,"hideTime"],["birthDay",""],["class","form-group",4,"ngIf"],[1,"col-sm-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"form",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"h2",5),f.Qb(6,"img",6),f.hc(7,"convertCdn"),f.Ub(),f.Vb(8,"div",7),f.Vb(9,"div",8),f.Vb(10,"span",9),f.Tc(11,"S\u1eeda th\xf4ng tin t\xe0i kho\u1ea3n"),f.Ub(),f.Ub(),f.Vb(12,"div",10),f.Rc(13,x,6,3,"div",11),f.Rc(14,E,69,9,"div",11),f.Ub(),f.Ub(),f.Ub(),f.Qb(15,"div",3),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(1),f.nc("formGroup",e.form),f.Db(5),f.nc("src",f.ic(7,4,"azota_assets/images/logo.svg"),f.Ic),f.Db(7),f.nc("ngIf",e.statusObj.loading),f.Db(1),f.nc("ngIf",!e.statusObj.loading))},directives:[o.C,o.t,o.l,i.m,o.d,o.s,o.j,U.a,C.b,C.a,g.d,S.b,h.c,k.b,g.h,h.d],pipes:[A.f,A.v],styles:[".mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em;font-weight:400;color:rgba(0,0,0,.54);font-size:16px}.form-birthday[_ngcontent-%COMP%]{display:block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}#birthday[_ngcontent-%COMP%]:active, #birthday[_ngcontent-%COMP%]:focus, #birthday[_ngcontent-%COMP%]:focus-visible, #birthday[_ngcontent-%COMP%]:focus-within, #birthday[_ngcontent-%COMP%]:target, #birthday[_ngcontent-%COMP%]:visited{background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.hover-cancel[_ngcontent-%COMP%]:hover{background-color:#ebe9e9}.input-custom[_ngcontent-%COMP%]{border:1px solid #e2e2e2;border-radius:3px;padding-left:12px;padding-top:10px}"]}),t})(),q=(()=>{class t extends m.a{constructor(t,e,n){super(t),this.commonService=t,this.baseApiService=e,this.authService=n}get returnUrl(){var t;return null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""}get confirm_type(){var t;return null!==(t=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==t?t:""}ngOnInit(){this.authService.apiAuthGetFirebaseConfigGet().subscribe(t=>{var e;if(1==t.success){let n=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.app);window.location.href=n.toString()}else this.commonService.snackError("C\xf3 l\u1ed7i khi ki\u1ec3m tra d\u1ecbch v\u1ee5","")})}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(v.a),f.Pb(_.a),f.Pb(y.g))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-checking-service"]],features:[f.Ab],decls:3,vars:0,consts:[[1,"mt-5","text-center"],["role","status",1,"spinner-border","spinner-border-md",2,"color","#2361ae"]],template:function(t,e){1&t&&(f.Vb(0,"h2",0),f.Qb(1,"span",1),f.Tc(2,"\xa0 \u0110ang ki\u1ec3m tra d\u1ecbch v\u1ee5..."),f.Ub())},encapsulation:2}),t})();var F=n("Jgta"),z=n("6nsN"),N=n("quSY");let W=(()=>{class t{get windowRef(){return window}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=f.Lb({token:t,factory:t.\u0275fac}),t})();var H=n("AytR"),G=n("AkFM");const Y=["verifyCode"];function Z(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 10 k\xfd t\u1ef1! "),f.Ub())}function K(t,e){if(1&t&&(f.Vb(0,"div",34),f.Rc(1,Z,2,0,"div",31),f.Ub()),2&t){const t=f.gc();f.Db(1),f.nc("ngIf",t.getErrorType("phone","required")||t.getErrorType("phone","minlength"))}}function J(t,e){if(1&t&&(f.Vb(0,"div",13),f.Vb(1,"label",35),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(2),f.Vc("*** ",f.ic(3,1,t.statusObj.errorMessage),"")}}function $(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",36),f.Tc(1," Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c m\xe3 x\xe1c th\u1ef1c? "),f.Vb(2,"b",21),f.cc("click",function(){return f.Ec(t),f.gc().resendCode()}),f.Tc(3,"G\u1eedi l\u1ea1i!"),f.Ub(),f.Ub()}}function X(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",37),f.Tc(2,"\xa0"),f.Ub())}const tt=function(t){return{"margin-left":t}};let et=(()=>{class t extends m.a{constructor(t,e,n,i,r,s,c){super(e),this.formBuilder=t,this.commonService=e,this.window=n,this.baseApiService=i,this.authService=r,this.redirectService=s,this.browserStorageService=c,this.subscriptions=new N.a,this.form=new o.k({}),this.confirm_type="forgot_password",this.isVerifying=!1,this.smsSent=!1,this.timeOut=60,this.captchaWidgetId="",this.isLoading=!0}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}get firebaseApp(){var t;return null!==(t=this.commonService.getMyQueryParam("app_name"))&&void 0!==t?t:""}get returnUrl(){var t;return null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""}getConfirmType(){var t;return null!==(t=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==t?t:""}skipVerifyPhone(){var t=Math.round((new Date).getTime()/1e3);this.browserStorageService.saveSimpleStorage("skip_verify_phone",t.toString()),this.baseApiService.redirectLoginByRole("");let e=this.getConfirmType();this.commonService.myNavigation("confirm_phone_register"==e?"/admin/student/manage-class/0":"/admin/testbank/dashboard")}handleConfirmUsage(){const t=this.form.value.phone;let e=this.getConfirmType();if(""!=t)switch(e){case"forgot_password":this.commonService.gaEvent("confirm_event_forgot_password"),this.authService.apiAuthCheckPhoneExistsGet(t).subscribe(e=>{1==e.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())});break;case"change_phone":this.commonService.gaEvent("confirm_event_change_phone"),this.authService.apiAuthCheckPhoneExistsGet(t).subscribe(e=>{1!=e.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())});break;default:this.commonService.gaEvent("confirm_event_confirm_phone"),this.authService.apiAuthCheckUpdatePhoneExistsGet(t).subscribe(e=>{1!=e.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())})}else this.commonService.snackError("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!",""),this.reRenderCaptcha()}sendLoginCode(t){const e=this.windowRef.recaptchaVerifier,n=Object(z.b)();Object(z.d)(n,t,e).then(t=>{this.windowRef.confirmationResult=t,this.smsSent=!0,this.timeOut=60,this.countDownTime()}).catch(t=>{console.log(t),"auth/quota-exceeded"==t.code?this.authService.apiAuthFirebaseOverQuotaGet(this.firebaseApp).subscribe(t=>{1==t.success?this.authService.apiAuthGetFirebaseConfigGet().subscribe(t=>{var e,n,i,o,r;if(1==t.success)if((null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.app)!==this.firebaseApp){var s=this.commonService.getMyQueryParam("interval_app");if(s&&s!=(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.app)){s=s||(null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.app)&&void 0!==o?o:"");let e=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.app)+"&interval_app="+s;window.location.href=e.toString()}else this.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","")}else this.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","");else this.commonService.snackError("Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c th\xf4ng tin FirebaseApp","")}):this.commonService.snackError("Kh\xf4ng \u0111\xe1nh d\u1ea5u \u0111\u01b0\u1ee3c firebase h\u1ebft quoata","")}):(this.commonService.gaEvent("confirm_event_error_send_code"),this.smsSent=!1,this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+t.code))})}verify_code(t){this.windowRef.confirmationResult?(this.isVerifying=!0,this.windowRef.confirmationResult.confirm(t).then(t=>{this.isVerifying=!1;const e=t.user;let n=this.getConfirmType();switch(n){case"forgot_password":this.commonService.myNavigationWithQueryString("/auth/set_new_password","?app_name="+this.firebaseApp+"&token="+encodeURIComponent(e.accessToken));break;default:this.authService.apiAuthUpdatePhoneOrPasswordByFirebasePost({firebaseToken:e.accessToken,password:"",appName:this.firebaseApp}).subscribe(t=>{1==t.success?(this.showSuccessSnack("C\u1eadp nh\u1eadt s\u1ed1 \u0111i\u1ec7n tho\u1ea1i th\xe0nh c\xf4ng!"),"confirm_phone_register"==n?this.commonService.myNavigation("/admin/student/manage-class/0"):this.baseApiService.redirectLoginByRole("")):this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+t.message)})}}).catch(t=>{console.log(t),this.isVerifying=!1,this.commonService.gaEvent("confirm_event_error_verify_code"),this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+t.code)})):(this.isVerifying=!1,this.showErrorSnack("M\xe3 x\xe1c th\u1ef1c kh\xf4ng \u0111\xfang, vui l\xf2ng ki\u1ec3m tra l\u1ea1i"))}resendCode(){var t;this.reRenderCaptcha(),null===(t=document.getElementById("recaptcha-container"))||void 0===t||t.click()}countDownTime(){this.myCountDown=window.setInterval(()=>{this.timeOut>0&&this.timeOut--},1e3)}initForm(){this.form=this.formBuilder.group({phone:["",[o.A.required,o.A.minLength(10)]]})}handleClickLogout(){"forgot_password"==this.confirm_type||"change_phone"==this.confirm_type?this.baseApiService.redirectLoginByRole(""):(this.baseApiService.logout(),this.redirectService.redirectSimpleLogin())}reRenderCaptcha(){this.windowRef.recaptchaVerifier.reset(this.windowRef.recaptchaWidgetId)}handleEnterVerify(t,e){"Enter"==t.key&&(this.commonService.gaEvent("confirm_event_verify_code_by_press_enter"),this.verify_code(e))}ngOnInit(){this.initForm(),Object(F.a)(H.a["firebaseConfig_"+this.firebaseApp]),Object(z.b)().useDeviceLanguage();let t=this.getConfirmType();switch(this.confirm_type=this.getConfirmType(),"forgot_password"!=t&&this.authService.apiAuthInfoGet().subscribe(e=>{var n,i,o,r;1==e.success?1==(null===(n=null==e?void 0:e.new_user)||void 0===n?void 0:n.isVerifyPhone)?"change_phone"!=t&&this.baseApiService.redirectLoginByRole(""):(null===(i=null==e?void 0:e.new_user)||void 0===i?void 0:i.phone)&&(null===(o=null==e?void 0:e.new_user)||void 0===o?void 0:o.phone.length)<=10?this.form.setValue({phone:null===(r=null==e?void 0:e.new_user)||void 0===r?void 0:r.phone}):(this.form.setValue({phone:""}),console.log("enter phone plz")):this.showErrorSnack(e.message?"C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+e.message:"")}),t){case"forgot_password":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"});break;case"change_phone":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_change_phone_title",description:"lang_cms_auth_confirm_change_phone_description",image:"lang_cms_test_image"});break;default:this.commonService.translateMetaData({title:"lang_cms_auth_confirm_confirm_phone_title",description:"lang_cms_auth_confirm_confirm_phone_description",image:"lang_cms_test_image"})}super.ngOnInit()}ngAfterViewInit(){this.countDownTime(),this.windowRef=this.window.windowRef;const t=Object(z.b)();if(this.windowRef.recaptchaVerifier=new z.a("recaptcha-container",{size:"invisible",callback:()=>{this.handleConfirmUsage()}},t),this.windowRef.recaptchaVerifier.render().then(t=>{this.windowRef.recaptchaWidgetId=t}),this.verifyCode&&""!=this.verifyCode.nativeElement.value){let t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.addEventListener("keyup",e=>this.handleEnterVerify(e,t))}}ngOnDestroy(){if(clearInterval(this.myCountDown),this.verifyCode){let t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.removeEventListener("keyup",e=>this.handleEnterVerify(e,t))}super.ngDestroy()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(o.g),f.Pb(v.a),f.Pb(W),f.Pb(_.a),f.Pb(y.g),f.Pb(w.a),f.Pb(G.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-confirm-account"]],viewQuery:function(t,e){if(1&t&&f.cd(Y,!0),2&t){let t;f.zc(t=f.dc())&&(e.verifyCode=t.first)}},features:[f.Cb([W]),f.Ab],decls:51,vars:16,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"card-body"],["id","verify_wrap"],["id","enter_phone_area",3,"ngStyle"],["id","enter_phone_wrap"],[1,"form-horizontal",3,"formGroup"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["id","phoneInput","type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","off",1,"form-control"],["phoneInput",""],["class","alert alert-danger",4,"ngIf"],["id","recaptcha-container","color","primary","mat-raised-button",""],[1,"mt-3","text-center"],[1,"clickable",3,"click"],["class","form-group",4,"ngIf"],["id","verify_area",1,"form-group"],[1,"sms-info"],[2,"text-align","right","font-size","12px","margin-bottom","3px"],["class","mb-2 mt-2 resend-code",4,"ngIf"],["type","string","placeholder","M\xe3 x\xe1c th\u1ef1c","autocomplete","off",1,"form-control"],["verifyCode",""],[1,"input-group-append","ml-1"],["id","buttonVerify","mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[1,"text-center","mt-3"],[1,"text-normal","clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],[1,"mb-2","mt-2","resend-code"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",0),f.Vb(1,"div",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"h2",5),f.Qb(6,"img",6),f.hc(7,"convertCdn"),f.Ub(),f.Vb(8,"div",7),f.Vb(9,"div",8),f.Vb(10,"h2"),f.Tc(11),f.Ub(),f.Vb(12,"div"),f.Vb(13,"div",9),f.Vb(14,"div",10),f.Vb(15,"div",11),f.Vb(16,"form",12),f.Vb(17,"div",13),f.Vb(18,"div",14),f.Vb(19,"div",15),f.Qb(20,"input",16,17),f.Ub(),f.Rc(22,K,2,1,"div",18),f.Vb(23,"button",19),f.Tc(24,"Ti\u1ebfp t\u1ee5c"),f.Ub(),f.Vb(25,"div",20),f.Vb(26,"a",21),f.cc("click",function(){return e.skipVerifyPhone()}),f.Tc(27,"B\u1ecf qua"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(28,J,4,3,"div",22),f.Ub(),f.Ub(),f.Vb(29,"div",23),f.Vb(30,"div",14),f.Vb(31,"div",24),f.Tc(32," M\u1ed9t tin nh\u1eafn ch\u1ee9a m\xe3 x\xe1c th\u1ef1c v\u1eeba \u0111\u01b0\u1ee3c g\u1eedi t\u1edbi s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),f.Vb(33,"b"),f.Tc(34),f.Ub(),f.Tc(35,". Vui l\xf2ng nh\u1eadp m\xe3 n\xe0y v\xe0o \xf4 d\u01b0\u1edbi \u0111\xe2y r\u1ed3i \u1ea5n x\xe1c th\u1ef1c "),f.Ub(),f.Vb(36,"div",25),f.Tc(37),f.Ub(),f.Rc(38,$,4,0,"div",26),f.Vb(39,"div",15),f.Qb(40,"input",27,28),f.Vb(42,"div",29),f.Vb(43,"button",30),f.cc("click",function(){f.Ec(t);const n=f.Ac(41);return e.verify_code(n.value)}),f.Rc(44,X,3,0,"span",31),f.Tc(45,"X\xe1c th\u1ef1c "),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(46,"hr"),f.Vb(47,"div",32),f.Vb(48,"a",33),f.cc("click",function(){return e.handleClickLogout()}),f.Tc(49),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(50,"div",3),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.Ac(41);f.Db(6),f.nc("src",f.ic(7,12,"azota_assets/images/logo.svg"),f.Ic),f.Db(5),f.Uc("change_phone"==e.confirm_type?"Nh\u1eadp v\xe0o s\u1ed1 \u0111i\u1ec7n tho\u1ea1i m\u1edbi":"X\xe1c th\u1ef1c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n"),f.Db(3),f.nc("ngStyle",f.tc(14,tt,e.smsSent?"-100%":"0")),f.Db(2),f.nc("formGroup",e.form),f.Db(6),f.nc("ngIf",e.form.controls.phone.invalid&&(e.form.controls.phone.dirty||e.form.controls.phone.touched)),f.Db(6),f.nc("ngIf",e.statusObj.errorMessage),f.Db(6),f.Uc(e.form.value.phone),f.Db(3),f.Vc("",e.timeOut," s"),f.Db(1),f.nc("ngIf",0==e.timeOut),f.Db(5),f.nc("disabled",""==t.value||e.isVerifying),f.Db(1),f.nc("ngIf",e.statusObj.loading),f.Db(5),f.Uc("forgot_password"==e.confirm_type?"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n":"change_phone"==e.confirm_type?"Quay l\u1ea1i m\xe0n h\xecnh ch\xednh":"\u0110\u0103ng xu\u1ea5t")}},directives:[i.n,o.C,o.t,o.l,o.d,o.s,o.j,i.m,k.b],pipes:[A.f,A.v],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}"]}),t})();function nt(t,e){if(1&t&&(f.Vb(0,"div",13),f.Vb(1,"div",14),f.Vb(2,"div",15),f.Qb(3,"div",16),f.Qb(4,"div",16),f.Qb(5,"div",16),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(3),f.nc("ngClass",1==t.step_by_step?"active":t.step_by_step>1?"active pro":""),f.Db(1),f.nc("ngClass",2==t.step_by_step?"active":t.step_by_step>2?"active pro":""),f.Db(1),f.nc("ngClass",3==t.step_by_step?"active":t.step_by_step>3?"active pro":"")}}function it(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",17),f.Vb(2,"div",18),f.Vb(3,"span",19),f.Tc(4),f.hc(5,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.Vc("",f.ic(5,1,"lang_cms_common_loading"),"..."))}function ot(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng! "),f.Ub())}function rt(t,e){if(1&t&&(f.Vb(0,"div",41),f.Rc(1,ot,2,0,"div",12),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("phone","required"))}}function st(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),f.Ub())}function ct(t,e){if(1&t&&(f.Vb(0,"div",41),f.Rc(1,st,2,0,"div",12),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function at(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),f.Ub())}function dt(t,e){if(1&t&&(f.Vb(0,"div",41),f.Rc(1,at,2,0,"div",12),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("repassword","confirm_pass"))}}function lt(t,e){if(1&t&&(f.Vb(0,"div",20),f.Vb(1,"label",42),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Ub()),2&t){const t=f.gc(2);f.Db(2),f.Vc("*** ",f.ic(3,1,t.statusObj.errorMessage),"")}}function ht(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",43),f.Tc(2,"\xa0"),f.Ub())}const bt=function(t){return[t]},gt=function(){return{user_click:"true"}};function ut(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",20),f.Vb(2,"div",21),f.Vb(3,"div",22),f.Qb(4,"input",23),f.Vb(5,"div",24),f.Vb(6,"span",25),f.Vb(7,"mat-icon"),f.Tc(8,"phone"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(9,rt,2,1,"div",26),f.Ub(),f.Ub(),f.Vb(10,"div",20),f.Vb(11,"div",21),f.Vb(12,"div",22),f.Qb(13,"input",27),f.Vb(14,"div",24),f.Vb(15,"span",25),f.Vb(16,"mat-icon"),f.Tc(17,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(18,ct,2,1,"div",26),f.Ub(),f.Ub(),f.Vb(19,"div",20),f.Vb(20,"div",21),f.Vb(21,"div",22),f.Qb(22,"input",28),f.Vb(23,"div",24),f.Vb(24,"span",25),f.Vb(25,"mat-icon"),f.Tc(26,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(27,dt,2,1,"div",26),f.Ub(),f.Ub(),f.Rc(28,lt,4,3,"div",29),f.Vb(29,"div",20),f.Vb(30,"div",21),f.Vb(31,"div",30),f.Vb(32,"button",31),f.cc("click",function(){f.Ec(t);const e=f.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),f.Rc(33,ht,3,0,"span",12),f.Tc(34,"Ti\u1ebfp t\u1ee5c "),f.Ub(),f.Vb(35,"div",32),f.Vb(36,"span",33),f.Tc(37,"Ho\u1eb7c"),f.Ub(),f.Ub(),f.Vb(38,"div",5),f.Vb(39,"a",34),f.hc(40,"localize"),f.Vb(41,"span",35),f.Vb(42,"mat-icon",36),f.Tc(43,"center_focus_strong"),f.Ub(),f.Tc(44," S\u1eed d\u1ee5ng m\xe3 QR qu\xean m\u1eadt kh\u1ea9u"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(45,"hr"),f.Vb(46,"div",37),f.Vb(47,"div",38),f.Vb(48,"a",39),f.Tc(49,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),f.Ub(),f.Ub(),f.Vb(50,"div"),f.Vb(51,"a",40),f.hc(52,"localize"),f.Tc(53,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc();f.Db(9),f.nc("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched)),f.Db(9),f.nc("ngIf",t.form.controls.password.invalid&&t.form.controls.password.dirty),f.Db(9),f.nc("ngIf",t.getErrorType("repassword","confirm_pass")&&t.form.controls.repassword.touched),f.Db(1),f.nc("ngIf",t.statusObj.errorMessage),f.Db(4),f.nc("disabled",t.form.invalid||t.statusObj.loading||0!=t.getErrorType("repassword","confirm_pass")),f.Db(1),f.nc("ngIf",t.statusObj.loading),f.Db(6),f.nc("routerLink",f.tc(13,bt,f.ic(40,9,"/auth/confirm_forgot_password_qr"))),f.Db(12),f.nc("routerLink",f.tc(15,bt,f.ic(52,11,"/auth/login")))("queryParams",f.sc(17,gt))}}function mt(t,e){if(1&t&&(f.Vb(0,"div",47),f.Vb(1,"a"),f.Tc(2,"( Click v\xe0o \u0111\xe2y \u0111\u1ec3 g\u1eedi ngay )"),f.Ub(),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.Eb("href","sms:"+t.phone_send+"?body=MK "+t.response_change_pass.otp,f.Ic)}}function pt(t,e){if(1&t){const t=f.Wb();f.Vb(0,"button",50),f.cc("click",function(){return f.Ec(t),f.gc(2).changeStepByNext()}),f.Tc(1," Ti\u1ebfp t\u1ee5c "),f.Ub()}}function ft(t,e){if(1&t&&(f.Vb(0,"div",51),f.Vb(1,"div",52),f.Qb(2,"span",43),f.Ub(),f.Vb(3,"div",53),f.Tc(4),f.Ub(),f.Ub()),2&t){const t=f.gc(2);f.Db(4),f.Uc(t.currentMessage)}}function vt(t,e){if(1&t&&(f.Vb(0,"div"),f.Vb(1,"div",21),f.Vb(2,"div",44),f.Tc(3," Th\xf4ng tin m\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c ghi nh\u1eadn. \u0110\u1ec3 k\xedch ho\u1ea1t m\u1eadt kh\u1ea9u v\u1eeba t\u1ea1o vui l\xf2ng s\u1eed d\u1ee5ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),f.Vb(4,"strong"),f.Tc(5),f.Ub(),f.Tc(6," v\xe0 so\u1ea1n tin nh\u1eafn: "),f.Ub(),f.Vb(7,"div",45),f.Vb(8,"strong"),f.Tc(9),f.Ub(),f.Tc(10," g\u1eedi "),f.Vb(11,"strong"),f.Tc(12),f.Ub(),f.Ub(),f.Rc(13,mt,3,1,"div",46),f.Vb(14,"div",47),f.Tc(15,' "C\u01b0\u1edbc ph\xed tin nh\u1eafn \u0111\u01b0\u1ee3c t\xednh theo gi\xe1 c\u01b0\u1edbc ph\xed th\xf4ng th\u01b0\u1eddng c\u1ee7a nh\xe0 m\u1ea1ng" '),f.Ub(),f.Vb(16,"div",47),f.Tc(17," Sau khi g\u1eedi tin nh\u1eafn vui l\xf2ng b\u1ea5m n\xfat b\xean d\u01b0\u1edbi \u0111\u1ec3 ti\u1ebfp t\u1ee5c "),f.Ub(),f.Vb(18,"div",22),f.Rc(19,pt,2,0,"button",48),f.Rc(20,ft,5,1,"div",49),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(5),f.Uc(t.data_change_pass.phone),f.Db(4),f.Vc("MK ",t.response_change_pass.otp,""),f.Db(3),f.Uc(t.phone_send),f.Db(1),f.nc("ngIf",t.is_mobile),f.Db(6),f.nc("ngIf",2==t.step_by_step),f.Db(1),f.nc("ngIf",3==t.step_by_step)}}function _t(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",21),f.Vb(2,"div",44),f.Tc(3," M\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t th\xe0nh c\xf4ng. "),f.Ub(),f.Vb(4,"div",37),f.Vb(5,"div",38),f.Vb(6,"a",54),f.hc(7,"localize"),f.Tc(8,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),f.Ub(),f.Ub(),f.Vb(9,"div"),f.Vb(10,"a",55),f.Tc(11,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(6),f.nc("routerLink",f.tc(4,bt,f.ic(7,2,"/auth/login")))("queryParams",f.sc(6,gt)))}let yt=(()=>{class t extends m.a{constructor(t,e,n){super(e),this.formBuilder=t,this.commonService=e,this.smsService=n,this.form=new o.k({}),this.step_by_step=1,this.currentMessage="",this.phone_send="",this.is_mobile=/Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.is_mobile_ios=/webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),this.response_change_pass={},this.data_change_pass={}}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return"repassword"===t&&"confirm_pass"===e?this.form.controls.repassword.value!=this.form.controls.password.value:!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}randomPhone(t){if(t.includes(",")){let e=t.split(",");return e[this.commonService.getRandomNumber(0,e.length-1)]}return t}changePassword(){if(this.form.valid){this.initStatusObj();var t=this.commonService.getFormObj(this.form),e={phone:t.phone,password:t.password};this.smsService.apiSmsChangePassPost(e).subscribe(t=>{var n,i;1==t.success?(this.successStatusObj(),this.step_by_step=2,this.response_change_pass=null!==(n=t.data)&&void 0!==n?n:{},this.data_change_pass=e):this.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"")})}}getPhone(){this.initStatusObj(),this.smsService.apiSmsGetPhoneGet().subscribe(t=>{var e,n,i;1==t.success?(this.successStatusObj(),this.phone_send=this.randomPhone(null!==(n=null===(e=t.data)||void 0===e?void 0:e.phone)&&void 0!==n?n:"")):this.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"",!0)})}changeStepByNext(){this.initStatusObj(),this.currentMessage="\u0110ang x\u1eed l\xfd d\u1eef li\u1ec7u",this.step_by_step=3,this.loop_check=window.setInterval(()=>{this.smsService.apiSmsCheckStatusGet(this.data_change_pass.phone).subscribe(t=>{var e,n;1==t.success?(this.successStatusObj(),1==(null===(e=t.data)||void 0===e?void 0:e.status)&&(this.step_by_step=4,clearInterval(this.loop_check))):(this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:""),this.currentMessage="H\u1ec7 th\u1ed1ng t\u1ea1m th\u1eddi kh\xf4ng th\u1ec3 x\u1eed l\xfd, vui l\xf2ng th\u1eed l\u1ea1i sau.",clearInterval(this.loop_check))})},1e3)}ngOnInit(){this.form=this.formBuilder.group({phone:["",[o.A.required]],password:["",[o.A.required,o.A.minLength(6)]],repassword:["",[o.A.required,o.A.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.getPhone(),super.ngOnInit()}ngOnDestroy(){this.loop_check&&clearInterval(this.loop_check),super.ngDestroy()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(o.g),f.Pb(v.a),f.Pb(y.fb))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-confirm-forgot-password"]],features:[f.Ab],decls:18,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["class","row m-0",4,"ngIf"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"row","m-0"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","new-phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[1,"text-center","mt-2"],[1,"text-mute"],[1,"btn","btn-outline-primary","mt-2","w-100",3,"routerLink"],[1,"link-center"],[1,"mr-1"],[1,"text-center","mt-3"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sms-info"],[2,"text-align","right","font-size","15px","margin","10px 0","text-align","center"],["class","sms-info text-center mb-3",4,"ngIf"],[1,"sms-info","text-center","mb-3"],["class","btn btn-block","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"click"],[1,"loading"],[1,"icon"],[1,"text"],[3,"routerLink","queryParams"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank",1,"text-normal"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"form",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"h2",5),f.Qb(6,"img",6),f.Ub(),f.Rc(7,nt,6,3,"div",7),f.Vb(8,"div",8),f.Vb(9,"div",9),f.Vb(10,"span",10),f.Tc(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),f.Ub(),f.Ub(),f.Vb(12,"div",11),f.Rc(13,it,6,3,"div",12),f.Rc(14,ut,54,18,"div",12),f.Rc(15,vt,21,6,"div",12),f.Rc(16,_t,12,7,"div",12),f.Ub(),f.Ub(),f.Ub(),f.Qb(17,"div",3),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(1),f.nc("formGroup",e.form),f.Db(6),f.nc("ngIf",!e.statusObj.loading),f.Db(6),f.nc("ngIf",e.statusObj.loading),f.Db(1),f.nc("ngIf",!e.statusObj.loading&&1==e.step_by_step),f.Db(1),f.nc("ngIf",1!=e.statusObj.loading&&(2==e.step_by_step||3==e.step_by_step)),f.Db(1),f.nc("ngIf",!e.statusObj.loading&&4==e.step_by_step))},directives:[o.C,o.t,o.l,i.m,i.k,o.d,o.s,o.j,U.a,k.b,r.k],pipes:[A.v,l.d],styles:['@charset "UTF-8";#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),t})();function wt(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",12),f.Vb(2,"div",13),f.Vb(3,"span",14),f.Tc(4),f.hc(5,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.Vc("",f.ic(5,1,"lang_cms_common_loading"),"..."))}function Vt(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),f.Ub())}function Ut(t,e){if(1&t&&(f.Vb(0,"div",27),f.Rc(1,Vt,2,0,"div",11),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Ct(t,e){if(1&t&&(f.Vb(0,"div",15),f.Vb(1,"label",28),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Ub()),2&t){const t=f.gc(2);f.Db(2),f.Vc("*** ",f.ic(3,1,t.statusObj.errorMessage),"")}}function St(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",29),f.Tc(2,"\xa0"),f.Ub())}const kt=function(t){return[t]},At=function(){return{user_click:"true"}};function xt(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",15),f.Vb(2,"div",16),f.Vb(3,"div",17),f.Qb(4,"input",18),f.Vb(5,"div",19),f.Vb(6,"span",20),f.Vb(7,"mat-icon"),f.Tc(8,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(9,Ut,2,1,"div",21),f.Ub(),f.Ub(),f.Rc(10,Ct,4,3,"div",22),f.Vb(11,"div",15),f.Vb(12,"div",16),f.Vb(13,"div",23),f.Vb(14,"button",24),f.cc("click",function(){f.Ec(t);const e=f.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),f.Rc(15,St,3,0,"span",11),f.Tc(16,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(17,"hr"),f.Vb(18,"div",25),f.Vb(19,"a",26),f.hc(20,"localize"),f.Tc(21,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc();f.Db(9),f.nc("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),f.Db(1),f.nc("ngIf",t.statusObj.errorMessage),f.Db(4),f.nc("disabled",t.form.invalid||t.statusObj.loading),f.Db(1),f.nc("ngIf",t.statusObj.loading),f.Db(4),f.nc("routerLink",f.tc(8,kt,f.ic(20,6,"/auth/login")))("queryParams",f.sc(10,At))}}let Ot=(()=>{class t extends m.a{constructor(t,e,n,i){super(e),this.formBuilder=t,this.commonService=e,this.baseApiService=n,this.authService=i,this.form=new o.k({})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}changePassword(){if(this.form.valid){var t=this.commonService.getFormObj(this.form),e=this.commonService.getMyQueryParam("token");this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConfirmForgotPasswordGet(e,t.password).subscribe(t=>{var e;1==t.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(e=t.message)&&void 0!==e?e:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[o.A.required,o.A.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(o.g),f.Pb(v.a),f.Pb(_.a),f.Pb(y.g))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-confirm-forgot-password-admin"]],features:[f.Ab],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"form",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"h2",5),f.Qb(6,"img",6),f.hc(7,"convertCdn"),f.Ub(),f.Vb(8,"div",7),f.Vb(9,"div",8),f.Vb(10,"span",9),f.Tc(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),f.Ub(),f.Ub(),f.Vb(12,"div",10),f.Rc(13,wt,6,3,"div",11),f.Rc(14,xt,22,11,"div",11),f.Ub(),f.Ub(),f.Ub(),f.Qb(15,"div",3),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(1),f.nc("formGroup",e.form),f.Db(5),f.nc("src",f.ic(7,4,"azota_assets/images/logo.svg"),f.Ic),f.Db(7),f.nc("ngIf",e.statusObj.loading),f.Db(1),f.nc("ngIf",!e.statusObj.loading))},directives:[o.C,o.t,o.l,i.m,o.d,o.s,o.j,U.a,k.b,r.k],pipes:[A.f,A.v,l.d],encapsulation:2}),t})();var Pt=n("0pw4"),Dt=n("Ik8O");class Tt{constructor(t,e,n,i,o){this._legacyCanvasSize=Tt.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),n&&"object"==typeof n?this._onDecode=e:(n||i||o?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=e),this._onDecodeError=(e="object"==typeof n?n:{}).onDecodeError||("function"==typeof n?n:this._onDecodeError),this._calculateScanRegion=e.calculateScanRegion||("function"==typeof i?i:this._calculateScanRegion),this._preferredCamera=e.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize="number"==typeof n?n:"number"==typeof i?i:this._legacyCanvasSize,this._maxScansPerSecond=e.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let r=!1;if(t.hidden&&(t.hidden=!1,r=!0),document.body.contains(t)||(document.body.appendChild(t),r=!0),n=t.parentElement,e.highlightScanRegion||e.highlightCodeOutline){if(i=!!e.overlay,this.$overlay=e.overlay||document.createElement("div"),(o=this.$overlay.style).position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&e.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(s){}n.insertBefore(this.$overlay,this.$video.nextSibling)}e.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let e=window.getComputedStyle(t);"none"===e.display&&(t.style.setProperty("display","block","important"),r=!0),"visible"!==e.visibility&&(t.style.setProperty("visibility","visible","important"),r=!0),r&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=Tt.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await Tt.listCameras(!1)).length}catch(t){return!1}}static async listCameras(t=!1){if(!navigator.mediaDevices)return[];let e,n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(t=>"videoinput"===t.kind);try{t&&(await n()).every(t=>!t.label)&&(e=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(i){}try{return(await n()).map((t,e)=>({id:t.deviceId,label:t.label||(0===e?"Default Camera":"Camera "+(e+1))}))}finally{e&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),Tt._stopVideoStream(e))}}async hasFlash(){let t;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;t=this.$video.srcObject}else t=(await this._getCameraStream()).stream;return"torch"in t.getVideoTracks()[0].getSettings()}catch(e){return!1}finally{t&&t!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),Tt._stopVideoStream(t))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!(await this.hasFlash()))throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(t){throw this._flashOn=!1,t}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),Tt._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:t,facingMode:e}=await this._getCameraStream();!this._active||this._paused?Tt._stopVideoStream(t):(this._setVideoMirror(e),this.$video.srcObject=t,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(t){if(!this._paused)throw this._active=!1,t}}stop(){this.pause(),this._active=!1}async pause(t=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let e=()=>{this.$video.srcObject instanceof MediaStream&&(Tt._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return t?(e(),!0):(await new Promise(t=>setTimeout(t,300)),!!this._paused&&(e(),!0))}async setCamera(t){t!==this._preferredCamera&&(this._preferredCamera=t,await this._restartVideoStream())}static async scanImage(t,e,n,i,o=!1,r=!1){let s,c=!1;e&&("scanRegion"in e||"qrEngine"in e||"canvas"in e||"disallowCanvasResizing"in e||"alsoTryWithoutScanRegion"in e||"returnDetailedScanResult"in e)?(s=e.scanRegion,n=e.qrEngine,i=e.canvas,o=e.disallowCanvasResizing||!1,r=e.alsoTryWithoutScanRegion||!1,c=!0):e||n||i||o||r?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),e=!!n;try{let a,d,l;if([n,a]=await Promise.all([n||Tt.createQrEngine(),Tt._loadImage(t)]),[i,d]=Tt._drawToCanvas(a,s,i,o),n instanceof Worker){let t=n;e||Tt._postWorkerMessageSync(t,"inversionMode","both"),l=await new Promise((e,n)=>{let o,r,c,a=-1;r=i=>{i.data.id===a&&(t.removeEventListener("message",r),t.removeEventListener("error",c),clearTimeout(o),null!==i.data.data?e({data:i.data.data,cornerPoints:Tt._convertPoints(i.data.cornerPoints,s)}):n(Tt.NO_QR_CODE_FOUND))},c=e=>{t.removeEventListener("message",r),t.removeEventListener("error",c),clearTimeout(o),n("Scanner error: "+(e?e.message||e:"Unknown Error"))},t.addEventListener("message",r),t.addEventListener("error",c),o=setTimeout(()=>c("timeout"),1e4);let l=d.getImageData(0,0,i.width,i.height);a=Tt._postWorkerMessageSync(t,"decode",l,[l.data.buffer])})}else l=await Promise.race([new Promise((t,e)=>window.setTimeout(()=>e("Scanner error: timeout"),1e4)),(async()=>{try{var[e]=await n.detect(i);if(!e)throw Tt.NO_QR_CODE_FOUND;return{data:e.rawValue,cornerPoints:Tt._convertPoints(e.cornerPoints,s)}}catch(c){if(/not implemented|service unavailable/.test(e=c.message||c))return Tt._disableBarcodeDetector=!0,Tt.scanImage(t,{scanRegion:s,canvas:i,disallowCanvasResizing:o,alsoTryWithoutScanRegion:r});throw"Scanner error: "+e}})()]);return c?l:l.data}catch(a){if(!s||!r)throw a;let e=await Tt.scanImage(t,{qrEngine:n,canvas:i,disallowCanvasResizing:o});return c?e:e.data}finally{e||Tt._postWorkerMessage(n,"close")}}setGrayscaleWeights(t,e,n,i=!0){Tt._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:e,blue:n,useIntegerApproximation:i})}setInversionMode(t){Tt._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static async createQrEngine(t){return t&&console.warn("Specifying a worker path is not required and not supported anymore."),!Tt._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")?new BarcodeDetector({formats:["qr_code"]}):n.e(33).then(n.bind(null,"hyQ9")).then(t=>t.createWorker())}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let e=Math.round(2/3*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-e)/2),y:Math.round((t.videoHeight-e)/2),width:e,height:e,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,e=t.videoWidth,n=t.videoHeight,i=t.offsetWidth,o=t.offsetHeight,r=t.offsetLeft,s=t.offsetTop,c=window.getComputedStyle(t),a=c.objectFit,d=e/n,l=i/o;switch(a){case"none":var h=e,b=n;break;case"fill":h=i,b=o;break;default:("cover"===a?d>l:d<l)?h=(b=o)*d:b=(h=i)/d,"scale-down"===a&&(h=Math.min(h,e),b=Math.min(b,n))}var[g,u]=c.objectPosition.split(" ").map((t,e)=>{const n=parseFloat(t);return t.endsWith("%")?(e?o-b:i-h)*n/100:n});l=this._scanRegion.height||n,a=this._scanRegion.x||0;var m=this._scanRegion.y||0;(d=this.$overlay.style).width=(c=this._scanRegion.width||e)/e*h+"px",d.height=l/n*b+"px",d.top=s+u+m/n*b+"px",n=/scaleX\(-1\)/.test(t.style.transform),d.left=r+(n?i-g-h:g)+(n?e-a-c:a)/e*h+"px",d.transform=t.style.transform}})}static _convertPoints(t,e){if(!e)return t;let n=e.x||0,i=e.y||0,o=e.width&&e.downScaledWidth?e.width/e.downScaledWidth:1;e=e.height&&e.downScaledHeight?e.height/e.downScaledHeight:1;for(let r of t)r.x=r.x*o+n,r.y=r.y*e+i;return t}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var t=Date.now()-this._lastScanTimestamp,e=1e3/this._maxScansPerSecond;t<e&&await new Promise(n=>setTimeout(n,e-t)),this._lastScanTimestamp=Date.now();try{var n=await Tt.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(i){if(!this._active)return;this._onDecodeError(i)}!Tt._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=Tt.createQrEngine()),n?(this._onDecode?this._onDecode(n):this._legacyOnDecode&&this._legacyOnDecode(n.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",(this._scanRegion.x||0)+" "+(this._scanRegion.y||0)+" "+(this._scanRegion.width||this.$video.videoWidth)+" "+(this._scanRegion.height||this.$video.videoHeight)),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",n.cornerPoints.map(({x:t,y:e})=>`${t},${e}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(t){t!==Tt.NO_QR_CODE_FOUND&&console.log(t)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",e=[{width:{min:1024}},{width:{min:768}},{}],n=e.map(e=>Object.assign({},e,{[t]:{exact:this._preferredCamera}}));for(let o of[...n,...e])try{let t=await navigator.mediaDevices.getUserMedia({video:o,audio:!1});return{stream:t,facingMode:this._getFacingMode(t)||(o.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment")}}catch(i){}throw"Camera not found."}async _restartVideoStream(){let t=this._paused;await this.pause(!0)&&!t&&this._active&&await this.start()}static _stopVideoStream(t){for(let e of t.getTracks())e.stop(),t.removeTrack(e)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,e,n,i=!1){n=n||document.createElement("canvas");let o=e&&e.x?e.x:0,r=e&&e.y?e.y:0,s=e&&e.width?e.width:t.videoWidth||t.width,c=e&&e.height?e.height:t.videoHeight||t.height;return i||(i=e&&e.downScaledWidth?e.downScaledWidth:s,e=e&&e.downScaledHeight?e.downScaledHeight:c,n.width!==i&&(n.width=i),n.height!==e&&(n.height=e)),(e=n.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,e.drawImage(t,o,r,s,c,0,0,n.width,n.height),[n,e]}static async _loadImage(t){if(t instanceof Image)return await Tt._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let e=new Image;e.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return await Tt._awaitImageLoad(e),e}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(e.src)}}}static async _awaitImageLoad(t){t.complete&&0!==t.naturalWidth||await new Promise((e,n)=>{let i=o=>{t.removeEventListener("load",i),t.removeEventListener("error",i),o instanceof ErrorEvent?n("Image load error"):e()};t.addEventListener("load",i),t.addEventListener("error",i)})}static async _postWorkerMessage(t,e,n,i){return Tt._postWorkerMessageSync(await t,e,n,i)}static _postWorkerMessageSync(t,e,n,i){if(!(t instanceof Worker))return-1;let o=Tt._workerMessageId++;return t.postMessage({id:o,type:e,data:n},i),o}}Tt.DEFAULT_CANVAS_SIZE=400,Tt.NO_QR_CODE_FOUND="No QR code found",Tt._disableBarcodeDetector=!1,Tt._workerMessageId=0;var Mt=Tt,Rt=n("2Vo4"),It=n("Zmss"),Qt=n("IyRd");function Lt(t,e){if(1&t){const t=f.Wb();f.Vb(0,"zxing-scanner",7),f.cc("deviceChange",function(e){return f.Ec(t),f.gc().currentDevice=e})("scanSuccess",function(e){return f.Ec(t),f.gc().onCodeResult(e)})("permissionResponse",function(e){return f.Ec(t),f.gc().onHasPermission(e)})("camerasFound",function(e){return f.Ec(t),f.gc().onCamerasFound(e)})("torchCompatible",function(e){return f.Ec(t),f.gc().onTorchCompatible(e)}),f.Ub()}if(2&t){const t=f.gc();f.nc("torch",t.torchEnabled)("device",t.currentDevice)("tryHarder",t.tryHarder)("formats",t.formatsEnabled)}}function Et(t,e){if(1&t&&(f.Vb(0,"span",8),f.Tc(1),f.Ub()),2&t){const t=f.gc();f.Db(1),f.Vc("( ",t.contentResult," )")}}let Bt=(()=>{class t extends m.a{constructor(t){super(t),this.commonService=t,this.outContentScan=new f.o,this.outNotCamAllow=new f.o,this.isShowDebugLog=!1,this.isShowScanner=!1,this.availableDevices=[],this.currentDevice=void 0,this.hasDevices=!1,this.hasPermission=!1,this.qrResultString="",this.torchEnabled=!1,this.torchAvailable$=new Rt.a(!1),this.tryHarder=!1,this.formatsEnabled=[Dt.BarcodeFormat.CODE_128,Dt.BarcodeFormat.DATA_MATRIX,Dt.BarcodeFormat.EAN_13,Dt.BarcodeFormat.QR_CODE],this.deviceCamSelect=0,this.contentResult=null,this.isShowLog=!1,this.snd=new Audio,this.snd=new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=")}clearResult(){this.qrResultString=""}onCamerasFound(t){this.availableDevices=t,this.hasDevices=Boolean(t&&t.length)}onCodeResult(t){this.qrResultString=t,It.a.isEncode(t)?this.switchChangeContent(It.a.decode(t)):this.switchChangeContent(null)}onDeviceSelectChange(t){const e=this.availableDevices.find(e=>e.deviceId===t);this.currentDevice=e||void 0}onHasPermission(t){this.hasPermission=t}onTorchCompatible(t){this.torchAvailable$.next(t||!1)}toggleTorch(){this.torchEnabled=!this.torchEnabled}toggleTryHarder(){this.tryHarder=!this.tryHarder}switchVideoScan(){this.deviceCamSelect++,this.deviceCamSelect>=this.availableDevices.length&&(this.deviceCamSelect=0),this.currentDevice=this.availableDevices[this.deviceCamSelect]}unInitSscanCam(){this.isShowScanner=!1}initVideoScan(){this.isShowScanner=!0}initScanCam(){this.isShowScanner=!0}onFileSelected(t){let e=t.target.files;if(null==e?void 0:e.length){var n=e[0];if(!n)return;this.scanProcessSelectFile(t,n,0)}else console.log("jel"),this.switchChangeContent(null)}scanProcessSelectFile(t,e,n){Mt.scanImage(e,{returnDetailedScanResult:!0}).then(e=>{this.thatLog("onFileSelected: 0 "+JSON.stringify(e)),t.target.value="";var n=e.data;this.thatLog("onFileSelected: 1 "+n),It.a.isEncode(n)?this.switchChangeContent(It.a.decode(n)):this.switchChangeContent(null)}).catch(i=>{n>=2?(t.target.value="",this.thatLog("onFileSelected: 2 "+JSON.stringify(i)),this.switchChangeContent(null)):this.scanProcessSelectFile(t,e,n++)})}pauseScanQrcode(){this.isShowScanner=!1}switchChangeContent(t){this.contentResult=t,this.pauseScanQrcode(),this.beep(),navigator&&navigator.vibrate&&navigator.vibrate(200),this.thatLog("switchChangeContent: "+t),this.outContentScan.emit(this.contentResult)}thatLog(t){!0===this.isShowDebugLog&&console.log("__AZT SCAN__ :: "+t)}beep(){this.snd&&this.snd.play()}ngOnDestroy(){this.unInitSscanCam(),super.ngDestroy()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(v.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["azt-scan-qrcode"]],outputs:{outContentScan:"outContentScan",outNotCamAllow:"outNotCamAllow"},features:[f.Ab],decls:10,vars:2,consts:[[1,"scan__card-video"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible",4,"ngIf"],[1,"text-center","mt-3"],["class","text-center",4,"ngIf"],["type","file","name","fileQrcode",2,"display","none",3,"change"],["formChoseFile",""],[1,"link-center",3,"click"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible"],[1,"text-center"]],template:function(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",0),f.Rc(1,Lt,1,4,"zxing-scanner",1),f.Ub(),f.Vb(2,"div",2),f.Rc(3,Et,2,1,"span",3),f.Vb(4,"input",4,5),f.cc("change",function(t){return e.onFileSelected(t)}),f.Ub(),f.Vb(6,"a",6),f.cc("click",function(){return f.Ec(t),f.Ac(5).click()}),f.Vb(7,"mat-icon"),f.Tc(8,"upload"),f.Ub(),f.Tc(9," T\u1ea3i l\xean m\xe3 c\xf3 s\u1eb5n"),f.Ub(),f.Ub()}2&t&&(f.Db(1),f.nc("ngIf",e.isShowScanner),f.Db(2),f.nc("ngIf",e.isShowLog))},directives:[i.m,U.a,Qt.a],styles:[".scan__card-img[_ngcontent-%COMP%], .scan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.scan__card-video[_ngcontent-%COMP%]{position:relative}.scan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.scan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.43137254901960786);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),t})();const jt=["aztScanQrcode"];function qt(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),f.Ub())}function Ft(t,e){if(1&t&&(f.Vb(0,"div",36),f.Rc(1,qt,2,0,"div",34),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function zt(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),f.Ub())}function Nt(t,e){if(1&t&&(f.Vb(0,"div",36),f.Rc(1,zt,2,0,"div",34),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("repassword","confirm_pass"))}}function Wt(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",37),f.Tc(2,"\xa0"),f.Ub())}function Ht(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",38),f.Vb(1,"p",39),f.Tc(2,"Kh\xf4ng th\u1ec3 x\xe1c nh\u1eadn y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u. M\xe3 Qrcode v\xe0 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u0103ng nh\u1eadp kh\xf4ng tr\xf9ng kh\u1edbp. Vui l\xf2ng th\u1eed l\u1ea1i."),f.Ub(),f.Vb(3,"button",40),f.cc("click",function(){return f.Ec(t),f.gc(2).reloadProcessForgot()}),f.Tc(4,"Th\u1eed l\u1ea1i"),f.Ub(),f.Ub()}}function Gt(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",22),f.Vb(1,"div",23),f.Vb(2,"div",24),f.Vb(3,"div",25),f.Qb(4,"input",26),f.Vb(5,"div",27),f.Vb(6,"span",28),f.Vb(7,"mat-icon"),f.Tc(8,"qr_code"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(9,"div",23),f.Vb(10,"div",24),f.Vb(11,"div",25),f.Qb(12,"input",29),f.Vb(13,"div",27),f.Vb(14,"span",28),f.Vb(15,"mat-icon"),f.Tc(16,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(17,Ft,2,1,"div",30),f.Ub(),f.Ub(),f.Vb(18,"div",23),f.Vb(19,"div",24),f.Vb(20,"div",25),f.Qb(21,"input",31),f.Vb(22,"div",27),f.Vb(23,"span",28),f.Vb(24,"mat-icon"),f.Tc(25,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(26,Nt,2,1,"div",30),f.Ub(),f.Ub(),f.Vb(27,"div",23),f.Vb(28,"div",24),f.Vb(29,"div",32),f.Vb(30,"button",33),f.cc("click",function(){f.Ec(t);const e=f.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),f.Rc(31,Wt,3,0,"span",34),f.Tc(32,"Ti\u1ebfp t\u1ee5c "),f.Ub(),f.Ub(),f.Ub(),f.Rc(33,Ht,5,0,"div",35),f.Ub(),f.Ub()}if(2&t){const t=f.gc();f.Db(4),f.Eb("disabled",!0),f.Db(13),f.nc("ngIf",t.form.controls.password.invalid&&t.form.controls.password.dirty),f.Db(9),f.nc("ngIf",0!=t.getErrorType("repassword","confirm_pass")&&t.form.controls.repassword.touched),f.Db(4),f.nc("disabled",t.statusObj.errorMessage||t.form.invalid||t.statusObj.loading||0!=t.getErrorType("repassword","confirm_pass")),f.Db(1),f.nc("ngIf",!0===t.statusObj.loading),f.Db(2),f.nc("ngIf",t.statusObj.errorMessage)}}const Yt=function(t){return{"d-none":t}},Zt=function(t){return[t]},Kt=function(){return{user_click:"true"}};let Jt=(()=>{class t extends m.a{constructor(t,e,n,i){super(t),this.commonService=t,this.localStorageObjetct=e,this.formBuilder=n,this.qrCodeForgotPasswordService=i,this.subscriptions=new N.a,this.form=new o.k({}),this.stepByStep=0,this.sussScanNextConf=!1}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return"repassword"===t&&"confirm_pass"===e?this.form.controls.repassword.value!=this.form.controls.password.value:!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}reloadProcessForgot(){this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam(),this.stepByStep=0,this.form.reset(),this.initStatusObj(),this.sussScanNextConf=!1}outContentScan(t){null!==t?this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordAnonymousCheckForgotPasswordQrCodePost({hash:t}).subscribe(e=>{var n;1==e.success&&1==(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.status)?(this.stepByStep=1,this.form.controls.hash.setValue(t),this.sussScanNextConf=!0):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}changePassword(){this.initStatusObj();var t=this.commonService.getFormObj(this.form);this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordChangePasswordByQrcodePost({hash:t.hash,password:t.password}).subscribe(t=>{0!=t.success?(this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng.",!0),this.commonService.myNavigation("/auth/forgot_password_susscess")):(this.errorStatusObj("Y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u th\u1ea5t b\u1ea1i.",!0),this.successStatusObj())})}ngAfterViewInit(){setTimeout(()=>{this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam()},0)}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.form=this.formBuilder.group({hash:["",[o.A.required]],password:["",[o.A.required,o.A.minLength(6)]],repassword:["",[o.A.required,o.A.minLength(6)]]}),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(v.a),f.Pb(Pt.a),f.Pb(o.g),f.Pb(y.bb))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-confirm-forgot-password"]],viewQuery:function(t,e){if(1&t&&f.cd(jt,!0),2&t){let t;f.zc(t=f.dc())&&(e.elementaztScanQrcode=t.first)}},features:[f.Ab],decls:33,vars:15,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"loginscan_scanmode_cam",3,"ngClass"],[1,"text-center","mb-3"],[3,"outContentScan"],["aztScanQrcode",""],["class","loginscan_scanmode_conf",4,"ngIf"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal","mt-1",3,"routerLink","queryParams"],[1,"loginscan_scanmode_conf"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\xe3 x\xe1c th\u1ef1c","formControlName","hash",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[4,"ngIf"],["class","col-sm-12 mt-2",4,"ngIf"],[1,"alert","alert-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-sm-12","mt-2"],[1,"text-danger"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"form",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"h2",5),f.Qb(6,"img",6),f.Ub(),f.Vb(7,"div",7),f.Vb(8,"div",8),f.Qb(9,"div",9),f.Qb(10,"div",9),f.Qb(11,"div",9),f.Ub(),f.Ub(),f.Vb(12,"div",10),f.Vb(13,"div",11),f.Vb(14,"span",12),f.Tc(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi b\u1eb1ng m\xe3 QRCode"),f.Ub(),f.Ub(),f.Vb(16,"div",13),f.Vb(17,"div",14),f.Vb(18,"div",15),f.Tc(19," Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode "),f.Ub(),f.Vb(20,"azt-scan-qrcode",16,17),f.cc("outContentScan",function(t){return e.outContentScan(t)}),f.Ub(),f.Ub(),f.Rc(22,Gt,34,6,"div",18),f.Ub(),f.Qb(23,"hr"),f.Vb(24,"div",15),f.Vb(25,"div",19),f.Vb(26,"a",20),f.Tc(27,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),f.Ub(),f.Ub(),f.Vb(28,"div"),f.Vb(29,"a",21),f.hc(30,"localize"),f.Tc(31,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(32,"div",3),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(1),f.nc("formGroup",e.form),f.Db(8),f.nc("ngClass",e.stepByStep+2==1?"active":e.stepByStep+2>1?"active pro":""),f.Db(1),f.nc("ngClass",e.stepByStep+2==2?"active":e.stepByStep+2>2?"active pro":""),f.Db(1),f.nc("ngClass",e.stepByStep+2==3?"active":e.stepByStep+2>3?"active pro":""),f.Db(6),f.nc("ngClass",f.tc(10,Yt,e.sussScanNextConf)),f.Db(5),f.nc("ngIf",e.sussScanNextConf),f.Db(7),f.nc("routerLink",f.tc(12,Zt,f.ic(30,8,"/auth/login")))("queryParams",f.sc(14,Kt)))},directives:[o.C,o.t,o.l,i.k,Bt,i.m,r.k,o.d,o.s,o.j,U.a,k.b],pipes:[l.d],styles:['@charset "UTF-8";#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),t})();var $t=n("0IaG"),Xt=n("hZBc"),te=n("k3bj");function ee(t,e){if(1&t&&(f.Vb(0,"div",3),f.Vb(1,"mat-icon",4),f.Tc(2,"access_time"),f.Ub(),f.Tc(3),f.Ub()),2&t){const t=f.gc();f.Db(3),f.Vc(" ",t.stringDuration,"")}}let ne=(()=>{class t extends m.a{constructor(){super(...arguments),this.content="",this.width=0,this.height=0,this.expired=0,this.expiredAction=new f.o,this.startDuration=0,this.isDuration=!1,this.stringDuration="__ : __"}ngAfterViewInit(){setTimeout(()=>{this.reInitComponent()},0)}reInitComponent(){this.bindUrlToQrCode(),0!=this.expired&&(this.isDuration=!0,this.startDuration=Math.floor(Date.now()/1e3),this.initLoopDuration())}initLoopDuration(){this.loopDuration=setInterval(()=>{var t=Math.floor(Date.now()/1e3),e=this.expired-(t-this.startDuration);if(e<0)this.clearLoopDuration(),this.qrcode.clear(),this.expiredAction.emit();else{var n=Math.floor(e/60),i=e-60*n;this.stringDuration=(n<10?"0"+n:""+n)+" : "+(i<10?"0"+i:""+i)}},1e3)}clearLoopDuration(){this.loopDuration&&clearInterval(this.loopDuration)}bindUrlToQrCode(){this.qrcode=this.commonService.createObjectQrcode(this.content,this.width,this.height,"text",!0,"image-qrcode-created"),this.qrcode._oDrawing._elCanvas.style.width="100%",this.qrcode._oDrawing._elCanvas.style.opacity=".9"}downloadQrcode(t){t||(t="azota-qr"),t=this.getTimeSaveQrcode()+"_"+t+".jpg";var e=this.createFrameQrcodeSaveLocal(this.qrcode._oDrawing._elCanvas),n=document.createElement("a");document.body.appendChild(n),n.setAttribute("href",e),n.setAttribute("download",t),n.click()}getTimeSaveQrcode(){var t=new Date,e=t.getMonth()+1,n=t.getDate();return[t.getFullYear(),(e>9?"":"0")+e,(n>9?"":"0")+n].join("_")}createFrameQrcodeSaveLocal(t){var e=document.createElement("canvas");const n=e.getContext("2d");return e.width=420,e.height=420,n&&(n.fillStyle="white",n.fillRect(0,0,e.width,e.height),n.drawImage(t,0,0,t.width,t.height,Math.floor((e.height-t.height)/2),(e.width-t.width)/2,t.width,t.height)),e.toDataURL("image/jpeg",1)}}return t.\u0275fac=function(e){return ie(e||t)},t.\u0275cmp=f.Jb({type:t,selectors:[["azt-create-qr-image"]],inputs:{content:"content",width:"width",height:"height",expired:"expired"},outputs:{expiredAction:"expiredAction"},features:[f.Ab],decls:3,vars:1,consts:[[1,"qr-scan-box"],["class","duration",4,"ngIf"],["id","image-qrcode-created"],[1,"duration"],[2,"font-size","18px"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Rc(1,ee,4,1,"div",1),f.Qb(2,"div",2),f.Ub()),2&t&&(f.Db(1),f.nc("ngIf",e.isDuration))},directives:[i.m,U.a],styles:[".qr-scan-box[_ngcontent-%COMP%]{border:1px solid #e0e0e0}#image-qrcode-created[_ngcontent-%COMP%]{margin:20px}.duration[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;font-weight:500}"]}),t})();const ie=f.Xb(ne),oe=["elementCreateQr"];function re(t,e){1&t&&f.Qb(0,"header-backend",13),2&t&&f.nc("headerTitle","")("back_link","/admin/testbank/dashboard")}function se(t,e){1&t&&f.Qb(0,"header-frontend",14),2&t&&f.nc("headerTitle","")("back_link","/student/dashboard/0")}function ce(t,e){if(1&t&&(f.Vb(0,"div",15),f.Qb(1,"azt-create-qr-image",16,17),f.Ub()),2&t){const t=f.gc();f.Db(1),f.nc("content",t.contentQrcodeHash)("width",350)("height",350)("expired",0)}}function ae(t,e){if(1&t&&(f.Vb(0,"div",18),f.Vb(1,"div",19),f.Vb(2,"mat-icon"),f.Tc(3,"visibility_off"),f.Ub(),f.Ub(),f.Vb(4,"div",20),f.Tc(5),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(5),f.Vc(" ",t.notiContentString," ")}}function de(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",7),f.Vb(1,"button",21),f.cc("click",function(){return f.Ec(t),f.gc().downloadQrCode()}),f.Vb(2,"mat-icon",22),f.Tc(3,"download"),f.Ub(),f.Tc(4," T\u1ea3i xu\u1ed1ng m\xe3"),f.Ub(),f.Ub()}}function le(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",7),f.Vb(1,"button",21),f.cc("click",function(){return f.Ec(t),f.gc().openDialog()}),f.Vb(2,"mat-icon",22),f.Tc(3,"add_photo_alternate"),f.Ub(),f.Tc(4," T\u1ea1o m\xe3 qu\xean m\u1eadt kh\u1ea9u m\u1edbi"),f.Ub(),f.Ub()}}let he=(()=>{class t extends m.a{constructor(t,e,n,i){super(t),this.commonService=t,this.dialog=e,this.activeRoute=n,this.qrCodeForgotPasswordService=i,this.notiContentString="",this.contentQrcodeHash="",this.role=0}checkQrThisMe(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCheckForgotPasswordQrCodeGet().subscribe(t=>{var e;1==t.success?this.notiContentString=0!=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.status)?"M\xe3 Qrcode \u0111\xe3 t\u1ed3n t\u1ea1i. B\u1ea1n kh\xf4ng th\u1ec3 xem m\xe3 hi\u1ec7n t\u1ea1i. T\u1ea1o m\xe3 m\u1edbi trong tr\u01b0\u1eddng h\u1ee3p b\u1ea1n \u0111\xe3 m\u1ea5t m\xe3 Qrcode.":"B\u1ea1n ch\u01b0a t\u1ea1o m\xe3 Qrcode d\xf9ng trong tr\u01b0\u1eddng h\u1ee3p qu\xean m\u1eadt kh\u1ea9u. Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi.":this.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}createQrcodeForgot(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCreateForgotPasswordQrCodeGet().subscribe(t=>{var e,n;1==t.success?this.contentQrcodeHash=null!==(n=null===(e=t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"":this.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}openDialog(){this.dialog.open(be).afterClosed().subscribe(t=>{!0===t&&this.createQrcodeForgot()})}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-forgot")}ngOnInit(){var t,e=null!==(t=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==t?t:"0";this.role=parseInt(e,10),this.checkQrThisMe(),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(v.a),f.Pb($t.b),f.Pb(r.a),f.Pb(y.bb))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-gzip-tool"]],viewQuery:function(t,e){if(1&t&&f.cd(oe,!0),2&t){let t;f.zc(t=f.dc())&&(e.elementCreateQr=t.first)}},features:[f.Ab],decls:16,vars:6,consts:[["class","mb-3",3,"headerTitle","back_link",4,"ngIf"],[3,"headerTitle","back_link",4,"ngIf"],[1,"container","component-wrap","centerBoth","hasBg","mt-3"],[1,"card","mb-5"],[1,"card-body"],[1,"text-center"],[1,"card-content","mt-3","text-center"],[1,"card-center-row"],[1,"qrcode-block","card-center-row"],[1,"qrcode-block-fake","card-center-row"],["class","qrcode-block-real",4,"ngIf"],["class","qrcode-block-fake-content",4,"ngIf"],["class","card-center-row",4,"ngIf"],[1,"mb-3",3,"headerTitle","back_link"],[3,"headerTitle","back_link"],[1,"qrcode-block-real"],[3,"content","width","height","expired"],["elementCreateQr",""],[1,"qrcode-block-fake-content"],[1,"qrcode-block-icon"],[1,"qrcode-block-note"],[1,"card-center-row","btn","btn-outline-primary",3,"click"],[2,"margin-right","10px"]],template:function(t,e){1&t&&(f.Rc(0,re,1,2,"header-backend",0),f.Rc(1,se,1,2,"header-frontend",1),f.Vb(2,"div",2),f.Vb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"h3",5),f.Vb(6,"b"),f.Tc(7,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),f.Ub(),f.Ub(),f.Vb(8,"div",6),f.Vb(9,"div",7),f.Vb(10,"div",8),f.Vb(11,"div",9),f.Rc(12,ce,3,4,"div",10),f.Rc(13,ae,6,1,"div",11),f.Ub(),f.Ub(),f.Ub(),f.Rc(14,de,5,0,"div",12),f.Rc(15,le,5,0,"div",12),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.nc("ngIf",0==e.role),f.Db(1),f.nc("ngIf",1==e.role),f.Db(11),f.nc("ngIf",e.contentQrcodeHash),f.Db(1),f.nc("ngIf",!e.contentQrcodeHash),f.Db(1),f.nc("ngIf",e.contentQrcodeHash),f.Db(1),f.nc("ngIf",!e.contentQrcodeHash))},directives:[i.m,Xt.a,te.a,ne,U.a],styles:[".card-center-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.qrcode-block[_ngcontent-%COMP%]{padding:10px;border:1px solid #e0e0e0;margin-bottom:20px;max-width:400px;max-height:400px;min-width:300px;min-height:300px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.qrcode-block-fake[_ngcontent-%COMP%]{width:100%;height:100%}.qrcode-block-fake-content[_ngcontent-%COMP%]{padding:10px}.qrcode-block-note[_ngcontent-%COMP%]{line-height:30px}"]}),t})(),be=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Jb({type:t,selectors:[["dialog-conf-content-qrcode-dialog"]],decls:16,vars:1,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-dialog-close","",1,"btn","btn-default","mr-3"],["cdkFocusInitial","",1,"btn","btn-outline-primary",3,"mat-dialog-close"]],template:function(t,e){1&t&&(f.Vb(0,"h2",0),f.Tc(1,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),f.Ub(),f.Vb(2,"mat-dialog-content",1),f.Vb(3,"h3"),f.Tc(4,'B\u1ea5m "X\xe1c nh\u1eadn" \u0111\u1ed3ng ngh\u0129a v\u1edbi vi\u1ec7c b\u1ea1n \u0111\xe3 hi\u1ec3u v\u1ec1 c\xe1c \u0111i\u1ec1u sau'),f.Ub(),f.Vb(5,"p"),f.Tc(6,"1. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 duy nh\u1ea5t. Khi b\u1ea1n t\u1ea1o m\u1edbi m\xe3, m\xe3 c\u0169 s\u1ebd kh\xf4ng c\xf2n gi\xe1 tr\u1ecb s\u1eed d\u1ee5ng."),f.Ub(),f.Vb(7,"p"),f.Tc(8,"2. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 ch\xeca kho\xe1. Vui l\xf2ng kh\xf4ng chia s\u1ebb hay \u0111\u1ec3 ng\u01b0\u1eddi kh\xe1c c\xf3 \u0111\u01b0\u1ee3c m\xe3 qrcode c\u1ee7a b\u1ea1n."),f.Qb(9,"br"),f.Tc(10,"Sau khi t\u1ea1o th\xe0nh c\xf4ng, vui l\xf2ng t\u1ea3i xu\u1ed1ng m\xe3 Qrcode \u0111\u1ec3 s\u1eed d\u1ee5ng cho m\u1ee5c \u0111\xedch qu\xean m\u1eadt kh\u1ea9u sau n\xe0y."),f.Ub(),f.Ub(),f.Vb(11,"mat-dialog-actions",2),f.Vb(12,"button",3),f.Tc(13,"Hu\u1ef7"),f.Ub(),f.Vb(14,"button",4),f.Tc(15,"X\xe1c nh\u1eadn"),f.Ub(),f.Ub()),2&t&&(f.Db(14),f.nc("mat-dialog-close",!0))},directives:[$t.h,$t.e,$t.c,$t.d],encapsulation:2}),t})(),ge=(()=>{class t extends m.a{constructor(){super(...arguments),this.step_by_step=3}redirectToCreateQrCode(){this.commonService.myNavigation("/auth/create-qr-forgot-pass/0")}redirectToHome(){this.commonService.myNavigation("/admin/testbank/dashboard")}}return t.\u0275fac=function(e){return ue(e||t)},t.\u0275cmp=f.Jb({type:t,selectors:[["app-confirm-forgot-password"]],features:[f.Ab],decls:25,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"btn-block-center"],[1,"btn","btn-outline-info","w-100","mr-3",3,"click"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"div",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"h2",5),f.Qb(6,"img",6),f.Ub(),f.Vb(7,"div",7),f.Vb(8,"div",8),f.Qb(9,"div",9),f.Qb(10,"div",9),f.Qb(11,"div",9),f.Ub(),f.Ub(),f.Vb(12,"div",10),f.Vb(13,"div",11),f.Vb(14,"span",12),f.Tc(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng"),f.Ub(),f.Ub(),f.Vb(16,"div",13),f.Vb(17,"p"),f.Tc(18,"B\u1ea1n \u0111\xe3 \u0111\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng. M\xe3 Qrcode \u0111\xe3 s\u1eed d\u1ee5ng c\xf3 th\u1ec3 s\u1eed d\u1ee5ng l\u1ea1i. \u0110\u1ec3 \u0111\u1ea3m b\u1ea3o an to\xe0n, b\u1ea1n n\xean t\u1ea1o l\u1ea1i m\xe3 Qrcode."),f.Ub(),f.Vb(19,"div",14),f.Vb(20,"a",15),f.cc("click",function(){return e.redirectToHome()}),f.Tc(21,"B\u1ecf qua v\xe0 v\u1ec1 trang ch\u1ee7"),f.Ub(),f.Vb(22,"a",16),f.cc("click",function(){return e.redirectToCreateQrCode()}),f.Tc(23,"T\u1ea1o l\u1ea1i m\xe3 Qrcode"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(24,"div",3),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(9),f.nc("ngClass",e.step_by_step+2==1?"active":e.step_by_step+2>1?"active pro":""),f.Db(1),f.nc("ngClass",e.step_by_step+2==2?"active":e.step_by_step+2>2?"active pro":""),f.Db(1),f.nc("ngClass",e.step_by_step+2==3?"active":e.step_by_step+2>3?"active pro":""))},directives:[i.k],styles:['@charset "UTF-8";#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.btn-block-center[_ngcontent-%COMP%], .link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),t})();const ue=f.Xb(ge);var me=n("rlhx");const pe=["elementCreateQr"],fe=["aztScanQrcode"];function ve(t,e){1&t&&(f.Vb(0,"h2",25),f.Qb(1,"img",26),f.hc(2,"convertCdn"),f.Ub()),2&t&&(f.Db(1),f.nc("src",f.ic(2,1,"azota_assets/images/logo.svg"),f.Ic))}function _e(t,e){1&t&&(f.Vb(0,"div",20),f.Tc(1,"\u0110\u1ec3 \u0111\u0103ng nh\u1eadp l\xean thi\u1ebft b\u1ecb n\xe0y, vui l\xf2ng t\u1ea1o m\xe3 \u0111\u1ec3 thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp qu\xe9t."),f.Ub())}function ye(t,e){1&t&&(f.Vb(0,"div",20),f.Tc(1,"D\xf9ng thi\u1ebft b\u1ecb c\u1ea7n \u0111\u0103ng nh\u1eadp qu\xe9t m\xe3 b\xean d\u01b0\u1edbi"),f.Ub())}function we(t,e){if(1&t&&(f.Vb(0,"div",27),f.Qb(1,"span",28),f.Tc(2),f.Ub()),2&t){const t=f.gc();f.Db(2),f.Vc("\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode: ",t.nameSessionConfirm,"")}}function Ve(t,e){1&t&&(f.Vb(0,"div",27),f.Qb(1,"span",28),f.Tc(2,"\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode"),f.Ub())}function Ue(t,e){if(1&t&&(f.Vb(0,"span"),f.Tc(1,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),f.Qb(2,"br"),f.Tc(3),f.Ub()),2&t){const t=f.gc(2);f.Db(3),f.Vc("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",t.nameSessionConfirm,"")}}function Ce(t,e){1&t&&(f.Vb(0,"div"),f.Qb(1,"span",28),f.Tc(2,"\xa0 "),f.Vb(3,"span",36),f.Tc(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),f.Ub(),f.Ub())}function Se(t,e){if(1&t&&(f.Vb(0,"div",37),f.Tc(1),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.Uc(t.textResultErr)}}function ke(t,e){if(1&t&&(f.Vb(0,"div",38),f.Tc(1),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.Uc(t.textResultSuss)}}function Ae(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",28),f.Tc(2,"\xa0"),f.Ub())}function xe(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",28),f.Tc(2,"\xa0"),f.Ub())}function Oe(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",39),f.Vb(1,"button",40),f.cc("click",function(){return f.Ec(t),f.gc(2).confContentPendingLogin(1)}),f.Rc(2,Ae,3,0,"span",32),f.Tc(3," Ch\u1ea5p nh\u1eadn "),f.Ub(),f.Vb(4,"button",41),f.cc("click",function(){return f.Ec(t),f.gc(2).confContentPendingLogin(2)}),f.Rc(5,xe,3,0,"span",32),f.Tc(6," T\u1eeb ch\u1ed1i "),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(1),f.nc("disabled",t.isLoadingBtn||t.textResultErr),f.Db(1),f.nc("ngIf",t.isLoadingBtn),f.Db(2),f.nc("disabled",t.isLoadingBtn||t.textResultErr),f.Db(1),f.nc("ngIf",t.isLoadingBtn)}}function Pe(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"button",42),f.cc("click",function(){return f.Ec(t),f.gc(2).backScanActionWithIsLogin()}),f.Tc(2,"Quay l\u1ea1i"),f.Ub(),f.Ub()}}function De(t,e){if(1&t&&(f.Vb(0,"div",29),f.Vb(1,"div",30),f.Vb(2,"div",31),f.Rc(3,Ue,4,1,"span",32),f.Ub(),f.Rc(4,Ce,5,0,"div",32),f.Rc(5,Se,2,1,"div",33),f.Rc(6,ke,2,1,"div",34),f.Rc(7,Oe,7,4,"div",35),f.Rc(8,Pe,3,0,"div",32),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(3),f.nc("ngIf",t.nameSessionConfirm),f.Db(1),f.nc("ngIf",t.isLoadingBtn),f.Db(1),f.nc("ngIf",t.textResultErr),f.Db(1),f.nc("ngIf",t.textResultSuss),f.Db(1),f.nc("ngIf",!t.textResultSuss||!t.isConfirmBtn),f.Db(1),f.nc("ngIf",t.isLogin&&!1===t.isLoadingBtn&&!0===t.isConfirmBtn)}}function Te(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",46),f.cc("click",function(){return f.Ec(t),f.gc(2).createRequestLoginHashCodeAction()}),f.Vb(1,"div",47),f.Vb(2,"div"),f.Vb(3,"mat-icon"),f.Tc(4,"sync"),f.Ub(),f.Ub(),f.Vb(5,"div"),f.Tc(6,"T\u1ea1o m\u1edbi m\xe3"),f.Ub(),f.Ub(),f.Ub()}}function Me(t,e){if(1&t){const t=f.Wb();f.Vb(0,"azt-create-qr-image",48,49),f.cc("expiredAction",function(){return f.Ec(t),f.gc(2).expiredQrcodeAction()}),f.Ub()}if(2&t){const t=f.gc(2);f.nc("content",t.contentCreateQrcode)("width",350)("height",350)("expired",t.durationQrcodeExpire)}}function Re(t,e){if(1&t&&(f.Vb(0,"div",43),f.Rc(1,Te,7,0,"div",44),f.Rc(2,Me,2,4,"azt-create-qr-image",45),f.Ub()),2&t){const t=f.gc();f.Db(1),f.nc("ngIf",!1===t.isLogin&&!t.contentCreateQrcode),f.Db(1),f.nc("ngIf",t.contentCreateQrcode)}}function Ie(t,e){if(1&t){const t=f.Wb();f.Vb(0,"a",50),f.cc("click",function(){return f.Ec(t),f.gc().downloadQrCode()}),f.Vb(1,"mat-icon"),f.Tc(2,"download"),f.Ub(),f.Tc(3," T\u1ea3i xu\u1ed1ng m\xe3"),f.Ub()}}function Qe(t,e){1&t&&(f.Vb(0,"div",16),f.Vb(1,"span"),f.Tc(2,"- HO\u1eb6C B\u1ea0N C\xd3 TH\u1ec2 -"),f.Ub(),f.Ub())}function Le(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",16),f.Vb(1,"a",51),f.cc("click",function(){return f.Ec(t),f.gc().switchModeView()}),f.Vb(2,"span",52),f.Vb(3,"mat-icon",53),f.Tc(4,"center_focus_strong"),f.Ub(),f.Tc(5," Qu\xe9t m\xe3 QR c\xf3 s\u1eb5n"),f.Ub(),f.Ub(),f.Ub()}}function Ee(t,e){if(1&t&&(f.Vb(0,"div",37),f.Tc(1),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.Uc(t.textResultErr)}}function Be(t,e){if(1&t&&(f.Vb(0,"div",38),f.Tc(1),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.Uc(t.textResultSuss)}}function je(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",28),f.Tc(2,"\xa0"),f.Ub())}function qe(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",39),f.Vb(1,"button",40),f.cc("click",function(){return f.Ec(t),f.gc(2).confContentLogin()}),f.Rc(2,je,3,0,"span",32),f.Tc(3," \u0110\u0103ng nh\u1eadp "),f.Ub(),f.Vb(4,"button",41),f.cc("click",function(){return f.Ec(t),f.gc(2).reopenScanCamInit()}),f.Tc(5,"Th\u1eed l\u1ea1i"),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(1),f.nc("disabled",t.isLoadingBtn||t.textResultErr),f.Db(1),f.nc("ngIf",t.isLoadingBtn),f.Db(2),f.nc("disabled",t.isLoadingBtn)}}function Fe(t,e){if(1&t&&(f.Vb(0,"div",29),f.Vb(1,"div",30),f.Vb(2,"div",31),f.Tc(3,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),f.Qb(4,"br"),f.Tc(5,"v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n"),f.Ub(),f.Rc(6,Ee,2,1,"div",33),f.Rc(7,Be,2,1,"div",34),f.Rc(8,qe,6,3,"div",35),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(6),f.nc("ngIf",t.textResultErr),f.Db(1),f.nc("ngIf",t.textResultSuss),f.Db(1),f.nc("ngIf",!t.textResultSuss)}}function ze(t,e){1&t&&(f.Vb(0,"div"),f.Qb(1,"span",28),f.Tc(2,"\xa0 "),f.Vb(3,"span",36),f.Tc(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),f.Ub(),f.Ub())}function Ne(t,e){if(1&t&&f.Qb(0,"div",56),2&t){const t=f.gc(2);f.nc("innerHTML",t.textResultErr,f.Fc)}}function We(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",28),f.Tc(2,"\xa0"),f.Ub())}function He(t,e){if(1&t&&(f.Vb(0,"button",57),f.Rc(1,We,3,0,"span",32),f.Tc(2),f.Ub()),2&t){const t=f.gc(2);f.nc("disabled",!t.textResultSuss),f.Db(1),f.nc("ngIf",t.isLoadingBtn),f.Db(1),f.Vc(" ",t.textResultSuss," ")}}function Ge(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",29),f.Vb(1,"div",30),f.Vb(2,"div",31),f.Vb(3,"span"),f.Tc(4,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),f.Qb(5,"br"),f.Tc(6),f.Ub(),f.Ub(),f.Rc(7,ze,5,0,"div",32),f.Rc(8,Ne,1,1,"div",54),f.Vb(9,"div",39),f.Rc(10,He,3,3,"button",55),f.Vb(11,"button",41),f.cc("click",function(){return f.Ec(t),f.gc().reopenScanCamInit()}),f.Tc(12,"Th\u1eed l\u1ea1i"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc();f.Db(6),f.Vc("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",t.nameSessionConfirm,""),f.Db(1),f.nc("ngIf",t.isLoadingBtn),f.Db(1),f.nc("ngIf",t.textResultErr),f.Db(2),f.nc("ngIf",!t.textResultSuss&&t.isLoadingBtn),f.Db(1),f.nc("disabled",t.isLoadingBtn)}}const Ye=function(t){return[t]},Ze=function(t){return{return_url:t,user_click:"true"}},Ke=function(t){return{"d-none":t}},Je=function(t){return{return_url:t}};let $e=(()=>{class t extends m.a{constructor(t,e,n,i,o,r){super(t),this.commonService=t,this.baseApiService=e,this.localStorageObjetct=n,this.activeRoute=i,this.qrCodeLoginService=o,this.redirectService=r,this.returnUrl="",this.isLogin=!1,this.modeShowInit="create",this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.pendingDuration=!1,this.role=0,this.backLink=""}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}reloadLogin(){this.isLogin&&this.redirectService.redirectToDashboard()}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-login")}switchModeView(){this.modeShowInit="create"===this.modeShowInit?"scan":"create",this.elementaztScanQrcode&&("scan"===this.modeShowInit?(this.elementaztScanQrcode.initScanCam(),this.clearLoopRefLogin(),this.clearLoopPendingLogin()):(this.elementaztScanQrcode.unInitSscanCam(),this.initLoopRefLogin(),this.initPendingLoadingConfirm()))}clearLoopPendingLogin(){this.loopPendingLogin&&clearInterval(this.loopPendingLogin)}clearLoopRefLogin(){this.loopRefCheckQrcodeLogin&&clearInterval(this.loopRefCheckQrcodeLogin)}reopenScanCamInit(){this.textResultErr="",this.textResultSuss="",this.elementaztScanQrcode&&(this.elementaztScanQrcode.initScanCam(),this.sussScanNextConf=!1)}backScanActionWithIsLogin(){this.isLogin&&(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.createQrCodeWithUser())}expiredQrcodeAction(){this.pendingDuration||(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.isLogin?(this.createQrCodeWithUser(),this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, \u0111\xe3 t\u1ea1o m\xe3 qrcode m\u1edbi. Vui l\xf2ng thao t\xe1c l\u1ea1i.")):this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, vui l\xf2ng t\u1ea1o m\u1edbi v\xe0 thao t\xe1c l\u1ea1i."))}createQrCodeWithUser(){this.initStatusObj(),this.subscriptions.add(this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeGet().subscribe(t=>{var e,n,i,o;1==t.success?(this.successStatusObj(),this.contentCreateQrcode=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"",this.durationQrcodeExpire=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.duration)&&void 0!==o?o:0,this.initPendingLoadingConfirm()):this.errorStatusObj("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u",!0)}))}outContentScan(t){var e;null!==t?(this.scanQrContent=t,this.sussScanNextConf=!0,this.isLogin||(null===(e=this.elementaztScanQrcode)||void 0===e||e.pauseScanQrcode(),this.isLoadingBtn=!0,this.textResultSuss="",this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeRequestPost({qrCode:this.scanQrContent}).subscribe(t=>{var e,n,i,o;this.isLoadingBtn=!1,console.log(t),1==t.success?(this.isLoadingBtn=!0,this.scanQrContentConfirm=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"",this.nameSessionConfirm=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",this.textResultSuss="",this.initLoopPendingLogin()):(this.textResultSuss="",this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.")}))):(this.sussScanNextConf=!0,this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng \u0111\xfang. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",""))}initLoopPendingLogin(){this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginCheckLoginQrCodeRequestConfirmedPost({qrCode:this.scanQrContentConfirm}).subscribe(t=>{var e,n;1==t.success&&(1==(null===(e=t.data)||void 0===e?void 0:e.status)?(this.clearLoopPendingLogin(),this.commonService.gaEvent("sign_in_login_in"),this.isLoadingBtn=!1,this.textResultSuss="",this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng.",!0),this.baseApiService.redirectLoginByRole(null!==(n=this.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:"")):t.data&&2===t.data.status&&(this.clearLoopPendingLogin(),this.isLoadingBtn=!1,this.errorStatusObj("X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",!0),this.textResultErr="X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i.<br/> M\xe3 Qr kh\xf4ng c\xf2n ho\u1ea1t \u0111\u1ed9ng.<br/> Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi \u0111\u1ec3 \u0111\u0103ng nh\u1eadp l\u1ea1i.",this.textResultSuss=""))})},3e3)}initPendingLoadingConfirm(){this.isLogin&&(this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginGetFirstQrCodeLoginRequestGet().subscribe(t=>{var e,n,i,o;1==t.success&&t.data&&""!==t.data.qrCode&&(this.pendingDuration=!0,this.scanQrContentConfirm=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"",this.nameSessionConfirm=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",this.clearLoopPendingLogin())})},3e3))}confContentPendingLogin(t){this.isLogin&&(this.isLoadingBtn=!0,this.qrCodeLoginService.apiQrCodeLoginConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContentConfirm,status:t}).subscribe(e=>{1==e.success?this.textResultSuss=1==t?"X\xe1c nh\u1eadn th\xe0nh c\xf4ng":"T\u1eeb ch\u1ed1i th\xe0nh c\xf4ng":this.textResultErr="H\u1ec7 th\u1ed1ng kh\xf4ng ph\u1ea3n h\u1ed3i. Vui l\xf2ng t\u1ea3i l\u1ea1i trang \u0111\u1ec3 th\u1eed l\u1ea1i.",this.isConfirmBtn=!0,this.isLoadingBtn=!1}))}createRequestLoginHashCodeAction(){this.isLogin||this.qrCodeLoginService.apiQrCodeLoginAnonymousCreateLoginQrCodePost().subscribe(t=>{var e,n,i,o,r,s;1==t.success&&(this.contentCreateQrcode=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.qrCode)&&void 0!==n?n:"",this.nameSessionConfirm=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",this.durationQrcodeExpire=null!==(s=null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.duration)&&void 0!==s?s:0,this.initLoopRefLogin())})}initLoopRefLogin(){0==this.isLogin&&(this.loopRefCheckQrcodeLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginAnonymousCheckLoginQrCodeRequestConfimedPost({qrCode:this.contentCreateQrcode,status:0}).subscribe(t=>{var e,n;1===t.success&&404!=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.status)&&(this.commonService.gaEvent("sign_in_login_in"),this.commonService.snackSuccess("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng."),this.baseApiService.redirectLoginByRole(null!==(n=this.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:""))})},3e3))}confContentLogin(){this.isLoadingBtn=!0,this.isLogin&&this.qrCodeLoginService.apiQrCodeLoginAnonymousConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContent,status:1}).subscribe(t=>{this.isLoadingBtn=!1,1===t.success?this.textResultSuss="X\xe1c nh\u1eadn th\xe0nh c\xf4ng. Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c ph\xea duy\u1ec7t":this.textResultErr="Thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp ho\u1eb7c m\xe3 \u0111\u0103ng nh\u1eadp kh\xf4ng h\u1ee3p l\u1ec7. Vui l\xf2ng ki\u1ec3m tra v\xe0 thao t\xe1c l\u1ea1i"})}ngOnInit(){var t,e=null!==(t=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==t?t:"0";switch(this.role=parseInt(e,10),this.role){case 0:this.backLink="/admin/testbank/dashboard";break;case 1:this.backLink="/student/dashboard/0";break;case 2:this.backLink="/auth/login"}this.isLogin=this.baseApiService.isLogin(),this.isLogin&&this.createQrCodeWithUser(),this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.clearLoopRefLogin(),this.clearLoopPendingLogin(),super.ngDestroy()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(v.a),f.Pb(_.a),f.Pb(Pt.a),f.Pb(r.a),f.Pb(me.a),f.Pb(w.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-login"]],viewQuery:function(t,e){if(1&t&&(f.cd(pe,!0),f.cd(fe,!0)),2&t){let t;f.zc(t=f.dc())&&(e.elementCreateQr=t.first),f.zc(t=f.dc())&&(e.elementaztScanQrcode=t.first)}},features:[f.Ab],decls:39,vars:37,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6","mb-5"],["class","text-center",4,"ngIf"],[1,"card"],[1,"text-center","loginscan__card-header"],[1,"back-btn",2,"font-size","16px","color","#6d6d6d",3,"routerLink","queryParams"],[2,"font-size","16px","color","#6d6d6d","font-weight","500"],[1,"loginscan__card-body"],[1,"loginscan_createmode",3,"ngClass"],["class","text-center mb-3",4,"ngIf"],["class","text-center mb-3 block-inline-center",4,"ngIf"],["class","loginscan_scanmode_conf",4,"ngIf"],["class","loginscan__card-img",4,"ngIf"],[1,"text-center","mt-3"],["class","link-center",3,"click",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[1,"loginscan_scanmode",3,"ngClass"],[1,"text-center","mb-3"],[3,"routerLink","queryParams"],[1,"loginscan_scanmode_cam",3,"ngClass"],[3,"outContentScan"],["aztScanQrcode",""],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],[1,"text-center","mb-3","block-inline-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"loginscan_scanmode_conf"],[1,"loginscan_scanmode_conf--box"],[1,"boxtext"],[4,"ngIf"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336",4,"ngIf"],["class","boxtext-suss","style","font-size: 20px; margin-bottom: 20px; color: #009688",4,"ngIf"],["class","mt-3",4,"ngIf"],[2,"font-size","18px"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336"],[1,"boxtext-suss",2,"font-size","20px","margin-bottom","20px","color","#009688"],[1,"mt-3"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled","click"],["type","button",1,"btn","btn-warning",3,"disabled","click"],["type","button",1,"btn","btn-primary","mr-3",3,"click"],[1,"loginscan__card-img"],["class","box-create-login-img",3,"click",4,"ngIf"],[3,"content","width","height","expired","expiredAction",4,"ngIf"],[1,"box-create-login-img",3,"click"],[1,"box-create-login-content"],[3,"content","width","height","expired","expiredAction"],["elementCreateQr",""],[1,"link-center",3,"click"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"link-center"],[1,"mr-1"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336; line-height: 30px",3,"innerHTML",4,"ngIf"],["type","button","class","btn btn-primary mr-3",3,"disabled",4,"ngIf"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336","line-height","30px",3,"innerHTML"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"div",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Vb(4,"div",4),f.Rc(5,ve,3,3,"h2",5),f.Vb(6,"div",6),f.Vb(7,"div",7),f.Vb(8,"a",8),f.hc(9,"localize"),f.Vb(10,"mat-icon"),f.Tc(11,"arrow_back"),f.Ub(),f.Ub(),f.Vb(12,"span",9),f.Tc(13,"\u0110\u0103ng nh\u1eadp v\u1edbi m\xe3 qr code"),f.Ub(),f.Ub(),f.Vb(14,"div",10),f.Vb(15,"div",11),f.Rc(16,_e,2,0,"div",12),f.Rc(17,ye,2,0,"div",12),f.Rc(18,we,3,1,"div",13),f.Rc(19,Ve,3,0,"div",13),f.Rc(20,De,9,6,"div",14),f.Rc(21,Re,3,2,"div",15),f.Vb(22,"div",16),f.Rc(23,Ie,4,0,"a",17),f.Ub(),f.Rc(24,Qe,3,0,"div",18),f.Rc(25,Le,6,0,"div",18),f.Ub(),f.Vb(26,"div",19),f.Vb(27,"div",20),f.Tc(28,"Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode \u0111\u0103ng nh\u1eadp ( "),f.Vb(29,"a",21),f.hc(30,"localize"),f.Tc(31,"H\u01b0\u1edbng d\u1eabn"),f.Ub(),f.Tc(32," )"),f.Ub(),f.Vb(33,"div",22),f.Vb(34,"azt-scan-qrcode",23,24),f.cc("outContentScan",function(t){return e.outContentScan(t)}),f.Ub(),f.Ub(),f.Rc(36,Fe,9,3,"div",14),f.Rc(37,Ge,13,5,"div",14),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(38,"div",3),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(5),f.nc("ngIf",!e.isLogin),f.Db(3),f.nc("routerLink",f.tc(23,Ye,f.ic(9,19,e.backLink)))("queryParams",f.tc(25,Ze,e.returnUrl)),f.Db(7),f.nc("ngClass",f.tc(27,Ke,"create"!==e.modeShowInit)),f.Db(1),f.nc("ngIf",!e.isLogin),f.Db(1),f.nc("ngIf",e.isLogin),f.Db(1),f.nc("ngIf",!e.isLogin&&e.contentCreateQrcode),f.Db(1),f.nc("ngIf",e.isLogin&&e.contentCreateQrcode&&!e.scanQrContentConfirm),f.Db(1),f.nc("ngIf",e.scanQrContentConfirm&&e.isLogin),f.Db(1),f.nc("ngIf",!e.scanQrContentConfirm),f.Db(2),f.nc("ngIf",e.contentCreateQrcode&&!e.scanQrContentConfirm),f.Db(1),f.nc("ngIf",!e.scanQrContentConfirm),f.Db(1),f.nc("ngIf",!e.scanQrContentConfirm),f.Db(1),f.nc("ngClass",f.tc(29,Ke,"scan"!==e.modeShowInit)),f.Db(3),f.nc("routerLink",f.tc(31,Ye,f.ic(30,21,"/auth/register")))("queryParams",f.tc(33,Je,e.returnUrl)),f.Db(4),f.nc("ngClass",f.tc(35,Ke,!1!==e.sussScanNextConf)),f.Db(3),f.nc("ngIf",!0===e.sussScanNextConf&&e.isLogin),f.Db(1),f.nc("ngIf",!0===e.sussScanNextConf&&!e.isLogin))},directives:[i.m,r.k,U.a,i.k,Bt,ne],pipes:[l.d,A.f],styles:[".loginscan__card-header[_ngcontent-%COMP%]{padding:15px;text-transform:uppercase;display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-body[_ngcontent-%COMP%]{padding:15px}.loginscan__card-img[_ngcontent-%COMP%], .loginscan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.loginscan__card-video[_ngcontent-%COMP%]{position:relative}.loginscan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.loginscan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.43137254901960786);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.box-create-login-img[_ngcontent-%COMP%], .link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.box-create-login-img[_ngcontent-%COMP%]{height:100px;background:#f5f5f5;border:1px solid #e0e0e0;padding:10px;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.box-create-login-img[_ngcontent-%COMP%]:hover{background:#eceff1}.box-create-login-content[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf[_ngcontent-%COMP%]{width:100%;background:#e0f2f1;padding:10px;display:flex;align-items:center;justify-content:center;height:300px}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]   .boxtext[_ngcontent-%COMP%]{font-size:20px;line-height:30px;margin-bottom:20px}.block-inline-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.back-btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:14px}.back-btn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),t})();var Xe=n("jCJ1");function tn(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",13),f.Vb(2,"div",14),f.Vb(3,"span",15),f.Tc(4),f.hc(5,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.Vc("",f.ic(5,1,"lang_cms_common_loading"),"..."))}function en(t,e){1&t&&(f.Vb(0,"div",37),f.Vb(1,"div"),f.Tc(2,"Vui l\xf2ng nh\u1eadp \u0111\xfang S\u0110T."),f.Ub(),f.Ub())}function nn(t,e){1&t&&(f.Vb(0,"div",37),f.Vb(1,"div"),f.Tc(2,"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u."),f.Ub(),f.Ub())}function on(t,e){if(1&t&&(f.Vb(0,"div",20),f.Vb(1,"label",38),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Ub()),2&t){const t=f.gc(3);f.Db(2),f.Vc("*** ",f.ic(3,1,t.statusObj.errorMessage),"")}}function rn(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",39),f.Tc(2,"\xa0"),f.Ub())}const sn=function(t){return[t]},cn=function(t){return{return_url:t,user_click:"true"}};function an(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",16),f.Vb(2,"a",17),f.cc("click",function(){return f.Ec(t),f.gc(2).loginZalo()}),f.Qb(3,"img",18),f.hc(4,"convertCdn"),f.Vb(5,"span"),f.Tc(6,"\u0110\u0103ng nh\u1eadp b\u1eb1ng Zalo"),f.Ub(),f.Ub(),f.Qb(7,"br"),f.Qb(8,"br"),f.Vb(9,"div",6),f.Vb(10,"span",19),f.Tc(11,"- HO\u1eb6C -"),f.Ub(),f.Ub(),f.Qb(12,"br"),f.Ub(),f.Vb(13,"div",20),f.Vb(14,"div",21),f.Vb(15,"div",22),f.Qb(16,"input",23),f.Vb(17,"div",24),f.Vb(18,"span",25),f.Vb(19,"mat-icon"),f.Tc(20,"phone_enabled"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(21,en,3,0,"div",26),f.Ub(),f.Ub(),f.Vb(22,"div",20),f.Vb(23,"div",21),f.Vb(24,"div",22),f.Qb(25,"input",27),f.Vb(26,"div",24),f.Vb(27,"span",25),f.Vb(28,"mat-icon"),f.Tc(29,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(30,nn,3,0,"div",26),f.Ub(),f.Ub(),f.Rc(31,on,4,3,"div",28),f.Vb(32,"div",20),f.Vb(33,"div",29),f.Vb(34,"div",16),f.Vb(35,"button",30),f.cc("click",function(){return f.Ec(t),f.gc(2).login()}),f.Rc(36,rn,3,0,"span",12),f.Tc(37,"\u0110\u0103ng nh\u1eadp "),f.Ub(),f.Vb(38,"a",31),f.hc(39,"mylocalize"),f.Vb(40,"mat-icon",32),f.Tc(41,"center_focus_strong"),f.Ub(),f.Vb(42,"span"),f.Tc(43,"\u0110\u0103ng nh\u1eadp b\u1eb1ng m\xe3 Qrcode"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(44,"div",33),f.Vb(45,"a",34),f.hc(46,"localize"),f.Tc(47,"\u0110\u0103ng k\xfd th\xe0nh vi\xean m\u1edbi"),f.Ub(),f.Ub(),f.Vb(48,"div",35),f.Vb(49,"a",36),f.cc("click",function(){return f.Ec(t),f.gc(2).forgotPassword()}),f.Tc(50,"Qu\xean m\u1eadt kh\u1ea9u?"),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(3),f.nc("src",f.ic(4,9,"azota_assets/images/zaloicon.png"),f.Ic),f.Db(18),f.nc("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched)),f.Db(9),f.nc("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),f.Db(1),f.nc("ngIf",t.statusObj.errorMessage),f.Db(4),f.nc("disabled",t.statusObj.loading),f.Db(1),f.nc("ngIf",t.statusObj.loading),f.Db(2),f.nc("routerLink",f.tc(15,sn,f.ic(39,11,"/auth/login-scan/2"))),f.Db(7),f.nc("routerLink",f.tc(17,sn,f.ic(46,13,"/auth/register")))("queryParams",f.tc(19,cn,t.returnUrl))}}function dn(t,e){if(1&t&&(f.Vb(0,"div",1),f.Vb(1,"form",2),f.Vb(2,"div",3),f.Qb(3,"div",4),f.Vb(4,"div",5),f.Vb(5,"h2",6),f.Qb(6,"img",7),f.hc(7,"convertCdn"),f.Ub(),f.Vb(8,"div",8),f.Vb(9,"div",9),f.Vb(10,"span",10),f.Tc(11,"\u0110\u0103ng nh\u1eadp"),f.Ub(),f.Ub(),f.Vb(12,"div",11),f.Rc(13,tn,6,3,"div",12),f.Rc(14,an,51,21,"div",12),f.Ub(),f.Ub(),f.Ub(),f.Qb(15,"div",4),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(1),f.nc("formGroup",t.form),f.Db(5),f.nc("src",f.ic(7,4,"azota_assets/images/logo.svg"),f.Ic),f.Db(7),f.nc("ngIf",t.statusObj.loading),f.Db(1),f.nc("ngIf",!t.statusObj.loading)}}let ln=(()=>{class t extends m.a{constructor(t,e,n,i,r,s){super(e),this.formBuilder=t,this.commonService=e,this.baseApiService=n,this.localStorageObjetct=i,this.authService=r,this.recaptchaV3Service=s,this.form=new o.k({}),this.zaloAccessTkn="",this.mAccessTkn="",this.returnUrl="",this.zaloLoginUrl="",this.loginByToken=!0,this.initStatusObj()}executeImportantAction(){return new Promise(t=>{this.recaptchaV3Service.execute("importantAction").subscribe(e=>{t(e)})})}getError(t){return!(!this.form.controls[t]||!this.form.controls[t].errors)&&this.form.controls[t].errors}loginZalo(){this.commonService.gaEvent("sign_in_click_sign_in_by_zalo"),window.location.href=this.zaloLoginUrl}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}login(){this.form.valid&&(this.initStatusObj(),this.commonService.gaEvent("sign_in_login_in"),this.executeImportantAction().then(t=>{var e=this.commonService.getFormObj(this.form);this.subscriptions.add(this.authService.apiAuthLoginWebPost({phone:e.phone,password:e.password,tokenCaptcha:t}).subscribe(t=>{var e,n;1==t.success?(this.localStorageObjetct.clearAllCache(),this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:""),this.successStatusObj()):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))}))}loginAnonymous(){this.initStatusObj(),this.commonService.gaEvent("sign_in_login_anonymous"),this.executeImportantAction().then(t=>{this.subscriptions.add(this.authService.apiAuthLoginAnonymousFromWebV2Post({tokenCaptcha:t}).subscribe(t=>{var e,n;1==t.success?(this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:""),this.successStatusObj()):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))})}loginWithZaloAccessToken(t){var e,n=this.parseJwt(t);if(n){var i=this.baseApiService.getUserObj();i.id=n.hasOwnProperty("id")?n.id:i.id,i.avatar=n.hasOwnProperty("avatar")?n.avatar:i.avatar,i.email=n.hasOwnProperty("email")?n.email:i.email,i.fullName=n.hasOwnProperty("full_name")?n.full_name:i.fullName,i.password=n.hasOwnProperty("password")?n.password:i.password,i.phone=n.hasOwnProperty("phone")?n.phone:i.phone,i.roles=n.hasOwnProperty("roles")?n.roles:i.roles,i.zaloId=n.hasOwnProperty("zalo_id")?n.zalo_id:i.zaloId,i.birthday=n.hasOwnProperty("birthday")?n.birthday:i.birthday,i.gender=n.hasOwnProperty("gender")?n.gender:i.gender,i.amount=n.hasOwnProperty("amount")?n.amount:i.amount,i.rememberToken=t,this.baseApiService.saveUserObj(i),this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"")}else this.errorStatusObj("lang_core_invalid_login_token"),this.loginByToken=!1}parseJwt(t){var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return this.commonService.parseJson(n)}ngOnInit(){var t,e,n,i;if(this.zaloAccessTkn=null!==(t=this.commonService.getMyQueryParam("zaccess_token"))&&void 0!==t?t:"",this.mAccessTkn=null!==(e=this.commonService.getMyQueryParam("access_token"))&&void 0!==e?e:"",!this.commonService.getMyQueryParam("not_register")&&this.zaloAccessTkn)this.loginByToken=!0,this.loginWithZaloAccessToken(this.zaloAccessTkn);else if(!this.commonService.getMyQueryParam("not_register")&&this.mAccessTkn)this.loginByToken=!0,this.loginWithZaloAccessToken(this.mAccessTkn);else{this.loginByToken=!1,this.initStatusObj();var r=!1;this.form=this.formBuilder.group({phone:["",[o.A.required,p.a.noWhiteSpace]],password:["",o.A.required]}),this.commonService.getMyQueryParam("not_register")?this.commonService.myNavigation("/auth/register"):this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole()?this.baseApiService.redirectLoginByRole(null!==(n=this.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:""):(this.returnUrl=this.commonService.getMyQueryParam("return_url")||"",-1===this.returnUrl.indexOf("/test/")&&-1===this.returnUrl.indexOf("/de-thi/")&&-1===this.returnUrl.indexOf("/bai-tap/")||"register"==this.commonService.getMyQueryParam("from")?(this.zaloLoginUrl=H.a.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_login=1"),r=!0):this.baseApiService.isLogin()?this.baseApiService.redirectLoginByRole(null!==(i=this.commonService.getMyQueryParam("return_url"))&&void 0!==i?i:""):this.loginAnonymous()),r&&(!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()?this.myNavigation("/student/dashboard/0"):(this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),this.stopStatusObj(),super.ngOnInit()))}}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(o.g),f.Pb(v.a),f.Pb(_.a),f.Pb(Pt.a),f.Pb(y.g),f.Pb(Xe.b))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-login"]],features:[f.Ab],decls:1,vars:1,consts:[["class","container-fluid component-wrap centerBoth hasBg",4,"ngIf"],[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"col-md-12"],[1,"btn","btn-outline-primary","mt-2",2,"width","100%",3,"click"],["alt","Zalo Icon",1,"img-responsive","zalo-icon",3,"src"],[1,"h6","mute-text"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","tel","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password",1,"form-control"],["class","form-group",4,"ngIf"],[2,"display","flex"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],[1,"btn","btn-outline-primary","mt-3",2,"width","100%","display","flex","align-items","center","justify-content","center",3,"routerLink"],[2,"margin-right","10px"],[1,"text-center","mt-3"],[3,"routerLink","queryParams"],[1,"text-center","mt-1"],[2,"color","rgb(216, 2, 2)",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&f.Rc(0,dn,16,6,"div",0),2&t&&f.nc("ngIf",!e.loginByToken)},directives:[i.m,o.C,o.t,o.l,o.d,o.s,o.j,U.a,k.b,r.k],pipes:[A.f,A.v,A.u,l.d],styles:[".checkboxInput[_ngcontent-%COMP%]{padding:5px 15px;font-size:1rem;font-weight:400;line-height:2}.zalo-icon[_ngcontent-%COMP%]{height:30px;margin-right:10px}"]}),t})(),hn=(()=>{class t extends m.a{constructor(t,e,n){super(t),this.commonService=t,this.baseApiService=e,this.redirectService=n}ngOnInit(){this.baseApiService.logout();var t=this.commonService.getMyQueryParam("return_url")||null;t?this.redirectService.redirectSimpleLoginWithReturnUrl(t):this.redirectService.redirectSimpleLogin(),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(v.a),f.Pb(_.a),f.Pb(w.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-register"]],features:[f.Ab],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();var bn=n("1yaQ");function gn(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",13),f.Vb(2,"div",14),f.Vb(3,"span",15),f.Tc(4),f.hc(5,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.Vc("",f.ic(5,1,"lang_cms_common_loading"),"..."))}function un(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",16),f.Vb(1,"div",17),f.cc("click",function(){return f.Ec(t),f.gc().changeRegisterType(1)}),f.Vb(2,"div",18),f.Qb(3,"i",19),f.Vb(4,"p"),f.Tc(5,"T\xf4i l\xe0 h\u1ecdc sinh"),f.Ub(),f.Ub(),f.Ub(),f.Vb(6,"div",17),f.cc("click",function(){return f.Ec(t),f.gc().changeRegisterType(2)}),f.Vb(7,"div",18),f.Qb(8,"img",20),f.hc(9,"convertCdn"),f.Vb(10,"p"),f.Tc(11,"T\xf4i l\xe0 gi\xe1o vi\xean"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}2&t&&(f.Db(8),f.nc("src",f.ic(9,1,"azota_assets/images/teacher.png"),f.Ic))}function mn(t,e){1&t&&(f.Vb(0,"div",53),f.Vb(1,"div"),f.Tc(2,"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean."),f.Ub(),f.Ub())}function pn(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1,"Y\xeau c\u1ea7u nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"),f.Ub())}function fn(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1!"),f.Ub())}function vn(t,e){if(1&t&&(f.Vb(0,"div",53),f.Rc(1,pn,2,0,"div",10),f.Rc(2,fn,2,0,"div",10),f.Ub()),2&t){const t=f.gc(3);f.Db(1),f.nc("ngIf",t.getErrorType("phone","required")),f.Db(1),f.nc("ngIf",t.getErrorType("phone","pattern")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength"))}}function _n(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1,"M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6!"),f.Ub())}function yn(t,e){if(1&t&&(f.Vb(0,"div",53),f.Rc(1,_n,2,0,"div",10),f.Ub()),2&t){const t=f.gc(3);f.Db(1),f.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function wn(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1,"Email b\u1ea1n nh\u1eadp sai \u0111\u1ecbnh d\u1ea1ng!"),f.Ub())}function Vn(t,e){if(1&t&&(f.Vb(0,"div",53),f.Rc(1,wn,2,0,"div",10),f.Ub()),2&t){const t=f.gc(3);f.Db(1),f.nc("ngIf",t.getErrorType("email","email"))}}function Un(t,e){if(1&t&&(f.Vb(0,"div",39),f.Vb(1,"label",54),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Ub()),2&t){const t=f.gc(3);f.Db(2),f.Vc("*** ",f.ic(3,1,t.statusObj.errorMessage),"")}}function Cn(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",55),f.Tc(2,"\xa0"),f.Ub())}function Sn(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",36),f.Vb(1,"form",37),f.Vb(2,"div",27),f.Vb(3,"div",38),f.Vb(4,"div",39),f.Vb(5,"div",40),f.Vb(6,"div",41),f.Qb(7,"input",42),f.Vb(8,"div",43),f.Vb(9,"span",44),f.Vb(10,"mat-icon"),f.Tc(11,"account_box"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(12,mn,3,0,"div",45),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(13,"div",27),f.Vb(14,"div",38),f.Vb(15,"div",39),f.Vb(16,"div",40),f.Vb(17,"div",41),f.Qb(18,"input",46),f.Vb(19,"div",43),f.Vb(20,"span",47),f.Vb(21,"mat-icon"),f.Tc(22,"phone_enabled"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(23,vn,3,2,"div",45),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(24,"div",27),f.Vb(25,"div",38),f.Vb(26,"div",39),f.Vb(27,"div",40),f.Vb(28,"div",41),f.Qb(29,"input",48),f.Vb(30,"div",43),f.Vb(31,"span",49),f.Vb(32,"mat-icon"),f.Tc(33,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(34,yn,2,1,"div",45),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(35,"div",27),f.Vb(36,"div",38),f.Vb(37,"div",39),f.Vb(38,"div",40),f.Vb(39,"div",41),f.Qb(40,"input",50),f.Vb(41,"div",43),f.Vb(42,"span",47),f.Vb(43,"mat-icon"),f.Tc(44,"email"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(45,Vn,2,1,"div",45),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(46,Un,4,3,"div",51),f.Vb(47,"div",39),f.Vb(48,"div",27),f.Vb(49,"div",38),f.Vb(50,"button",52),f.cc("click",function(){f.Ec(t);const e=f.gc(2);return e.form.invalid||e.statusObj.loading||e.registerForTeacher()}),f.Rc(51,Cn,3,0,"span",10),f.Tc(52,"\u0110\u0103ng k\xfd "),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(1),f.nc("formGroup",t.form),f.Db(11),f.nc("ngIf",t.form.controls.fullName.invalid&&(t.form.controls.fullName.dirty||t.form.controls.fullName.touched)),f.Db(11),f.nc("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched)),f.Db(11),f.nc("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),f.Db(11),f.nc("ngIf",t.form.controls.email.invalid&&(t.form.controls.email.dirty||t.form.controls.email.touched)),f.Db(1),f.nc("ngIf",t.statusObj.errorMessage),f.Db(4),f.nc("disabled",t.form.invalid||t.statusObj.loading),f.Db(1),f.nc("ngIf",t.statusObj.loading)}}function kn(t,e){1&t&&(f.Vb(0,"div",63),f.Tc(1,"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean."),f.Ub())}function An(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1,"B\u1ea1n ph\u1ea3i nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),f.Ub())}function xn(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i l\xe0 10 s\u1ed1."),f.Ub())}function On(t,e){if(1&t&&(f.Vb(0,"div",63),f.Rc(1,An,2,0,"div",10),f.Rc(2,xn,2,0,"div",10),f.Ub()),2&t){const t=f.gc(3);f.Db(1),f.nc("ngIf",t.getErrorForm("studentPhone","required")),f.Db(1),f.nc("ngIf",t.getErrorForm("studentPhone","minlength")||t.getErrorForm("studentPhone","maxlength"))}}function Pn(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1,"B\u1ea1n ph\u1ea3i nh\u1eadp m\u1eadt kh\u1ea9u."),f.Ub())}function Dn(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1,"M\u1eadt kh\u1ea9u bao g\u1ed3m 6 k\xfd t\u1ef1."),f.Ub())}function Tn(t,e){if(1&t&&(f.Vb(0,"div",63),f.Rc(1,Pn,2,0,"div",10),f.Rc(2,Dn,2,0,"div",10),f.Ub()),2&t){const t=f.gc(3);f.Db(1),f.nc("ngIf",t.getErrorForm("passWord","required")),f.Db(1),f.nc("ngIf",t.getErrorForm("passWord","minlength"))}}function Mn(t,e){if(1&t&&(f.Vb(0,"div",39),f.Vb(1,"label",54),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Ub()),2&t){const t=f.gc(3);f.Db(2),f.Vc("*** ",f.ic(3,1,t.statusObj.errorMessage),"")}}function Rn(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",55),f.Tc(2,"\xa0"),f.Ub())}function In(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",56),f.Vb(1,"form",57),f.Vb(2,"div",39),f.Qb(3,"input",58),f.Rc(4,kn,2,0,"div",59),f.Ub(),f.Vb(5,"div",39),f.Qb(6,"input",60),f.Rc(7,On,3,2,"div",59),f.Ub(),f.Vb(8,"div",39),f.Qb(9,"input",61),f.Rc(10,Tn,3,2,"div",59),f.Ub(),f.Ub(),f.Rc(11,Mn,4,3,"div",51),f.Qb(12,"br"),f.Vb(13,"button",62),f.cc("click",function(){f.Ec(t);const e=f.gc(2);return e.formRegister.invalid||e.statusObj.loading||e.registerForStudent()}),f.Rc(14,Rn,3,0,"span",10),f.Tc(15," Ho\xe0n Th\xe0nh \u0110\u0103ng K\xfd "),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(1),f.nc("formGroup",t.formRegister),f.Db(3),f.nc("ngIf",t.formRegister.controls.studentFullName.invalid&&(t.formRegister.controls.studentFullName.dirty||t.formRegister.controls.studentFullName.touched)),f.Db(3),f.nc("ngIf",t.formRegister.controls.studentPhone.invalid&&(t.formRegister.controls.studentPhone.dirty||t.formRegister.controls.studentPhone.touched)),f.Db(3),f.nc("ngIf",t.formRegister.controls.passWord.invalid&&(t.formRegister.controls.passWord.dirty||t.formRegister.controls.passWord.touched)),f.Db(1),f.nc("ngIf",t.statusObj.errorMessage),f.Db(2),f.nc("disabled",t.formRegister.invalid||t.statusObj.loading),f.Db(1),f.nc("ngIf",t.statusObj.loading)}}const Qn=function(t){return[t]},Ln=function(t){return{return_url:t,from:"register",user_click:"true"}};function En(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div",21),f.Vb(1,"div",22),f.Vb(2,"div",23),f.Vb(3,"a",24),f.cc("click",function(){return f.Ec(t),f.gc().changeRegisterType(1)}),f.Qb(4,"i",25),f.Tc(5,"\xa0 T\xf4i l\xe0 h\u1ecdc sinh"),f.Ub(),f.Ub(),f.Vb(6,"div",23),f.Vb(7,"a",24),f.cc("click",function(){return f.Ec(t),f.gc().changeRegisterType(2)}),f.Qb(8,"i",26),f.Tc(9,"\xa0 T\xf4i l\xe0 gi\xe1o vi\xean"),f.Ub(),f.Ub(),f.Ub(),f.Vb(10,"div",27),f.Vb(11,"div",28),f.Qb(12,"hr"),f.Ub(),f.Ub(),f.Rc(13,Sn,53,8,"div",29),f.Rc(14,In,16,7,"div",30),f.Vb(15,"div",31),f.Tc(16,'B\u1eb1ng c\xe1ch \u1ea5n v\xe0o n\xfat "\u0110\u0102NG K\xdd", t\xf4i \u0111\u1ed3ng \xfd v\u1edbi '),f.Vb(17,"a",32),f.Tc(18," \u0110i\u1ec1u Kho\u1ea3n S\u1eed D\u1ee5ng "),f.Ub(),f.Tc(19," v\xe0 "),f.Vb(20,"a",32),f.Tc(21," Ch\xednh S\xe1ch B\u1ea3o M\u1eadt c\u1ee7a AZOTA."),f.Ub(),f.Ub(),f.Vb(22,"div",33),f.Vb(23,"p",34),f.Tc(24,"B\u1ea1n \u0111\xe3 c\xf3 t\xe0i kho\u1ea3n?"),f.Ub(),f.Vb(25,"p"),f.Vb(26,"a",35),f.hc(27,"localize"),f.Tc(28,"\u0110\u0103ng nh\u1eadp"),f.Ub(),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc();f.nc("hidden",t.isShowOption),f.Db(3),f.Hb("select-style-active",t.isStudent),f.Db(4),f.Hb("select-style-active",t.isTeacher),f.Db(6),f.nc("ngIf",1==t.isTeacher),f.Db(1),f.nc("ngIf",1==t.isStudent),f.Db(12),f.nc("routerLink",f.tc(11,Qn,f.ic(27,9,"/auth/login")))("queryParams",f.tc(13,Ln,t.returnUrl))}}const Bn={parse:{dateInput:"LL"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let jn=(()=>{class t extends m.a{constructor(t,e,n,i,r,s,c){super(i),this.formBuilder=t,this.activeRoute=e,this.titleCasePipe=n,this.commonService=i,this.baseApiService=r,this.recaptchaV3Service=s,this.authService=c,this.form=new o.k({}),this.formRegister=new o.k({}),this.returnUrl="",this.zaloLoginUrl="",this.isHiddenFormRegister=!0,this.isTeacher=!1,this.isStudent=!1,this.yesterday=new Date,this.isShowOption=!0,this.isShowRegisterForStudent=!1,this.isShowRegisterForTeacher=!1,this.initStatusObj()}executeImportantAction(){return new Promise(t=>{this.recaptchaV3Service.execute("importantAction").subscribe(e=>{t(e)})})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}getErrorForm(t,e){var n,i;return!!(null===(n=this.formRegister.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.formRegister.controls[t].errors)||void 0===i?void 0:i[e])}goToConfirm(){var t;this.returnUrl=null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:"";var e="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=confirm_phone_register";this.commonService.myNavigationWithQueryString("/auth/checking_service",e)}changeRegisterType(t){this.isShowOption=!1,1==t?(this.commonService.gaEvent("sign_up_switch_to_student"),this.isTeacher=!1,this.isStudent=!0):(this.commonService.gaEvent("sign_up_switch_to_teacher"),this.isTeacher=!0,this.isStudent=!1)}loginZalo(){this.commonService.gaEvent("sign_up_teacher_by_zalo"),window.location.href=this.zaloLoginUrl}registerForTeacher(){this.form.valid&&this.executeImportantAction().then(t=>{var e=this.commonService.getFormObj(this.form);this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRegisterPost({fullName:e.fullName,phone:e.phone,email:e.email,password:e.password,tokenCaptcha:t}).subscribe(t=>{var e,n;1==t.success?(this.commonService.gaEvent("sign_up_teacher"),this.successStatusObj(),this.baseApiService.redirectLoginByRoleForRegister(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"")):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))})}registerForStudent(){this.executeImportantAction().then(t=>{this.commonService.gaEvent("sign_up_student");var e=this.commonService.getFormObj(this.formRegister);this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRegisterForStudentPost({phone:e.studentPhone,fullName:e.studentFullName,password:e.passWord,tokenCaptcha:t}).subscribe(t=>{var e,n;1==t.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole(null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"")):this.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))})}ngOnInit(){var t;if(this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole())this.baseApiService.redirectLoginByRole("");else{var e=this.commonService.getMyParam(this.activeRoute,"type");if(null!=e){var n=parseInt(null==e?void 0:e.toString(),10);this.changeRegisterType(0==n?0:1)}this.yesterday.setDate(this.yesterday.getDate()-1),this.form=this.formBuilder.group({fullName:["",[o.A.required,p.a.noWhiteSpace]],phone:["",[o.A.required,o.A.pattern("^[0-9]*$"),o.A.minLength(10),o.A.maxLength(10)]],password:["",[o.A.required,o.A.minLength(6)]],email:["",o.A.email]}),this.formRegister=this.formBuilder.group({studentPhone:["",[o.A.required,o.A.pattern("^[0-9]*$"),o.A.minLength(10),o.A.maxLength(10)]],studentFullName:["",[o.A.required,p.a.noWhiteSpace]],passWord:["",[o.A.required,o.A.minLength(6)]]}),null===(t=this.form.get("fullName"))||void 0===t||t.valueChanges.subscribe(t=>{var e=this.titleCasePipe.transform(t);t!=e&&this.form.controls.fullName.setValue(e)}),this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getLocalRouter("/admin/testbank/dashboard"),this.zaloLoginUrl=H.a.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_register=1"),!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()&&this.myNavigation("/student/dashboard/0"),this.commonService.translateMetaData({title:"lang_cms_auth_register_title",description:"lang_cms_auth_register_description",image:"lang_cms_test_image"}),this.stopStatusObj()}super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(o.g),f.Pb(r.a),f.Pb(i.v),f.Pb(v.a),f.Pb(_.a),f.Pb(Xe.b),f.Pb(y.g))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-register"]],features:[f.Cb([i.v,{provide:b.c,useClass:bn.b,deps:[b.f]},{provide:b.e,useValue:Bn}]),f.Ab],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"row","py-5"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],["class","row","style","justify-content: space-around",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"row",2,"justify-content","space-around"],[1,"col-sm-4","border-card","mb-3",3,"click"],[1,"df-logo"],[1,"fas","fa-graduation-cap","pb-3",2,"font-size","36px"],["width","36px","height","45px",1,"mb-3",3,"src"],[3,"hidden"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-6","text-center","mb-3"],[1,"clickable","select-style",3,"click"],[1,"fas","fa-graduation-cap"],[1,"fas","fa-user-alt"],[1,"row"],[1,"col-12"],["id","teacher",4,"ngIf"],["id","chilren",4,"ngIf"],[1,"mt-2",2,"text-align","justify","font-size","13px"],["href","/privacy/index.html","target","_blank"],[1,"text-center","mt-3"],[1,"text-normal"],[3,"routerLink","queryParams"],["id","teacher"],[1,"form-horizontal",3,"formGroup"],[1,"col-sm-12"],[1,"form-group"],[1,"col-sm-12","p-0"],[1,"input-group","mb-3"],["type","text","placeholder","H\u1ecd t\xean","formControlName","fullName","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","phone","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","new-password",1,"form-control"],["id","basic-addon2",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password","autocomplete","new-password",1,"form-control"],["id","basic-addon3",1,"input-group-text"],["type","phone","placeholder","Email (kh\xf4ng b\u1eaft bu\u1ed9c nh\u1eadp)","formControlName","email","autocomplete","new-password",1,"form-control"],["class","form-group",4,"ngIf"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],["id","chilren"],["autocomplete","off",1,"form-horinzal",3,"formGroup"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","studentFullName","autocomplete","new-password",1,"form-control"],["class","alert alert-danger mt-3",4,"ngIf"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","studentPhone","autocomplete","new-password",1,"form-control"],["type","password","placeholder","M\u1eadt Kh\u1ea9u","formControlName","passWord","autocomplete","new-password",1,"form-control"],["mat-raised-button","",1,"button-color","text-uppercase",2,"width","100%",3,"disabled","click"],[1,"alert","alert-danger","mt-3"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"div",1),f.Qb(2,"div",2),f.Vb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"div",5),f.Vb(6,"h2",6),f.Qb(7,"img",7),f.hc(8,"convertCdn"),f.Ub(),f.Vb(9,"h3",8),f.Tc(10,"N\u1ec1n t\u1ea3ng gi\xe1o d\u1ee5c s\u1ed1"),f.Ub(),f.Ub(),f.Vb(11,"div",9),f.Rc(12,gn,6,3,"div",10),f.Rc(13,un,12,3,"div",11),f.Rc(14,En,29,15,"div",12),f.Ub(),f.Ub(),f.Ub(),f.Qb(15,"div",2),f.Ub(),f.Ub()),2&t&&(f.Db(7),f.nc("src",f.ic(8,4,"azota_assets/images/logo.svg"),f.Ic),f.Db(5),f.nc("ngIf",e.statusObj.loading),f.Db(1),f.nc("ngIf",1==e.isShowOption),f.Db(1),f.nc("ngIf",!e.statusObj.loading))},directives:[i.m,r.k,o.C,o.t,o.l,o.d,o.s,o.j,U.a,k.b],pipes:[A.f,A.v,l.d],styles:['.zalo-icon[_ngcontent-%COMP%]{height:40px;margin-right:10px}.select-style[_ngcontent-%COMP%]{color:#868686!important}.select-style[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.select-style[_ngcontent-%COMP%]:hover{color:#0eafc0!important}.select-style-active[_ngcontent-%COMP%]{color:#0eafc0!important}.df-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.register--login[_ngcontent-%COMP%]{width:88px;height:88px}.two-button[_ngcontent-%COMP%]{width:80%;margin:auto}.register-button[_ngcontent-%COMP%], .two-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100vh}.register-button[_ngcontent-%COMP%]{width:100%}.btn-max-width[_ngcontent-%COMP%]{width:100%;padding-top:1.25rem;padding-bottom:1.25rem;font-size:1.5rem}.responsive__text[_ngcontent-%COMP%]{width:90%;margin-left:auto;margin-right:auto}.btn-outline-primary[_ngcontent-%COMP%]{color:#0eafc0!important;border-color:#0eafc0!important}.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#0eafc0!important;background-color:#0eafc0!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b818e!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#0eafc0!important;border-color:#0eafc0!important;background-color:rgba(14,172,190,.15)}.btn-border-fix[_ngcontent-%COMP%]{border-radius:10px!important}.border-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid hsla(0,0%,86.3%,.8);border-radius:8px;cursor:pointer;padding:12px;align-items:center;text-align:center}.border-card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 20px rgba(0,0,0,.07),-10px -10px 20px hsla(0,0%,100%,.8)}.button-color[_ngcontent-%COMP%]{background-color:#0eafc0!important;color:#fff!important}.text-line[_ngcontent-%COMP%]{position:relative;text-align:center}.text-line[_ngcontent-%COMP%]:before{content:"";display:block;width:45%;height:.5px;position:absolute;right:0;background-color:#868686;top:50%}.text-line[_ngcontent-%COMP%]:after{content:"";display:block;width:45%;height:.5px;position:absolute;left:0;background-color:#868686;top:50%}.border-select-box[_ngcontent-%COMP%]{border:1px solid #ccd0d5;border-radius:4px;padding:8px 16px}  .mat-radio-label{margin-bottom:0!important}  .mat-radio-label-content{padding-left:16px!important}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%],   .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#0eafc0!important}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#0eafc0!important}  .mat-input-element{font-size:18px!important;caret-color:#0eafc0!important}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-datepicker-toggle-default-icon[_ngcontent-%COMP%],   .mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon{width:1.5em!important}button[_ngcontent-%COMP%]:disabled{background-color:rgba(0,0,0,.12)!important}@media only screen and (max-width:424px){.btn-max-width[_ngcontent-%COMP%]{font-size:1rem}}@media only screen and (max-width:364px){.text-line[_ngcontent-%COMP%]:after, .text-line[_ngcontent-%COMP%]:before{width:40%}}']}),t})();function qn(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",12),f.Vb(2,"div",13),f.Vb(3,"span",14),f.Tc(4),f.hc(5,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.Vc("",f.ic(5,1,"lang_cms_common_loading"),"..."))}function Fn(t,e){1&t&&(f.Vb(0,"div"),f.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),f.Ub())}function zn(t,e){if(1&t&&(f.Vb(0,"div",28),f.Rc(1,Fn,2,0,"div",11),f.Ub()),2&t){const t=f.gc(2);f.Db(1),f.nc("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Nn(t,e){if(1&t&&(f.Vb(0,"div",15),f.Vb(1,"label",29),f.Tc(2),f.hc(3,"mytranslate"),f.Ub(),f.Ub()),2&t){const t=f.gc(2);f.Db(2),f.Vc("*** ",f.ic(3,1,t.statusObj.errorMessage),"")}}function Wn(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",30),f.Tc(2,"\xa0"),f.Ub())}const Hn=function(t){return[t]},Gn=function(){return{user_click:"true"}};function Yn(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",15),f.Vb(2,"div",16),f.Vb(3,"div",17),f.Qb(4,"input",18),f.Vb(5,"div",19),f.Vb(6,"span",20),f.Vb(7,"mat-icon"),f.Tc(8,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(9,"div",17),f.Qb(10,"input",21),f.Vb(11,"div",19),f.Vb(12,"span",20),f.Vb(13,"mat-icon"),f.Tc(14,"lock"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Rc(15,zn,2,1,"div",22),f.Ub(),f.Ub(),f.Rc(16,Nn,4,3,"div",23),f.Vb(17,"div",15),f.Vb(18,"div",16),f.Vb(19,"div",24),f.Vb(20,"button",25),f.cc("click",function(){f.Ec(t);const e=f.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),f.Rc(21,Wn,3,0,"span",11),f.Tc(22,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Qb(23,"hr"),f.Vb(24,"div",26),f.Vb(25,"a",27),f.hc(26,"localize"),f.Tc(27,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc();f.Db(15),f.nc("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),f.Db(1),f.nc("ngIf",t.statusObj.errorMessage),f.Db(4),f.nc("disabled",t.form.invalid||t.statusObj.loading),f.Db(1),f.nc("ngIf",t.statusObj.loading),f.Db(4),f.nc("routerLink",f.tc(8,Hn,f.ic(26,6,"/auth/login")))("queryParams",f.sc(10,Gn))}}function Zn(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",13),f.Vb(2,"div",14),f.Vb(3,"span",15),f.Tc(4),f.hc(5,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.Vc("",f.ic(5,1,"lang_cms_common_loading"),"..."))}function Kn(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",21),f.Tc(2,"\xa0"),f.Ub())}function Jn(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",16),f.Vb(2,"div",17),f.Vb(3,"button",18),f.cc("click",function(){f.Ec(t);const e=f.gc(2);return e.statusObj.loading||e.becomeTeacher()}),f.Rc(4,Kn,3,0,"span",12),f.Tc(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 tr\u1edf th\xe0nh gi\xe1o vi\xean "),f.Ub(),f.Ub(),f.Ub(),f.Vb(6,"div",19),f.Vb(7,"a",20),f.cc("click",function(){return f.Ec(t),f.gc(2).goBack()}),f.Tc(8,"Quay l\u1ea1i trang ch\u1ee7"),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(3),f.nc("disabled",t.statusObj.loading),f.Db(1),f.nc("ngIf",t.statusObj.loading)}}function $n(t,e){if(1&t&&(f.Vb(0,"div",5),f.Vb(1,"h2",6),f.Qb(2,"img",7),f.hc(3,"convertCdn"),f.Ub(),f.Vb(4,"div",8),f.Vb(5,"div",9),f.Vb(6,"span",10),f.Tc(7,"T\xf4i mu\u1ed1n th\xe0nh gi\xe1o vi\xean"),f.Ub(),f.Ub(),f.Vb(8,"div",11),f.Rc(9,Zn,6,3,"div",12),f.Rc(10,Jn,9,2,"div",12),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(2),f.nc("src",f.ic(3,3,"azota_assets/images/logo.svg"),f.Ic),f.Db(7),f.nc("ngIf",t.statusObj.loading),f.Db(1),f.nc("ngIf",!t.statusObj.loading)}}function Xn(t,e){1&t&&(f.Vb(0,"div"),f.Vb(1,"div",13),f.Vb(2,"div",14),f.Vb(3,"span",15),f.Tc(4),f.hc(5,"mytranslate"),f.Ub(),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.Vc("",f.ic(5,1,"lang_cms_common_loading"),"..."))}function ti(t,e){1&t&&(f.Vb(0,"span"),f.Qb(1,"span",21),f.Tc(2,"\xa0"),f.Ub())}function ei(t,e){if(1&t){const t=f.Wb();f.Vb(0,"div"),f.Vb(1,"div",16),f.Vb(2,"div",17),f.Vb(3,"button",18),f.cc("click",function(){f.Ec(t);const e=f.gc(2);return e.statusObj.loading||e.becomeStudent()}),f.Rc(4,ti,3,0,"span",12),f.Tc(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 b\u1ecf quy\u1ec1n gi\xe1o vi\xean "),f.Ub(),f.Ub(),f.Ub(),f.Vb(6,"div",19),f.Vb(7,"a",20),f.cc("click",function(){return f.Ec(t),f.gc(2).goBack()}),f.Tc(8,"Quay l\u1ea1i trang ch\u1ee7"),f.Ub(),f.Ub(),f.Ub()}if(2&t){const t=f.gc(2);f.Db(3),f.nc("disabled",t.statusObj.loading),f.Db(1),f.nc("ngIf",t.statusObj.loading)}}function ni(t,e){if(1&t&&(f.Vb(0,"div",5),f.Vb(1,"h2",6),f.Qb(2,"img",7),f.hc(3,"convertCdn"),f.Ub(),f.Vb(4,"div",8),f.Vb(5,"div",9),f.Vb(6,"span",10),f.Tc(7,"T\xf4i mu\u1ed1n b\u1ecf quy\u1ec1n gi\xe1o vi\xean"),f.Ub(),f.Ub(),f.Vb(8,"div",11),f.Rc(9,Xn,6,3,"div",12),f.Rc(10,ei,9,2,"div",12),f.Ub(),f.Ub(),f.Ub()),2&t){const t=f.gc();f.Db(2),f.nc("src",f.ic(3,3,"azota_assets/images/logo.svg"),f.Ic),f.Db(7),f.nc("ngIf",t.statusObj.loading),f.Db(1),f.nc("ngIf",!t.statusObj.loading)}}const ii=[{path:"",children:[{path:"",children:[{path:"login",component:ln},{path:"login-scan/:role",component:$e},{path:"register",component:jn},{path:"register/:type",component:jn},{path:"logout",component:hn},{path:"confirm_forgot_password",component:yt},{path:"forgot_password_susscess",component:ge},{path:"confirm_forgot_password_qr",component:Jt},{path:"confirm_forgot_password_old",component:Ot},{path:"confirm_account",component:et},{path:"checking_service",component:q},{path:"set_new_password",component:(()=>{class t extends m.a{constructor(t,e,n,i){super(e),this.formBuilder=t,this.commonService=e,this.baseApiService=n,this.authService=i,this.form=new o.k({})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,e){var n,i;return!!(null===(n=this.form.controls[t].errors)||void 0===n?void 0:n[e])&&(null===(i=this.form.controls[t].errors)||void 0===i?void 0:i[e])}changePassword(){if(this.form.valid)if(this.form.value.password!=this.form.value.confirm_password)this.showErrorSnack("X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp");else{this.initStatusObj();var t=this.commonService.getFormObj(this.form),e=this.commonService.getMyQueryParam("token"),n=this.commonService.getMyQueryParam("app_name");this.subscriptions.add(this.authService.apiAuthChangePasswordByFirebasePost({firebaseToken:e,newPassword:t.password,appName:n}).subscribe(t=>{var e;1==t.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(e=t.message)&&void 0!==e?e:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[o.A.required,o.A.minLength(6)]],confirm_password:""}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(o.g),f.Pb(v.a),f.Pb(_.a),f.Pb(y.g))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-confirm-forgot-password"]],features:[f.Ab],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","off",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u","formControlName","confirm_password","autocomplete","off",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"form",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Vb(4,"div",4),f.Vb(5,"h2",5),f.Qb(6,"img",6),f.hc(7,"convertCdn"),f.Ub(),f.Vb(8,"div",7),f.Vb(9,"div",8),f.Vb(10,"span",9),f.Tc(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),f.Ub(),f.Ub(),f.Vb(12,"div",10),f.Rc(13,qn,6,3,"div",11),f.Rc(14,Yn,28,11,"div",11),f.Ub(),f.Ub(),f.Ub(),f.Qb(15,"div",3),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(1),f.nc("formGroup",e.form),f.Db(5),f.nc("src",f.ic(7,4,"azota_assets/images/logo.svg"),f.Ic),f.Db(7),f.nc("ngIf",e.statusObj.loading),f.Db(1),f.nc("ngIf",!e.statusObj.loading))},directives:[o.C,o.t,o.l,i.m,o.d,o.s,o.j,U.a,k.b,r.k],pipes:[A.f,A.v,l.d],encapsulation:2}),t})()},{path:"change-info",component:j},{path:"switch-teacher-student",component:(()=>{class t extends m.a{constructor(t,e,n){super(n),this.baseApiService=t,this.authService=e,this.commonService=n,this.isTeacher=!1,this.isStudent=!1}goBack(){this.baseApiService.redirectLoginByRole("")}becomeTeacher(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConvertToTeacherGet().subscribe(t=>{var e;1==t.success?this.baseApiService.redirectLoginByRole(""):this.errorStatusObj(null!==(e=t.message)&&void 0!==e?e:"",!0)}))}becomeStudent(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRemoveTeacherRoleGet().subscribe(t=>{var e;1==t.success?this.baseApiService.redirectLoginByRole(this.commonService.getLocalRouter("/student/dashboard/0")):this.errorStatusObj(null!==(e=t.message)&&void 0!==e?e:"",!0)}))}ngOnInit(){this.commonService.translateMetaData({title:"\u0110\u1ed5i Vai Tr\xf2",description:"\u0110\u1ed5i Vai Tr\xf2",image:"lang_cms_test_image"}),this.isTeacher=this.baseApiService.isTeacherRole(),super.ngOnInit()}}return t.\u0275fac=function(e){return new(e||t)(f.Pb(_.a),f.Pb(y.g),f.Pb(v.a))},t.\u0275cmp=f.Jb({type:t,selectors:[["app-switch-teacher-student"]],features:[f.Ab],decls:7,vars:2,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&(f.Vb(0,"div",0),f.Vb(1,"div",1),f.Vb(2,"div",2),f.Qb(3,"div",3),f.Rc(4,$n,11,5,"div",4),f.Rc(5,ni,11,5,"div",4),f.Qb(6,"div",3),f.Ub(),f.Ub(),f.Ub()),2&t&&(f.Db(4),f.nc("ngIf",0==e.isTeacher),f.Db(1),f.nc("ngIf",1==e.isTeacher))},directives:[i.m,k.b],pipes:[A.f,A.v],styles:[""]}),t})()},{path:"create-qr-forgot-pass/:role",component:he}]}]}];let oi=(()=>{class t{}return t.\u0275mod=f.Nb({type:t}),t.\u0275inj=f.Mb({factory:function(e){return new(e||t)},imports:[[r.l.forChild(ii)],r.l,l.c]}),t})(),ri=(()=>{class t{}return t.\u0275mod=f.Nb({type:t}),t.\u0275inj=f.Mb({factory:function(e){return new(e||t)},imports:[[r.l,i.c,o.n,s.b,d.a,o.y,oi,c.a,a.a]]}),t})()},bWEQ:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return d});var i=n("n1FK"),o=n("fXoL"),r=n("wd/R");const s=n.n(r).a||r,c=new o.s("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function a(t,e){const n=Array(t);for(let i=0;i<t;i++)n[i]=e(i);return n}let d=(()=>{class t extends i.b{constructor(t){super(),this._options=t,this._localeData={firstDayOfWeek:0,longMonths:"",shortMonths:"",dates:"",longDaysOfWeek:"",shortDaysOfWeek:"",narrowDaysOfWeek:""};let e="vi";-1===window.location.href.indexOf("en")&&(e="vi"),s.locale(),this.setLocale(e||s.locale())}setLocale(t){super.setLocale(t);const e=s.localeData(t);this._localeData={firstDayOfWeek:e.firstDayOfWeek(),longMonths:e.months(),shortMonths:e.monthsShort(),dates:a(31,t=>this.createDate(2017,0,t+1).format("D")),longDaysOfWeek:e.weekdays(),shortDaysOfWeek:e.weekdaysShort(),narrowDaysOfWeek:e.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"===t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"===t?this._localeData.longDaysOfWeek:"short"===t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,e,n){if(e<0||e>11)throw Error(`Invalid month index "${e}". Month index has to be between 0 and 11.`);if(n<1)throw Error(`Invalid date "${n}". Date has to be greater than 0.`);const i=this._createMoment({year:t,month:e,date:n}).locale(this.locale);if(!i.isValid())throw Error(`Invalid date "${n}" for month with index "${e}".`);return i}today(){return this._createMoment().locale(this.locale)}parse(t,e){return t&&"string"==typeof t?this._createMoment(t,e,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,e){if(t=this.clone(t),!this.isValid(t))throw Error("MomentDateAdapter: Cannot format invalid date.");return t.format(e)}addCalendarYears(t,e){return this.clone(t).add({years:e})}addCalendarMonths(t,e){return this.clone(t).add({months:e})}addCalendarDays(t,e){return this.clone(t).add({days:e})}toIso8601(t){return this.clone(t).format()}deserialize(t){let e;if(t instanceof Date)e=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;e=this._createMoment(t,s.ISO_8601).locale(this.locale)}return e&&this.isValid(e)?this._createMoment(e).locale(this.locale):super.deserialize(t)}isDateInstance(t){return s.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return s.invalid()}getHour(t){return t.hours()}getMinute(t){return t.minutes()}getSecond(t){return t.seconds()}setHour(t,e){t.hours(e)}setMinute(t,e){t.minutes(e)}setSecond(t,e){t.seconds(e)}_createMoment(t,e,n){const{strict:i,useUtc:o}=this._options||{};return o?s.utc(t,e,n,i):s(t,e,n,i)}}return t.\u0275fac=function(e){return new(e||t)(o.Zb(c,8))},t.\u0275prov=o.Lb({token:t,factory:t.\u0275fac}),t})()}}]);