!function(){function e(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function c(e){o(a,r,i,c,s,"next",e)}function s(e){o(a,r,i,c,s,"throw",e)}c(void 0)})}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{JZA2:function(r,i,o){"use strict";o.r(i),o.d(i,"AuthModule",function(){return Rr});var s=o("ofXK"),b=o("3Pt+"),g=o("tyNb"),m=o("fB2i"),f=o("Zhhu"),v=o("sOeQ"),y=o("vvyD"),_=o("Avyq"),k=o("n1FK"),w=o("FKr1"),V=o("kmnG"),U=o("bWEQ"),C=o("gm2p"),S=o("atsk"),x=o("fXoL"),A=o("oUVn"),O=o("5ete"),P=o("PYj7"),D=o("clS4"),R=o("f4AX"),T=o("NFeN"),M=o("QibW"),Q=o("qFsG"),I=o("bTqV"),L=o("iWHX");function E(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",12),x.Vb(2,"div",13),x.Vb(3,"span",14),x.Tc(4),x.hc(5,"mytranslate"),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.Vc("",x.ic(5,1,"lang_cms_common_loading"),"..."))}function j(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," Email ph\u1ea3i nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng! "),x.Ub())}function B(e,t){if(1&e&&(x.Vb(0,"div",44),x.Rc(1,j,2,0,"div",11),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("email","email"))}}function z(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),x.Ub())}function q(e,t){if(1&e&&(x.Vb(0,"div",44),x.Rc(1,z,2,0,"div",11),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("password","required")||n.getErrorType("password","minlength"))}}function F(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1! "),x.Ub())}function N(e,t){if(1&e&&(x.Vb(0,"div",44),x.Rc(1,F,2,0,"div",11),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("phone","pattern")||n.getErrorType("phone","minlength")||n.getErrorType("phone","maxlength"))}}function W(e,t){1&e&&(x.Vb(0,"span"),x.Tc(1,"OK"),x.Ub())}function H(e,t){if(1&e&&(x.Vb(0,"div",15),x.Vb(1,"label",45),x.Tc(2),x.hc(3,"mytranslate"),x.Ub(),x.Ub()),2&e){var n=x.gc(2);x.Db(2),x.Vc("*** ",x.ic(3,1,n.statusObj.errorMessage),"")}}function G(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",46),x.Tc(2,"\xa0"),x.Ub())}function Y(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div"),x.Vb(1,"div",15),x.Vb(2,"div",16),x.Vb(3,"div",17),x.Qb(4,"input",18),x.Vb(5,"div",19),x.Vb(6,"span",20),x.Vb(7,"mat-icon"),x.Tc(8,"account_box"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(9,"div",15),x.Vb(10,"div",16),x.Vb(11,"div",17),x.Qb(12,"input",21),x.Vb(13,"div",19),x.Vb(14,"span",20),x.Vb(15,"mat-icon"),x.Tc(16,"email"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(17,B,2,1,"div",22),x.Ub(),x.Ub(),x.Vb(18,"div",15),x.Vb(19,"div",16),x.Vb(20,"div",17),x.Qb(21,"input",23),x.Vb(22,"div",19),x.Vb(23,"span",20),x.Vb(24,"mat-icon"),x.Tc(25,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(26,q,2,1,"div",22),x.Ub(),x.Ub(),x.Vb(27,"div",15),x.Vb(28,"div",16),x.Vb(29,"div",24),x.Qb(30,"input",25),x.Vb(31,"div",19),x.Vb(32,"span",20),x.Vb(33,"mat-icon"),x.Tc(34,"phone_enabled"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(35,"a",26),x.cc("click",function(){return x.Ec(n),x.gc().goToConfirm()}),x.Tc(36,"Click v\xe0o \u0111\xe2y n\u1ebfu b\u1ea1n mu\u1ed1n \u0111\u1ed5i s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"),x.Ub(),x.Rc(37,N,2,1,"div",22),x.Ub(),x.Ub(),x.Vb(38,"div",15),x.Vb(39,"div",16),x.Vb(40,"div",27),x.Vb(41,"mat-radio-group",28),x.Vb(42,"div",2),x.Vb(43,"div",29),x.Tc(44," Gi\u1edbi t\xednh "),x.Ub(),x.Vb(45,"div",30),x.Vb(46,"mat-radio-button",31),x.Tc(47,"Nam"),x.Ub(),x.Vb(48,"mat-radio-button",32),x.Tc(49,"N\u1eef"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(50,"div",15),x.Vb(51,"div",33),x.Vb(52,"mat-form-field",34),x.Vb(53,"input",35),x.cc("click",function(){return x.Ec(n),x.Ac(58).open()}),x.Ub(),x.Vb(54,"button",36),x.cc("click",function(e){return x.Ec(n),x.Ac(58).open(),e.stopPropagation()}),x.Vb(55,"mat-icon"),x.Tc(56,"today"),x.Ub(),x.Ub(),x.Vb(57,"ngx-mat-datetime-picker",37,38),x.Rc(59,W,2,0,"ng-template"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(60,H,4,3,"div",39),x.Vb(61,"div",15),x.Vb(62,"div",40),x.Vb(63,"button",41),x.cc("click",function(){x.Ec(n);var e=x.gc();return e.form.invalid||e.statusObj.loading||e.changeInfo()}),x.Rc(64,G,3,0,"span",11),x.Tc(65,"C\u1eadp nh\u1eadt "),x.Ub(),x.Ub(),x.Ub(),x.Vb(66,"div",42),x.Vb(67,"a",43),x.cc("click",function(){return x.Ec(n),x.gc().goBack()}),x.Tc(68,"Quay l\u1ea1i trang ch\u1ee7"),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.Ac(58),i=x.gc();x.Db(17),x.nc("ngIf",i.form.controls.email.invalid&&i.form.controls.email.dirty),x.Db(9),x.nc("ngIf",i.form.controls.password.invalid&&(i.form.controls.password.dirty||i.form.controls.password.touched)),x.Db(4),x.Eb("disabled",!0),x.Db(7),x.nc("ngIf",i.form.controls.phone.invalid&&(i.form.controls.phone.dirty||i.form.controls.phone.touched)),x.Db(16),x.nc("ngxMatDatetimePicker",r),x.Db(4),x.nc("hideTime",!0),x.Db(3),x.nc("ngIf",i.statusObj.errorMessage),x.Db(3),x.nc("disabled",i.form.invalid||i.statusObj.loading),x.Db(1),x.nc("ngIf",i.statusObj.loading)}}var K,Z,J,$={parse:{dateInput:"l, LTS"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},X=((Z=function(e){u(n,e);var t=h(n);function n(e,r,i,o,a,s,l){var d;return c(this,n),(d=t.call(this,r)).formBuilder=e,d.commonService=r,d.baseApiService=i,d.authService=o,d.redirectService=a,d.userService=s,d.datepipe=l,d.form=new b.k({}),d.startDate=new Date(1990,1,1),d.gender=0,d.prevData="",d.returnUrl="",d}return l(n,[{key:"getErrorType",value:function(e,t){var n,r,i,o,a,c;return!!(null===(i=null===(r=null===(n=this.form.controls)||void 0===n?void 0:n[e])||void 0===r?void 0:r.errors)||void 0===i?void 0:i[t])&&(null===(c=null===(a=null===(o=this.form.controls)||void 0===o?void 0:o[e])||void 0===a?void 0:a.errors)||void 0===c?void 0:c[t])}},{key:"goToConfirm",value:function(){this.returnUrl="/auth/change-info";var e="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=change_phone";this.commonService.myNavigationWithQueryString("/auth/checking_service",e)}},{key:"allowChangePhone",value:function(){var e=this.baseApiService.getUserObj(),t=e.zaloId?e.zaloId:"";return""!=t&&t==(e.phone?e.phone:"")}},{key:"changeInfo",value:function(){var e,t=this;if(this.form.valid){var n=this.commonService.getFormObj(this.form),r=n.birthday?new Date(Date.parse(n.birthday)):this.startDate,i={fullName:n.fullName,birthday:null!==(e=this.datepipe.transform(r,"yyyy-MM-ddTHH:mm:ss"))&&void 0!==e?e:"",email:n.email,gender:n.gender,password:n.password};this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthUpdateInfoPost(i).subscribe(function(e){1==e.success?t.successStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!",!0):t.errorStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin kh\xf4ng th\xe0nh c\xf4ng!",!0)}))}}},{key:"goBack",value:function(){this.baseApiService.redirectLoginByRole("")}},{key:"getInfo",value:function(){var e,t=this.baseApiService.getUserObj(),n=t.birthday?new Date(t.birthday):new Date(1990,1,1);this.startDate=n,this.gender=null!==(e=t.gender)&&void 0!==e?e:0,this.form.patchValue({fullName:this.userService.isAnonymousName(t)?"":t.fullName,email:t.email?t.email:"",phone:t.phone?t.phone:"",gender:1!=this.gender?"0":"1"}),this.form.controls.birthday.setValue(n)}},{key:"ngOnInit",value:function(){var e=this;this.form=this.formBuilder.group({fullName:new b.h("",[b.z.required,S.a.noWhiteSpace]),email:new b.h("",b.z.email),phone:new b.h("",[b.z.pattern("^[0-9]*$")]),gender:new b.h(""),birthday:new b.h(""),password:new b.h("",[b.z.minLength(6)])}),this.baseApiService.isAnonymousRole()?this.redirectService.redirectSimpleRegister():(this.getInfo(),this.form.valueChanges.subscribe(function(t){var n=JSON.stringify(t);n!=e.prevData&&(e.prevData=n,e.form.patchValue(t))}),this.commonService.translateMetaData({title:"lang_cms_auth_change_info_title",description:"lang_cms_auth_change_info_description",image:"lang_cms_test_image"}),d(p(n.prototype),"ngOnInit",this).call(this))}}]),n}(C.a)).\u0275fac=function(e){return new(e||Z)(x.Pb(b.g),x.Pb(A.a),x.Pb(O.a),x.Pb(P.d),x.Pb(D.a),x.Pb(R.a),x.Pb(s.e))},Z.\u0275cmp=x.Jb({type:Z,selectors:[["app-change-info"]],features:[x.Cb([s.e,{provide:k.b,useClass:U.a,deps:[w.f,U.b]},{provide:k.a,useValue:$},{provide:V.b,useValue:{floatLabel:"never"}}]),x.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","fullName",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","text","placeholder","Email","formControlName","email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group","mb-1"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"clickable","text-info",2,"font-size","13px","padding-left","5px",3,"click"],[1,"input-group","input-custom"],["formControlName","gender","color","primary",2,"width","100%"],[1,"col-5"],[1,"col-7"],["value","1",1,"col-6","p-0"],["value","0"],[1,"col-sm-12","studentBirthDay"],["id","birthday",1,"myTimePicker",2,"border","1px solid #ced4da","border-radius","3px","padding-top","2px"],["matInput","","placeholder","Ng\xe0y sinh","formControlName","birthday","readonly","",1,"form-birthday","bg-white",3,"ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",3,"click"],[3,"hideTime"],["birthDay",""],["class","form-group",4,"ngIf"],[1,"col-sm-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"form",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h2",5),x.Qb(6,"img",6),x.Ub(),x.Vb(7,"div",7),x.Vb(8,"div",8),x.Vb(9,"span",9),x.Tc(10,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),x.Ub(),x.Ub(),x.Vb(11,"div",10),x.Rc(12,E,6,3,"div",11),x.Rc(13,Y,69,9,"div",11),x.Ub(),x.Ub(),x.Ub(),x.Qb(14,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(1),x.nc("formGroup",t.form),x.Db(11),x.nc("ngIf",t.statusObj.loading),x.Db(1),x.nc("ngIf",!t.statusObj.loading))},directives:[b.B,b.s,b.l,s.m,b.d,b.r,b.j,T.a,M.b,M.a,V.d,Q.b,k.c,I.b,V.h,k.d],pipes:[L.s],styles:[".mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em;font-weight:400;color:rgba(0,0,0,.54);font-size:16px}.form-birthday[_ngcontent-%COMP%]{display:block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}#birthday[_ngcontent-%COMP%]:active, #birthday[_ngcontent-%COMP%]:focus, #birthday[_ngcontent-%COMP%]:focus-visible, #birthday[_ngcontent-%COMP%]:focus-within, #birthday[_ngcontent-%COMP%]:target, #birthday[_ngcontent-%COMP%]:visited{background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.hover-cancel[_ngcontent-%COMP%]:hover{background-color:#ebe9e9}.input-custom[_ngcontent-%COMP%]{border:1px solid #e2e2e2;border-radius:3px;padding-left:12px;padding-top:10px}"]}),Z),ee=((K=function(e){u(n,e);var t=h(n);function n(e,r,i){var o;return c(this,n),(o=t.call(this,e)).commonService=e,o.baseApiService=r,o.authService=i,o}return l(n,[{key:"ngOnInit",value:function(){var e=this;this.authService.apiAuthGetFirebaseConfigGet().subscribe(function(t){var n;if(1==t.success){var r=e.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+e.returnUrl+"&confirm_type="+e.confirm_type+"&app_name="+(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.app);window.location.href=r.toString()}else e.commonService.snackError("C\xf3 l\u1ed7i khi ki\u1ec3m tra d\u1ecbch v\u1ee5","")})}},{key:"returnUrl",get:function(){var e;return null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:""}},{key:"confirm_type",get:function(){var e;return null!==(e=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==e?e:""}}]),n}(C.a)).\u0275fac=function(e){return new(e||K)(x.Pb(A.a),x.Pb(O.a),x.Pb(P.d))},K.\u0275cmp=x.Jb({type:K,selectors:[["app-checking-service"]],features:[x.Ab],decls:3,vars:0,consts:[[1,"mt-5","text-center"],["role","status",1,"spinner-border","spinner-border-md",2,"color","#2361ae"]],template:function(e,t){1&e&&(x.Vb(0,"h2",0),x.Qb(1,"span",1),x.Tc(2,"\xa0 \u0110ang ki\u1ec3m tra d\u1ecbch v\u1ee5..."),x.Ub())},encapsulation:2}),K),te=o("Jgta"),ne=o("6nsN"),re=o("quSY"),ie=((J=function(){function e(){c(this,e)}return l(e,[{key:"windowRef",get:function(){return window}}]),e}()).\u0275fac=function(e){return new(e||J)},J.\u0275prov=x.Lb({token:J,factory:J.\u0275fac}),J),oe=o("AytR"),ae=o("AkFM"),ce=["verifyCode"];function se(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 10 k\xfd t\u1ef1! "),x.Ub())}function le(e,t){if(1&e&&(x.Vb(0,"div",34),x.Rc(1,se,2,0,"div",31),x.Ub()),2&e){var n=x.gc();x.Db(1),x.nc("ngIf",n.getErrorType("phone","required")||n.getErrorType("phone","minlength"))}}function de(e,t){if(1&e&&(x.Vb(0,"div",13),x.Vb(1,"label",35),x.Tc(2),x.hc(3,"mytranslate"),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(2),x.Vc("*** ",x.ic(3,1,n.statusObj.errorMessage),"")}}function ue(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",36),x.Tc(1," Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c m\xe3 x\xe1c th\u1ef1c? "),x.Vb(2,"b",21),x.cc("click",function(){return x.Ec(n),x.gc().resendCode()}),x.Tc(3,"G\u1eedi l\u1ea1i!"),x.Ub(),x.Ub()}}function be(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",37),x.Tc(2,"\xa0"),x.Ub())}var he,ge=function(e){return{"margin-left":e}},pe=((he=function(e){u(n,e);var t=h(n);function n(e,r,i,o,a,s,l){var d;return c(this,n),(d=t.call(this,r)).formBuilder=e,d.commonService=r,d.window=i,d.baseApiService=o,d.authService=a,d.redirectService=s,d.browserStorageService=l,d.subscriptions=new re.a,d.form=new b.k({}),d.confirm_type="forgot_password",d.isVerifying=!1,d.smsSent=!1,d.timeOut=60,d.captchaWidgetId="",d.isLoading=!0,d}return l(n,[{key:"getError",value:function(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}},{key:"getErrorType",value:function(e,t){var n,r;return!!(null===(n=this.form.controls[e].errors)||void 0===n?void 0:n[t])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[t])}},{key:"getConfirmType",value:function(){var e;return null!==(e=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==e?e:""}},{key:"skipVerifyPhone",value:function(){var e=Math.round((new Date).getTime()/1e3);this.browserStorageService.saveSimpleStorage("skip_verify_phone",e.toString()),this.baseApiService.redirectLoginByRole("");var t=this.getConfirmType();this.commonService.myNavigation("confirm_phone_register"==t?"/admin/student/manage-class/0":"/admin/testbank/dashboard")}},{key:"handleConfirmUsage",value:function(){var e=this,t=this.form.value.phone,n=this.getConfirmType();if(""!=t)switch(n){case"forgot_password":this.commonService.gaEvent("confirm_event_forgot_password"),this.authService.apiAuthCheckPhoneExistsGet(t).subscribe(function(n){1==n.success?e.sendLoginCode("+84"+t.slice(1)):(e.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),e.reRenderCaptcha())});break;case"change_phone":this.commonService.gaEvent("confirm_event_change_phone"),this.authService.apiAuthCheckPhoneExistsGet(t).subscribe(function(n){1!=n.success?e.sendLoginCode("+84"+t.slice(1)):(e.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),e.reRenderCaptcha())});break;default:this.commonService.gaEvent("confirm_event_confirm_phone"),this.authService.apiAuthCheckUpdatePhoneExistsGet(t).subscribe(function(n){1!=n.success?e.sendLoginCode("+84"+t.slice(1)):(e.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),e.reRenderCaptcha())})}else this.commonService.snackError("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!",""),this.reRenderCaptcha()}},{key:"sendLoginCode",value:function(e){var t=this,n=this.windowRef.recaptchaVerifier,r=Object(ne.b)();Object(ne.d)(r,e,n).then(function(e){t.windowRef.confirmationResult=e,t.smsSent=!0,t.timeOut=60,t.countDownTime()}).catch(function(e){console.log(e),"auth/quota-exceeded"==e.code?t.authService.apiAuthFirebaseOverQuotaGet(t.firebaseApp).subscribe(function(e){1==e.success?t.authService.apiAuthGetFirebaseConfigGet().subscribe(function(e){var n,r,i,o,a;if(1==e.success)if((null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.app)!==t.firebaseApp){var c=t.commonService.getMyQueryParam("interval_app");if(c&&c!=(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.app)){c=c||(null!==(o=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.app)&&void 0!==o?o:"");var s=t.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+t.returnUrl+"&confirm_type="+t.confirm_type+"&app_name="+(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.app)+"&interval_app="+c;window.location.href=s.toString()}else t.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","")}else t.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","");else t.commonService.snackError("Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c th\xf4ng tin FirebaseApp","")}):t.commonService.snackError("Kh\xf4ng \u0111\xe1nh d\u1ea5u \u0111\u01b0\u1ee3c firebase h\u1ebft quoata","")}):(t.commonService.gaEvent("confirm_event_error_send_code"),t.smsSent=!1,t.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+e.code))})}},{key:"verify_code",value:function(e){var t=this;this.windowRef.confirmationResult?(this.isVerifying=!0,this.windowRef.confirmationResult.confirm(e).then(function(e){t.isVerifying=!1;var n=e.user,r=t.getConfirmType();switch(r){case"forgot_password":t.commonService.myNavigationWithQueryString("/auth/set_new_password","?app_name="+t.firebaseApp+"&token="+encodeURIComponent(n.za));break;default:t.authService.apiAuthUpdatePhoneOrPasswordByFirebasePost({firebaseToken:n.accessToken,password:"",appName:t.firebaseApp}).subscribe(function(e){1==e.success?(t.showSuccessSnack("C\u1eadp nh\u1eadt s\u1ed1 \u0111i\u1ec7n tho\u1ea1i th\xe0nh c\xf4ng!"),"confirm_phone_register"==r?t.commonService.myNavigation("/admin/student/manage-class/0"):t.baseApiService.redirectLoginByRole("")):t.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+e.message)})}}).catch(function(e){console.log(e),t.isVerifying=!1,t.commonService.gaEvent("confirm_event_error_verify_code"),t.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+e.code)})):(this.isVerifying=!1,this.showErrorSnack("M\xe3 x\xe1c th\u1ef1c kh\xf4ng \u0111\xfang, vui l\xf2ng ki\u1ec3m tra l\u1ea1i"))}},{key:"resendCode",value:function(){var e;this.reRenderCaptcha(),null===(e=document.getElementById("recaptcha-container"))||void 0===e||e.click()}},{key:"countDownTime",value:function(){var e=this;this.myCountDown=window.setInterval(function(){e.timeOut>0&&e.timeOut--},1e3)}},{key:"initForm",value:function(){this.form=this.formBuilder.group({phone:["",[b.z.required,b.z.minLength(10)]]})}},{key:"handleClickLogout",value:function(){"forgot_password"==this.confirm_type||"change_phone"==this.confirm_type?this.baseApiService.redirectLoginByRole(""):(this.baseApiService.logout(),this.redirectService.redirectSimpleLogin())}},{key:"reRenderCaptcha",value:function(){this.windowRef.recaptchaVerifier.reset(this.windowRef.recaptchaWidgetId)}},{key:"handleEnterVerify",value:function(e,t){"Enter"==e.key&&(this.commonService.gaEvent("confirm_event_verify_code_by_press_enter"),this.verify_code(t))}},{key:"ngOnInit",value:function(){var e=this;this.initForm(),Object(te.a)(oe.a["firebaseConfig_"+this.firebaseApp]),Object(ne.b)().useDeviceLanguage();var t=this.getConfirmType();switch(this.confirm_type=this.getConfirmType(),"forgot_password"!=t&&this.authService.apiAuthInfoGet().subscribe(function(n){var r,i,o,a;1==n.success?1==(null===(r=null==n?void 0:n.new_user)||void 0===r?void 0:r.isVerifyPhone)?"change_phone"!=t&&e.baseApiService.redirectLoginByRole(""):(null===(i=null==n?void 0:n.new_user)||void 0===i?void 0:i.phone)&&(null===(o=null==n?void 0:n.new_user)||void 0===o?void 0:o.phone.length)<=10?e.form.setValue({phone:null===(a=null==n?void 0:n.new_user)||void 0===a?void 0:a.phone}):(e.form.setValue({phone:""}),console.log("enter phone plz")):e.showErrorSnack(n.message?"C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+n.message:"")}),t){case"forgot_password":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"});break;case"change_phone":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_change_phone_title",description:"lang_cms_auth_confirm_change_phone_description",image:"lang_cms_test_image"});break;default:this.commonService.translateMetaData({title:"lang_cms_auth_confirm_confirm_phone_title",description:"lang_cms_auth_confirm_confirm_phone_description",image:"lang_cms_test_image"})}d(p(n.prototype),"ngOnInit",this).call(this)}},{key:"ngAfterViewInit",value:function(){var e=this;this.countDownTime(),this.windowRef=this.window.windowRef;var t=Object(ne.b)();if(this.windowRef.recaptchaVerifier=new ne.a("recaptcha-container",{size:"invisible",callback:function(){e.handleConfirmUsage()}},t),this.windowRef.recaptchaVerifier.render().then(function(t){e.windowRef.recaptchaWidgetId=t}),this.verifyCode&&""!=this.verifyCode.nativeElement.value){var n=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.addEventListener("keyup",function(t){return e.handleEnterVerify(t,n)})}}},{key:"ngOnDestroy",value:function(){var e=this;if(clearInterval(this.myCountDown),this.verifyCode){var t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.removeEventListener("keyup",function(n){return e.handleEnterVerify(n,t)})}d(p(n.prototype),"ngDestroy",this).call(this)}},{key:"firebaseApp",get:function(){var e;return null!==(e=this.commonService.getMyQueryParam("app_name"))&&void 0!==e?e:""}},{key:"returnUrl",get:function(){var e;return null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:""}}]),n}(C.a)).\u0275fac=function(e){return new(e||he)(x.Pb(b.g),x.Pb(A.a),x.Pb(ie),x.Pb(O.a),x.Pb(P.d),x.Pb(D.a),x.Pb(ae.a))},he.\u0275cmp=x.Jb({type:he,selectors:[["app-confirm-account"]],viewQuery:function(e,t){var n;1&e&&x.cd(ce,!0),2&e&&x.zc(n=x.dc())&&(t.verifyCode=n.first)},features:[x.Cb([ie]),x.Ab],decls:50,vars:13,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"card-body"],["id","verify_wrap"],["id","enter_phone_area",3,"ngStyle"],["id","enter_phone_wrap"],[1,"form-horizontal",3,"formGroup"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["id","phoneInput","type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","off",1,"form-control"],["phoneInput",""],["class","alert alert-danger",4,"ngIf"],["id","recaptcha-container","color","primary","mat-raised-button",""],[1,"mt-3","text-center"],[1,"clickable",3,"click"],["class","form-group",4,"ngIf"],["id","verify_area",1,"form-group"],[1,"sms-info"],[2,"text-align","right","font-size","12px","margin-bottom","3px"],["class","mb-2 mt-2 resend-code",4,"ngIf"],["type","string","placeholder","M\xe3 x\xe1c th\u1ef1c","autocomplete","off",1,"form-control"],["verifyCode",""],[1,"input-group-append","ml-1"],["id","buttonVerify","mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[1,"text-center","mt-3"],[1,"text-normal","clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],[1,"mb-2","mt-2","resend-code"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",0),x.Vb(1,"div",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h2",5),x.Qb(6,"img",6),x.Ub(),x.Vb(7,"div",7),x.Vb(8,"div",8),x.Vb(9,"h2"),x.Tc(10),x.Ub(),x.Vb(11,"div"),x.Vb(12,"div",9),x.Vb(13,"div",10),x.Vb(14,"div",11),x.Vb(15,"form",12),x.Vb(16,"div",13),x.Vb(17,"div",14),x.Vb(18,"div",15),x.Qb(19,"input",16,17),x.Ub(),x.Rc(21,le,2,1,"div",18),x.Vb(22,"button",19),x.Tc(23,"Ti\u1ebfp t\u1ee5c"),x.Ub(),x.Vb(24,"div",20),x.Vb(25,"a",21),x.cc("click",function(){return t.skipVerifyPhone()}),x.Tc(26,"B\u1ecf qua"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(27,de,4,3,"div",22),x.Ub(),x.Ub(),x.Vb(28,"div",23),x.Vb(29,"div",14),x.Vb(30,"div",24),x.Tc(31," M\u1ed9t tin nh\u1eafn ch\u1ee9a m\xe3 x\xe1c th\u1ef1c v\u1eeba \u0111\u01b0\u1ee3c g\u1eedi t\u1edbi s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),x.Vb(32,"b"),x.Tc(33),x.Ub(),x.Tc(34,". Vui l\xf2ng nh\u1eadp m\xe3 n\xe0y v\xe0o \xf4 d\u01b0\u1edbi \u0111\xe2y r\u1ed3i \u1ea5n x\xe1c th\u1ef1c "),x.Ub(),x.Vb(35,"div",25),x.Tc(36),x.Ub(),x.Rc(37,ue,4,0,"div",26),x.Vb(38,"div",15),x.Qb(39,"input",27,28),x.Vb(41,"div",29),x.Vb(42,"button",30),x.cc("click",function(){x.Ec(n);var e=x.Ac(40);return t.verify_code(e.value)}),x.Rc(43,be,3,0,"span",31),x.Tc(44,"X\xe1c th\u1ef1c "),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Qb(45,"hr"),x.Vb(46,"div",32),x.Vb(47,"a",33),x.cc("click",function(){return t.handleClickLogout()}),x.Tc(48),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Qb(49,"div",3),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.Ac(40);x.Db(10),x.Uc("change_phone"==t.confirm_type?"Nh\u1eadp v\xe0o s\u1ed1 \u0111i\u1ec7n tho\u1ea1i m\u1edbi":"X\xe1c th\u1ef1c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n"),x.Db(3),x.nc("ngStyle",x.tc(11,ge,t.smsSent?"-100%":"0")),x.Db(2),x.nc("formGroup",t.form),x.Db(6),x.nc("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched)),x.Db(6),x.nc("ngIf",t.statusObj.errorMessage),x.Db(6),x.Uc(t.form.value.phone),x.Db(3),x.Vc("",t.timeOut," s"),x.Db(1),x.nc("ngIf",0==t.timeOut),x.Db(5),x.nc("disabled",""==r.value||t.isVerifying),x.Db(1),x.nc("ngIf",t.statusObj.loading),x.Db(5),x.Uc("forgot_password"==t.confirm_type?"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n":"change_phone"==t.confirm_type?"Quay l\u1ea1i m\xe0n h\xecnh ch\xednh":"\u0110\u0103ng xu\u1ea5t")}},directives:[s.n,b.B,b.s,b.l,b.d,b.r,b.j,s.m,I.b],pipes:[L.s],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}"]}),he);function me(e,t){if(1&e&&(x.Vb(0,"div",13),x.Vb(1,"div",14),x.Vb(2,"div",15),x.Qb(3,"div",16),x.Qb(4,"div",16),x.Qb(5,"div",16),x.Ub(),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(3),x.nc("ngClass",1==n.step_by_step?"active":n.step_by_step>1?"active pro":""),x.Db(1),x.nc("ngClass",2==n.step_by_step?"active":n.step_by_step>2?"active pro":""),x.Db(1),x.nc("ngClass",3==n.step_by_step?"active":n.step_by_step>3?"active pro":"")}}function fe(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",17),x.Vb(2,"div",18),x.Vb(3,"span",19),x.Tc(4),x.hc(5,"mytranslate"),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.Vc("",x.ic(5,1,"lang_cms_common_loading"),"..."))}function ve(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng! "),x.Ub())}function ye(e,t){if(1&e&&(x.Vb(0,"div",41),x.Rc(1,ve,2,0,"div",12),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("phone","required"))}}function _e(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),x.Ub())}function ke(e,t){if(1&e&&(x.Vb(0,"div",41),x.Rc(1,_e,2,0,"div",12),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("password","required")||n.getErrorType("password","minlength"))}}function we(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),x.Ub())}function Ve(e,t){if(1&e&&(x.Vb(0,"div",41),x.Rc(1,we,2,0,"div",12),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("repassword","confirm_pass"))}}function Ue(e,t){if(1&e&&(x.Vb(0,"div",20),x.Vb(1,"label",42),x.Tc(2),x.hc(3,"mytranslate"),x.Ub(),x.Ub()),2&e){var n=x.gc(2);x.Db(2),x.Vc("*** ",x.ic(3,1,n.statusObj.errorMessage),"")}}function Ce(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",43),x.Tc(2,"\xa0"),x.Ub())}var Se=function(e){return[e]},xe=function(){return{user_click:"true"}};function Ae(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div"),x.Vb(1,"div",20),x.Vb(2,"div",21),x.Vb(3,"div",22),x.Qb(4,"input",23),x.Vb(5,"div",24),x.Vb(6,"span",25),x.Vb(7,"mat-icon"),x.Tc(8,"phone"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(9,ye,2,1,"div",26),x.Ub(),x.Ub(),x.Vb(10,"div",20),x.Vb(11,"div",21),x.Vb(12,"div",22),x.Qb(13,"input",27),x.Vb(14,"div",24),x.Vb(15,"span",25),x.Vb(16,"mat-icon"),x.Tc(17,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(18,ke,2,1,"div",26),x.Ub(),x.Ub(),x.Vb(19,"div",20),x.Vb(20,"div",21),x.Vb(21,"div",22),x.Qb(22,"input",28),x.Vb(23,"div",24),x.Vb(24,"span",25),x.Vb(25,"mat-icon"),x.Tc(26,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(27,Ve,2,1,"div",26),x.Ub(),x.Ub(),x.Rc(28,Ue,4,3,"div",29),x.Vb(29,"div",20),x.Vb(30,"div",21),x.Vb(31,"div",30),x.Vb(32,"button",31),x.cc("click",function(){x.Ec(n);var e=x.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),x.Rc(33,Ce,3,0,"span",12),x.Tc(34,"Ti\u1ebfp t\u1ee5c "),x.Ub(),x.Vb(35,"div",32),x.Vb(36,"span",33),x.Tc(37,"Ho\u1eb7c"),x.Ub(),x.Ub(),x.Vb(38,"div",5),x.Vb(39,"a",34),x.hc(40,"localize"),x.Vb(41,"span",35),x.Vb(42,"mat-icon",36),x.Tc(43,"center_focus_strong"),x.Ub(),x.Tc(44," S\u1eed d\u1ee5ng m\xe3 QR qu\xean m\u1eadt kh\u1ea9u"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Qb(45,"hr"),x.Vb(46,"div",37),x.Vb(47,"div",38),x.Vb(48,"a",39),x.Tc(49,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),x.Ub(),x.Ub(),x.Vb(50,"div"),x.Vb(51,"a",40),x.hc(52,"localize"),x.Tc(53,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),x.Ub(),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc();x.Db(9),x.nc("ngIf",r.form.controls.phone.invalid&&(r.form.controls.phone.dirty||r.form.controls.phone.touched)),x.Db(9),x.nc("ngIf",r.form.controls.password.invalid&&r.form.controls.password.dirty),x.Db(9),x.nc("ngIf",r.getErrorType("repassword","confirm_pass")&&r.form.controls.repassword.touched),x.Db(1),x.nc("ngIf",r.statusObj.errorMessage),x.Db(4),x.nc("disabled",r.form.invalid||r.statusObj.loading||0!=r.getErrorType("repassword","confirm_pass")),x.Db(1),x.nc("ngIf",r.statusObj.loading),x.Db(6),x.nc("routerLink",x.tc(13,Se,x.ic(40,9,"/auth/confirm_forgot_password_qr"))),x.Db(12),x.nc("routerLink",x.tc(15,Se,x.ic(52,11,"/auth/login")))("queryParams",x.sc(17,xe))}}function Oe(e,t){if(1&e&&(x.Vb(0,"div",47),x.Vb(1,"a"),x.Tc(2,"( Click v\xe0o \u0111\xe2y \u0111\u1ec3 g\u1eedi ngay )"),x.Ub(),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.Eb("href","sms:"+n.phone_send+"?body=MK "+n.response_change_pass.otp,x.Ic)}}function Pe(e,t){if(1&e){var n=x.Wb();x.Vb(0,"button",50),x.cc("click",function(){return x.Ec(n),x.gc(2).changeStepByNext()}),x.Tc(1," Ti\u1ebfp t\u1ee5c "),x.Ub()}}function De(e,t){if(1&e&&(x.Vb(0,"div",51),x.Vb(1,"div",52),x.Qb(2,"span",43),x.Ub(),x.Vb(3,"div",53),x.Tc(4),x.Ub(),x.Ub()),2&e){var n=x.gc(2);x.Db(4),x.Uc(n.currentMessage)}}function Re(e,t){if(1&e&&(x.Vb(0,"div"),x.Vb(1,"div",21),x.Vb(2,"div",44),x.Tc(3," Th\xf4ng tin m\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c ghi nh\u1eadn. \u0110\u1ec3 k\xedch ho\u1ea1t m\u1eadt kh\u1ea9u v\u1eeba t\u1ea1o vui l\xf2ng s\u1eed d\u1ee5ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),x.Vb(4,"strong"),x.Tc(5),x.Ub(),x.Tc(6," v\xe0 so\u1ea1n tin nh\u1eafn: "),x.Ub(),x.Vb(7,"div",45),x.Vb(8,"strong"),x.Tc(9),x.Ub(),x.Tc(10," g\u1eedi "),x.Vb(11,"strong"),x.Tc(12),x.Ub(),x.Ub(),x.Rc(13,Oe,3,1,"div",46),x.Vb(14,"div",47),x.Tc(15,' "C\u01b0\u1edbc ph\xed tin nh\u1eafn \u0111\u01b0\u1ee3c t\xednh theo gi\xe1 c\u01b0\u1edbc ph\xed th\xf4ng th\u01b0\u1eddng c\u1ee7a nh\xe0 m\u1ea1ng" '),x.Ub(),x.Vb(16,"div",47),x.Tc(17," Sau khi g\u1eedi tin nh\u1eafn vui l\xf2ng b\u1ea5m n\xfat b\xean d\u01b0\u1edbi \u0111\u1ec3 ti\u1ebfp t\u1ee5c "),x.Ub(),x.Vb(18,"div",22),x.Rc(19,Pe,2,0,"button",48),x.Rc(20,De,5,1,"div",49),x.Ub(),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(5),x.Uc(n.data_change_pass.phone),x.Db(4),x.Vc("MK ",n.response_change_pass.otp,""),x.Db(3),x.Uc(n.phone_send),x.Db(1),x.nc("ngIf",n.is_mobile),x.Db(6),x.nc("ngIf",2==n.step_by_step),x.Db(1),x.nc("ngIf",3==n.step_by_step)}}function Te(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",21),x.Vb(2,"div",44),x.Tc(3," M\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t th\xe0nh c\xf4ng. "),x.Ub(),x.Vb(4,"div",37),x.Vb(5,"div",38),x.Vb(6,"a",54),x.hc(7,"localize"),x.Tc(8,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),x.Ub(),x.Ub(),x.Vb(9,"div"),x.Vb(10,"a",55),x.Tc(11,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(6),x.nc("routerLink",x.tc(4,Se,x.ic(7,2,"/auth/login")))("queryParams",x.sc(6,xe)))}var Me,Qe=((Me=function(e){u(n,e);var t=h(n);function n(e,r,i){var o;return c(this,n),(o=t.call(this,r)).formBuilder=e,o.commonService=r,o.smsService=i,o.form=new b.k({}),o.step_by_step=1,o.currentMessage="",o.phone_send="",o.is_mobile=/Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o.is_mobile_ios=/webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),o.response_change_pass={},o.data_change_pass={},o}return l(n,[{key:"getError",value:function(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}},{key:"getErrorType",value:function(e,t){var n,r;return"repassword"===e&&"confirm_pass"===t?this.form.controls.repassword.value!=this.form.controls.password.value:!!(null===(n=this.form.controls[e].errors)||void 0===n?void 0:n[t])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[t])}},{key:"randomPhone",value:function(e){if(e.includes(",")){var t=e.split(",");return t[this.commonService.getRandomNumber(0,t.length-1)]}return e}},{key:"changePassword",value:function(){var e=this;if(this.form.valid){this.initStatusObj();var t=this.commonService.getFormObj(this.form),n={phone:t.phone,password:t.password};this.smsService.apiSmsChangePassPost(n).subscribe(function(t){var r,i;1==t.success?(e.successStatusObj(),e.step_by_step=2,e.response_change_pass=null!==(r=t.data)&&void 0!==r?r:{},e.data_change_pass=n):e.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"")})}}},{key:"getPhone",value:function(){var e=this;this.initStatusObj(),this.smsService.apiSmsGetPhoneGet().subscribe(function(t){var n,r,i;1==t.success?(e.successStatusObj(),e.phone_send=e.randomPhone(null!==(r=null===(n=t.data)||void 0===n?void 0:n.phone)&&void 0!==r?r:"")):e.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"",!0)})}},{key:"changeStepByNext",value:function(){var e=this;this.initStatusObj(),this.currentMessage="\u0110ang x\u1eed l\xfd d\u1eef li\u1ec7u",this.step_by_step=3,this.loop_check=window.setInterval(function(){e.smsService.apiSmsCheckStatusGet(e.data_change_pass.phone).subscribe(function(t){var n,r;1==t.success?(e.successStatusObj(),1==(null===(n=t.data)||void 0===n?void 0:n.status)&&(e.step_by_step=4,clearInterval(e.loop_check))):(e.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:""),e.currentMessage="H\u1ec7 th\u1ed1ng t\u1ea1m th\u1eddi kh\xf4ng th\u1ec3 x\u1eed l\xfd, vui l\xf2ng th\u1eed l\u1ea1i sau.",clearInterval(e.loop_check))})},1e3)}},{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({phone:["",[b.z.required]],password:["",[b.z.required,b.z.minLength(6)]],repassword:["",[b.z.required,b.z.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.getPhone(),d(p(n.prototype),"ngOnInit",this).call(this)}},{key:"ngOnDestroy",value:function(){this.loop_check&&clearInterval(this.loop_check),d(p(n.prototype),"ngDestroy",this).call(this)}}]),n}(C.a)).\u0275fac=function(e){return new(e||Me)(x.Pb(b.g),x.Pb(A.a),x.Pb(P.X))},Me.\u0275cmp=x.Jb({type:Me,selectors:[["app-confirm-forgot-password"]],features:[x.Ab],decls:18,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["class","row m-0",4,"ngIf"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"row","m-0"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","new-phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[1,"text-center","mt-2"],[1,"text-mute"],[1,"btn","btn-outline-primary","mt-2","w-100",3,"routerLink"],[1,"link-center"],[1,"mr-1"],[1,"text-center","mt-3"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sms-info"],[2,"text-align","right","font-size","15px","margin","10px 0","text-align","center"],["class","sms-info text-center mb-3",4,"ngIf"],[1,"sms-info","text-center","mb-3"],["class","btn btn-block","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"click"],[1,"loading"],[1,"icon"],[1,"text"],[3,"routerLink","queryParams"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank",1,"text-normal"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"form",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h2",5),x.Qb(6,"img",6),x.Ub(),x.Rc(7,me,6,3,"div",7),x.Vb(8,"div",8),x.Vb(9,"div",9),x.Vb(10,"span",10),x.Tc(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),x.Ub(),x.Ub(),x.Vb(12,"div",11),x.Rc(13,fe,6,3,"div",12),x.Rc(14,Ae,54,18,"div",12),x.Rc(15,Re,21,6,"div",12),x.Rc(16,Te,12,7,"div",12),x.Ub(),x.Ub(),x.Ub(),x.Qb(17,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(1),x.nc("formGroup",t.form),x.Db(6),x.nc("ngIf",!t.statusObj.loading),x.Db(6),x.nc("ngIf",t.statusObj.loading),x.Db(1),x.nc("ngIf",!t.statusObj.loading&&1==t.step_by_step),x.Db(1),x.nc("ngIf",1!=t.statusObj.loading&&(2==t.step_by_step||3==t.step_by_step)),x.Db(1),x.nc("ngIf",!t.statusObj.loading&&4==t.step_by_step))},directives:[b.B,b.s,b.l,s.m,s.k,b.d,b.r,b.j,T.a,I.b,g.k],pipes:[L.s,_.d],styles:['@charset "UTF-8";#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),Me);function Ie(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",12),x.Vb(2,"div",13),x.Vb(3,"span",14),x.Tc(4),x.hc(5,"mytranslate"),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.Vc("",x.ic(5,1,"lang_cms_common_loading"),"..."))}function Le(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),x.Ub())}function Ee(e,t){if(1&e&&(x.Vb(0,"div",27),x.Rc(1,Le,2,0,"div",11),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("password","required")||n.getErrorType("password","minlength"))}}function je(e,t){if(1&e&&(x.Vb(0,"div",15),x.Vb(1,"label",28),x.Tc(2),x.hc(3,"mytranslate"),x.Ub(),x.Ub()),2&e){var n=x.gc(2);x.Db(2),x.Vc("*** ",x.ic(3,1,n.statusObj.errorMessage),"")}}function Be(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",29),x.Tc(2,"\xa0"),x.Ub())}var ze=function(e){return[e]},qe=function(){return{user_click:"true"}};function Fe(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div"),x.Vb(1,"div",15),x.Vb(2,"div",16),x.Vb(3,"div",17),x.Qb(4,"input",18),x.Vb(5,"div",19),x.Vb(6,"span",20),x.Vb(7,"mat-icon"),x.Tc(8,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(9,Ee,2,1,"div",21),x.Ub(),x.Ub(),x.Rc(10,je,4,3,"div",22),x.Vb(11,"div",15),x.Vb(12,"div",16),x.Vb(13,"div",23),x.Vb(14,"button",24),x.cc("click",function(){x.Ec(n);var e=x.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),x.Rc(15,Be,3,0,"span",11),x.Tc(16,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Qb(17,"hr"),x.Vb(18,"div",25),x.Vb(19,"a",26),x.hc(20,"localize"),x.Tc(21,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc();x.Db(9),x.nc("ngIf",r.form.controls.password.invalid&&(r.form.controls.password.dirty||r.form.controls.password.touched)),x.Db(1),x.nc("ngIf",r.statusObj.errorMessage),x.Db(4),x.nc("disabled",r.form.invalid||r.statusObj.loading),x.Db(1),x.nc("ngIf",r.statusObj.loading),x.Db(4),x.nc("routerLink",x.tc(8,ze,x.ic(20,6,"/auth/login")))("queryParams",x.sc(10,qe))}}var Ne,We=((Ne=function(e){u(n,e);var t=h(n);function n(e,r,i,o){var a;return c(this,n),(a=t.call(this,r)).formBuilder=e,a.commonService=r,a.baseApiService=i,a.authService=o,a.form=new b.k({}),a}return l(n,[{key:"getError",value:function(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}},{key:"getErrorType",value:function(e,t){var n,r;return!!(null===(n=this.form.controls[e].errors)||void 0===n?void 0:n[t])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[t])}},{key:"changePassword",value:function(){var e=this;if(this.form.valid){var t=this.commonService.getFormObj(this.form),n=this.commonService.getMyQueryParam("token");this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConfirmForgotPasswordGet(n,t.password).subscribe(function(t){var n;1==t.success?(e.successStatusObj(),e.baseApiService.redirectLoginByRole("")):e.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))}}},{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({password:["",[b.z.required,b.z.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),d(p(n.prototype),"ngOnInit",this).call(this)}}]),n}(C.a)).\u0275fac=function(e){return new(e||Ne)(x.Pb(b.g),x.Pb(A.a),x.Pb(O.a),x.Pb(P.d))},Ne.\u0275cmp=x.Jb({type:Ne,selectors:[["app-confirm-forgot-password-admin"]],features:[x.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"form",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h2",5),x.Qb(6,"img",6),x.Ub(),x.Vb(7,"div",7),x.Vb(8,"div",8),x.Vb(9,"span",9),x.Tc(10,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),x.Ub(),x.Ub(),x.Vb(11,"div",10),x.Rc(12,Ie,6,3,"div",11),x.Rc(13,Fe,22,11,"div",11),x.Ub(),x.Ub(),x.Ub(),x.Qb(14,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(1),x.nc("formGroup",t.form),x.Db(11),x.nc("ngIf",t.statusObj.loading),x.Db(1),x.nc("ngIf",!t.statusObj.loading))},directives:[b.B,b.s,b.l,s.m,b.d,b.r,b.j,T.a,I.b,g.k],pipes:[L.s,_.d],encapsulation:2}),Ne),He=o("0pw4"),Ge=o("Ik8O"),Ye=function(){function r(e,t,n,i,o){var a=this;c(this,r),this._legacyCanvasSize=r.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),n&&"object"==typeof n?this._onDecode=t:(n||i||o?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),this._onDecodeError=(t="object"==typeof n?n:{}).onDecodeError||("function"==typeof n?n:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||("function"==typeof i?i:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize="number"==typeof n?n:"number"==typeof i?i:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;var s=!1;if(e.hidden&&(e.hidden=!1,s=!0),document.body.contains(e)||(document.body.appendChild(e),s=!0),n=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(i=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),(o=this.$overlay.style).position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(l){}n.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(function(){var t=window.getComputedStyle(e);"none"===t.display&&(e.style.setProperty("display","block","important"),s=!0),"visible"!==t.visibility&&(e.style.setProperty("visibility","visible","important"),s=!0),s&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",a.$overlay&&a.$overlay.parentElement&&a.$overlay.parentElement.removeChild(a.$overlay),delete a.$overlay,delete a.$codeOutlineHighlight),a.$overlay&&a._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=r.createQrEngine()}var i,s,d,u,b,h,g,p,m,f,v,y,_,k,w,V;return l(r,[{key:"hasFlash",value:(V=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.$video.srcObject){e.next=7;break}if(this.$video.srcObject instanceof MediaStream){e.next=4;break}return e.abrupt("return",!1);case 4:t=this.$video.srcObject,e.next=10;break;case 7:return e.next=9,this._getCameraStream();case 9:t=e.sent.stream;case 10:return e.abrupt("return","torch"in t.getVideoTracks()[0].getSettings());case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",!1);case 16:return e.prev=16,t&&t!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),r._stopVideoStream(t)),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[0,13,16,19]])})),function(){return V.apply(this,arguments)})},{key:"isFlashOn",value:function(){return this._flashOn}},{key:"toggleFlash",value:(w=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._flashOn){e.next=5;break}return e.next=3,this.turnFlashOff();case 3:e.next=7;break;case 5:return e.next=7,this.turnFlashOn();case 7:case"end":return e.stop()}},e,this)})),function(){return w.apply(this,arguments)})},{key:"turnFlashOn",value:(k=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._flashOn||this._destroyed||(this._flashOn=!0,!this._active||this._paused)){e.next=13;break}return e.prev=1,e.next=4,this.hasFlash();case 4:if(e.sent){e.next=6;break}throw"No flash available";case 6:return e.next=8,this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]});case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(1),this._flashOn=!1,e.t0;case 13:case"end":return e.stop()}},e,this,[[1,10]])})),function(){return k.apply(this,arguments)})},{key:"turnFlashOff",value:(_=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._flashOn,!e.t0){e.next=5;break}return this._flashOn=!1,e.next=5,this._restartVideoStream();case 5:case"end":return e.stop()}},e,this)})),function(){return _.apply(this,arguments)})},{key:"destroy",value:function(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),r._postWorkerMessage(this._qrEnginePromise,"close")}},{key:"start",value:(y=a(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._destroyed){e.next=2;break}throw Error("The QR scanner can not be started as it had been destroyed.");case 2:if(this._active&&!this._paused||("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,document.hidden)){e.next=29;break}if(this._paused=!1,!this.$video.srcObject){e.next=8;break}return e.next=6,this.$video.play();case 6:e.next=29;break;case 8:return e.prev=8,e.next=11,this._getCameraStream();case 11:if(t=e.sent,n=t.stream,i=t.facingMode,this._active&&!this._paused){e.next=18;break}r._stopVideoStream(n),e.next=23;break;case 18:return this._setVideoMirror(i),this.$video.srcObject=n,e.next=22,this.$video.play();case 22:this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(function(){}));case 23:e.next=29;break;case 25:if(e.prev=25,e.t0=e.catch(8),this._paused){e.next=29;break}throw this._active=!1,e.t0;case 29:case"end":return e.stop()}},e,this,[[8,25]])})),function(){return y.apply(this,arguments)})},{key:"stop",value:function(){this.pause(),this._active=!1}},{key:"pause",value:(v=a(regeneratorRuntime.mark(function e(){var t,n,i=this,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],this._paused=!0,this._active){e.next=3;break}return e.abrupt("return",!0);case 3:if(this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none"),n=function(){i.$video.srcObject instanceof MediaStream&&(r._stopVideoStream(i.$video.srcObject),i.$video.srcObject=null)},!t){e.next=9;break}e.t0=(n(),!0),e.next=12;break;case 9:return e.next=11,new Promise(function(e){return setTimeout(e,300)});case 11:e.t0=!!this._paused&&(n(),!0);case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}},e,this)})),function(){return v.apply(this,arguments)})},{key:"setCamera",value:(f=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t!==this._preferredCamera,!e.t0){e.next=5;break}return this._preferredCamera=t,e.next=5,this._restartVideoStream();case 5:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"setGrayscaleWeights",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:n,useIntegerApproximation:i})}},{key:"setInversionMode",value:function(e){r._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}},{key:"_onPlay",value:function(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}},{key:"_onLoadedMetaData",value:function(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}},{key:"_onVisibilityChange",value:function(){document.hidden?this.pause():this._active&&this.start()}},{key:"_calculateScanRegion",value:function(e){var t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}},{key:"_updateOverlay",value:function(){var e=this;requestAnimationFrame(function(){if(e.$overlay){var t=e.$video,r=t.videoWidth,i=t.videoHeight,o=t.offsetWidth,a=t.offsetHeight,c=t.offsetLeft,s=t.offsetTop,l=window.getComputedStyle(t),d=l.objectFit,u=r/i,b=o/a;switch(d){case"none":var h=r,g=i;break;case"fill":h=o,g=a;break;default:("cover"===d?u>b:u<b)?h=(g=a)*u:g=(h=o)/u,"scale-down"===d&&(h=Math.min(h,r),g=Math.min(g,i))}var p=n(l.objectPosition.split(" ").map(function(e,t){var n=parseFloat(e);return e.endsWith("%")?(t?a-g:o-h)*n/100:n}),2),m=p[0],f=p[1];b=e._scanRegion.height||i,d=e._scanRegion.x||0;var v=e._scanRegion.y||0;(u=e.$overlay.style).width=(l=e._scanRegion.width||r)/r*h+"px",u.height=b/i*g+"px",u.top=s+f+v/i*g+"px",i=/scaleX\(-1\)/.test(t.style.transform),u.left=c+(i?o-m-h:m)+(i?r-d-l:d)/r*h+"px",u.transform=t.style.transform}})}},{key:"_scanFrame",value:function(){var e=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(a(regeneratorRuntime.mark(function t(){var n,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1>=e.$video.readyState){t.next=29;break}if(n=Date.now()-e._lastScanTimestamp,i=1e3/e._maxScansPerSecond,t.t0=n<i,!t.t0){t.next=6;break}return t.next=6,new Promise(function(e){return setTimeout(e,i-n)});case 6:return e._lastScanTimestamp=Date.now(),t.prev=7,t.next=10,r.scanImage(e.$video,{scanRegion:e._scanRegion,qrEngine:e._qrEnginePromise,canvas:e.$canvas});case 10:o=t.sent,t.next=18;break;case 13:if(t.prev=13,t.t1=t.catch(7),e._active){t.next=17;break}return t.abrupt("return");case 17:e._onDecodeError(t.t1);case 18:if(t.t2=!r._disableBarcodeDetector,t.t2){t.next=25;break}return t.next=22,e._qrEnginePromise;case 22:t.t3=t.sent,t.t4=Worker,t.t2=t.t3 instanceof t.t4;case 25:if(t.t5=t.t2,t.t5){t.next=28;break}e._qrEnginePromise=r.createQrEngine();case 28:o?(e._onDecode?e._onDecode(o):e._legacyOnDecode&&e._legacyOnDecode(o.data),e.$codeOutlineHighlight&&(clearTimeout(e._codeOutlineHighlightRemovalTimeout),e._codeOutlineHighlightRemovalTimeout=void 0,e.$codeOutlineHighlight.setAttribute("viewBox",(e._scanRegion.x||0)+" "+(e._scanRegion.y||0)+" "+(e._scanRegion.width||e.$video.videoWidth)+" "+(e._scanRegion.height||e.$video.videoHeight)),e.$codeOutlineHighlight.firstElementChild.setAttribute("points",o.cornerPoints.map(function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)}).join(" ")),e.$codeOutlineHighlight.style.display="")):e.$codeOutlineHighlight&&!e._codeOutlineHighlightRemovalTimeout&&(e._codeOutlineHighlightRemovalTimeout=setTimeout(function(){return e.$codeOutlineHighlight.style.display="none"},100));case 29:e._scanFrame();case 30:case"end":return t.stop()}},t,null,[[7,13]])})))}},{key:"_onDecodeError",value:function(e){e!==r.NO_QR_CODE_FOUND&&console.log(e)}},{key:"_getCameraStream",value:(m=a(regeneratorRuntime.mark(function e(){var n,r,i,o,a,c,s,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices){e.next=2;break}throw"Camera not found.";case 2:n=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",i=(r=[{width:{min:1024}},{width:{min:768}},{}]).map(function(e){return Object.assign({},e,(t={},r=n,i={exact:l._preferredCamera},r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t));var t,r,i}),o=0,a=[].concat(t(i),r);case 4:if(!(o<a.length)){e.next=18;break}return c=a[o],e.prev=6,e.next=9,navigator.mediaDevices.getUserMedia({video:c,audio:!1});case 9:return s=e.sent,e.abrupt("return",{stream:s,facingMode:this._getFacingMode(s)||(c.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment")});case 13:e.prev=13,e.t0=e.catch(6);case 15:o++,e.next=4;break;case 18:throw"Camera not found.";case 19:case"end":return e.stop()}},e,this,[[6,13]])})),function(){return m.apply(this,arguments)})},{key:"_restartVideoStream",value:(p=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._paused,e.next=3,this.pause(!0);case 3:if(e.t1=e.sent,!e.t1){e.next=6;break}e.t1=!t;case 6:if(e.t0=e.t1,!e.t0){e.next=9;break}e.t0=this._active;case 9:if(e.t2=e.t0,!e.t2){e.next=13;break}return e.next=13,this.start();case 13:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"_setVideoMirror",value:function(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}},{key:"_getFacingMode",value:function(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}}],[{key:"hasCamera",value:(g=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.listCameras(!1);case 3:return e.abrupt("return",!!e.sent.length);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return g.apply(this,arguments)})},{key:"listCameras",value:(h=a(regeneratorRuntime.mark(function e(){var t,n,i,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],navigator.mediaDevices){e.next=3;break}return e.abrupt("return",[]);case 3:if(i=function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return e.abrupt("return",e.sent.filter(function(e){return"videoinput"===e.kind}));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.prev=4,e.t0=t,!e.t0){e.next=10;break}return e.next=9,i();case 9:e.t0=e.sent.every(function(e){return!e.label});case 10:if(e.t1=e.t0,!e.t1){e.next=15;break}return e.next=14,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 14:n=e.sent;case 15:e.next=19;break;case 17:e.prev=17,e.t2=e.catch(4);case 19:return e.prev=19,e.next=22,i();case 22:return e.abrupt("return",e.sent.map(function(e,t){return{id:e.deviceId,label:e.label||(0===t?"Default Camera":"Camera "+(t+1))}}));case 23:return e.prev=23,n&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),r._stopVideoStream(n)),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[4,17],[19,,23,26]])})),function(){return h.apply(this,arguments)})},{key:"scanImage",value:(b=a(regeneratorRuntime.mark(function e(t,i,o,c){var s,l,d,u,b,h,g,p,m,f,v,y,_,k=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=k.length>4&&void 0!==k[4]&&k[4],l=k.length>5&&void 0!==k[5]&&k[5],u=!1,i&&("scanRegion"in i||"qrEngine"in i||"canvas"in i||"disallowCanvasResizing"in i||"alsoTryWithoutScanRegion"in i||"returnDetailedScanResult"in i)?(d=i.scanRegion,o=i.qrEngine,c=i.canvas,s=i.disallowCanvasResizing||!1,l=i.alsoTryWithoutScanRegion||!1,u=!0):i||o||c||s||l?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),i=!!o,e.prev=4,e.next=7,Promise.all([o||r.createQrEngine(),r._loadImage(t)]);case 7:if(b=e.sent,h=n(b,2),o=h[0],m=h[1],g=r._drawToCanvas(m,d,c,s),p=n(g,2),c=p[0],f=p[1],!(o instanceof Worker)){e.next=21;break}return y=o,i||r._postWorkerMessageSync(y,"inversionMode","both"),e.next=18,new Promise(function(e,t){var n,i,o,a=-1;i=function(c){c.data.id===a&&(y.removeEventListener("message",i),y.removeEventListener("error",o),clearTimeout(n),null!==c.data.data?e({data:c.data.data,cornerPoints:r._convertPoints(c.data.cornerPoints,d)}):t(r.NO_QR_CODE_FOUND))},o=function(e){y.removeEventListener("message",i),y.removeEventListener("error",o),clearTimeout(n),t("Scanner error: "+(e?e.message||e:"Unknown Error"))},y.addEventListener("message",i),y.addEventListener("error",o),n=setTimeout(function(){return o("timeout")},1e4);var s=f.getImageData(0,0,c.width,c.height);a=r._postWorkerMessageSync(y,"decode",s,[s.data.buffer])});case 18:v=e.sent,e.next=24;break;case 21:return e.next=23,Promise.race([new Promise(function(e,t){return window.setTimeout(function(){return t("Scanner error: timeout")},1e4)}),a(regeneratorRuntime.mark(function e(){var i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.detect(c);case 3:if(i=e.sent,a=n(i,1),u=a[0]){e.next=8;break}throw r.NO_QR_CODE_FOUND;case 8:return e.abrupt("return",{data:u.rawValue,cornerPoints:r._convertPoints(u.cornerPoints,d)});case 11:if(e.prev=11,e.t0=e.catch(0),!/not implemented|service unavailable/.test(u=e.t0.message||e.t0)){e.next=15;break}return e.abrupt("return",(r._disableBarcodeDetector=!0,r.scanImage(t,{scanRegion:d,canvas:c,disallowCanvasResizing:s,alsoTryWithoutScanRegion:l})));case 15:throw"Scanner error: "+u;case 16:case"end":return e.stop()}},e,null,[[0,11]])}))()]);case 23:v=e.sent;case 24:return e.abrupt("return",u?v:v.data);case 27:if(e.prev=27,e.t0=e.catch(4),d&&l){e.next=31;break}throw e.t0;case 31:return e.next=33,r.scanImage(t,{qrEngine:o,canvas:c,disallowCanvasResizing:s});case 33:return _=e.sent,e.abrupt("return",u?_:_.data);case 35:return e.prev=35,i||r._postWorkerMessage(o,"close"),e.finish(35);case 38:case"end":return e.stop()}},e,null,[[4,27,35,38]])})),function(e,t,n,r){return b.apply(this,arguments)})},{key:"createQrEngine",value:(u=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),e.t0=!r._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats,!e.t0){e.next=6;break}return e.next=5,BarcodeDetector.getSupportedFormats();case 5:e.t0=e.sent.includes("qr_code");case 6:if(!e.t0){e.next=10;break}e.t1=new BarcodeDetector({formats:["qr_code"]}),e.next=11;break;case 10:e.t1=o.e(34).then(o.bind(null,"hyQ9")).then(function(e){return e.createWorker()});case 11:return e.abrupt("return",e.t1);case 12:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)})},{key:"_convertPoints",value:function(t,n){if(!n)return t;var r=n.x||0,i=n.y||0,o=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;var a,c=e(t);try{for(c.s();!(a=c.n()).done;){var s=a.value;s.x=s.x*o+r,s.y=s.y*n+i}}catch(l){c.e(l)}finally{c.f()}return t}},{key:"_stopVideoStream",value:function(t){var n,r=e(t.getTracks());try{for(r.s();!(n=r.n()).done;){var i=n.value;i.stop(),t.removeTrack(i)}}catch(o){r.e(o)}finally{r.f()}}},{key:"_drawToCanvas",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=n||document.createElement("canvas");var i=t&&t.x?t.x:0,o=t&&t.y?t.y:0,a=t&&t.width?t.width:e.videoWidth||e.width,c=t&&t.height?t.height:e.videoHeight||e.height;return r||(r=t&&t.downScaledWidth?t.downScaledWidth:a,t=t&&t.downScaledHeight?t.downScaledHeight:c,n.width!==r&&(n.width=r),n.height!==t&&(n.height=t)),(t=n.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,i,o,a,c,0,0,n.width,n.height),[n,t]}},{key:"_loadImage",value:(d=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Image)){e.next=4;break}return e.next=3,r._awaitImageLoad(t);case 3:return e.abrupt("return",t);case 4:if(!(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)){e.next=6;break}return e.abrupt("return",t);case 6:if(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t){e.next=8;break}throw"Unsupported image type.";case 8:return(n=new Image).src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString(),e.prev=10,e.next=13,r._awaitImageLoad(n);case 13:return e.abrupt("return",n);case 14:return e.prev=14,(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(n.src),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[10,,14,17]])})),function(e){return d.apply(this,arguments)})},{key:"_awaitImageLoad",value:(s=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.complete&&0!==t.naturalWidth,e.t0){e.next=4;break}return e.next=4,new Promise(function(e,n){var r=function r(i){t.removeEventListener("load",r),t.removeEventListener("error",r),i instanceof ErrorEvent?n("Image load error"):e()};t.addEventListener("load",r),t.addEventListener("error",r)});case 4:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"_postWorkerMessage",value:(i=a(regeneratorRuntime.mark(function e(t,n,i,o){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,t;case 3:return e.t1=e.sent,e.t2=n,e.t3=i,e.t4=o,e.abrupt("return",e.t0._postWorkerMessageSync.call(e.t0,e.t1,e.t2,e.t3,e.t4));case 8:case"end":return e.stop()}},e)})),function(e,t,n,r){return i.apply(this,arguments)})},{key:"_postWorkerMessageSync",value:function(e,t,n,i){if(!(e instanceof Worker))return-1;var o=r._workerMessageId++;return e.postMessage({id:o,type:t,data:n},i),o}},{key:"WORKER_PATH",set:function(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}}]),r}();Ye.DEFAULT_CANVAS_SIZE=400,Ye.NO_QR_CODE_FOUND="No QR code found",Ye._disableBarcodeDetector=!1,Ye._workerMessageId=0;var Ke=Ye,Ze=o("2Vo4"),Je=o("Zmss"),$e=o("IyRd");function Xe(e,t){if(1&e){var n=x.Wb();x.Vb(0,"zxing-scanner",7),x.cc("deviceChange",function(e){return x.Ec(n),x.gc().currentDevice=e})("scanSuccess",function(e){return x.Ec(n),x.gc().onCodeResult(e)})("permissionResponse",function(e){return x.Ec(n),x.gc().onHasPermission(e)})("camerasFound",function(e){return x.Ec(n),x.gc().onCamerasFound(e)})("torchCompatible",function(e){return x.Ec(n),x.gc().onTorchCompatible(e)}),x.Ub()}if(2&e){var r=x.gc();x.nc("torch",r.torchEnabled)("device",r.currentDevice)("tryHarder",r.tryHarder)("formats",r.formatsEnabled)}}function et(e,t){if(1&e&&(x.Vb(0,"span",8),x.Tc(1),x.Ub()),2&e){var n=x.gc();x.Db(1),x.Vc("( ",n.contentResult," )")}}var tt,nt=((tt=function(e){u(n,e);var t=h(n);function n(e){var r;return c(this,n),(r=t.call(this,e)).commonService=e,r.outContentScan=new x.o,r.outNotCamAllow=new x.o,r.isShowDebugLog=!1,r.isShowScanner=!1,r.availableDevices=[],r.currentDevice=void 0,r.hasDevices=!1,r.hasPermission=!1,r.qrResultString="",r.torchEnabled=!1,r.torchAvailable$=new Ze.a(!1),r.tryHarder=!1,r.formatsEnabled=[Ge.BarcodeFormat.CODE_128,Ge.BarcodeFormat.DATA_MATRIX,Ge.BarcodeFormat.EAN_13,Ge.BarcodeFormat.QR_CODE],r.deviceCamSelect=0,r.contentResult=null,r.isShowLog=!1,r.snd=new Audio,r.snd=new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU="),r}return l(n,[{key:"clearResult",value:function(){this.qrResultString=""}},{key:"onCamerasFound",value:function(e){this.availableDevices=e,this.hasDevices=Boolean(e&&e.length)}},{key:"onCodeResult",value:function(e){this.qrResultString=e,Je.a.isEncode(e)?this.switchChangeContent(Je.a.decode(e)):this.switchChangeContent(null)}},{key:"onDeviceSelectChange",value:function(e){var t=this.availableDevices.find(function(t){return t.deviceId===e});this.currentDevice=t||void 0}},{key:"onHasPermission",value:function(e){this.hasPermission=e}},{key:"onTorchCompatible",value:function(e){this.torchAvailable$.next(e||!1)}},{key:"toggleTorch",value:function(){this.torchEnabled=!this.torchEnabled}},{key:"toggleTryHarder",value:function(){this.tryHarder=!this.tryHarder}},{key:"switchVideoScan",value:function(){this.deviceCamSelect++,this.deviceCamSelect>=this.availableDevices.length&&(this.deviceCamSelect=0),this.currentDevice=this.availableDevices[this.deviceCamSelect]}},{key:"unInitSscanCam",value:function(){this.isShowScanner=!1}},{key:"initVideoScan",value:function(){this.isShowScanner=!0}},{key:"initScanCam",value:function(){this.isShowScanner=!0}},{key:"onFileSelected",value:function(e){var t=e.target.files;if(null==t?void 0:t.length){var n=t[0];if(!n)return;this.scanProcessSelectFile(e,n,0)}else console.log("jel"),this.switchChangeContent(null)}},{key:"scanProcessSelectFile",value:function(e,t,n){var r=this;Ke.scanImage(t,{returnDetailedScanResult:!0}).then(function(t){r.thatLog("onFileSelected: 0 "+JSON.stringify(t)),e.target.value="";var n=t.data;r.thatLog("onFileSelected: 1 "+n),Je.a.isEncode(n)?r.switchChangeContent(Je.a.decode(n)):r.switchChangeContent(null)}).catch(function(i){n>=2?(e.target.value="",r.thatLog("onFileSelected: 2 "+JSON.stringify(i)),r.switchChangeContent(null)):r.scanProcessSelectFile(e,t,n++)})}},{key:"pauseScanQrcode",value:function(){this.isShowScanner=!1}},{key:"switchChangeContent",value:function(e){this.contentResult=e,this.pauseScanQrcode(),this.beep(),navigator&&navigator.vibrate&&navigator.vibrate(200),this.thatLog("switchChangeContent: "+e),this.outContentScan.emit(this.contentResult)}},{key:"thatLog",value:function(e){!0===this.isShowDebugLog&&console.log("__AZT SCAN__ :: "+e)}},{key:"beep",value:function(){this.snd&&this.snd.play()}},{key:"ngOnDestroy",value:function(){this.unInitSscanCam(),d(p(n.prototype),"ngDestroy",this).call(this)}}]),n}(C.a)).\u0275fac=function(e){return new(e||tt)(x.Pb(A.a))},tt.\u0275cmp=x.Jb({type:tt,selectors:[["azt-scan-qrcode"]],outputs:{outContentScan:"outContentScan",outNotCamAllow:"outNotCamAllow"},features:[x.Ab],decls:10,vars:2,consts:[[1,"scan__card-video"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible",4,"ngIf"],[1,"text-center","mt-3"],["class","text-center",4,"ngIf"],["type","file","name","fileQrcode",2,"display","none",3,"change"],["formChoseFile",""],[1,"link-center",3,"click"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible"],[1,"text-center"]],template:function(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",0),x.Rc(1,Xe,1,4,"zxing-scanner",1),x.Ub(),x.Vb(2,"div",2),x.Rc(3,et,2,1,"span",3),x.Vb(4,"input",4,5),x.cc("change",function(e){return t.onFileSelected(e)}),x.Ub(),x.Vb(6,"a",6),x.cc("click",function(){return x.Ec(n),x.Ac(5).click()}),x.Vb(7,"mat-icon"),x.Tc(8,"upload"),x.Ub(),x.Tc(9," T\u1ea3i l\xean m\xe3 c\xf3 s\u1eb5n"),x.Ub(),x.Ub()}2&e&&(x.Db(1),x.nc("ngIf",t.isShowScanner),x.Db(2),x.nc("ngIf",t.isShowLog))},directives:[s.m,T.a,$e.a],styles:[".scan__card-img[_ngcontent-%COMP%], .scan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.scan__card-video[_ngcontent-%COMP%]{position:relative}.scan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.scan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.43137254901960786);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),tt),rt=["aztScanQrcode"];function it(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),x.Ub())}function ot(e,t){if(1&e&&(x.Vb(0,"div",36),x.Rc(1,it,2,0,"div",34),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("password","required")||n.getErrorType("password","minlength"))}}function at(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),x.Ub())}function ct(e,t){if(1&e&&(x.Vb(0,"div",36),x.Rc(1,at,2,0,"div",34),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("repassword","confirm_pass"))}}function st(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",37),x.Tc(2,"\xa0"),x.Ub())}function lt(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",38),x.Vb(1,"p",39),x.Tc(2,"Kh\xf4ng th\u1ec3 x\xe1c nh\u1eadn y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u. M\xe3 Qrcode v\xe0 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u0103ng nh\u1eadp kh\xf4ng tr\xf9ng kh\u1edbp. Vui l\xf2ng th\u1eed l\u1ea1i."),x.Ub(),x.Vb(3,"button",40),x.cc("click",function(){return x.Ec(n),x.gc(2).reloadProcessForgot()}),x.Tc(4,"Th\u1eed l\u1ea1i"),x.Ub(),x.Ub()}}function dt(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",22),x.Vb(1,"div",23),x.Vb(2,"div",24),x.Vb(3,"div",25),x.Qb(4,"input",26),x.Vb(5,"div",27),x.Vb(6,"span",28),x.Vb(7,"mat-icon"),x.Tc(8,"qr_code"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(9,"div",23),x.Vb(10,"div",24),x.Vb(11,"div",25),x.Qb(12,"input",29),x.Vb(13,"div",27),x.Vb(14,"span",28),x.Vb(15,"mat-icon"),x.Tc(16,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(17,ot,2,1,"div",30),x.Ub(),x.Ub(),x.Vb(18,"div",23),x.Vb(19,"div",24),x.Vb(20,"div",25),x.Qb(21,"input",31),x.Vb(22,"div",27),x.Vb(23,"span",28),x.Vb(24,"mat-icon"),x.Tc(25,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(26,ct,2,1,"div",30),x.Ub(),x.Ub(),x.Vb(27,"div",23),x.Vb(28,"div",24),x.Vb(29,"div",32),x.Vb(30,"button",33),x.cc("click",function(){x.Ec(n);var e=x.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),x.Rc(31,st,3,0,"span",34),x.Tc(32,"Ti\u1ebfp t\u1ee5c "),x.Ub(),x.Ub(),x.Ub(),x.Rc(33,lt,5,0,"div",35),x.Ub(),x.Ub()}if(2&e){var r=x.gc();x.Db(4),x.Eb("disabled",!0),x.Db(13),x.nc("ngIf",r.form.controls.password.invalid&&r.form.controls.password.dirty),x.Db(9),x.nc("ngIf",0!=r.getErrorType("repassword","confirm_pass")&&r.form.controls.repassword.touched),x.Db(4),x.nc("disabled",r.statusObj.errorMessage||r.form.invalid||r.statusObj.loading||0!=r.getErrorType("repassword","confirm_pass")),x.Db(1),x.nc("ngIf",!0===r.statusObj.loading),x.Db(2),x.nc("ngIf",r.statusObj.errorMessage)}}var ut,bt=function(e){return{"d-none":e}},ht=function(e){return[e]},gt=function(){return{user_click:"true"}},pt=((ut=function(e){u(n,e);var t=h(n);function n(e,r,i,o){var a;return c(this,n),(a=t.call(this,e)).commonService=e,a.localStorageObjetct=r,a.formBuilder=i,a.qrCodeForgotPasswordService=o,a.subscriptions=new re.a,a.form=new b.k({}),a.stepByStep=0,a.sussScanNextConf=!1,a}return l(n,[{key:"getError",value:function(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}},{key:"getErrorType",value:function(e,t){var n,r;return"repassword"===e&&"confirm_pass"===t?this.form.controls.repassword.value!=this.form.controls.password.value:!!(null===(n=this.form.controls[e].errors)||void 0===n?void 0:n[t])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[t])}},{key:"reloadProcessForgot",value:function(){this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam(),this.stepByStep=0,this.form.reset(),this.initStatusObj(),this.sussScanNextConf=!1}},{key:"outContentScan",value:function(e){var t=this;null!==e?this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordAnonymousCheckForgotPasswordQrCodePost({hash:e}).subscribe(function(n){var r;1==n.success&&1==(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.status)?(t.stepByStep=1,t.form.controls.hash.setValue(e),t.sussScanNextConf=!0):(t.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),t.reloadProcessForgot())}):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}},{key:"changePassword",value:function(){var e=this;this.initStatusObj();var t=this.commonService.getFormObj(this.form);this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordChangePasswordByQrcodePost({hash:t.hash,password:t.password}).subscribe(function(t){0!=t.success?(e.localStorageObjetct.clearAllCache(),e.successStatusObj("\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng.",!0),e.commonService.myNavigation("/auth/forgot_password_susscess")):(e.errorStatusObj("Y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u th\u1ea5t b\u1ea1i.",!0),e.successStatusObj())})}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){e.elementaztScanQrcode&&e.elementaztScanQrcode.initScanCam()},0)}},{key:"ngOnInit",value:function(){this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.form=this.formBuilder.group({hash:["",[b.z.required]],password:["",[b.z.required,b.z.minLength(6)]],repassword:["",[b.z.required,b.z.minLength(6)]]}),d(p(n.prototype),"ngOnInit",this).call(this)}}]),n}(C.a)).\u0275fac=function(e){return new(e||ut)(x.Pb(A.a),x.Pb(He.a),x.Pb(b.g),x.Pb(P.T))},ut.\u0275cmp=x.Jb({type:ut,selectors:[["app-confirm-forgot-password"]],viewQuery:function(e,t){var n;1&e&&x.cd(rt,!0),2&e&&x.zc(n=x.dc())&&(t.elementaztScanQrcode=n.first)},features:[x.Ab],decls:33,vars:15,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"loginscan_scanmode_cam",3,"ngClass"],[1,"text-center","mb-3"],[3,"outContentScan"],["aztScanQrcode",""],["class","loginscan_scanmode_conf",4,"ngIf"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal","mt-1",3,"routerLink","queryParams"],[1,"loginscan_scanmode_conf"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\xe3 x\xe1c th\u1ef1c","formControlName","hash",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[4,"ngIf"],["class","col-sm-12 mt-2",4,"ngIf"],[1,"alert","alert-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-sm-12","mt-2"],[1,"text-danger"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"form",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h2",5),x.Qb(6,"img",6),x.Ub(),x.Vb(7,"div",7),x.Vb(8,"div",8),x.Qb(9,"div",9),x.Qb(10,"div",9),x.Qb(11,"div",9),x.Ub(),x.Ub(),x.Vb(12,"div",10),x.Vb(13,"div",11),x.Vb(14,"span",12),x.Tc(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi b\u1eb1ng m\xe3 QRCode"),x.Ub(),x.Ub(),x.Vb(16,"div",13),x.Vb(17,"div",14),x.Vb(18,"div",15),x.Tc(19," Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode "),x.Ub(),x.Vb(20,"azt-scan-qrcode",16,17),x.cc("outContentScan",function(e){return t.outContentScan(e)}),x.Ub(),x.Ub(),x.Rc(22,dt,34,6,"div",18),x.Ub(),x.Qb(23,"hr"),x.Vb(24,"div",15),x.Vb(25,"div",19),x.Vb(26,"a",20),x.Tc(27,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),x.Ub(),x.Ub(),x.Vb(28,"div"),x.Vb(29,"a",21),x.hc(30,"localize"),x.Tc(31,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Qb(32,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(1),x.nc("formGroup",t.form),x.Db(8),x.nc("ngClass",t.stepByStep+2==1?"active":t.stepByStep+2>1?"active pro":""),x.Db(1),x.nc("ngClass",t.stepByStep+2==2?"active":t.stepByStep+2>2?"active pro":""),x.Db(1),x.nc("ngClass",t.stepByStep+2==3?"active":t.stepByStep+2>3?"active pro":""),x.Db(6),x.nc("ngClass",x.tc(10,bt,t.sussScanNextConf)),x.Db(5),x.nc("ngIf",t.sussScanNextConf),x.Db(7),x.nc("routerLink",x.tc(12,ht,x.ic(30,8,"/auth/login")))("queryParams",x.sc(14,gt)))},directives:[b.B,b.s,b.l,s.k,nt,s.m,g.k,b.d,b.r,b.j,T.a,I.b],pipes:[_.d],styles:['@charset "UTF-8";#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),ut),mt=o("0IaG"),ft=o("hZBc"),vt=o("k3bj");function yt(e,t){if(1&e&&(x.Vb(0,"div",3),x.Vb(1,"mat-icon",4),x.Tc(2,"access_time"),x.Ub(),x.Tc(3),x.Ub()),2&e){var n=x.gc();x.Db(3),x.Vc(" ",n.stringDuration,"")}}var _t,kt=((_t=function(e){u(n,e);var t=h(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).content="",e.width=0,e.height=0,e.expired=0,e.expiredAction=new x.o,e.startDuration=0,e.isDuration=!1,e.stringDuration="__ : __",e}return l(n,[{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){e.reInitComponent()},0)}},{key:"reInitComponent",value:function(){this.bindUrlToQrCode(),0!=this.expired&&(this.isDuration=!0,this.startDuration=Math.floor(Date.now()/1e3),this.initLoopDuration())}},{key:"initLoopDuration",value:function(){var e=this;this.loopDuration=setInterval(function(){var t=Math.floor(Date.now()/1e3),n=e.expired-(t-e.startDuration);if(n<0)e.clearLoopDuration(),e.qrcode.clear(),e.expiredAction.emit();else{var r=Math.floor(n/60),i=n-60*r;e.stringDuration=(r<10?"0"+r:""+r)+" : "+(i<10?"0"+i:""+i)}},1e3)}},{key:"clearLoopDuration",value:function(){this.loopDuration&&clearInterval(this.loopDuration)}},{key:"bindUrlToQrCode",value:function(){this.qrcode=this.commonService.createObjectQrcode(this.content,this.width,this.height,"text",!0,"image-qrcode-created"),this.qrcode._oDrawing._elCanvas.style.width="100%",this.qrcode._oDrawing._elCanvas.style.opacity=".9"}},{key:"downloadQrcode",value:function(e){e||(e="azota-qr"),e=this.getTimeSaveQrcode()+"_"+e+".jpg";var t=this.createFrameQrcodeSaveLocal(this.qrcode._oDrawing._elCanvas),n=document.createElement("a");document.body.appendChild(n),n.setAttribute("href",t),n.setAttribute("download",e),n.click()}},{key:"getTimeSaveQrcode",value:function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("_")}},{key:"createFrameQrcodeSaveLocal",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=420,t.height=420,n&&(n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n.drawImage(e,0,0,e.width,e.height,Math.floor((t.height-e.height)/2),(t.width-e.width)/2,e.width,e.height)),t.toDataURL("image/jpeg",1)}}]),n}(C.a)).\u0275fac=function(e){return wt(e||_t)},_t.\u0275cmp=x.Jb({type:_t,selectors:[["azt-create-qr-image"]],inputs:{content:"content",width:"width",height:"height",expired:"expired"},outputs:{expiredAction:"expiredAction"},features:[x.Ab],decls:3,vars:1,consts:[[1,"qr-scan-box"],["class","duration",4,"ngIf"],["id","image-qrcode-created"],[1,"duration"],[2,"font-size","18px"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Rc(1,yt,4,1,"div",1),x.Qb(2,"div",2),x.Ub()),2&e&&(x.Db(1),x.nc("ngIf",t.isDuration))},directives:[s.m,T.a],styles:[".qr-scan-box[_ngcontent-%COMP%]{border:1px solid #e0e0e0}#image-qrcode-created[_ngcontent-%COMP%]{margin:20px}.duration[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;font-weight:500}"]}),_t),wt=x.Xb(kt),Vt=["elementCreateQr"];function Ut(e,t){1&e&&x.Qb(0,"header-backend",13),2&e&&x.nc("headerTitle","")("back_link","/admin/testbank/dashboard")}function Ct(e,t){1&e&&x.Qb(0,"header-frontend",14),2&e&&x.nc("headerTitle","")("back_link","/student/dashboard/0")}function St(e,t){if(1&e&&(x.Vb(0,"div",15),x.Qb(1,"azt-create-qr-image",16,17),x.Ub()),2&e){var n=x.gc();x.Db(1),x.nc("content",n.contentQrcodeHash)("width",350)("height",350)("expired",0)}}function xt(e,t){if(1&e&&(x.Vb(0,"div",18),x.Vb(1,"div",19),x.Vb(2,"mat-icon"),x.Tc(3,"visibility_off"),x.Ub(),x.Ub(),x.Vb(4,"div",20),x.Tc(5),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(5),x.Vc(" ",n.notiContentString," ")}}function At(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",7),x.Vb(1,"button",21),x.cc("click",function(){return x.Ec(n),x.gc().downloadQrCode()}),x.Vb(2,"mat-icon",22),x.Tc(3,"download"),x.Ub(),x.Tc(4," T\u1ea3i xu\u1ed1ng m\xe3"),x.Ub(),x.Ub()}}function Ot(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",7),x.Vb(1,"button",21),x.cc("click",function(){return x.Ec(n),x.gc().openDialog()}),x.Vb(2,"mat-icon",22),x.Tc(3,"add_photo_alternate"),x.Ub(),x.Tc(4," T\u1ea1o m\xe3 qu\xean m\u1eadt kh\u1ea9u m\u1edbi"),x.Ub(),x.Ub()}}var Pt,Dt,Rt,Tt=((Rt=function(e){u(n,e);var t=h(n);function n(e,r,i,o){var a;return c(this,n),(a=t.call(this,e)).commonService=e,a.dialog=r,a.activeRoute=i,a.qrCodeForgotPasswordService=o,a.notiContentString="",a.contentQrcodeHash="",a.role=0,a}return l(n,[{key:"checkQrThisMe",value:function(){var e=this;this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCheckForgotPasswordQrCodeGet().subscribe(function(t){var n;1==t.success?e.notiContentString=0!=(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.status)?"M\xe3 Qrcode \u0111\xe3 t\u1ed3n t\u1ea1i. B\u1ea1n kh\xf4ng th\u1ec3 xem m\xe3 hi\u1ec7n t\u1ea1i. T\u1ea1o m\xe3 m\u1edbi trong tr\u01b0\u1eddng h\u1ee3p b\u1ea1n \u0111\xe3 m\u1ea5t m\xe3 Qrcode.":"B\u1ea1n ch\u01b0a t\u1ea1o m\xe3 Qrcode d\xf9ng trong tr\u01b0\u1eddng h\u1ee3p qu\xean m\u1eadt kh\u1ea9u. Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi.":e.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}},{key:"createQrcodeForgot",value:function(){var e=this;this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCreateForgotPasswordQrCodeGet().subscribe(function(t){var n,r;1==t.success?e.contentQrcodeHash=null!==(r=null===(n=t.data)||void 0===n?void 0:n.qrCode)&&void 0!==r?r:"":e.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}},{key:"openDialog",value:function(){var e=this;this.dialog.open(Mt).afterClosed().subscribe(function(t){!0===t&&e.createQrcodeForgot()})}},{key:"downloadQrCode",value:function(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-forgot")}},{key:"ngOnInit",value:function(){var e,t=null!==(e=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==e?e:"0";this.role=parseInt(t,10),this.checkQrThisMe(),d(p(n.prototype),"ngOnInit",this).call(this)}}]),n}(C.a)).\u0275fac=function(e){return new(e||Rt)(x.Pb(A.a),x.Pb(mt.b),x.Pb(g.a),x.Pb(P.T))},Rt.\u0275cmp=x.Jb({type:Rt,selectors:[["app-gzip-tool"]],viewQuery:function(e,t){var n;1&e&&x.cd(Vt,!0),2&e&&x.zc(n=x.dc())&&(t.elementCreateQr=n.first)},features:[x.Ab],decls:16,vars:6,consts:[["class","mb-3",3,"headerTitle","back_link",4,"ngIf"],[3,"headerTitle","back_link",4,"ngIf"],[1,"container","component-wrap","centerBoth","hasBg","mt-3"],[1,"card","mb-5"],[1,"card-body"],[1,"text-center"],[1,"card-content","mt-3","text-center"],[1,"card-center-row"],[1,"qrcode-block","card-center-row"],[1,"qrcode-block-fake","card-center-row"],["class","qrcode-block-real",4,"ngIf"],["class","qrcode-block-fake-content",4,"ngIf"],["class","card-center-row",4,"ngIf"],[1,"mb-3",3,"headerTitle","back_link"],[3,"headerTitle","back_link"],[1,"qrcode-block-real"],[3,"content","width","height","expired"],["elementCreateQr",""],[1,"qrcode-block-fake-content"],[1,"qrcode-block-icon"],[1,"qrcode-block-note"],[1,"card-center-row","btn","btn-outline-primary",3,"click"],[2,"margin-right","10px"]],template:function(e,t){1&e&&(x.Rc(0,Ut,1,2,"header-backend",0),x.Rc(1,Ct,1,2,"header-frontend",1),x.Vb(2,"div",2),x.Vb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h3",5),x.Vb(6,"b"),x.Tc(7,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),x.Ub(),x.Ub(),x.Vb(8,"div",6),x.Vb(9,"div",7),x.Vb(10,"div",8),x.Vb(11,"div",9),x.Rc(12,St,3,4,"div",10),x.Rc(13,xt,6,1,"div",11),x.Ub(),x.Ub(),x.Ub(),x.Rc(14,At,5,0,"div",12),x.Rc(15,Ot,5,0,"div",12),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.nc("ngIf",0==t.role),x.Db(1),x.nc("ngIf",1==t.role),x.Db(11),x.nc("ngIf",t.contentQrcodeHash),x.Db(1),x.nc("ngIf",!t.contentQrcodeHash),x.Db(1),x.nc("ngIf",t.contentQrcodeHash),x.Db(1),x.nc("ngIf",!t.contentQrcodeHash))},directives:[s.m,ft.a,vt.a,kt,T.a],styles:[".card-center-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.qrcode-block[_ngcontent-%COMP%]{padding:10px;border:1px solid #e0e0e0;margin-bottom:20px;max-width:400px;max-height:400px;min-width:300px;min-height:300px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.qrcode-block-fake[_ngcontent-%COMP%]{width:100%;height:100%}.qrcode-block-fake-content[_ngcontent-%COMP%]{padding:10px}.qrcode-block-note[_ngcontent-%COMP%]{line-height:30px}"]}),Rt),Mt=((Dt=function e(){c(this,e)}).\u0275fac=function(e){return new(e||Dt)},Dt.\u0275cmp=x.Jb({type:Dt,selectors:[["dialog-conf-content-qrcode-dialog"]],decls:16,vars:1,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-dialog-close","",1,"btn","btn-default","mr-3"],["cdkFocusInitial","",1,"btn","btn-outline-primary",3,"mat-dialog-close"]],template:function(e,t){1&e&&(x.Vb(0,"h2",0),x.Tc(1,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),x.Ub(),x.Vb(2,"mat-dialog-content",1),x.Vb(3,"h3"),x.Tc(4,'B\u1ea5m "X\xe1c nh\u1eadn" \u0111\u1ed3ng ngh\u0129a v\u1edbi vi\u1ec7c b\u1ea1n \u0111\xe3 hi\u1ec3u v\u1ec1 c\xe1c \u0111i\u1ec1u sau'),x.Ub(),x.Vb(5,"p"),x.Tc(6,"1. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 duy nh\u1ea5t. Khi b\u1ea1n t\u1ea1o m\u1edbi m\xe3, m\xe3 c\u0169 s\u1ebd kh\xf4ng c\xf2n gi\xe1 tr\u1ecb s\u1eed d\u1ee5ng."),x.Ub(),x.Vb(7,"p"),x.Tc(8,"2. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 ch\xeca kho\xe1. Vui l\xf2ng kh\xf4ng chia s\u1ebb hay \u0111\u1ec3 ng\u01b0\u1eddi kh\xe1c c\xf3 \u0111\u01b0\u1ee3c m\xe3 qrcode c\u1ee7a b\u1ea1n."),x.Qb(9,"br"),x.Tc(10,"Sau khi t\u1ea1o th\xe0nh c\xf4ng, vui l\xf2ng t\u1ea3i xu\u1ed1ng m\xe3 Qrcode \u0111\u1ec3 s\u1eed d\u1ee5ng cho m\u1ee5c \u0111\xedch qu\xean m\u1eadt kh\u1ea9u sau n\xe0y."),x.Ub(),x.Ub(),x.Vb(11,"mat-dialog-actions",2),x.Vb(12,"button",3),x.Tc(13,"Hu\u1ef7"),x.Ub(),x.Vb(14,"button",4),x.Tc(15,"X\xe1c nh\u1eadn"),x.Ub(),x.Ub()),2&e&&(x.Db(14),x.nc("mat-dialog-close",!0))},directives:[mt.h,mt.e,mt.c,mt.d],encapsulation:2}),Dt),Qt=((Pt=function(e){u(n,e);var t=h(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).step_by_step=3,e}return l(n,[{key:"redirectToCreateQrCode",value:function(){this.commonService.myNavigation("/auth/create-qr-forgot-pass/0")}},{key:"redirectToHome",value:function(){this.commonService.myNavigation("/admin/testbank/dashboard")}}]),n}(C.a)).\u0275fac=function(e){return It(e||Pt)},Pt.\u0275cmp=x.Jb({type:Pt,selectors:[["app-confirm-forgot-password"]],features:[x.Ab],decls:25,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"btn-block-center"],[1,"btn","btn-outline-info","w-100","mr-3",3,"click"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"div",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h2",5),x.Qb(6,"img",6),x.Ub(),x.Vb(7,"div",7),x.Vb(8,"div",8),x.Qb(9,"div",9),x.Qb(10,"div",9),x.Qb(11,"div",9),x.Ub(),x.Ub(),x.Vb(12,"div",10),x.Vb(13,"div",11),x.Vb(14,"span",12),x.Tc(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng"),x.Ub(),x.Ub(),x.Vb(16,"div",13),x.Vb(17,"p"),x.Tc(18,"B\u1ea1n \u0111\xe3 \u0111\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng. M\xe3 Qrcode \u0111\xe3 s\u1eed d\u1ee5ng c\xf3 th\u1ec3 s\u1eed d\u1ee5ng l\u1ea1i. \u0110\u1ec3 \u0111\u1ea3m b\u1ea3o an to\xe0n, b\u1ea1n n\xean t\u1ea1o l\u1ea1i m\xe3 Qrcode."),x.Ub(),x.Vb(19,"div",14),x.Vb(20,"a",15),x.cc("click",function(){return t.redirectToHome()}),x.Tc(21,"B\u1ecf qua v\xe0 v\u1ec1 trang ch\u1ee7"),x.Ub(),x.Vb(22,"a",16),x.cc("click",function(){return t.redirectToCreateQrCode()}),x.Tc(23,"T\u1ea1o l\u1ea1i m\xe3 Qrcode"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Qb(24,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(9),x.nc("ngClass",t.step_by_step+2==1?"active":t.step_by_step+2>1?"active pro":""),x.Db(1),x.nc("ngClass",t.step_by_step+2==2?"active":t.step_by_step+2>2?"active pro":""),x.Db(1),x.nc("ngClass",t.step_by_step+2==3?"active":t.step_by_step+2>3?"active pro":""))},directives:[s.k],styles:['@charset "UTF-8";#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin .5s ease}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\uf00c"!important;font-family:Font Awesome\\ 5 Free!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.btn-block-center[_ngcontent-%COMP%], .link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),Pt),It=x.Xb(Qt),Lt=o("rlhx"),Et=["elementCreateQr"],jt=["aztScanQrcode"];function Bt(e,t){1&e&&(x.Vb(0,"h2",25),x.Qb(1,"img",26),x.Ub())}function zt(e,t){1&e&&(x.Vb(0,"div",20),x.Tc(1,"\u0110\u1ec3 \u0111\u0103ng nh\u1eadp l\xean thi\u1ebft b\u1ecb n\xe0y, vui l\xf2ng t\u1ea1o m\xe3 \u0111\u1ec3 thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp qu\xe9t."),x.Ub())}function qt(e,t){1&e&&(x.Vb(0,"div",20),x.Tc(1,"D\xf9ng thi\u1ebft b\u1ecb c\u1ea7n \u0111\u0103ng nh\u1eadp qu\xe9t m\xe3 b\xean d\u01b0\u1edbi"),x.Ub())}function Ft(e,t){if(1&e&&(x.Vb(0,"div",27),x.Qb(1,"span",28),x.Tc(2),x.Ub()),2&e){var n=x.gc();x.Db(2),x.Vc("\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode: ",n.nameSessionConfirm,"")}}function Nt(e,t){1&e&&(x.Vb(0,"div",27),x.Qb(1,"span",28),x.Tc(2,"\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode"),x.Ub())}function Wt(e,t){if(1&e&&(x.Vb(0,"span"),x.Tc(1,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),x.Qb(2,"br"),x.Tc(3),x.Ub()),2&e){var n=x.gc(2);x.Db(3),x.Vc("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",n.nameSessionConfirm,"")}}function Ht(e,t){1&e&&(x.Vb(0,"div"),x.Qb(1,"span",28),x.Tc(2,"\xa0 "),x.Vb(3,"span",36),x.Tc(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),x.Ub(),x.Ub())}function Gt(e,t){if(1&e&&(x.Vb(0,"div",37),x.Tc(1),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.Uc(n.textResultErr)}}function Yt(e,t){if(1&e&&(x.Vb(0,"div",38),x.Tc(1),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.Uc(n.textResultSuss)}}function Kt(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",28),x.Tc(2,"\xa0"),x.Ub())}function Zt(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",28),x.Tc(2,"\xa0"),x.Ub())}function Jt(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",39),x.Vb(1,"button",40),x.cc("click",function(){return x.Ec(n),x.gc(2).confContentPendingLogin(1)}),x.Rc(2,Kt,3,0,"span",32),x.Tc(3," Ch\u1ea5p nh\u1eadn "),x.Ub(),x.Vb(4,"button",41),x.cc("click",function(){return x.Ec(n),x.gc(2).confContentPendingLogin(2)}),x.Rc(5,Zt,3,0,"span",32),x.Tc(6," T\u1eeb ch\u1ed1i "),x.Ub(),x.Ub()}if(2&e){var r=x.gc(2);x.Db(1),x.nc("disabled",r.isLoadingBtn||r.textResultErr),x.Db(1),x.nc("ngIf",r.isLoadingBtn),x.Db(2),x.nc("disabled",r.isLoadingBtn||r.textResultErr),x.Db(1),x.nc("ngIf",r.isLoadingBtn)}}function $t(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div"),x.Vb(1,"button",42),x.cc("click",function(){return x.Ec(n),x.gc(2).backScanActionWithIsLogin()}),x.Tc(2,"Quay l\u1ea1i"),x.Ub(),x.Ub()}}function Xt(e,t){if(1&e&&(x.Vb(0,"div",29),x.Vb(1,"div",30),x.Vb(2,"div",31),x.Rc(3,Wt,4,1,"span",32),x.Ub(),x.Rc(4,Ht,5,0,"div",32),x.Rc(5,Gt,2,1,"div",33),x.Rc(6,Yt,2,1,"div",34),x.Rc(7,Jt,7,4,"div",35),x.Rc(8,$t,3,0,"div",32),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(3),x.nc("ngIf",n.nameSessionConfirm),x.Db(1),x.nc("ngIf",n.isLoadingBtn),x.Db(1),x.nc("ngIf",n.textResultErr),x.Db(1),x.nc("ngIf",n.textResultSuss),x.Db(1),x.nc("ngIf",!n.textResultSuss||!n.isConfirmBtn),x.Db(1),x.nc("ngIf",n.isLogin&&!1===n.isLoadingBtn&&!0===n.isConfirmBtn)}}function en(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",46),x.cc("click",function(){return x.Ec(n),x.gc(2).createRequestLoginHashCodeAction()}),x.Vb(1,"div",47),x.Vb(2,"div"),x.Vb(3,"mat-icon"),x.Tc(4,"sync"),x.Ub(),x.Ub(),x.Vb(5,"div"),x.Tc(6,"T\u1ea1o m\u1edbi m\xe3"),x.Ub(),x.Ub(),x.Ub()}}function tn(e,t){if(1&e){var n=x.Wb();x.Vb(0,"azt-create-qr-image",48,49),x.cc("expiredAction",function(){return x.Ec(n),x.gc(2).expiredQrcodeAction()}),x.Ub()}if(2&e){var r=x.gc(2);x.nc("content",r.contentCreateQrcode)("width",350)("height",350)("expired",r.durationQrcodeExpire)}}function nn(e,t){if(1&e&&(x.Vb(0,"div",43),x.Rc(1,en,7,0,"div",44),x.Rc(2,tn,2,4,"azt-create-qr-image",45),x.Ub()),2&e){var n=x.gc();x.Db(1),x.nc("ngIf",!1===n.isLogin&&!n.contentCreateQrcode),x.Db(1),x.nc("ngIf",n.contentCreateQrcode)}}function rn(e,t){if(1&e){var n=x.Wb();x.Vb(0,"a",50),x.cc("click",function(){return x.Ec(n),x.gc().downloadQrCode()}),x.Vb(1,"mat-icon"),x.Tc(2,"download"),x.Ub(),x.Tc(3," T\u1ea3i xu\u1ed1ng m\xe3"),x.Ub()}}function on(e,t){1&e&&(x.Vb(0,"div",16),x.Vb(1,"span"),x.Tc(2,"- HO\u1eb6C B\u1ea0N C\xd3 TH\u1ec2 -"),x.Ub(),x.Ub())}function an(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",16),x.Vb(1,"a",51),x.cc("click",function(){return x.Ec(n),x.gc().switchModeView()}),x.Vb(2,"span",52),x.Vb(3,"mat-icon",53),x.Tc(4,"center_focus_strong"),x.Ub(),x.Tc(5," Qu\xe9t m\xe3 QR c\xf3 s\u1eb5n"),x.Ub(),x.Ub(),x.Ub()}}function cn(e,t){if(1&e&&(x.Vb(0,"div",37),x.Tc(1),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.Uc(n.textResultErr)}}function sn(e,t){if(1&e&&(x.Vb(0,"div",38),x.Tc(1),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.Uc(n.textResultSuss)}}function ln(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",28),x.Tc(2,"\xa0"),x.Ub())}function dn(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",39),x.Vb(1,"button",40),x.cc("click",function(){return x.Ec(n),x.gc(2).confContentLogin()}),x.Rc(2,ln,3,0,"span",32),x.Tc(3," \u0110\u0103ng nh\u1eadp "),x.Ub(),x.Vb(4,"button",41),x.cc("click",function(){return x.Ec(n),x.gc(2).reopenScanCamInit()}),x.Tc(5,"Th\u1eed l\u1ea1i"),x.Ub(),x.Ub()}if(2&e){var r=x.gc(2);x.Db(1),x.nc("disabled",r.isLoadingBtn||r.textResultErr),x.Db(1),x.nc("ngIf",r.isLoadingBtn),x.Db(2),x.nc("disabled",r.isLoadingBtn)}}function un(e,t){if(1&e&&(x.Vb(0,"div",29),x.Vb(1,"div",30),x.Vb(2,"div",31),x.Tc(3,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),x.Qb(4,"br"),x.Tc(5,"v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n"),x.Ub(),x.Rc(6,cn,2,1,"div",33),x.Rc(7,sn,2,1,"div",34),x.Rc(8,dn,6,3,"div",35),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(6),x.nc("ngIf",n.textResultErr),x.Db(1),x.nc("ngIf",n.textResultSuss),x.Db(1),x.nc("ngIf",!n.textResultSuss)}}function bn(e,t){1&e&&(x.Vb(0,"div"),x.Qb(1,"span",28),x.Tc(2,"\xa0 "),x.Vb(3,"span",36),x.Tc(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),x.Ub(),x.Ub())}function hn(e,t){if(1&e&&x.Qb(0,"div",56),2&e){var n=x.gc(2);x.nc("innerHTML",n.textResultErr,x.Fc)}}function gn(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",28),x.Tc(2,"\xa0"),x.Ub())}function pn(e,t){if(1&e&&(x.Vb(0,"button",57),x.Rc(1,gn,3,0,"span",32),x.Tc(2),x.Ub()),2&e){var n=x.gc(2);x.nc("disabled",!n.textResultSuss),x.Db(1),x.nc("ngIf",n.isLoadingBtn),x.Db(1),x.Vc(" ",n.textResultSuss," ")}}function mn(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",29),x.Vb(1,"div",30),x.Vb(2,"div",31),x.Vb(3,"span"),x.Tc(4,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),x.Qb(5,"br"),x.Tc(6),x.Ub(),x.Ub(),x.Rc(7,bn,5,0,"div",32),x.Rc(8,hn,1,1,"div",54),x.Vb(9,"div",39),x.Rc(10,pn,3,3,"button",55),x.Vb(11,"button",41),x.cc("click",function(){return x.Ec(n),x.gc().reopenScanCamInit()}),x.Tc(12,"Th\u1eed l\u1ea1i"),x.Ub(),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc();x.Db(6),x.Vc("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",r.nameSessionConfirm,""),x.Db(1),x.nc("ngIf",r.isLoadingBtn),x.Db(1),x.nc("ngIf",r.textResultErr),x.Db(2),x.nc("ngIf",!r.textResultSuss&&r.isLoadingBtn),x.Db(1),x.nc("disabled",r.isLoadingBtn)}}var fn,vn=function(e){return[e]},yn=function(e){return{return_url:e,user_click:"true"}},_n=function(e){return{"d-none":e}},kn=function(e){return{return_url:e}},wn=((fn=function(e){u(n,e);var t=h(n);function n(e,r,i,o,a,s){var l;return c(this,n),(l=t.call(this,e)).commonService=e,l.baseApiService=r,l.localStorageObjetct=i,l.activeRoute=o,l.qrCodeLoginService=a,l.redirectService=s,l.returnUrl="",l.isLogin=!1,l.modeShowInit="create",l.contentCreateQrcode="",l.sussScanNextConf=!1,l.scanQrContentConfirm="",l.isLoadingBtn=!1,l.isConfirmBtn=!1,l.textResultSuss="",l.textResultErr="",l.nameSessionConfirm="",l.durationQrcodeExpire=0,l.pendingDuration=!1,l.role=0,l.backLink="",l}return l(n,[{key:"forgotPassword",value:function(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}},{key:"reloadLogin",value:function(){this.isLogin&&this.redirectService.redirectToDashboard()}},{key:"downloadQrCode",value:function(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-login")}},{key:"switchModeView",value:function(){this.modeShowInit="create"===this.modeShowInit?"scan":"create",this.elementaztScanQrcode&&("scan"===this.modeShowInit?(this.elementaztScanQrcode.initScanCam(),this.clearLoopRefLogin(),this.clearLoopPendingLogin()):(this.elementaztScanQrcode.unInitSscanCam(),this.initLoopRefLogin(),this.initPendingLoadingConfirm()))}},{key:"clearLoopPendingLogin",value:function(){this.loopPendingLogin&&clearInterval(this.loopPendingLogin)}},{key:"clearLoopRefLogin",value:function(){this.loopRefCheckQrcodeLogin&&clearInterval(this.loopRefCheckQrcodeLogin)}},{key:"reopenScanCamInit",value:function(){this.textResultErr="",this.textResultSuss="",this.elementaztScanQrcode&&(this.elementaztScanQrcode.initScanCam(),this.sussScanNextConf=!1)}},{key:"backScanActionWithIsLogin",value:function(){this.isLogin&&(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.createQrCodeWithUser())}},{key:"expiredQrcodeAction",value:function(){this.pendingDuration||(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.isLogin?(this.createQrCodeWithUser(),this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, \u0111\xe3 t\u1ea1o m\xe3 qrcode m\u1edbi. Vui l\xf2ng thao t\xe1c l\u1ea1i.")):this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, vui l\xf2ng t\u1ea1o m\u1edbi v\xe0 thao t\xe1c l\u1ea1i."))}},{key:"createQrCodeWithUser",value:function(){var e=this;this.initStatusObj(),this.subscriptions.add(this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeGet().subscribe(function(t){var n,r,i,o;1==t.success?(e.successStatusObj(),e.contentCreateQrcode=null!==(r=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.qrCode)&&void 0!==r?r:"",e.durationQrcodeExpire=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.duration)&&void 0!==o?o:0,e.initPendingLoadingConfirm()):e.errorStatusObj("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u",!0)}))}},{key:"outContentScan",value:function(e){var t,n=this;null!==e?(this.scanQrContent=e,this.sussScanNextConf=!0,this.isLogin||(null===(t=this.elementaztScanQrcode)||void 0===t||t.pauseScanQrcode(),this.isLoadingBtn=!0,this.textResultSuss="",this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeRequestPost({qrCode:this.scanQrContent}).subscribe(function(e){var t,r,i,o;n.isLoadingBtn=!1,console.log(e),1==e.success?(n.isLoadingBtn=!0,n.scanQrContentConfirm=null!==(r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.qrCode)&&void 0!==r?r:"",n.nameSessionConfirm=null!==(o=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",n.textResultSuss="",n.initLoopPendingLogin()):(n.textResultSuss="",n.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.")}))):(this.sussScanNextConf=!0,this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng \u0111\xfang. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",""))}},{key:"initLoopPendingLogin",value:function(){var e=this;this.loopPendingLogin=window.setInterval(function(){e.qrCodeLoginService.apiQrCodeLoginCheckLoginQrCodeRequestConfirmedPost({qrCode:e.scanQrContentConfirm}).subscribe(function(t){var n,r;1==t.success&&(1==(null===(n=t.data)||void 0===n?void 0:n.status)?(e.clearLoopPendingLogin(),e.commonService.gaEvent("sign_in_login_in"),e.isLoadingBtn=!1,e.textResultSuss="",e.localStorageObjetct.clearAllCache(),e.successStatusObj("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng.",!0),e.baseApiService.redirectLoginByRole(null!==(r=e.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:"")):t.data&&2===t.data.status&&(e.clearLoopPendingLogin(),e.isLoadingBtn=!1,e.errorStatusObj("X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",!0),e.textResultErr="X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i.<br/> M\xe3 Qr kh\xf4ng c\xf2n ho\u1ea1t \u0111\u1ed9ng.<br/> Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi \u0111\u1ec3 \u0111\u0103ng nh\u1eadp l\u1ea1i.",e.textResultSuss=""))})},3e3)}},{key:"initPendingLoadingConfirm",value:function(){var e=this;this.isLogin&&(this.loopPendingLogin=window.setInterval(function(){e.qrCodeLoginService.apiQrCodeLoginGetFirstQrCodeLoginRequestGet().subscribe(function(t){var n,r,i,o;1==t.success&&t.data&&""!==t.data.qrCode&&(e.pendingDuration=!0,e.scanQrContentConfirm=null!==(r=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.qrCode)&&void 0!==r?r:"",e.nameSessionConfirm=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",e.clearLoopPendingLogin())})},3e3))}},{key:"confContentPendingLogin",value:function(e){var t=this;this.isLogin&&(this.isLoadingBtn=!0,this.qrCodeLoginService.apiQrCodeLoginConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContentConfirm,status:e}).subscribe(function(n){1==n.success?t.textResultSuss=1==e?"X\xe1c nh\u1eadn th\xe0nh c\xf4ng":"T\u1eeb ch\u1ed1i th\xe0nh c\xf4ng":t.textResultErr="H\u1ec7 th\u1ed1ng kh\xf4ng ph\u1ea3n h\u1ed3i. Vui l\xf2ng t\u1ea3i l\u1ea1i trang \u0111\u1ec3 th\u1eed l\u1ea1i.",t.isConfirmBtn=!0,t.isLoadingBtn=!1}))}},{key:"createRequestLoginHashCodeAction",value:function(){var e=this;this.isLogin||this.qrCodeLoginService.apiQrCodeLoginAnonymousCreateLoginQrCodePost().subscribe(function(t){var n,r,i,o,a,c;1==t.success&&(e.contentCreateQrcode=null!==(r=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.qrCode)&&void 0!==r?r:"",e.nameSessionConfirm=null!==(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.name)&&void 0!==o?o:"",e.durationQrcodeExpire=null!==(c=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.duration)&&void 0!==c?c:0,e.initLoopRefLogin())})}},{key:"initLoopRefLogin",value:function(){var e=this;0==this.isLogin&&(this.loopRefCheckQrcodeLogin=window.setInterval(function(){e.qrCodeLoginService.apiQrCodeLoginAnonymousCheckLoginQrCodeRequestConfimedPost({qrCode:e.contentCreateQrcode,status:0}).subscribe(function(t){var n,r;1===t.success&&404!=(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.status)&&(e.commonService.gaEvent("sign_in_login_in"),e.commonService.snackSuccess("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng."),e.baseApiService.redirectLoginByRole(null!==(r=e.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:""))})},3e3))}},{key:"confContentLogin",value:function(){var e=this;this.isLoadingBtn=!0,this.isLogin&&this.qrCodeLoginService.apiQrCodeLoginAnonymousConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContent,status:1}).subscribe(function(t){e.isLoadingBtn=!1,1===t.success?e.textResultSuss="X\xe1c nh\u1eadn th\xe0nh c\xf4ng. Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c ph\xea duy\u1ec7t":e.textResultErr="Thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp ho\u1eb7c m\xe3 \u0111\u0103ng nh\u1eadp kh\xf4ng h\u1ee3p l\u1ec7. Vui l\xf2ng ki\u1ec3m tra v\xe0 thao t\xe1c l\u1ea1i"})}},{key:"ngOnInit",value:function(){var e,t=null!==(e=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==e?e:"0";switch(this.role=parseInt(t,10),this.role){case 0:this.backLink="/admin/testbank/dashboard";break;case 1:this.backLink="/student/dashboard/0";break;case 2:this.backLink="/auth/login"}this.isLogin=this.baseApiService.isLogin(),this.isLogin&&this.createQrCodeWithUser(),this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),d(p(n.prototype),"ngOnInit",this).call(this)}},{key:"ngOnDestroy",value:function(){this.clearLoopRefLogin(),this.clearLoopPendingLogin(),d(p(n.prototype),"ngDestroy",this).call(this)}}]),n}(C.a)).\u0275fac=function(e){return new(e||fn)(x.Pb(A.a),x.Pb(O.a),x.Pb(He.a),x.Pb(g.a),x.Pb(Lt.a),x.Pb(D.a))},fn.\u0275cmp=x.Jb({type:fn,selectors:[["app-login"]],viewQuery:function(e,t){var n;1&e&&(x.cd(Et,!0),x.cd(jt,!0)),2&e&&(x.zc(n=x.dc())&&(t.elementCreateQr=n.first),x.zc(n=x.dc())&&(t.elementaztScanQrcode=n.first))},features:[x.Ab],decls:39,vars:37,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6","mb-5"],["class","text-center",4,"ngIf"],[1,"card"],[1,"text-center","loginscan__card-header"],[1,"back-btn",2,"font-size","16px","color","#6d6d6d",3,"routerLink","queryParams"],[2,"font-size","16px","color","#6d6d6d","font-weight","500"],[1,"loginscan__card-body"],[1,"loginscan_createmode",3,"ngClass"],["class","text-center mb-3",4,"ngIf"],["class","text-center mb-3 block-inline-center",4,"ngIf"],["class","loginscan_scanmode_conf",4,"ngIf"],["class","loginscan__card-img",4,"ngIf"],[1,"text-center","mt-3"],["class","link-center",3,"click",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[1,"loginscan_scanmode",3,"ngClass"],[1,"text-center","mb-3"],[3,"routerLink","queryParams"],[1,"loginscan_scanmode_cam",3,"ngClass"],[3,"outContentScan"],["aztScanQrcode",""],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"text-center","mb-3","block-inline-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"loginscan_scanmode_conf"],[1,"loginscan_scanmode_conf--box"],[1,"boxtext"],[4,"ngIf"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336",4,"ngIf"],["class","boxtext-suss","style","font-size: 20px; margin-bottom: 20px; color: #009688",4,"ngIf"],["class","mt-3",4,"ngIf"],[2,"font-size","18px"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336"],[1,"boxtext-suss",2,"font-size","20px","margin-bottom","20px","color","#009688"],[1,"mt-3"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled","click"],["type","button",1,"btn","btn-warning",3,"disabled","click"],["type","button",1,"btn","btn-primary","mr-3",3,"click"],[1,"loginscan__card-img"],["class","box-create-login-img",3,"click",4,"ngIf"],[3,"content","width","height","expired","expiredAction",4,"ngIf"],[1,"box-create-login-img",3,"click"],[1,"box-create-login-content"],[3,"content","width","height","expired","expiredAction"],["elementCreateQr",""],[1,"link-center",3,"click"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"link-center"],[1,"mr-1"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336; line-height: 30px",3,"innerHTML",4,"ngIf"],["type","button","class","btn btn-primary mr-3",3,"disabled",4,"ngIf"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336","line-height","30px",3,"innerHTML"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"div",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Rc(5,Bt,2,0,"h2",5),x.Vb(6,"div",6),x.Vb(7,"div",7),x.Vb(8,"a",8),x.hc(9,"localize"),x.Vb(10,"mat-icon"),x.Tc(11,"arrow_back"),x.Ub(),x.Ub(),x.Vb(12,"span",9),x.Tc(13,"\u0110\u0103ng nh\u1eadp v\u1edbi m\xe3 qr code"),x.Ub(),x.Ub(),x.Vb(14,"div",10),x.Vb(15,"div",11),x.Rc(16,zt,2,0,"div",12),x.Rc(17,qt,2,0,"div",12),x.Rc(18,Ft,3,1,"div",13),x.Rc(19,Nt,3,0,"div",13),x.Rc(20,Xt,9,6,"div",14),x.Rc(21,nn,3,2,"div",15),x.Vb(22,"div",16),x.Rc(23,rn,4,0,"a",17),x.Ub(),x.Rc(24,on,3,0,"div",18),x.Rc(25,an,6,0,"div",18),x.Ub(),x.Vb(26,"div",19),x.Vb(27,"div",20),x.Tc(28,"Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode \u0111\u0103ng nh\u1eadp ( "),x.Vb(29,"a",21),x.hc(30,"localize"),x.Tc(31,"H\u01b0\u1edbng d\u1eabn"),x.Ub(),x.Tc(32," )"),x.Ub(),x.Vb(33,"div",22),x.Vb(34,"azt-scan-qrcode",23,24),x.cc("outContentScan",function(e){return t.outContentScan(e)}),x.Ub(),x.Ub(),x.Rc(36,un,9,3,"div",14),x.Rc(37,mn,13,5,"div",14),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Qb(38,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(5),x.nc("ngIf",!t.isLogin),x.Db(3),x.nc("routerLink",x.tc(23,vn,x.ic(9,19,t.backLink)))("queryParams",x.tc(25,yn,t.returnUrl)),x.Db(7),x.nc("ngClass",x.tc(27,_n,"create"!==t.modeShowInit)),x.Db(1),x.nc("ngIf",!t.isLogin),x.Db(1),x.nc("ngIf",t.isLogin),x.Db(1),x.nc("ngIf",!t.isLogin&&t.contentCreateQrcode),x.Db(1),x.nc("ngIf",t.isLogin&&t.contentCreateQrcode&&!t.scanQrContentConfirm),x.Db(1),x.nc("ngIf",t.scanQrContentConfirm&&t.isLogin),x.Db(1),x.nc("ngIf",!t.scanQrContentConfirm),x.Db(2),x.nc("ngIf",t.contentCreateQrcode&&!t.scanQrContentConfirm),x.Db(1),x.nc("ngIf",!t.scanQrContentConfirm),x.Db(1),x.nc("ngIf",!t.scanQrContentConfirm),x.Db(1),x.nc("ngClass",x.tc(29,_n,"scan"!==t.modeShowInit)),x.Db(3),x.nc("routerLink",x.tc(31,vn,x.ic(30,21,"/auth/register")))("queryParams",x.tc(33,kn,t.returnUrl)),x.Db(4),x.nc("ngClass",x.tc(35,_n,!1!==t.sussScanNextConf)),x.Db(3),x.nc("ngIf",!0===t.sussScanNextConf&&t.isLogin),x.Db(1),x.nc("ngIf",!0===t.sussScanNextConf&&!t.isLogin))},directives:[s.m,g.k,T.a,s.k,nt,kt],pipes:[_.d],styles:[".loginscan__card-header[_ngcontent-%COMP%]{padding:15px;text-transform:uppercase;display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-body[_ngcontent-%COMP%]{padding:15px}.loginscan__card-img[_ngcontent-%COMP%], .loginscan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.loginscan__card-video[_ngcontent-%COMP%]{position:relative}.loginscan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.loginscan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.43137254901960786);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.box-create-login-img[_ngcontent-%COMP%], .link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.box-create-login-img[_ngcontent-%COMP%]{height:100px;background:#f5f5f5;border:1px solid #e0e0e0;padding:10px;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.box-create-login-img[_ngcontent-%COMP%]:hover{background:#eceff1}.box-create-login-content[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf[_ngcontent-%COMP%]{width:100%;background:#e0f2f1;padding:10px;display:flex;align-items:center;justify-content:center;height:300px}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]   .boxtext[_ngcontent-%COMP%]{font-size:20px;line-height:30px;margin-bottom:20px}.block-inline-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.back-btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:14px}.back-btn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),fn);function Vn(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",12),x.Vb(2,"div",13),x.Vb(3,"span",14),x.Tc(4),x.hc(5,"mytranslate"),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.Vc("",x.ic(5,1,"lang_cms_common_loading"),"..."))}function Un(e,t){if(1&e&&(x.Vb(0,"div",19),x.Vb(1,"label",35),x.Tc(2),x.hc(3,"mytranslate"),x.Ub(),x.Ub()),2&e){var n=x.gc(2);x.Db(2),x.Vc("*** ",x.ic(3,1,n.statusObj.errorMessage),"")}}function Cn(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",36),x.Tc(2,"\xa0"),x.Ub())}var Sn=function(e){return[e]},xn=function(e){return{return_url:e,user_click:"true"}};function An(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div"),x.Vb(1,"div",15),x.Vb(2,"a",16),x.cc("click",function(){return x.Ec(n),x.gc().loginZalo()}),x.Qb(3,"img",17),x.Vb(4,"span"),x.Tc(5,"\u0110\u0103ng nh\u1eadp b\u1eb1ng Zalo"),x.Ub(),x.Ub(),x.Qb(6,"br"),x.Qb(7,"br"),x.Vb(8,"div",5),x.Vb(9,"span",18),x.Tc(10,"- HO\u1eb6C -"),x.Ub(),x.Ub(),x.Qb(11,"br"),x.Ub(),x.Vb(12,"div",19),x.Vb(13,"div",20),x.Vb(14,"div",21),x.Qb(15,"input",22),x.Vb(16,"div",23),x.Vb(17,"span",24),x.Vb(18,"mat-icon"),x.Tc(19,"phone_enabled"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(20,"div",19),x.Vb(21,"div",20),x.Vb(22,"div",21),x.Qb(23,"input",25),x.Vb(24,"div",23),x.Vb(25,"span",24),x.Vb(26,"mat-icon"),x.Tc(27,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(28,Un,4,3,"div",26),x.Vb(29,"div",19),x.Vb(30,"div",27),x.Vb(31,"div",15),x.Vb(32,"button",28),x.cc("click",function(){x.Ec(n);var e=x.gc();return e.form.invalid||e.statusObj.loading||e.login()}),x.Rc(33,Cn,3,0,"span",11),x.Tc(34,"\u0110\u0103ng nh\u1eadp "),x.Ub(),x.Vb(35,"a",29),x.hc(36,"mylocalize"),x.Vb(37,"mat-icon",30),x.Tc(38,"center_focus_strong"),x.Ub(),x.Vb(39,"span"),x.Tc(40,"\u0110\u0103ng nh\u1eadp b\u1eb1ng m\xe3 Qrcode"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(41,"div",31),x.Vb(42,"a",32),x.hc(43,"localize"),x.Tc(44,"\u0110\u0103ng k\xfd th\xe0nh vi\xean m\u1edbi"),x.Ub(),x.Ub(),x.Vb(45,"div",33),x.Vb(46,"a",34),x.cc("click",function(){return x.Ec(n),x.gc().forgotPassword()}),x.Tc(47,"Qu\xean m\u1eadt kh\u1ea9u?"),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc();x.Db(28),x.nc("ngIf",r.statusObj.errorMessage),x.Db(4),x.nc("disabled",r.form.invalid||r.statusObj.loading),x.Db(1),x.nc("ngIf",r.statusObj.loading),x.Db(2),x.nc("routerLink",x.tc(10,Sn,x.ic(36,6,"/auth/login-scan/2"))),x.Db(7),x.nc("routerLink",x.tc(12,Sn,x.ic(43,8,"/auth/register")))("queryParams",x.tc(14,xn,r.returnUrl))}}var On,Pn,Dn=((Pn=function(e){u(n,e);var t=h(n);function n(e,r,i,o,a){var s;return c(this,n),(s=t.call(this,r)).formBuilder=e,s.commonService=r,s.baseApiService=i,s.localStorageObjetct=o,s.authService=a,s.form=new b.k({}),s.zaloAccessTkn="",s.returnUrl="",s.zaloLoginUrl="",s.initStatusObj(),s}return l(n,[{key:"getError",value:function(e){return!(!this.form.controls[e]||!this.form.controls[e].errors)&&this.form.controls[e].errors}},{key:"loginZalo",value:function(){this.commonService.gaEvent("sign_in_click_sign_in_by_zalo"),window.location.href=this.zaloLoginUrl}},{key:"forgotPassword",value:function(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}},{key:"login",value:function(){var e=this;if(this.form.valid){this.commonService.gaEvent("sign_in_login_in");var t=this.commonService.getFormObj(this.form);this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthLoginPost({phone:t.phone,password:t.password}).subscribe(function(t){var n,r;1==t.success?(e.localStorageObjetct.clearAllCache(),e.baseApiService.redirectLoginByRole(null!==(n=e.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:""),e.successStatusObj()):e.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:"")}))}}},{key:"loginAnonymous",value:function(){var e=this;this.commonService.gaEvent("sign_in_login_anonymous"),this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthLoginAnonymousFromWebGet().subscribe(function(t){var n,r;1==t.success?(e.baseApiService.redirectLoginByRole(null!==(n=e.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:""),e.successStatusObj()):e.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:"")}))}},{key:"loginWithZaloAccessToken",value:function(e){var t=this;this.commonService.gaEvent("sign_in_login_by_zalo"),this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthLoginByTokenGet(e).subscribe(function(e){var n,r;1==e.success?(t.baseApiService.redirectLoginByRole(null!==(n=t.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:""),t.successStatusObj()):t.errorStatusObj(null!==(r=e.message)&&void 0!==r?r:"")}))}},{key:"ngOnInit",value:function(){var e,t,r;this.initStatusObj();var i=!1;this.form=this.formBuilder.group({phone:["",[b.z.required,S.a.noWhiteSpace]],password:["",b.z.required]}),this.zaloAccessTkn=null!==(e=this.commonService.getMyQueryParam("access_token"))&&void 0!==e?e:"",this.commonService.getMyQueryParam("not_register")?this.commonService.myNavigation("/auth/register"):this.zaloAccessTkn?(this.commonService.getMyQueryParam("register")&&this.commonService.gaEvent("sign_in_sign_up_by_zalo"),this.loginWithZaloAccessToken(this.zaloAccessTkn)):this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole()?this.baseApiService.redirectLoginByRole(null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""):(this.returnUrl=this.commonService.getMyQueryParam("return_url")||"",-1===this.returnUrl.indexOf("/test/")&&-1===this.returnUrl.indexOf("/de-thi/")&&-1===this.returnUrl.indexOf("/bai-tap/")||"register"==this.commonService.getMyQueryParam("from")?(this.zaloLoginUrl=oe.a.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_login=1"),i=!0):this.baseApiService.isLogin()?this.baseApiService.redirectLoginByRole(null!==(r=this.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:""):this.loginAnonymous()),i&&(!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()?this.myNavigation("/student/dashboard/0"):(this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),this.stopStatusObj(),d(p(n.prototype),"ngOnInit",this).call(this)))}}]),n}(C.a)).\u0275fac=function(e){return new(e||Pn)(x.Pb(b.g),x.Pb(A.a),x.Pb(O.a),x.Pb(He.a),x.Pb(P.d))},Pn.\u0275cmp=x.Jb({type:Pn,selectors:[["app-login"]],features:[x.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"col-md-12"],[1,"btn","btn-outline-primary","mt-2",2,"width","100%",3,"click"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/zaloicon.png","alt","Zalo Icon",1,"img-responsive","zalo-icon"],[1,"h6","mute-text"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","tel","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password",1,"form-control"],["class","form-group",4,"ngIf"],[2,"display","flex"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],[1,"btn","btn-outline-primary","mt-3",2,"width","100%","display","flex","align-items","center","justify-content","center",3,"routerLink"],[2,"margin-right","10px"],[1,"text-center","mt-3"],[3,"routerLink","queryParams"],[1,"text-center","mt-1"],[2,"color","rgb(216, 2, 2)",3,"click"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"form",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h2",5),x.Qb(6,"img",6),x.Ub(),x.Vb(7,"div",7),x.Vb(8,"div",8),x.Vb(9,"span",9),x.Tc(10,"\u0110\u0103ng nh\u1eadp"),x.Ub(),x.Ub(),x.Vb(11,"div",10),x.Rc(12,Vn,6,3,"div",11),x.Rc(13,An,48,16,"div",11),x.Ub(),x.Ub(),x.Ub(),x.Qb(14,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(1),x.nc("formGroup",t.form),x.Db(11),x.nc("ngIf",t.statusObj.loading),x.Db(1),x.nc("ngIf",!t.statusObj.loading))},directives:[b.B,b.s,b.l,s.m,b.d,b.r,b.j,T.a,I.b,g.k],pipes:[L.s,L.r,_.d],styles:[".checkboxInput[_ngcontent-%COMP%]{padding:5px 15px;font-size:1rem;font-weight:400;line-height:2}.zalo-icon[_ngcontent-%COMP%]{height:30px;margin-right:10px}"]}),Pn),Rn=((On=function(e){u(n,e);var t=h(n);function n(e,r,i){var o;return c(this,n),(o=t.call(this,e)).commonService=e,o.baseApiService=r,o.redirectService=i,o}return l(n,[{key:"ngOnInit",value:function(){this.baseApiService.logout();var e=this.commonService.getMyQueryParam("return_url")||null;e?this.redirectService.redirectSimpleLoginWithReturnUrl(e):this.redirectService.redirectSimpleLogin(),d(p(n.prototype),"ngOnInit",this).call(this)}}]),n}(C.a)).\u0275fac=function(e){return new(e||On)(x.Pb(A.a),x.Pb(O.a),x.Pb(D.a))},On.\u0275cmp=x.Jb({type:On,selectors:[["app-register"]],features:[x.Ab],decls:0,vars:0,template:function(e,t){},encapsulation:2}),On),Tn=o("1yaQ"),Mn=o("jCJ1");function Qn(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",13),x.Vb(2,"div",14),x.Vb(3,"span",15),x.Tc(4),x.hc(5,"mytranslate"),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.Vc("",x.ic(5,1,"lang_cms_common_loading"),"..."))}function In(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",16),x.Vb(1,"div",17),x.cc("click",function(){return x.Ec(n),x.gc().changeRegisterType(1)}),x.Vb(2,"div",18),x.Qb(3,"i",19),x.Vb(4,"p"),x.Tc(5,"T\xf4i l\xe0 h\u1ecdc sinh"),x.Ub(),x.Ub(),x.Ub(),x.Vb(6,"div",17),x.cc("click",function(){return x.Ec(n),x.gc().changeRegisterType(2)}),x.Vb(7,"div",18),x.Qb(8,"img",20),x.Vb(9,"p"),x.Tc(10,"T\xf4i l\xe0 gi\xe1o vi\xean"),x.Ub(),x.Ub(),x.Ub(),x.Ub()}}function Ln(e,t){1&e&&(x.Vb(0,"div",53),x.Vb(1,"div"),x.Tc(2,"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean."),x.Ub(),x.Ub())}function En(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1,"Y\xeau c\u1ea7u nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"),x.Ub())}function jn(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1!"),x.Ub())}function Bn(e,t){if(1&e&&(x.Vb(0,"div",53),x.Rc(1,En,2,0,"div",10),x.Rc(2,jn,2,0,"div",10),x.Ub()),2&e){var n=x.gc(3);x.Db(1),x.nc("ngIf",n.getErrorType("phone","required")),x.Db(1),x.nc("ngIf",n.getErrorType("phone","pattern")||n.getErrorType("phone","minlength")||n.getErrorType("phone","maxlength"))}}function zn(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1,"M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6!"),x.Ub())}function qn(e,t){if(1&e&&(x.Vb(0,"div",53),x.Rc(1,zn,2,0,"div",10),x.Ub()),2&e){var n=x.gc(3);x.Db(1),x.nc("ngIf",n.getErrorType("password","required")||n.getErrorType("password","minlength"))}}function Fn(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1,"Email b\u1ea1n nh\u1eadp sai \u0111\u1ecbnh d\u1ea1ng!"),x.Ub())}function Nn(e,t){if(1&e&&(x.Vb(0,"div",53),x.Rc(1,Fn,2,0,"div",10),x.Ub()),2&e){var n=x.gc(3);x.Db(1),x.nc("ngIf",n.getErrorType("email","email"))}}function Wn(e,t){if(1&e&&(x.Vb(0,"div",39),x.Vb(1,"label",54),x.Tc(2),x.hc(3,"mytranslate"),x.Ub(),x.Ub()),2&e){var n=x.gc(3);x.Db(2),x.Vc("*** ",x.ic(3,1,n.statusObj.errorMessage),"")}}function Hn(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",55),x.Tc(2,"\xa0"),x.Ub())}function Gn(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",36),x.Vb(1,"form",37),x.Vb(2,"div",27),x.Vb(3,"div",38),x.Vb(4,"div",39),x.Vb(5,"div",40),x.Vb(6,"div",41),x.Qb(7,"input",42),x.Vb(8,"div",43),x.Vb(9,"span",44),x.Vb(10,"mat-icon"),x.Tc(11,"account_box"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(12,Ln,3,0,"div",45),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(13,"div",27),x.Vb(14,"div",38),x.Vb(15,"div",39),x.Vb(16,"div",40),x.Vb(17,"div",41),x.Qb(18,"input",46),x.Vb(19,"div",43),x.Vb(20,"span",47),x.Vb(21,"mat-icon"),x.Tc(22,"phone_enabled"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(23,Bn,3,2,"div",45),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(24,"div",27),x.Vb(25,"div",38),x.Vb(26,"div",39),x.Vb(27,"div",40),x.Vb(28,"div",41),x.Qb(29,"input",48),x.Vb(30,"div",43),x.Vb(31,"span",49),x.Vb(32,"mat-icon"),x.Tc(33,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(34,qn,2,1,"div",45),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(35,"div",27),x.Vb(36,"div",38),x.Vb(37,"div",39),x.Vb(38,"div",40),x.Vb(39,"div",41),x.Qb(40,"input",50),x.Vb(41,"div",43),x.Vb(42,"span",47),x.Vb(43,"mat-icon"),x.Tc(44,"email"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(45,Nn,2,1,"div",45),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(46,Wn,4,3,"div",51),x.Vb(47,"div",39),x.Vb(48,"div",27),x.Vb(49,"div",38),x.Vb(50,"button",52),x.cc("click",function(){x.Ec(n);var e=x.gc(2);return e.form.invalid||e.statusObj.loading||e.registerForTeacher()}),x.Rc(51,Hn,3,0,"span",10),x.Tc(52,"\u0110\u0103ng k\xfd "),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc(2);x.Db(1),x.nc("formGroup",r.form),x.Db(11),x.nc("ngIf",r.form.controls.fullName.invalid&&(r.form.controls.fullName.dirty||r.form.controls.fullName.touched)),x.Db(11),x.nc("ngIf",r.form.controls.phone.invalid&&(r.form.controls.phone.dirty||r.form.controls.phone.touched)),x.Db(11),x.nc("ngIf",r.form.controls.password.invalid&&(r.form.controls.password.dirty||r.form.controls.password.touched)),x.Db(11),x.nc("ngIf",r.form.controls.email.invalid&&(r.form.controls.email.dirty||r.form.controls.email.touched)),x.Db(1),x.nc("ngIf",r.statusObj.errorMessage),x.Db(4),x.nc("disabled",r.form.invalid||r.statusObj.loading),x.Db(1),x.nc("ngIf",r.statusObj.loading)}}function Yn(e,t){1&e&&(x.Vb(0,"div",63),x.Tc(1,"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean."),x.Ub())}function Kn(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1,"B\u1ea1n ph\u1ea3i nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),x.Ub())}function Zn(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i l\xe0 10 s\u1ed1."),x.Ub())}function Jn(e,t){if(1&e&&(x.Vb(0,"div",63),x.Rc(1,Kn,2,0,"div",10),x.Rc(2,Zn,2,0,"div",10),x.Ub()),2&e){var n=x.gc(3);x.Db(1),x.nc("ngIf",n.getErrorForm("studentPhone","required")),x.Db(1),x.nc("ngIf",n.getErrorForm("studentPhone","minlength")||n.getErrorForm("studentPhone","maxlength"))}}function $n(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1,"B\u1ea1n ph\u1ea3i nh\u1eadp m\u1eadt kh\u1ea9u."),x.Ub())}function Xn(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1,"M\u1eadt kh\u1ea9u bao g\u1ed3m 6 k\xfd t\u1ef1."),x.Ub())}function er(e,t){if(1&e&&(x.Vb(0,"div",63),x.Rc(1,$n,2,0,"div",10),x.Rc(2,Xn,2,0,"div",10),x.Ub()),2&e){var n=x.gc(3);x.Db(1),x.nc("ngIf",n.getErrorForm("passWord","required")),x.Db(1),x.nc("ngIf",n.getErrorForm("passWord","minlength"))}}function tr(e,t){if(1&e&&(x.Vb(0,"div",39),x.Vb(1,"label",54),x.Tc(2),x.hc(3,"mytranslate"),x.Ub(),x.Ub()),2&e){var n=x.gc(3);x.Db(2),x.Vc("*** ",x.ic(3,1,n.statusObj.errorMessage),"")}}function nr(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",55),x.Tc(2,"\xa0"),x.Ub())}function rr(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",56),x.Vb(1,"form",57),x.Vb(2,"div",39),x.Qb(3,"input",58),x.Rc(4,Yn,2,0,"div",59),x.Ub(),x.Vb(5,"div",39),x.Qb(6,"input",60),x.Rc(7,Jn,3,2,"div",59),x.Ub(),x.Vb(8,"div",39),x.Qb(9,"input",61),x.Rc(10,er,3,2,"div",59),x.Ub(),x.Ub(),x.Rc(11,tr,4,3,"div",51),x.Qb(12,"br"),x.Vb(13,"button",62),x.cc("click",function(){x.Ec(n);var e=x.gc(2);return e.formRegister.invalid||e.statusObj.loading||e.registerForStudent()}),x.Rc(14,nr,3,0,"span",10),x.Tc(15," Ho\xe0n Th\xe0nh \u0110\u0103ng K\xfd "),x.Ub(),x.Ub()}if(2&e){var r=x.gc(2);x.Db(1),x.nc("formGroup",r.formRegister),x.Db(3),x.nc("ngIf",r.formRegister.controls.studentFullName.invalid&&(r.formRegister.controls.studentFullName.dirty||r.formRegister.controls.studentFullName.touched)),x.Db(3),x.nc("ngIf",r.formRegister.controls.studentPhone.invalid&&(r.formRegister.controls.studentPhone.dirty||r.formRegister.controls.studentPhone.touched)),x.Db(3),x.nc("ngIf",r.formRegister.controls.passWord.invalid&&(r.formRegister.controls.passWord.dirty||r.formRegister.controls.passWord.touched)),x.Db(1),x.nc("ngIf",r.statusObj.errorMessage),x.Db(2),x.nc("disabled",r.formRegister.invalid||r.statusObj.loading),x.Db(1),x.nc("ngIf",r.statusObj.loading)}}var ir=function(e){return[e]},or=function(e){return{return_url:e,from:"register",user_click:"true"}};function ar(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div",21),x.Vb(1,"div",22),x.Vb(2,"div",23),x.Vb(3,"a",24),x.cc("click",function(){return x.Ec(n),x.gc().changeRegisterType(1)}),x.Qb(4,"i",25),x.Tc(5,"\xa0 T\xf4i l\xe0 h\u1ecdc sinh"),x.Ub(),x.Ub(),x.Vb(6,"div",23),x.Vb(7,"a",24),x.cc("click",function(){return x.Ec(n),x.gc().changeRegisterType(2)}),x.Qb(8,"i",26),x.Tc(9,"\xa0 T\xf4i l\xe0 gi\xe1o vi\xean"),x.Ub(),x.Ub(),x.Ub(),x.Vb(10,"div",27),x.Vb(11,"div",28),x.Qb(12,"hr"),x.Ub(),x.Ub(),x.Rc(13,Gn,53,8,"div",29),x.Rc(14,rr,16,7,"div",30),x.Vb(15,"div",31),x.Tc(16,'B\u1eb1ng c\xe1ch \u1ea5n v\xe0o n\xfat "\u0110\u0102NG K\xdd", t\xf4i \u0111\u1ed3ng \xfd v\u1edbi '),x.Vb(17,"a",32),x.Tc(18," \u0110i\u1ec1u Kho\u1ea3n S\u1eed D\u1ee5ng "),x.Ub(),x.Tc(19," v\xe0 "),x.Vb(20,"a",32),x.Tc(21," Ch\xednh S\xe1ch B\u1ea3o M\u1eadt c\u1ee7a AZOTA."),x.Ub(),x.Ub(),x.Vb(22,"div",33),x.Vb(23,"p",34),x.Tc(24,"B\u1ea1n \u0111\xe3 c\xf3 t\xe0i kho\u1ea3n?"),x.Ub(),x.Vb(25,"p"),x.Vb(26,"a",35),x.hc(27,"localize"),x.Tc(28,"\u0110\u0103ng nh\u1eadp"),x.Ub(),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc();x.nc("hidden",r.isShowOption),x.Db(3),x.Hb("select-style-active",r.isStudent),x.Db(4),x.Hb("select-style-active",r.isTeacher),x.Db(6),x.nc("ngIf",1==r.isTeacher),x.Db(1),x.nc("ngIf",1==r.isStudent),x.Db(12),x.nc("routerLink",x.tc(11,ir,x.ic(27,9,"/auth/login")))("queryParams",x.tc(13,or,r.returnUrl))}}var cr,sr={parse:{dateInput:"LL"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}},lr=((cr=function(e){u(n,e);var t=h(n);function n(e,r,i,o,a,s,l){var d;return c(this,n),(d=t.call(this,o)).formBuilder=e,d.activeRoute=r,d.titleCasePipe=i,d.commonService=o,d.baseApiService=a,d.recaptchaV3Service=s,d.authService=l,d.form=new b.k({}),d.formRegister=new b.k({}),d.returnUrl="",d.zaloLoginUrl="",d.isHiddenFormRegister=!0,d.isTeacher=!1,d.isStudent=!1,d.yesterday=new Date,d.isShowOption=!0,d.isShowRegisterForStudent=!1,d.isShowRegisterForTeacher=!1,d.initStatusObj(),d}return l(n,[{key:"executeImportantAction",value:function(){var e=this;return new Promise(function(t){e.recaptchaV3Service.execute("importantAction").subscribe(function(e){t(e)})})}},{key:"getError",value:function(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}},{key:"getErrorType",value:function(e,t){var n,r;return!!(null===(n=this.form.controls[e].errors)||void 0===n?void 0:n[t])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[t])}},{key:"getErrorForm",value:function(e,t){var n,r;return!!(null===(n=this.formRegister.controls[e].errors)||void 0===n?void 0:n[t])&&(null===(r=this.formRegister.controls[e].errors)||void 0===r?void 0:r[t])}},{key:"goToConfirm",value:function(){var e;this.returnUrl=null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"";var t="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=confirm_phone_register";this.commonService.myNavigationWithQueryString("/auth/checking_service",t)}},{key:"changeRegisterType",value:function(e){this.isShowOption=!1,1==e?(this.commonService.gaEvent("sign_up_switch_to_student"),this.isTeacher=!1,this.isStudent=!0):(this.commonService.gaEvent("sign_up_switch_to_teacher"),this.isTeacher=!0,this.isStudent=!1)}},{key:"loginZalo",value:function(){this.commonService.gaEvent("sign_up_teacher_by_zalo"),window.location.href=this.zaloLoginUrl}},{key:"registerForTeacher",value:function(){var e=this;this.form.valid&&this.executeImportantAction().then(function(t){var n=e.commonService.getFormObj(e.form);e.initStatusObj(),e.subscriptions.add(e.authService.apiAuthRegisterPost({fullName:n.fullName,phone:n.phone,email:n.email,password:n.password,tokenCaptcha:t}).subscribe(function(t){var n,r;1==t.success?(e.commonService.gaEvent("sign_up_teacher"),e.successStatusObj(),e.baseApiService.redirectLoginByRoleForRegister(null!==(n=e.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:"")):e.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:"")}))})}},{key:"registerForStudent",value:function(){var e=this;this.executeImportantAction().then(function(t){e.commonService.gaEvent("sign_up_student");var n=e.commonService.getFormObj(e.formRegister);e.initStatusObj(),e.subscriptions.add(e.authService.apiAuthRegisterForStudentPost({phone:n.studentPhone,fullName:n.studentFullName,password:n.passWord,tokenCaptcha:t}).subscribe(function(t){var n,r;1==t.success?(e.successStatusObj(),e.baseApiService.redirectLoginByRole(null!==(n=e.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:"")):e.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:"")}))})}},{key:"ngOnInit",value:function(){var e,t=this;if(this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole())this.baseApiService.redirectLoginByRole("");else{var r=this.commonService.getMyParam(this.activeRoute,"type");if(null!=r){var i=parseInt(null==r?void 0:r.toString(),10);this.changeRegisterType(0==i?0:1)}this.yesterday.setDate(this.yesterday.getDate()-1),this.form=this.formBuilder.group({fullName:["",[b.z.required,S.a.noWhiteSpace]],phone:["",[b.z.required,b.z.pattern("^[0-9]*$"),b.z.minLength(10),b.z.maxLength(10)]],password:["",[b.z.required,b.z.minLength(6)]],email:["",b.z.email]}),this.formRegister=this.formBuilder.group({studentPhone:["",[b.z.required,b.z.pattern("^[0-9]*$"),b.z.minLength(10),b.z.maxLength(10)]],studentFullName:["",[b.z.required,S.a.noWhiteSpace]],passWord:["",[b.z.required,b.z.minLength(6)]]}),null===(e=this.form.get("fullName"))||void 0===e||e.valueChanges.subscribe(function(e){var n=t.titleCasePipe.transform(e);e!=n&&t.form.controls.fullName.setValue(n)}),this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getLocalRouter("/admin/testbank/dashboard"),this.zaloLoginUrl=oe.a.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_register=1"),!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()&&this.myNavigation("/student/dashboard/0"),this.commonService.translateMetaData({title:"lang_cms_auth_register_title",description:"lang_cms_auth_register_description",image:"lang_cms_test_image"}),this.stopStatusObj()}d(p(n.prototype),"ngOnInit",this).call(this)}}]),n}(C.a)).\u0275fac=function(e){return new(e||cr)(x.Pb(b.g),x.Pb(g.a),x.Pb(s.v),x.Pb(A.a),x.Pb(O.a),x.Pb(Mn.b),x.Pb(P.d))},cr.\u0275cmp=x.Jb({type:cr,selectors:[["app-register"]],features:[x.Cb([s.v,{provide:w.c,useClass:Tn.b,deps:[w.f]},{provide:w.e,useValue:sr}]),x.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"row","py-5"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],["class","row","style","justify-content: space-around",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"row",2,"justify-content","space-around"],[1,"col-sm-4","border-card","mb-3",3,"click"],[1,"df-logo"],[1,"fas","fa-graduation-cap","pb-3",2,"font-size","36px"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/teacher.png","width","36px","height","45px",1,"mb-3"],[3,"hidden"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-6","text-center","mb-3"],[1,"clickable","select-style",3,"click"],[1,"fas","fa-graduation-cap"],[1,"fas","fa-user-alt"],[1,"row"],[1,"col-12"],["id","teacher",4,"ngIf"],["id","chilren",4,"ngIf"],[1,"mt-2",2,"text-align","justify","font-size","13px"],["href","/privacy/index.html","target","_blank"],[1,"text-center","mt-3"],[1,"text-normal"],[3,"routerLink","queryParams"],["id","teacher"],[1,"form-horizontal",3,"formGroup"],[1,"col-sm-12"],[1,"form-group"],[1,"col-sm-12","p-0"],[1,"input-group","mb-3"],["type","text","placeholder","H\u1ecd t\xean","formControlName","fullName","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","phone","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","new-password",1,"form-control"],["id","basic-addon2",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password","autocomplete","new-password",1,"form-control"],["id","basic-addon3",1,"input-group-text"],["type","phone","placeholder","Email (kh\xf4ng b\u1eaft bu\u1ed9c nh\u1eadp)","formControlName","email","autocomplete","new-password",1,"form-control"],["class","form-group",4,"ngIf"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],["id","chilren"],["autocomplete","off",1,"form-horinzal",3,"formGroup"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","studentFullName","autocomplete","new-password",1,"form-control"],["class","alert alert-danger mt-3",4,"ngIf"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","studentPhone","autocomplete","new-password",1,"form-control"],["type","password","placeholder","M\u1eadt Kh\u1ea9u","formControlName","passWord","autocomplete","new-password",1,"form-control"],["mat-raised-button","",1,"button-color","text-uppercase",2,"width","100%",3,"disabled","click"],[1,"alert","alert-danger","mt-3"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"div",1),x.Qb(2,"div",2),x.Vb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"div",5),x.Vb(6,"h2",6),x.Qb(7,"img",7),x.Ub(),x.Vb(8,"h3",8),x.Tc(9,"N\u1ec1n t\u1ea3ng gi\xe1o d\u1ee5c s\u1ed1"),x.Ub(),x.Ub(),x.Vb(10,"div",9),x.Rc(11,Qn,6,3,"div",10),x.Rc(12,In,11,0,"div",11),x.Rc(13,ar,29,15,"div",12),x.Ub(),x.Ub(),x.Ub(),x.Qb(14,"div",2),x.Ub(),x.Ub()),2&e&&(x.Db(11),x.nc("ngIf",t.statusObj.loading),x.Db(1),x.nc("ngIf",1==t.isShowOption),x.Db(1),x.nc("ngIf",!t.statusObj.loading))},directives:[s.m,g.k,b.B,b.s,b.l,b.d,b.r,b.j,T.a,I.b],pipes:[L.s,_.d],styles:['.zalo-icon[_ngcontent-%COMP%]{height:40px;margin-right:10px}.select-style[_ngcontent-%COMP%]{color:#868686!important}.select-style[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.select-style[_ngcontent-%COMP%]:hover{color:#0eafc0!important}.select-style-active[_ngcontent-%COMP%]{color:#0eafc0!important}.df-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.register--login[_ngcontent-%COMP%]{width:88px;height:88px}.two-button[_ngcontent-%COMP%]{width:80%;margin:auto}.register-button[_ngcontent-%COMP%], .two-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100vh}.register-button[_ngcontent-%COMP%]{width:100%}.btn-max-width[_ngcontent-%COMP%]{width:100%;padding-top:1.25rem;padding-bottom:1.25rem;font-size:1.5rem}.responsive__text[_ngcontent-%COMP%]{width:90%;margin-left:auto;margin-right:auto}.btn-outline-primary[_ngcontent-%COMP%]{color:#0eafc0!important;border-color:#0eafc0!important}.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#0eafc0!important;background-color:#0eafc0!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b818e!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#0eafc0!important;border-color:#0eafc0!important;background-color:rgba(14,172,190,.15)}.btn-border-fix[_ngcontent-%COMP%]{border-radius:10px!important}.border-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid hsla(0,0%,86.3%,.8);border-radius:8px;cursor:pointer;padding:12px;align-items:center;text-align:center}.border-card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 20px rgba(0,0,0,.07),-10px -10px 20px hsla(0,0%,100%,.8)}.button-color[_ngcontent-%COMP%]{background-color:#0eafc0!important;color:#fff!important}.text-line[_ngcontent-%COMP%]{position:relative;text-align:center}.text-line[_ngcontent-%COMP%]:before{content:"";display:block;width:45%;height:.5px;position:absolute;right:0;background-color:#868686;top:50%}.text-line[_ngcontent-%COMP%]:after{content:"";display:block;width:45%;height:.5px;position:absolute;left:0;background-color:#868686;top:50%}.border-select-box[_ngcontent-%COMP%]{border:1px solid #ccd0d5;border-radius:4px;padding:8px 16px}  .mat-radio-label{margin-bottom:0!important}  .mat-radio-label-content{padding-left:16px!important}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%],   .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#0eafc0!important}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#0eafc0!important}  .mat-input-element{font-size:18px!important;caret-color:#0eafc0!important}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-datepicker-toggle-default-icon[_ngcontent-%COMP%],   .mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon{width:1.5em!important}button[_ngcontent-%COMP%]:disabled{background-color:rgba(0,0,0,.12)!important}@media only screen and (max-width:424px){.btn-max-width[_ngcontent-%COMP%]{font-size:1rem}}@media only screen and (max-width:364px){.text-line[_ngcontent-%COMP%]:after, .text-line[_ngcontent-%COMP%]:before{width:40%}}']}),cr);function dr(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",12),x.Vb(2,"div",13),x.Vb(3,"span",14),x.Tc(4),x.hc(5,"mytranslate"),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.Vc("",x.ic(5,1,"lang_cms_common_loading"),"..."))}function ur(e,t){1&e&&(x.Vb(0,"div"),x.Tc(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),x.Ub())}function br(e,t){if(1&e&&(x.Vb(0,"div",28),x.Rc(1,ur,2,0,"div",11),x.Ub()),2&e){var n=x.gc(2);x.Db(1),x.nc("ngIf",n.getErrorType("password","required")||n.getErrorType("password","minlength"))}}function hr(e,t){if(1&e&&(x.Vb(0,"div",15),x.Vb(1,"label",29),x.Tc(2),x.hc(3,"mytranslate"),x.Ub(),x.Ub()),2&e){var n=x.gc(2);x.Db(2),x.Vc("*** ",x.ic(3,1,n.statusObj.errorMessage),"")}}function gr(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",30),x.Tc(2,"\xa0"),x.Ub())}var pr=function(e){return[e]},mr=function(){return{user_click:"true"}};function fr(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div"),x.Vb(1,"div",15),x.Vb(2,"div",16),x.Vb(3,"div",17),x.Qb(4,"input",18),x.Vb(5,"div",19),x.Vb(6,"span",20),x.Vb(7,"mat-icon"),x.Tc(8,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Vb(9,"div",17),x.Qb(10,"input",21),x.Vb(11,"div",19),x.Vb(12,"span",20),x.Vb(13,"mat-icon"),x.Tc(14,"lock"),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Rc(15,br,2,1,"div",22),x.Ub(),x.Ub(),x.Rc(16,hr,4,3,"div",23),x.Vb(17,"div",15),x.Vb(18,"div",16),x.Vb(19,"div",24),x.Vb(20,"button",25),x.cc("click",function(){x.Ec(n);var e=x.gc();return e.form.invalid||e.statusObj.loading||e.changePassword()}),x.Rc(21,gr,3,0,"span",11),x.Tc(22,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),x.Ub(),x.Ub(),x.Ub(),x.Ub(),x.Qb(23,"hr"),x.Vb(24,"div",26),x.Vb(25,"a",27),x.hc(26,"localize"),x.Tc(27,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc();x.Db(15),x.nc("ngIf",r.form.controls.password.invalid&&(r.form.controls.password.dirty||r.form.controls.password.touched)),x.Db(1),x.nc("ngIf",r.statusObj.errorMessage),x.Db(4),x.nc("disabled",r.form.invalid||r.statusObj.loading),x.Db(1),x.nc("ngIf",r.statusObj.loading),x.Db(4),x.nc("routerLink",x.tc(8,pr,x.ic(26,6,"/auth/login")))("queryParams",x.sc(10,mr))}}function vr(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",13),x.Vb(2,"div",14),x.Vb(3,"span",15),x.Tc(4),x.hc(5,"mytranslate"),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.Vc("",x.ic(5,1,"lang_cms_common_loading"),"..."))}function yr(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",21),x.Tc(2,"\xa0"),x.Ub())}function _r(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div"),x.Vb(1,"div",16),x.Vb(2,"div",17),x.Vb(3,"button",18),x.cc("click",function(){x.Ec(n);var e=x.gc(2);return e.statusObj.loading||e.becomeTeacher()}),x.Rc(4,yr,3,0,"span",12),x.Tc(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 tr\u1edf th\xe0nh gi\xe1o vi\xean "),x.Ub(),x.Ub(),x.Ub(),x.Vb(6,"div",19),x.Vb(7,"a",20),x.cc("click",function(){return x.Ec(n),x.gc(2).goBack()}),x.Tc(8,"Quay l\u1ea1i trang ch\u1ee7"),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc(2);x.Db(3),x.nc("disabled",r.statusObj.loading),x.Db(1),x.nc("ngIf",r.statusObj.loading)}}function kr(e,t){if(1&e&&(x.Vb(0,"div",5),x.Vb(1,"h2",6),x.Qb(2,"img",7),x.Ub(),x.Vb(3,"div",8),x.Vb(4,"div",9),x.Vb(5,"span",10),x.Tc(6,"T\xf4i mu\u1ed1n th\xe0nh gi\xe1o vi\xean"),x.Ub(),x.Ub(),x.Vb(7,"div",11),x.Rc(8,vr,6,3,"div",12),x.Rc(9,_r,9,2,"div",12),x.Ub(),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(8),x.nc("ngIf",n.statusObj.loading),x.Db(1),x.nc("ngIf",!n.statusObj.loading)}}function wr(e,t){1&e&&(x.Vb(0,"div"),x.Vb(1,"div",13),x.Vb(2,"div",14),x.Vb(3,"span",15),x.Tc(4),x.hc(5,"mytranslate"),x.Ub(),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.Vc("",x.ic(5,1,"lang_cms_common_loading"),"..."))}function Vr(e,t){1&e&&(x.Vb(0,"span"),x.Qb(1,"span",21),x.Tc(2,"\xa0"),x.Ub())}function Ur(e,t){if(1&e){var n=x.Wb();x.Vb(0,"div"),x.Vb(1,"div",16),x.Vb(2,"div",17),x.Vb(3,"button",18),x.cc("click",function(){x.Ec(n);var e=x.gc(2);return e.statusObj.loading||e.becomeStudent()}),x.Rc(4,Vr,3,0,"span",12),x.Tc(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 b\u1ecf quy\u1ec1n gi\xe1o vi\xean "),x.Ub(),x.Ub(),x.Ub(),x.Vb(6,"div",19),x.Vb(7,"a",20),x.cc("click",function(){return x.Ec(n),x.gc(2).goBack()}),x.Tc(8,"Quay l\u1ea1i trang ch\u1ee7"),x.Ub(),x.Ub(),x.Ub()}if(2&e){var r=x.gc(2);x.Db(3),x.nc("disabled",r.statusObj.loading),x.Db(1),x.nc("ngIf",r.statusObj.loading)}}function Cr(e,t){if(1&e&&(x.Vb(0,"div",5),x.Vb(1,"h2",6),x.Qb(2,"img",7),x.Ub(),x.Vb(3,"div",8),x.Vb(4,"div",9),x.Vb(5,"span",10),x.Tc(6,"T\xf4i mu\u1ed1n b\u1ecf quy\u1ec1n gi\xe1o vi\xean"),x.Ub(),x.Ub(),x.Vb(7,"div",11),x.Rc(8,wr,6,3,"div",12),x.Rc(9,Ur,9,2,"div",12),x.Ub(),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(8),x.nc("ngIf",n.statusObj.loading),x.Db(1),x.nc("ngIf",!n.statusObj.loading)}}var Sr,xr,Ar,Or,Pr=[{path:"",children:[{path:"",children:[{path:"login",component:Dn},{path:"login-scan/:role",component:wn},{path:"register",component:lr},{path:"register/:type",component:lr},{path:"logout",component:Rn},{path:"confirm_forgot_password",component:Qe},{path:"forgot_password_susscess",component:Qt},{path:"confirm_forgot_password_qr",component:pt},{path:"confirm_forgot_password_old",component:We},{path:"confirm_account",component:pe},{path:"checking_service",component:ee},{path:"set_new_password",component:(xr=function(e){u(n,e);var t=h(n);function n(e,r,i,o){var a;return c(this,n),(a=t.call(this,r)).formBuilder=e,a.commonService=r,a.baseApiService=i,a.authService=o,a.form=new b.k({}),a}return l(n,[{key:"getError",value:function(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}},{key:"getErrorType",value:function(e,t){var n,r;return!!(null===(n=this.form.controls[e].errors)||void 0===n?void 0:n[t])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[t])}},{key:"changePassword",value:function(){var e=this;if(this.form.valid)if(this.form.value.password!=this.form.value.confirm_password)this.showErrorSnack("X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp");else{this.initStatusObj();var t=this.commonService.getFormObj(this.form),n=this.commonService.getMyQueryParam("token"),r=this.commonService.getMyQueryParam("app_name");this.subscriptions.add(this.authService.apiAuthChangePasswordByFirebasePost({firebaseToken:n,newPassword:t.password,appName:r}).subscribe(function(t){var n;1==t.success?(e.successStatusObj(),e.baseApiService.redirectLoginByRole("")):e.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"")}))}}},{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({password:["",[b.z.required,b.z.minLength(6)]],confirm_password:""}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),d(p(n.prototype),"ngOnInit",this).call(this)}}]),n}(C.a),xr.\u0275fac=function(e){return new(e||xr)(x.Pb(b.g),x.Pb(A.a),x.Pb(O.a),x.Pb(P.d))},xr.\u0275cmp=x.Jb({type:xr,selectors:[["app-confirm-forgot-password"]],features:[x.Ab],decls:15,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","off",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u","formControlName","confirm_password","autocomplete","off",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"form",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Vb(4,"div",4),x.Vb(5,"h2",5),x.Qb(6,"img",6),x.Ub(),x.Vb(7,"div",7),x.Vb(8,"div",8),x.Vb(9,"span",9),x.Tc(10,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),x.Ub(),x.Ub(),x.Vb(11,"div",10),x.Rc(12,dr,6,3,"div",11),x.Rc(13,fr,28,11,"div",11),x.Ub(),x.Ub(),x.Ub(),x.Qb(14,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(1),x.nc("formGroup",t.form),x.Db(11),x.nc("ngIf",t.statusObj.loading),x.Db(1),x.nc("ngIf",!t.statusObj.loading))},directives:[b.B,b.s,b.l,s.m,b.d,b.r,b.j,T.a,I.b,g.k],pipes:[L.s,_.d],encapsulation:2}),xr)},{path:"change-info",component:X},{path:"switch-teacher-student",component:(Sr=function(e){u(n,e);var t=h(n);function n(e,r,i){var o;return c(this,n),(o=t.call(this,i)).baseApiService=e,o.authService=r,o.commonService=i,o.isTeacher=!1,o.isStudent=!1,o}return l(n,[{key:"goBack",value:function(){this.baseApiService.redirectLoginByRole("")}},{key:"becomeTeacher",value:function(){var e=this;this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConvertToTeacherGet().subscribe(function(t){var n;1==t.success?e.baseApiService.redirectLoginByRole(""):e.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"",!0)}))}},{key:"becomeStudent",value:function(){var e=this;this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRemoveTeacherRoleGet().subscribe(function(t){var n;1==t.success?e.baseApiService.redirectLoginByRole(e.commonService.getLocalRouter("/student/dashboard/0")):e.errorStatusObj(null!==(n=t.message)&&void 0!==n?n:"",!0)}))}},{key:"ngOnInit",value:function(){this.commonService.translateMetaData({title:"\u0110\u1ed5i Vai Tr\xf2",description:"\u0110\u1ed5i Vai Tr\xf2",image:"lang_cms_test_image"}),this.isTeacher=this.baseApiService.isTeacherRole(),d(p(n.prototype),"ngOnInit",this).call(this)}}]),n}(C.a),Sr.\u0275fac=function(e){return new(e||Sr)(x.Pb(O.a),x.Pb(P.d),x.Pb(A.a))},Sr.\u0275cmp=x.Jb({type:Sr,selectors:[["app-switch-teacher-student"]],features:[x.Ab],decls:7,vars:2,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Vb(1,"div",1),x.Vb(2,"div",2),x.Qb(3,"div",3),x.Rc(4,kr,10,2,"div",4),x.Rc(5,Cr,10,2,"div",4),x.Qb(6,"div",3),x.Ub(),x.Ub(),x.Ub()),2&e&&(x.Db(4),x.nc("ngIf",0==t.isTeacher),x.Db(1),x.nc("ngIf",1==t.isTeacher))},directives:[s.m,I.b],pipes:[L.s],styles:[""]}),Sr)},{path:"create-qr-forgot-pass/:role",component:Tt}]}]}],Dr=((Or=function e(){c(this,e)}).\u0275mod=x.Nb({type:Or}),Or.\u0275inj=x.Mb({factory:function(e){return new(e||Or)},imports:[[g.l.forChild(Pr)],g.l,_.c]}),Or),Rr=((Ar=function e(){c(this,e)}).\u0275mod=x.Nb({type:Ar}),Ar.\u0275inj=x.Mb({factory:function(e){return new(e||Ar)},imports:[[g.l,s.c,b.m,m.b,y.a,b.x,Dr,f.a,v.a]]}),Ar)},bWEQ:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return g});var r=n("n1FK"),i=n("fXoL"),o=n("wd/R"),a=n.n(o).a||o,s=new i.s("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function b(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t(r);return n}var g=function(){var e=function(e){u(n,e);var t=h(n);function n(e){var r;c(this,n),(r=t.call(this))._options=e,r._localeData={firstDayOfWeek:0,longMonths:"",shortMonths:"",dates:"",longDaysOfWeek:"",shortDaysOfWeek:"",narrowDaysOfWeek:""};var i="vi";return-1===window.location.href.indexOf("en")&&(i="vi"),a.locale(),r.setLocale(i||a.locale()),r}return l(n,[{key:"setLocale",value:function(e){var t=this;d(p(n.prototype),"setLocale",this).call(this,e);var r=a.localeData(e);this._localeData={firstDayOfWeek:r.firstDayOfWeek(),longMonths:r.months(),shortMonths:r.monthsShort(),dates:b(31,function(e){return t.createDate(2017,0,e+1).format("D")}),longDaysOfWeek:r.weekdays(),shortDaysOfWeek:r.weekdaysShort(),narrowDaysOfWeek:r.weekdaysMin()}}},{key:"getYear",value:function(e){return this.clone(e).year()}},{key:"getMonth",value:function(e){return this.clone(e).month()}},{key:"getDate",value:function(e){return this.clone(e).date()}},{key:"getDayOfWeek",value:function(e){return this.clone(e).day()}},{key:"getMonthNames",value:function(e){return"long"===e?this._localeData.longMonths:this._localeData.shortMonths}},{key:"getDateNames",value:function(){return this._localeData.dates}},{key:"getDayOfWeekNames",value:function(e){return"long"===e?this._localeData.longDaysOfWeek:"short"===e?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}},{key:"getYearName",value:function(e){return this.clone(e).format("YYYY")}},{key:"getFirstDayOfWeek",value:function(){return this._localeData.firstDayOfWeek}},{key:"getNumDaysInMonth",value:function(e){return this.clone(e).daysInMonth()}},{key:"clone",value:function(e){return e.clone().locale(this.locale)}},{key:"createDate",value:function(e,t,n){if(t<0||t>11)throw Error('Invalid month index "'.concat(t,'". Month index has to be between 0 and 11.'));if(n<1)throw Error('Invalid date "'.concat(n,'". Date has to be greater than 0.'));var r=this._createMoment({year:e,month:t,date:n}).locale(this.locale);if(!r.isValid())throw Error('Invalid date "'.concat(n,'" for month with index "').concat(t,'".'));return r}},{key:"today",value:function(){return this._createMoment().locale(this.locale)}},{key:"parse",value:function(e,t){return e&&"string"==typeof e?this._createMoment(e,t,this.locale):e?this._createMoment(e).locale(this.locale):null}},{key:"format",value:function(e,t){if(e=this.clone(e),!this.isValid(e))throw Error("MomentDateAdapter: Cannot format invalid date.");return e.format(t)}},{key:"addCalendarYears",value:function(e,t){return this.clone(e).add({years:t})}},{key:"addCalendarMonths",value:function(e,t){return this.clone(e).add({months:t})}},{key:"addCalendarDays",value:function(e,t){return this.clone(e).add({days:t})}},{key:"toIso8601",value:function(e){return this.clone(e).format()}},{key:"deserialize",value:function(e){var t;if(e instanceof Date)t=this._createMoment(e).locale(this.locale);else if(this.isDateInstance(e))return this.clone(e);if("string"==typeof e){if(!e)return null;t=this._createMoment(e,a.ISO_8601).locale(this.locale)}return t&&this.isValid(t)?this._createMoment(t).locale(this.locale):d(p(n.prototype),"deserialize",this).call(this,e)}},{key:"isDateInstance",value:function(e){return a.isMoment(e)}},{key:"isValid",value:function(e){return this.clone(e).isValid()}},{key:"invalid",value:function(){return a.invalid()}},{key:"getHour",value:function(e){return e.hours()}},{key:"getMinute",value:function(e){return e.minutes()}},{key:"getSecond",value:function(e){return e.seconds()}},{key:"setHour",value:function(e,t){e.hours(t)}},{key:"setMinute",value:function(e,t){e.minutes(t)}},{key:"setSecond",value:function(e,t){e.seconds(t)}},{key:"_createMoment",value:function(e,t,n){var r=this._options||{},i=r.strict;return r.useUtc?a.utc(e,t,n,i):a(e,t,n,i)}}]),n}(r.b);return e.\u0275fac=function(t){return new(t||e)(i.Zb(s,8))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac}),e}()}}])}();