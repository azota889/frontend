"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[201],{8201:(gt,J,g)=>{g.r(J),g.d(J,{AuthModule:()=>To});var p=g(69808),c=g(93075),E=g(74202),G=g(51908),k=g(71410),Y=g(75658),K=g(60157),Q=g(37389),I=g(42856),w=g(26201),M=g(21223),d=g(60703),l=g(55330),x=g(41303),t=g(5e3),b=g(35018),O=g(16384),S=g(63681),j=g(42873),ht=g(88386),T=g(31279),et=g(84095),mt=g(59482),D=g(51377),C=g(1033);function pt(o,s){1&o&&(t.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function _t(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," Email ph\u1ea3i nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng! "),t.qZA())}function ft(o,s){if(1&o&&(t.TgZ(0,"div",44),t.YNc(1,_t,2,0,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("email","email"))}}function vt(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),t.qZA())}function At(o,s){if(1&o&&(t.TgZ(0,"div",44),t.YNc(1,vt,2,0,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("password","required")||e.getErrorType("password","minlength"))}}function Ct(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1! "),t.qZA())}function Et(o,s){if(1&o&&(t.TgZ(0,"div",44),t.YNc(1,Ct,2,0,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("phone","pattern")||e.getErrorType("phone","minlength")||e.getErrorType("phone","maxlength"))}}function xt(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function bt(o,s){if(1&o&&(t.TgZ(0,"div",15)(1,"label",45),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("*** ",t.lcZ(3,1,e.statusObj.errorMessage),"")}}function yt(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",46),t._uU(2,"\xa0"),t.qZA())}function wt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17),t._UZ(4,"input",18),t.TgZ(5,"div",19)(6,"span",20)(7,"mat-icon"),t._uU(8,"account_box"),t.qZA()()()()()(),t.TgZ(9,"div",15)(10,"div",16)(11,"div",17),t._UZ(12,"input",21),t.TgZ(13,"div",19)(14,"span",20)(15,"mat-icon"),t._uU(16,"email"),t.qZA()()()(),t.YNc(17,ft,2,1,"div",22),t.qZA()(),t.TgZ(18,"div",15)(19,"div",16)(20,"div",17),t._UZ(21,"input",23),t.TgZ(22,"div",19)(23,"span",20)(24,"mat-icon"),t._uU(25,"lock"),t.qZA()()()(),t.YNc(26,At,2,1,"div",22),t.qZA()(),t.TgZ(27,"div",15)(28,"div",16)(29,"div",24),t._UZ(30,"input",25),t.TgZ(31,"div",19)(32,"span",20)(33,"mat-icon"),t._uU(34,"phone_enabled"),t.qZA()()()(),t.TgZ(35,"a",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().goToConfirm()}),t._uU(36,"Click v\xe0o \u0111\xe2y n\u1ebfu b\u1ea1n mu\u1ed1n \u0111\u1ed5i s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"),t.qZA(),t.YNc(37,Et,2,1,"div",22),t.qZA()(),t.TgZ(38,"div",15)(39,"div",16)(40,"div",27)(41,"mat-radio-group",28)(42,"div",2)(43,"div",29),t._uU(44," Gi\u1edbi t\xednh "),t.qZA(),t.TgZ(45,"div",30)(46,"mat-radio-button",31),t._uU(47,"Nam"),t.qZA(),t.TgZ(48,"mat-radio-button",32),t._uU(49,"N\u1eef"),t.qZA()()()()()()(),t.TgZ(50,"div",15)(51,"div",33)(52,"mat-form-field",34)(53,"input",35),t.NdJ("click",function(){return t.CHM(e),t.MAs(58).open()}),t.qZA(),t.TgZ(54,"button",36),t.NdJ("click",function(i){return t.CHM(e),t.MAs(58).open(),i.stopPropagation()}),t.TgZ(55,"mat-icon"),t._uU(56,"today"),t.qZA()(),t.TgZ(57,"ngx-mat-datetime-picker",37,38),t.YNc(59,xt,2,0,"ng-template"),t.qZA()()()(),t.YNc(60,bt,4,3,"div",39),t.TgZ(61,"div",15)(62,"div",40)(63,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.form.invalid||i.statusObj.loading||i.changeInfo()}),t.YNc(64,yt,3,0,"span",11),t._uU(65,"C\u1eadp nh\u1eadt "),t.qZA()()(),t.TgZ(66,"div",42)(67,"a",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().goBack()}),t._uU(68,"Quay l\u1ea1i trang ch\u1ee7"),t.qZA()()()}if(2&o){const e=t.MAs(58),n=t.oxw();t.xp6(17),t.Q6J("ngIf",n.form.controls.email.invalid&&n.form.controls.email.dirty),t.xp6(9),t.Q6J("ngIf",n.form.controls.password.invalid&&(n.form.controls.password.dirty||n.form.controls.password.touched)),t.xp6(4),t.uIk("disabled",!0),t.xp6(7),t.Q6J("ngIf",n.form.controls.phone.invalid&&(n.form.controls.phone.dirty||n.form.controls.phone.touched)),t.xp6(16),t.Q6J("ngxMatDatetimePicker",e),t.xp6(4),t.Q6J("hideTime",!0),t.xp6(3),t.Q6J("ngIf",n.statusObj.errorMessage),t.xp6(3),t.Q6J("disabled",n.form.invalid||n.statusObj.loading),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)}}const Zt={parse:{dateInput:"l, LTS"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let St=(()=>{class o extends l.Q{constructor(e,n,i,r,a,u,h){super(n),this.formBuilder=e,this.commonService=n,this.baseApiService=i,this.authService=r,this.redirectService=a,this.userService=u,this.datepipe=h,this.form=new c.cw({}),this.startDate=new Date(1990,1,1),this.gender=0,this.prevData="",this.returnUrl=""}getErrorType(e,n){var i,r,a,u,h,_;return!!(null===(a=null===(r=null===(i=this.form.controls)||void 0===i?void 0:i[e])||void 0===r?void 0:r.errors)||void 0===a?void 0:a[n])&&(null===(_=null===(h=null===(u=this.form.controls)||void 0===u?void 0:u[e])||void 0===h?void 0:h.errors)||void 0===_?void 0:_[n])}goToConfirm(){this.returnUrl="/auth/change-info";var e="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=change_phone";this.commonService.myNavigationWithQueryString("/auth/checking_service",e)}allowChangePhone(){var e=this.baseApiService.getUserObj(),i=e.zaloId?e.zaloId:"";return""!=i&&i==(e.phone?e.phone:"")}changeInfo(){var e;if(this.form.valid){var n=this.commonService.getFormObj(this.form),i=n.birthday?new Date(Date.parse(n.birthday)):this.startDate,r={fullName:n.fullName,birthday:null!==(e=this.datepipe.transform(i,"yyyy-MM-ddTHH:mm:ss"))&&void 0!==e?e:"",email:n.email,gender:n.gender,password:n.password};this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthUpdateInfoPost(r).subscribe(a=>{1==a.success?this.successStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!",!0):this.errorStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin kh\xf4ng th\xe0nh c\xf4ng!",!0)}))}}goBack(){this.baseApiService.redirectLoginByRole("")}getInfo(){var e,n=this.baseApiService.getUserObj(),i=n.birthday?new Date(n.birthday):new Date(1990,1,1);this.startDate=i,this.gender=null!==(e=n.gender)&&void 0!==e?e:0,this.form.patchValue({fullName:this.userService.isAnonymousName(n)?"":n.fullName,email:n.email?n.email:"",phone:n.phone?n.phone:"",gender:1!=this.gender?"0":"1"}),this.form.controls.birthday.setValue(i)}ngOnInit(){this.form=this.formBuilder.group({fullName:new c.NI("",[c.kI.required,x._.noWhiteSpace]),email:new c.NI("",c.kI.email),phone:new c.NI("",[c.kI.pattern("^[0-9]*$")]),gender:new c.NI(""),birthday:new c.NI(""),password:new c.NI("",[c.kI.minLength(6)])}),this.baseApiService.isAnonymousRole()?this.redirectService.redirectSimpleRegister():(this.getInfo(),this.form.valueChanges.subscribe(e=>{let n=JSON.stringify(e);n!=this.prevData&&(this.prevData=n,this.form.patchValue(e))}),this.commonService.translateMetaData({title:"lang_cms_auth_change_info_title",description:"lang_cms_auth_change_info_description",image:"lang_cms_test_image"}),super.ngOnInit())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(b.v),t.Y36(O._),t.Y36(S.e8),t.Y36(j.V),t.Y36(ht.K),t.Y36(p.uU))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-change-info"]],features:[t._Bn([p.uU,{provide:I.fM,useClass:d.HF,deps:[w.Ad,d.o8]},{provide:I.ab,useValue:Zt},{provide:M.o2,useValue:{floatLabel:"never"}}]),t.qOj],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","fullName",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","text","placeholder","Email","formControlName","email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group","mb-1"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"clickable","text-info",2,"font-size","13px","padding-left","5px",3,"click"],[1,"input-group","input-custom"],["formControlName","gender","color","primary",2,"width","100%"],[1,"col-5"],[1,"col-7"],["value","1",1,"col-6","p-0"],["value","0"],[1,"col-sm-12","studentBirthDay"],["id","birthday",1,"myTimePicker",2,"border","1px solid #ced4da","border-radius","3px","padding-top","2px"],["matInput","","placeholder","Ng\xe0y sinh","formControlName","birthday","readonly","",1,"form-birthday","bg-white",3,"ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",3,"click"],[3,"hideTime"],["birthDay",""],["class","form-group",4,"ngIf"],[1,"col-sm-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"h2",5),t._UZ(6,"img",6),t.ALo(7,"convertCdn"),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"span",9),t._uU(11,"S\u1eeda th\xf4ng tin t\xe0i kho\u1ea3n"),t.qZA()(),t.TgZ(12,"div",10),t.YNc(13,pt,6,3,"div",11),t.YNc(14,wt,69,9,"div",11),t.qZA()()(),t._UZ(15,"div",3),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("src",t.lcZ(7,4,"azota_assets/images/logo.svg"),t.LSH),t.xp6(7),t.Q6J("ngIf",n.statusObj.loading),t.xp6(1),t.Q6J("ngIf",!n.statusObj.loading))},directives:[c._Y,c.JL,c.sg,p.O5,c.Fj,c.JJ,c.u,T.Hw,et.VQ,et.U0,M.KE,mt.Nt,I.g2,D.lW,M.R9,I.AB],pipes:[C.BI,C.bT],styles:[".mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em}  .mat-form-field-appearance-legacy .mat-form-field-label{font-weight:400;color:#0000008a;font-size:16px}.form-birthday[_ngcontent-%COMP%]{display:block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}#birthday[_ngcontent-%COMP%]:focus, #birthday[_ngcontent-%COMP%]:active, #birthday[_ngcontent-%COMP%]:target, #birthday[_ngcontent-%COMP%]:visited, #birthday[_ngcontent-%COMP%]:focus-within, #birthday[_ngcontent-%COMP%]:focus-visible{background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.hover-cancel[_ngcontent-%COMP%]:hover{background-color:#ebe9e9}.input-custom[_ngcontent-%COMP%]{border:1px solid #e2e2e2;border-radius:3px;padding-left:12px;padding-top:10px}"]}),o})(),Tt=(()=>{class o extends l.Q{constructor(e,n){super(e),this.commonService=e,this.authService=n}get returnUrl(){var e;return null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:""}get confirm_type(){var e;return null!==(e=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==e?e:""}ngOnInit(){this.authService.apiAuthGetFirebaseConfigGet().subscribe(e=>{var n;if(1==e.success){let i=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.app);window.location.href=i.toString()}else this.commonService.snackError("C\xf3 l\u1ed7i khi ki\u1ec3m tra d\u1ecbch v\u1ee5","")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.v),t.Y36(S.e8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-checking-service"]],features:[t.qOj],decls:3,vars:0,consts:[[1,"mt-5","text-center"],["role","status",1,"spinner-border","spinner-border-md",2,"color","#2361ae"]],template:function(e,n){1&e&&(t.TgZ(0,"h2",0),t._UZ(1,"span",1),t._uU(2,"\xa0 \u0110ang ki\u1ec3m tra d\u1ecbch v\u1ee5..."),t.qZA())},encapsulation:2}),o})();var kt=g(15867),U=g(99675),nt=g(24096);let ot=(()=>{class o{get windowRef(){return window}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var z=g(92340),Qt=g(34782);const Ot=["verifyCode"];function Dt(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 10 k\xfd t\u1ef1! "),t.qZA())}function Pt(o,s){if(1&o&&(t.TgZ(0,"div",34),t.YNc(1,Dt,2,0,"div",31),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getErrorType("phone","required")||e.getErrorType("phone","minlength"))}}function qt(o,s){if(1&o&&(t.TgZ(0,"div",13)(1,"label",35),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.hij("*** ",t.lcZ(3,1,e.statusObj.errorMessage),"")}}function Mt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",36),t._uU(1," Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c m\xe3 x\xe1c th\u1ef1c? "),t.TgZ(2,"b",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().resendCode()}),t._uU(3,"G\u1eedi l\u1ea1i!"),t.qZA()()}}function It(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",37),t._uU(2,"\xa0"),t.qZA())}const Lt=function(o){return{"margin-left":o}};let Ut=(()=>{class o extends l.Q{constructor(e,n,i,r,a,u,h){super(n),this.formBuilder=e,this.commonService=n,this.window=i,this.baseApiService=r,this.authService=a,this.redirectService=u,this.browserStorageService=h,this.subscriptions=new nt.w,this.form=new c.cw({}),this.confirm_type="forgot_password",this.isVerifying=!1,this.smsSent=!1,this.timeOut=60,this.captchaWidgetId="",this.isLoading=!0}getError(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}getErrorType(e,n){var i,r;return!!(null===(i=this.form.controls[e].errors)||void 0===i?void 0:i[n])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[n])}get firebaseApp(){var e;return null!==(e=this.commonService.getMyQueryParam("app_name"))&&void 0!==e?e:""}get returnUrl(){var e;return null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:""}getConfirmType(){var e;return null!==(e=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==e?e:""}skipVerifyPhone(){var e=Math.round((new Date).getTime()/1e3);this.browserStorageService.saveSimpleStorage("skip_verify_phone",e.toString()),this.baseApiService.redirectLoginByRole(""),"confirm_phone_register"==this.getConfirmType()?this.commonService.myNavigation("/admin/student/manage-class/0"):this.commonService.myNavigation("/admin/testbank/dashboard")}handleConfirmUsage(){const e=this.form.value.phone;let n=this.getConfirmType();if(""!=e)switch(n){case"forgot_password":this.commonService.gaEvent("confirm_event_forgot_password"),this.authService.apiAuthCheckPhoneExistsGet(e).subscribe(i=>{1==i.success?this.sendLoginCode("+84"+e.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())});break;case"change_phone":this.commonService.gaEvent("confirm_event_change_phone"),this.authService.apiAuthCheckPhoneExistsGet(e).subscribe(i=>{1!=i.success?this.sendLoginCode("+84"+e.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())});break;default:this.commonService.gaEvent("confirm_event_confirm_phone"),this.authService.apiAuthCheckUpdatePhoneExistsGet(e).subscribe(i=>{1!=i.success?this.sendLoginCode("+84"+e.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())})}else this.commonService.snackError("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!",""),this.reRenderCaptcha()}sendLoginCode(e){const n=this.windowRef.recaptchaVerifier,i=(0,U.v0)();(0,U.$g)(i,e,n).then(r=>{this.windowRef.confirmationResult=r,this.smsSent=!0,this.timeOut=60,this.countDownTime()}).catch(r=>{console.log(r),"auth/quota-exceeded"==r.code?this.authService.apiAuthFirebaseOverQuotaGet(this.firebaseApp).subscribe(a=>{1==a.success?this.authService.apiAuthGetFirebaseConfigGet().subscribe(u=>{var h,_,y,f,Z;if(1==u.success)if((null===(h=null==u?void 0:u.data)||void 0===h?void 0:h.app)!==this.firebaseApp){var m=this.commonService.getMyQueryParam("interval_app");if(m&&m!=(null===(_=null==u?void 0:u.data)||void 0===_?void 0:_.app)){m=m||(null!==(f=null===(y=null==u?void 0:u.data)||void 0===y?void 0:y.app)&&void 0!==f?f:"");let A=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(Z=null==u?void 0:u.data)||void 0===Z?void 0:Z.app)+"&interval_app="+m;window.location.href=A.toString()}else this.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","")}else this.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","");else this.commonService.snackError("Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c th\xf4ng tin FirebaseApp","")}):this.commonService.snackError("Kh\xf4ng \u0111\xe1nh d\u1ea5u \u0111\u01b0\u1ee3c firebase h\u1ebft quoata","")}):(this.commonService.gaEvent("confirm_event_error_send_code"),this.smsSent=!1,this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+r.code))})}verify_code(e){this.windowRef.confirmationResult?(this.isVerifying=!0,this.windowRef.confirmationResult.confirm(e).then(n=>{this.isVerifying=!1;const i=n.user;let r=this.getConfirmType();"forgot_password"===r?this.commonService.myNavigationWithQueryString("/auth/set_new_password","?app_name="+this.firebaseApp+"&token="+encodeURIComponent(i.accessToken)):this.authService.apiAuthUpdatePhoneOrPasswordByFirebasePost({firebaseToken:i.accessToken,password:"",appName:this.firebaseApp}).subscribe(u=>{1==u.success?(this.showSuccessSnack("C\u1eadp nh\u1eadt s\u1ed1 \u0111i\u1ec7n tho\u1ea1i th\xe0nh c\xf4ng!"),"confirm_phone_register"==r?this.commonService.myNavigation("/admin/student/manage-class/0"):this.baseApiService.redirectLoginByRole("")):this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+u.message)})}).catch(n=>{console.log(n),this.isVerifying=!1,this.commonService.gaEvent("confirm_event_error_verify_code"),this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+n.code)})):(this.isVerifying=!1,this.showErrorSnack("M\xe3 x\xe1c th\u1ef1c kh\xf4ng \u0111\xfang, vui l\xf2ng ki\u1ec3m tra l\u1ea1i"))}resendCode(){var e;this.reRenderCaptcha(),null===(e=document.getElementById("recaptcha-container"))||void 0===e||e.click()}countDownTime(){this.myCountDown=window.setInterval(()=>{this.timeOut>0&&this.timeOut--},1e3)}initForm(){this.form=this.formBuilder.group({phone:["",[c.kI.required,c.kI.minLength(10)]]})}handleClickLogout(){"forgot_password"==this.confirm_type||"change_phone"==this.confirm_type?this.baseApiService.redirectLoginByRole(""):(this.baseApiService.logout(),this.redirectService.redirectSimpleLogin())}reRenderCaptcha(){this.windowRef.recaptchaVerifier.reset(this.windowRef.recaptchaWidgetId)}handleEnterVerify(e,n){"Enter"==e.key&&(this.commonService.gaEvent("confirm_event_verify_code_by_press_enter"),this.verify_code(n))}ngOnInit(){this.initForm(),(0,kt.ZF)(z.N[`firebaseConfig_${this.firebaseApp}`]),(0,U.v0)().useDeviceLanguage();let e=this.getConfirmType();switch(this.confirm_type=this.getConfirmType(),"forgot_password"!=e&&this.authService.apiAuthInfoGet().subscribe(n=>{var i,r,a,u;1==n.success?1==(null===(i=null==n?void 0:n.new_user)||void 0===i?void 0:i.isVerifyPhone)?"change_phone"!=e&&this.baseApiService.redirectLoginByRole(""):(null===(r=null==n?void 0:n.new_user)||void 0===r?void 0:r.phone)&&(null===(a=null==n?void 0:n.new_user)||void 0===a?void 0:a.phone.length)<=10?this.form.setValue({phone:null===(u=null==n?void 0:n.new_user)||void 0===u?void 0:u.phone}):(this.form.setValue({phone:""}),console.log("enter phone plz")):this.showErrorSnack(n.message?"C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+n.message:"")}),e){case"forgot_password":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"});break;case"change_phone":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_change_phone_title",description:"lang_cms_auth_confirm_change_phone_description",image:"lang_cms_test_image"});break;default:this.commonService.translateMetaData({title:"lang_cms_auth_confirm_confirm_phone_title",description:"lang_cms_auth_confirm_confirm_phone_description",image:"lang_cms_test_image"})}super.ngOnInit()}ngAfterViewInit(){this.countDownTime(),this.windowRef=this.window.windowRef;const e=(0,U.v0)();if(this.windowRef.recaptchaVerifier=new U.lI("recaptcha-container",{size:"invisible",callback:()=>{this.handleConfirmUsage()}},e),this.windowRef.recaptchaVerifier.render().then(n=>{this.windowRef.recaptchaWidgetId=n}),this.verifyCode&&""!=this.verifyCode.nativeElement.value){let n=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.addEventListener("keyup",i=>this.handleEnterVerify(i,n))}}ngOnDestroy(){if(clearInterval(this.myCountDown),this.verifyCode){let e=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.removeEventListener("keyup",n=>this.handleEnterVerify(n,e))}super.ngDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(b.v),t.Y36(ot),t.Y36(O._),t.Y36(S.e8),t.Y36(j.V),t.Y36(Qt.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-account"]],viewQuery:function(e,n){if(1&e&&t.Gf(Ot,5),2&e){let i;t.iGM(i=t.CRH())&&(n.verifyCode=i.first)}},features:[t._Bn([ot]),t.qOj],decls:51,vars:16,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"card-body"],["id","verify_wrap"],["id","enter_phone_area",3,"ngStyle"],["id","enter_phone_wrap"],[1,"form-horizontal",3,"formGroup"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["id","phoneInput","type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","off",1,"form-control"],["phoneInput",""],["class","alert alert-danger",4,"ngIf"],["id","recaptcha-container","color","primary","mat-raised-button",""],[1,"mt-3","text-center"],[1,"clickable",3,"click"],["class","form-group",4,"ngIf"],["id","verify_area",1,"form-group"],[1,"sms-info"],[2,"text-align","right","font-size","12px","margin-bottom","3px"],["class","mb-2 mt-2 resend-code",4,"ngIf"],["type","string","placeholder","M\xe3 x\xe1c th\u1ef1c","autocomplete","off",1,"form-control"],["verifyCode",""],[1,"input-group-append","ml-1"],["id","buttonVerify","mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[1,"text-center","mt-3"],[1,"text-normal","clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],[1,"mb-2","mt-2","resend-code"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"h2",5),t._UZ(6,"img",6),t.ALo(7,"convertCdn"),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"h2"),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9)(14,"div",10)(15,"div",11)(16,"form",12)(17,"div",13)(18,"div",14)(19,"div",15),t._UZ(20,"input",16,17),t.qZA(),t.YNc(22,Pt,2,1,"div",18),t.TgZ(23,"button",19),t._uU(24,"Ti\u1ebfp t\u1ee5c"),t.qZA(),t.TgZ(25,"div",20)(26,"a",21),t.NdJ("click",function(){return n.skipVerifyPhone()}),t._uU(27,"B\u1ecf qua"),t.qZA()()()()(),t.YNc(28,qt,4,3,"div",22),t.qZA()(),t.TgZ(29,"div",23)(30,"div",14)(31,"div",24),t._uU(32," M\u1ed9t tin nh\u1eafn ch\u1ee9a m\xe3 x\xe1c th\u1ef1c v\u1eeba \u0111\u01b0\u1ee3c g\u1eedi t\u1edbi s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(33,"b"),t._uU(34),t.qZA(),t._uU(35,". Vui l\xf2ng nh\u1eadp m\xe3 n\xe0y v\xe0o \xf4 d\u01b0\u1edbi \u0111\xe2y r\u1ed3i \u1ea5n x\xe1c th\u1ef1c "),t.qZA(),t.TgZ(36,"div",25),t._uU(37),t.qZA(),t.YNc(38,Mt,4,0,"div",26),t.TgZ(39,"div",15),t._UZ(40,"input",27,28),t.TgZ(42,"div",29)(43,"button",30),t.NdJ("click",function(){t.CHM(i);const a=t.MAs(41);return n.verify_code(a.value)}),t.YNc(44,It,3,0,"span",31),t._uU(45,"X\xe1c th\u1ef1c "),t.qZA()()()()()(),t._UZ(46,"hr"),t.TgZ(47,"div",32)(48,"a",33),t.NdJ("click",function(){return n.handleClickLogout()}),t._uU(49),t.qZA()()()()()(),t._UZ(50,"div",3),t.qZA()()()}if(2&e){const i=t.MAs(41);t.xp6(6),t.Q6J("src",t.lcZ(7,12,"azota_assets/images/logo.svg"),t.LSH),t.xp6(5),t.Oqu("change_phone"==n.confirm_type?"Nh\u1eadp v\xe0o s\u1ed1 \u0111i\u1ec7n tho\u1ea1i m\u1edbi":"X\xe1c th\u1ef1c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n"),t.xp6(3),t.Q6J("ngStyle",t.VKq(14,Lt,n.smsSent?"-100%":"0")),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(6),t.Q6J("ngIf",n.form.controls.phone.invalid&&(n.form.controls.phone.dirty||n.form.controls.phone.touched)),t.xp6(6),t.Q6J("ngIf",n.statusObj.errorMessage),t.xp6(6),t.Oqu(n.form.value.phone),t.xp6(3),t.hij("",n.timeOut," s"),t.xp6(1),t.Q6J("ngIf",0==n.timeOut),t.xp6(5),t.Q6J("disabled",""==i.value||n.isVerifying),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading),t.xp6(5),t.Oqu("forgot_password"==n.confirm_type?"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n":"change_phone"==n.confirm_type?"Quay l\u1ea1i m\xe0n h\xecnh ch\xednh":"\u0110\u0103ng xu\u1ea5t")}},directives:[p.PC,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,p.O5,D.lW],pipes:[C.BI,C.bT],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}"]}),o})();function Ft(o,s){if(1&o&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div",15),t._UZ(3,"div",16)(4,"div",16)(5,"div",16),t.qZA()()()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngClass",1==e.step_by_step?"active":e.step_by_step>1?"active pro":""),t.xp6(1),t.Q6J("ngClass",2==e.step_by_step?"active":e.step_by_step>2?"active pro":""),t.xp6(1),t.Q6J("ngClass",3==e.step_by_step?"active":e.step_by_step>3?"active pro":"")}}function Bt(o,s){1&o&&(t.TgZ(0,"div")(1,"div",17)(2,"div",18)(3,"span",19),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function Nt(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng! "),t.qZA())}function Rt(o,s){if(1&o&&(t.TgZ(0,"div",41),t.YNc(1,Nt,2,0,"div",12),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("phone","required"))}}function Jt(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),t.qZA())}function Yt(o,s){if(1&o&&(t.TgZ(0,"div",41),t.YNc(1,Jt,2,0,"div",12),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("password","required")||e.getErrorType("password","minlength"))}}function jt(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),t.qZA())}function zt(o,s){if(1&o&&(t.TgZ(0,"div",41),t.YNc(1,jt,2,0,"div",12),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("repassword","confirm_pass"))}}function Ht(o,s){if(1&o&&(t.TgZ(0,"div",20)(1,"label",42),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("*** ",t.lcZ(3,1,e.statusObj.errorMessage),"")}}function Vt(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",43),t._uU(2,"\xa0"),t.qZA())}const $=function(o){return[o]},rt=function(){return{user_click:"true"}};function Wt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",20)(2,"div",21)(3,"div",22),t._UZ(4,"input",23),t.TgZ(5,"div",24)(6,"span",25)(7,"mat-icon"),t._uU(8,"phone"),t.qZA()()()(),t.YNc(9,Rt,2,1,"div",26),t.qZA()(),t.TgZ(10,"div",20)(11,"div",21)(12,"div",22),t._UZ(13,"input",27),t.TgZ(14,"div",24)(15,"span",25)(16,"mat-icon"),t._uU(17,"lock"),t.qZA()()()(),t.YNc(18,Yt,2,1,"div",26),t.qZA()(),t.TgZ(19,"div",20)(20,"div",21)(21,"div",22),t._UZ(22,"input",28),t.TgZ(23,"div",24)(24,"span",25)(25,"mat-icon"),t._uU(26,"lock"),t.qZA()()()(),t.YNc(27,zt,2,1,"div",26),t.qZA()(),t.YNc(28,Ht,4,3,"div",29),t.TgZ(29,"div",20)(30,"div",21)(31,"div",30)(32,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.form.invalid||i.statusObj.loading||i.changePassword()}),t.YNc(33,Vt,3,0,"span",12),t._uU(34,"Ti\u1ebfp t\u1ee5c "),t.qZA(),t.TgZ(35,"div",32)(36,"span",33),t._uU(37,"Ho\u1eb7c"),t.qZA()(),t.TgZ(38,"div",5)(39,"a",34),t.ALo(40,"localize"),t.TgZ(41,"span",35)(42,"mat-icon",36),t._uU(43,"center_focus_strong"),t.qZA(),t._uU(44," S\u1eed d\u1ee5ng m\xe3 QR qu\xean m\u1eadt kh\u1ea9u"),t.qZA()()()()()(),t._UZ(45,"hr"),t.TgZ(46,"div",37)(47,"div",38)(48,"a",39),t._uU(49,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),t.qZA()(),t.TgZ(50,"div")(51,"a",40),t.ALo(52,"localize"),t._uU(53,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(9),t.Q6J("ngIf",e.form.controls.phone.invalid&&(e.form.controls.phone.dirty||e.form.controls.phone.touched)),t.xp6(9),t.Q6J("ngIf",e.form.controls.password.invalid&&e.form.controls.password.dirty),t.xp6(9),t.Q6J("ngIf",e.getErrorType("repassword","confirm_pass")&&e.form.controls.repassword.touched),t.xp6(1),t.Q6J("ngIf",e.statusObj.errorMessage),t.xp6(4),t.Q6J("disabled",e.form.invalid||e.statusObj.loading||0!=e.getErrorType("repassword","confirm_pass")),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading),t.xp6(6),t.Q6J("routerLink",t.VKq(13,$,t.lcZ(40,9,"/auth/confirm_forgot_password_qr"))),t.xp6(12),t.Q6J("routerLink",t.VKq(15,$,t.lcZ(52,11,"/auth/login")))("queryParams",t.DdM(17,rt))}}function Gt(o,s){if(1&o&&(t.TgZ(0,"div",47)(1,"a"),t._uU(2,"( Click v\xe0o \u0111\xe2y \u0111\u1ec3 g\u1eedi ngay )"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.uIk("href","sms:"+e.phone_send+"?body=MK "+e.response_change_pass.otp,t.LSH)}}function Kt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).changeStepByNext()}),t._uU(1," Ti\u1ebfp t\u1ee5c "),t.qZA()}}function $t(o,s){if(1&o&&(t.TgZ(0,"div",51)(1,"div",52),t._UZ(2,"span",43),t.qZA(),t.TgZ(3,"div",53),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.currentMessage)}}function Xt(o,s){if(1&o&&(t.TgZ(0,"div")(1,"div",21)(2,"div",44),t._uU(3," Th\xf4ng tin m\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c ghi nh\u1eadn. \u0110\u1ec3 k\xedch ho\u1ea1t m\u1eadt kh\u1ea9u v\u1eeba t\u1ea1o vui l\xf2ng s\u1eed d\u1ee5ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(4,"strong"),t._uU(5),t.qZA(),t._uU(6," v\xe0 so\u1ea1n tin nh\u1eafn: "),t.qZA(),t.TgZ(7,"div",45)(8,"strong"),t._uU(9),t.qZA(),t._uU(10," g\u1eedi "),t.TgZ(11,"strong"),t._uU(12),t.qZA()(),t.YNc(13,Gt,3,1,"div",46),t.TgZ(14,"div",47),t._uU(15,' "C\u01b0\u1edbc ph\xed tin nh\u1eafn \u0111\u01b0\u1ee3c t\xednh theo gi\xe1 c\u01b0\u1edbc ph\xed th\xf4ng th\u01b0\u1eddng c\u1ee7a nh\xe0 m\u1ea1ng" '),t.qZA(),t.TgZ(16,"div",47),t._uU(17," Sau khi g\u1eedi tin nh\u1eafn vui l\xf2ng b\u1ea5m n\xfat b\xean d\u01b0\u1edbi \u0111\u1ec3 ti\u1ebfp t\u1ee5c "),t.qZA(),t.TgZ(18,"div",22),t.YNc(19,Kt,2,0,"button",48),t.YNc(20,$t,5,1,"div",49),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.data_change_pass.phone),t.xp6(4),t.hij("MK ",e.response_change_pass.otp,""),t.xp6(3),t.Oqu(e.phone_send),t.xp6(1),t.Q6J("ngIf",e.is_mobile),t.xp6(6),t.Q6J("ngIf",2==e.step_by_step),t.xp6(1),t.Q6J("ngIf",3==e.step_by_step)}}function te(o,s){1&o&&(t.TgZ(0,"div")(1,"div",21)(2,"div",44),t._uU(3," M\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t th\xe0nh c\xf4ng. "),t.qZA(),t.TgZ(4,"div",37)(5,"div",38)(6,"a",54),t.ALo(7,"localize"),t._uU(8,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),t.qZA()(),t.TgZ(9,"div")(10,"a",55),t._uU(11,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),t.qZA()()()()()),2&o&&(t.xp6(6),t.Q6J("routerLink",t.VKq(4,$,t.lcZ(7,2,"/auth/login")))("queryParams",t.DdM(6,rt)))}let ee=(()=>{class o extends l.Q{constructor(e,n,i){super(n),this.formBuilder=e,this.commonService=n,this.smsService=i,this.form=new c.cw({}),this.step_by_step=1,this.currentMessage="",this.phone_send="",this.is_mobile=/Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.is_mobile_ios=/webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),this.response_change_pass={},this.data_change_pass={}}getError(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}getErrorType(e,n){var i,r;return"repassword"===e&&"confirm_pass"===n?this.form.controls.repassword.value!=this.form.controls.password.value:!!(null===(i=this.form.controls[e].errors)||void 0===i?void 0:i[n])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[n])}randomPhone(e){if(e.includes(",")){let n=e.split(",");return n[this.commonService.getRandomNumber(0,n.length-1)]}return e}changePassword(){if(this.form.valid){this.initStatusObj();var e=this.commonService.getFormObj(this.form),n={phone:e.phone,password:e.password};this.smsService.apiSmsChangePassPost(n).subscribe(i=>{var r,a;1==i.success?(this.successStatusObj(),this.step_by_step=2,this.response_change_pass=null!==(r=i.data)&&void 0!==r?r:{},this.data_change_pass=n):this.errorStatusObj(null!==(a=i.message)&&void 0!==a?a:"")})}}getPhone(){this.initStatusObj(),this.smsService.apiSmsGetPhoneGet().subscribe(e=>{var n,i,r;1==e.success?(this.successStatusObj(),this.phone_send=this.randomPhone(null!==(i=null===(n=e.data)||void 0===n?void 0:n.phone)&&void 0!==i?i:"")):this.errorStatusObj(null!==(r=e.message)&&void 0!==r?r:"",!0)})}changeStepByNext(){this.initStatusObj(),this.currentMessage="\u0110ang x\u1eed l\xfd d\u1eef li\u1ec7u",this.step_by_step=3,this.loop_check=window.setInterval(()=>{this.smsService.apiSmsCheckStatusGet(this.data_change_pass.phone).subscribe(e=>{var n,i;1==e.success?(this.successStatusObj(),1==(null===(n=e.data)||void 0===n?void 0:n.status)&&(this.step_by_step=4,clearInterval(this.loop_check))):(this.errorStatusObj(null!==(i=e.message)&&void 0!==i?i:""),this.currentMessage="H\u1ec7 th\u1ed1ng t\u1ea1m th\u1eddi kh\xf4ng th\u1ec3 x\u1eed l\xfd, vui l\xf2ng th\u1eed l\u1ea1i sau.",clearInterval(this.loop_check))})},1e3)}ngOnInit(){this.form=this.formBuilder.group({phone:["",[c.kI.required]],password:["",[c.kI.required,c.kI.minLength(6)]],repassword:["",[c.kI.required,c.kI.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.getPhone(),super.ngOnInit()}ngOnDestroy(){this.loop_check&&clearInterval(this.loop_check),super.ngDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(b.v),t.Y36(S.tr))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-forgot-password"]],features:[t.qOj],decls:18,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["class","row m-0",4,"ngIf"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"row","m-0"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","new-phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[1,"text-center","mt-2"],[1,"text-mute"],[1,"btn","btn-outline-primary","mt-2","w-100",3,"routerLink"],[1,"link-center"],[1,"mr-1"],[1,"text-center","mt-3"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sms-info"],[2,"text-align","right","font-size","15px","margin","10px 0","text-align","center"],["class","sms-info text-center mb-3",4,"ngIf"],[1,"sms-info","text-center","mb-3"],["class","btn btn-block","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"click"],[1,"loading"],[1,"icon"],[1,"text"],[3,"routerLink","queryParams"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank",1,"text-normal"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"h2",5),t._UZ(6,"img",6),t.qZA(),t.YNc(7,Ft,6,3,"div",7),t.TgZ(8,"div",8)(9,"div",9)(10,"span",10),t._uU(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),t.qZA()(),t.TgZ(12,"div",11),t.YNc(13,Bt,6,3,"div",12),t.YNc(14,Wt,54,18,"div",12),t.YNc(15,Xt,21,6,"div",12),t.YNc(16,te,12,7,"div",12),t.qZA()()(),t._UZ(17,"div",3),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(6),t.Q6J("ngIf",!n.statusObj.loading),t.xp6(6),t.Q6J("ngIf",n.statusObj.loading),t.xp6(1),t.Q6J("ngIf",!n.statusObj.loading&&1==n.step_by_step),t.xp6(1),t.Q6J("ngIf",1!=n.statusObj.loading&&(2==n.step_by_step||3==n.step_by_step)),t.xp6(1),t.Q6J("ngIf",!n.statusObj.loading&&4==n.step_by_step))},directives:[c._Y,c.JL,c.sg,p.O5,p.mk,c.Fj,c.JJ,c.u,T.Hw,D.lW,E.yS],pipes:[C.bT,Q.lO],styles:['#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),o})();function ne(o,s){1&o&&(t.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function oe(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),t.qZA())}function ie(o,s){if(1&o&&(t.TgZ(0,"div",27),t.YNc(1,oe,2,0,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("password","required")||e.getErrorType("password","minlength"))}}function re(o,s){if(1&o&&(t.TgZ(0,"div",15)(1,"label",28),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("*** ",t.lcZ(3,1,e.statusObj.errorMessage),"")}}function se(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",29),t._uU(2,"\xa0"),t.qZA())}const ae=function(o){return[o]},ce=function(){return{user_click:"true"}};function ue(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17),t._UZ(4,"input",18),t.TgZ(5,"div",19)(6,"span",20)(7,"mat-icon"),t._uU(8,"lock"),t.qZA()()()(),t.YNc(9,ie,2,1,"div",21),t.qZA()(),t.YNc(10,re,4,3,"div",22),t.TgZ(11,"div",15)(12,"div",16)(13,"div",23)(14,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.form.invalid||i.statusObj.loading||i.changePassword()}),t.YNc(15,se,3,0,"span",11),t._uU(16,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),t.qZA()()()(),t._UZ(17,"hr"),t.TgZ(18,"div",25)(19,"a",26),t.ALo(20,"localize"),t._uU(21,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(9),t.Q6J("ngIf",e.form.controls.password.invalid&&(e.form.controls.password.dirty||e.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",e.statusObj.errorMessage),t.xp6(4),t.Q6J("disabled",e.form.invalid||e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading),t.xp6(4),t.Q6J("routerLink",t.VKq(8,ae,t.lcZ(20,6,"/auth/login")))("queryParams",t.DdM(10,ce))}}let de=(()=>{class o extends l.Q{constructor(e,n,i,r){super(n),this.formBuilder=e,this.commonService=n,this.baseApiService=i,this.authService=r,this.form=new c.cw({})}getError(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}getErrorType(e,n){var i,r;return!!(null===(i=this.form.controls[e].errors)||void 0===i?void 0:i[n])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[n])}changePassword(){if(this.form.valid){var e=this.commonService.getFormObj(this.form),n=this.commonService.getMyQueryParam("token");this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConfirmForgotPasswordGet(n,e.password).subscribe(i=>{var r;1==i.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(r=i.message)&&void 0!==r?r:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[c.kI.required,c.kI.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(b.v),t.Y36(O._),t.Y36(S.e8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-forgot-password-admin"]],features:[t.qOj],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"h2",5),t._UZ(6,"img",6),t.ALo(7,"convertCdn"),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"span",9),t._uU(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),t.qZA()(),t.TgZ(12,"div",10),t.YNc(13,ne,6,3,"div",11),t.YNc(14,ue,22,11,"div",11),t.qZA()()(),t._UZ(15,"div",3),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("src",t.lcZ(7,4,"azota_assets/images/logo.svg"),t.LSH),t.xp6(7),t.Q6J("ngIf",n.statusObj.loading),t.xp6(1),t.Q6J("ngIf",!n.statusObj.loading))},directives:[c._Y,c.JL,c.sg,p.O5,c.Fj,c.JJ,c.u,T.Hw,D.lW,E.yS],pipes:[C.BI,C.bT,Q.lO],encapsulation:2}),o})();var X=g(3279),H=g(39105),v=g(15861);const le=(()=>{class o{constructor(e,n,i,r,a){this._legacyCanvasSize=o.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&"object"==typeof i?this._onDecode=n:(console.warn(i||r||a?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof i?i:{}).onDecodeError||("function"==typeof i?i:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof r?r:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||a||this._preferredCamera,this._legacyCanvasSize="number"==typeof i?i:"number"==typeof r?r:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let u=!1;if(e.hidden&&(e.hidden=!1,u=!0),document.body.contains(e)||(document.body.appendChild(e),u=!0),i=e.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(r=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(a=this.$overlay.style).position="absolute",a.display="none",a.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!r&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(h){}i.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let h=window.getComputedStyle(e);"none"===h.display&&(e.style.setProperty("display","block","important"),u=!0),"visible"!==h.visibility&&(e.style.setProperty("visibility","visible","important"),u=!0),u&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=o.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,v.Z)(function*(){try{return!!(yield o.listCameras(!1)).length}catch(e){return!1}})()}static listCameras(e=!1){return(0,v.Z)(function*(){if(!navigator.mediaDevices)return[];let i,n=function(){var r=(0,v.Z)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(a=>"videoinput"===a.kind)});return function(){return r.apply(this,arguments)}}();try{e&&(yield n()).every(r=>!r.label)&&(i=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(r){}try{return(yield n()).map((r,a)=>({id:r.deviceId,label:r.label||(0===a?"Default Camera":`Camera ${a+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),o._stopVideoStream(i))}})()}hasFlash(){var e=this;return(0,v.Z)(function*(){let n;try{if(e.$video.srcObject){if(!(e.$video.srcObject instanceof MediaStream))return!1;n=e.$video.srcObject}else n=(yield e._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch(i){return!1}finally{n&&n!==e.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),o._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var e=this;return(0,v.Z)(function*(){e._flashOn?yield e.turnFlashOff():yield e.turnFlashOn()})()}turnFlashOn(){var e=this;return(0,v.Z)(function*(){if(!e._flashOn&&!e._destroyed&&(e._flashOn=!0,e._active&&!e._paused))try{if(!(yield e.hasFlash()))throw"No flash available";yield e.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw e._flashOn=!1,n}})()}turnFlashOff(){var e=this;return(0,v.Z)(function*(){e._flashOn&&(e._flashOn=!1,yield e._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),o._postWorkerMessage(this._qrEnginePromise,"close")}start(){var e=this;return(0,v.Z)(function*(){if(e._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!e._active||e._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),e._active=!0,!document.hidden))if(e._paused=!1,e.$video.srcObject)yield e.$video.play();else try{let{stream:n,facingMode:i}=yield e._getCameraStream();!e._active||e._paused?o._stopVideoStream(n):(e._setVideoMirror(i),e.$video.srcObject=n,yield e.$video.play(),e._flashOn&&(e._flashOn=!1,e.turnFlashOn().catch(()=>{})))}catch(n){if(!e._paused)throw e._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(e=!1){var n=this;return(0,v.Z)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let i=()=>{n.$video.srcObject instanceof MediaStream&&(o._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return e?(i(),!0):(yield new Promise(r=>setTimeout(r,300)),!!n._paused&&(i(),!0))})()}setCamera(e){var n=this;return(0,v.Z)(function*(){e!==n._preferredCamera&&(n._preferredCamera=e,yield n._restartVideoStream())})()}static scanImage(e,n,i,r,a=!1,u=!1){return(0,v.Z)(function*(){let h,_=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(h=n.scanRegion,i=n.qrEngine,r=n.canvas,a=n.disallowCanvasResizing||!1,u=n.alsoTryWithoutScanRegion||!1,_=!0):console.warn(n||i||r||a||u?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i;try{let y,f,Z;if([i,y]=yield Promise.all([i||o.createQrEngine(),o._loadImage(e)]),[r,f]=o._drawToCanvas(y,h,r,a),i instanceof Worker){let m=i;n||o._postWorkerMessageSync(m,"inversionMode","both"),Z=yield new Promise((A,B)=>{let N,L,P,W=-1;L=q=>{q.data.id===W&&(m.removeEventListener("message",L),m.removeEventListener("error",P),clearTimeout(N),null!==q.data.data?A({data:q.data.data,cornerPoints:o._convertPoints(q.data.cornerPoints,h)}):B(o.NO_QR_CODE_FOUND))},P=q=>{m.removeEventListener("message",L),m.removeEventListener("error",P),clearTimeout(N),B("Scanner error: "+(q?q.message||q:"Unknown Error"))},m.addEventListener("message",L),m.addEventListener("error",P),N=setTimeout(()=>P("timeout"),1e4);let R=f.getImageData(0,0,r.width,r.height);W=o._postWorkerMessageSync(m,"decode",R,[R.data.buffer])})}else Z=yield Promise.race([new Promise((m,A)=>window.setTimeout(()=>A("Scanner error: timeout"),1e4)),(0,v.Z)(function*(){try{var[m]=yield i.detect(r);if(!m)throw o.NO_QR_CODE_FOUND;return{data:m.rawValue,cornerPoints:o._convertPoints(m.cornerPoints,h)}}catch(A){if(/not implemented|service unavailable/.test(m=A.message||A))return o._disableBarcodeDetector=!0,o.scanImage(e,{scanRegion:h,canvas:r,disallowCanvasResizing:a,alsoTryWithoutScanRegion:u});throw`Scanner error: ${m}`}})()]);return _?Z:Z.data}catch(y){if(!h||!u)throw y;let f=yield o.scanImage(e,{qrEngine:i,canvas:r,disallowCanvasResizing:a});return _?f:f.data}finally{n||o._postWorkerMessage(i,"close")}})()}setGrayscaleWeights(e,n,i,r=!0){o._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:n,blue:i,useIntegerApproximation:r})}setInversionMode(e){o._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static createQrEngine(e){return(0,v.Z)(function*(){return e&&console.warn("Specifying a worker path is not required and not supported anymore."),!o._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(yield BarcodeDetector.getSupportedFormats()).includes("qr_code")?new BarcodeDetector({formats:["qr_code"]}):g.e(920).then(g.bind(g,36920)).then(n=>n.createWorker())})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let n=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-n)/2),y:Math.round((e.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,n=e.videoWidth,i=e.videoHeight,r=e.offsetWidth,a=e.offsetHeight,u=e.offsetLeft,h=e.offsetTop,_=window.getComputedStyle(e),y=_.objectFit,f=n/i,Z=r/a;switch(y){case"none":var m=n,A=i;break;case"fill":m=r,A=a;break;default:("cover"===y?f>Z:f<Z)?m=(A=a)*f:A=(m=r)/f,"scale-down"===y&&(m=Math.min(m,n),A=Math.min(A,i))}var[B,N]=_.objectPosition.split(" ").map((P,W)=>{const R=parseFloat(P);return P.endsWith("%")?(W?a-A:r-m)*R/100:R});Z=this._scanRegion.height||i,y=this._scanRegion.x||0;var L=this._scanRegion.y||0;(f=this.$overlay.style).width=(_=this._scanRegion.width||n)/n*m+"px",f.height=Z/i*A+"px",f.top=`${h+N+L/i*A}px`,i=/scaleX\(-1\)/.test(e.style.transform),f.left=`${u+(i?r-B-m:B)+(i?n-y-_:y)/n*m}px`,f.transform=e.style.transform}})}static _convertPoints(e,n){if(!n)return e;let i=n.x||0,r=n.y||0,a=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let u of e)u.x=u.x*a+i,u.y=u.y*n+r;return e}_scanFrame(){var e=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,v.Z)(function*(){if(!(1>=e.$video.readyState)){var n=Date.now()-e._lastScanTimestamp,i=1e3/e._maxScansPerSecond;n<i&&(yield new Promise(a=>setTimeout(a,i-n))),e._lastScanTimestamp=Date.now();try{var r=yield o.scanImage(e.$video,{scanRegion:e._scanRegion,qrEngine:e._qrEnginePromise,canvas:e.$canvas})}catch(a){if(!e._active)return;e._onDecodeError(a)}!o._disableBarcodeDetector||(yield e._qrEnginePromise)instanceof Worker||(e._qrEnginePromise=o.createQrEngine()),r?(e._onDecode?e._onDecode(r):e._legacyOnDecode&&e._legacyOnDecode(r.data),e.$codeOutlineHighlight&&(clearTimeout(e._codeOutlineHighlightRemovalTimeout),e._codeOutlineHighlightRemovalTimeout=void 0,e.$codeOutlineHighlight.setAttribute("viewBox",`${e._scanRegion.x||0} ${e._scanRegion.y||0} ${e._scanRegion.width||e.$video.videoWidth} ${e._scanRegion.height||e.$video.videoHeight}`),e.$codeOutlineHighlight.firstElementChild.setAttribute("points",r.cornerPoints.map(({x:a,y:u})=>`${a},${u}`).join(" ")),e.$codeOutlineHighlight.style.display="")):e.$codeOutlineHighlight&&!e._codeOutlineHighlightRemovalTimeout&&(e._codeOutlineHighlightRemovalTimeout=setTimeout(()=>e.$codeOutlineHighlight.style.display="none",100))}e._scanFrame()}))}_onDecodeError(e){e!==o.NO_QR_CODE_FOUND&&console.log(e)}_getCameraStream(){var e=this;return(0,v.Z)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(e._preferredCamera)?"facingMode":"deviceId",i=[{width:{min:1024}},{width:{min:768}},{}],r=i.map(a=>Object.assign({},a,{[n]:{exact:e._preferredCamera}}));for(let a of[...r,...i])try{let u=yield navigator.mediaDevices.getUserMedia({video:a,audio:!1});return{stream:u,facingMode:e._getFacingMode(u)||(a.facingMode?e._preferredCamera:"environment"===e._preferredCamera?"user":"environment")}}catch(u){}throw"Camera not found."})()}_restartVideoStream(){var e=this;return(0,v.Z)(function*(){let n=e._paused;(yield e.pause(!0))&&!n&&e._active&&(yield e.start())})()}static _stopVideoStream(e){for(let n of e.getTracks())n.stop(),e.removeTrack(n)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,n,i,r=!1){i=i||document.createElement("canvas");let a=n&&n.x?n.x:0,u=n&&n.y?n.y:0,h=n&&n.width?n.width:e.videoWidth||e.width,_=n&&n.height?n.height:e.videoHeight||e.height;return r||(r=n&&n.downScaledWidth?n.downScaledWidth:h,n=n&&n.downScaledHeight?n.downScaledHeight:_,i.width!==r&&(i.width=r),i.height!==n&&(i.height=n)),(n=i.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(e,a,u,h,_,0,0,i.width,i.height),[i,n]}static _loadImage(e){return(0,v.Z)(function*(){if(e instanceof Image)return yield o._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(!(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e))throw"Unsupported image type.";{let n=new Image;n.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return yield o._awaitImageLoad(n),n}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(e){return(0,v.Z)(function*(){e.complete&&0!==e.naturalWidth||(yield new Promise((n,i)=>{let r=a=>{e.removeEventListener("load",r),e.removeEventListener("error",r),a instanceof ErrorEvent?i("Image load error"):n()};e.addEventListener("load",r),e.addEventListener("error",r)}))})()}static _postWorkerMessage(e,n,i,r){return(0,v.Z)(function*(){return o._postWorkerMessageSync(yield e,n,i,r)})()}static _postWorkerMessageSync(e,n,i,r){if(!(e instanceof Worker))return-1;let a=o._workerMessageId++;return e.postMessage({id:a,type:n,data:i},r),a}}return o.DEFAULT_CANVAS_SIZE=400,o.NO_QR_CODE_FOUND="No QR code found",o._disableBarcodeDetector=!1,o._workerMessageId=0,o})();var ge=g(591),V=g(10550),he=g(1099);function me(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"zxing-scanner",7),t.NdJ("deviceChange",function(i){return t.CHM(e),t.oxw().currentDevice=i})("scanSuccess",function(i){return t.CHM(e),t.oxw().onCodeResult(i)})("permissionResponse",function(i){return t.CHM(e),t.oxw().onHasPermission(i)})("camerasFound",function(i){return t.CHM(e),t.oxw().onCamerasFound(i)})("torchCompatible",function(i){return t.CHM(e),t.oxw().onTorchCompatible(i)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("torch",e.torchEnabled)("device",e.currentDevice)("tryHarder",e.tryHarder)("formats",e.formatsEnabled)}}function pe(o,s){if(1&o&&(t.TgZ(0,"span",8),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("( ",e.contentResult," )")}}let st=(()=>{class o extends l.Q{constructor(e){super(e),this.commonService=e,this.outContentScan=new t.vpe,this.outNotCamAllow=new t.vpe,this.isShowDebugLog=!1,this.isShowScanner=!1,this.availableDevices=[],this.currentDevice=void 0,this.hasDevices=!1,this.hasPermission=!1,this.qrResultString="",this.torchEnabled=!1,this.torchAvailable$=new ge.X(!1),this.tryHarder=!1,this.formatsEnabled=[H.BarcodeFormat.CODE_128,H.BarcodeFormat.DATA_MATRIX,H.BarcodeFormat.EAN_13,H.BarcodeFormat.QR_CODE],this.deviceCamSelect=0,this.contentResult=null,this.isShowLog=!1,this.snd=new Audio,this.snd=new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=")}clearResult(){this.qrResultString=""}onCamerasFound(e){this.availableDevices=e,this.hasDevices=Boolean(e&&e.length)}onCodeResult(e){this.qrResultString=e,V.g.isEncode(e)?this.switchChangeContent(V.g.decode(e)):this.switchChangeContent(null)}onDeviceSelectChange(e){const n=this.availableDevices.find(i=>i.deviceId===e);this.currentDevice=n||void 0}onHasPermission(e){this.hasPermission=e}onTorchCompatible(e){this.torchAvailable$.next(e||!1)}toggleTorch(){this.torchEnabled=!this.torchEnabled}toggleTryHarder(){this.tryHarder=!this.tryHarder}switchVideoScan(){this.deviceCamSelect++,this.deviceCamSelect>=this.availableDevices.length&&(this.deviceCamSelect=0),this.currentDevice=this.availableDevices[this.deviceCamSelect]}unInitSscanCam(){this.isShowScanner=!1}initVideoScan(){this.isShowScanner=!0}initScanCam(){this.isShowScanner=!0}onFileSelected(e){let r=e.target.files;if(null==r?void 0:r.length){var a=r[0];if(!a)return;this.scanProcessSelectFile(e,a,0)}else console.log("jel"),this.switchChangeContent(null)}scanProcessSelectFile(e,n,i){le.scanImage(n,{returnDetailedScanResult:!0}).then(r=>{this.thatLog("onFileSelected: 0 "+JSON.stringify(r)),e.target.value="";var a=r.data;this.thatLog("onFileSelected: 1 "+a),V.g.isEncode(a)?this.switchChangeContent(V.g.decode(a)):this.switchChangeContent(null)}).catch(r=>{i>=2?(e.target.value="",this.thatLog("onFileSelected: 2 "+JSON.stringify(r)),this.switchChangeContent(null)):this.scanProcessSelectFile(e,n,i++)})}pauseScanQrcode(){this.isShowScanner=!1}switchChangeContent(e){this.contentResult=e,this.pauseScanQrcode(),this.beep(),navigator&&navigator.vibrate&&navigator.vibrate(200),this.thatLog("switchChangeContent: "+e),this.outContentScan.emit(this.contentResult)}thatLog(e){!0===this.isShowDebugLog&&console.log("__AZT SCAN__ :: "+e)}beep(){this.snd&&this.snd.play()}ngOnDestroy(){this.unInitSscanCam(),super.ngDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-scan-qrcode"]],outputs:{outContentScan:"outContentScan",outNotCamAllow:"outNotCamAllow"},features:[t.qOj],decls:10,vars:2,consts:[[1,"scan__card-video"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible",4,"ngIf"],[1,"text-center","mt-3"],["class","text-center",4,"ngIf"],["type","file","name","fileQrcode",2,"display","none",3,"change"],["formChoseFile",""],[1,"link-center",3,"click"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible"],[1,"text-center"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0),t.YNc(1,me,1,4,"zxing-scanner",1),t.qZA(),t.TgZ(2,"div",2),t.YNc(3,pe,2,1,"span",3),t.TgZ(4,"input",4,5),t.NdJ("change",function(a){return n.onFileSelected(a)}),t.qZA(),t.TgZ(6,"a",6),t.NdJ("click",function(){return t.CHM(i),t.MAs(5).click()}),t.TgZ(7,"mat-icon"),t._uU(8,"upload"),t.qZA(),t._uU(9," T\u1ea3i l\xean m\xe3 c\xf3 s\u1eb5n"),t.qZA()()}2&e&&(t.xp6(1),t.Q6J("ngIf",n.isShowScanner),t.xp6(2),t.Q6J("ngIf",n.isShowLog))},directives:[p.O5,he.S,T.Hw],styles:[".scan__card-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.scan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}.scan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.scan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:#2462ae6e;color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),o})();const _e=["aztScanQrcode"];function fe(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),t.qZA())}function ve(o,s){if(1&o&&(t.TgZ(0,"div",36),t.YNc(1,fe,2,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("password","required")||e.getErrorType("password","minlength"))}}function Ae(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),t.qZA())}function Ce(o,s){if(1&o&&(t.TgZ(0,"div",36),t.YNc(1,Ae,2,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("repassword","confirm_pass"))}}function Ee(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",37),t._uU(2,"\xa0"),t.qZA())}function xe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",38)(1,"p",39),t._uU(2,"Kh\xf4ng th\u1ec3 x\xe1c nh\u1eadn y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u. M\xe3 Qrcode v\xe0 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u0103ng nh\u1eadp kh\xf4ng tr\xf9ng kh\u1edbp. Vui l\xf2ng th\u1eed l\u1ea1i."),t.qZA(),t.TgZ(3,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).reloadProcessForgot()}),t._uU(4,"Th\u1eed l\u1ea1i"),t.qZA()()}}function be(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25),t._UZ(4,"input",26),t.TgZ(5,"div",27)(6,"span",28)(7,"mat-icon"),t._uU(8,"qr_code"),t.qZA()()()()()(),t.TgZ(9,"div",23)(10,"div",24)(11,"div",25),t._UZ(12,"input",29),t.TgZ(13,"div",27)(14,"span",28)(15,"mat-icon"),t._uU(16,"lock"),t.qZA()()()(),t.YNc(17,ve,2,1,"div",30),t.qZA()(),t.TgZ(18,"div",23)(19,"div",24)(20,"div",25),t._UZ(21,"input",31),t.TgZ(22,"div",27)(23,"span",28)(24,"mat-icon"),t._uU(25,"lock"),t.qZA()()()(),t.YNc(26,Ce,2,1,"div",30),t.qZA()(),t.TgZ(27,"div",23)(28,"div",24)(29,"div",32)(30,"button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.form.invalid||i.statusObj.loading||i.changePassword()}),t.YNc(31,Ee,3,0,"span",34),t._uU(32,"Ti\u1ebfp t\u1ee5c "),t.qZA()()(),t.YNc(33,xe,5,0,"div",35),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(4),t.uIk("disabled",!0),t.xp6(13),t.Q6J("ngIf",e.form.controls.password.invalid&&e.form.controls.password.dirty),t.xp6(9),t.Q6J("ngIf",0!=e.getErrorType("repassword","confirm_pass")&&e.form.controls.repassword.touched),t.xp6(4),t.Q6J("disabled",e.statusObj.errorMessage||e.form.invalid||e.statusObj.loading||0!=e.getErrorType("repassword","confirm_pass")),t.xp6(1),t.Q6J("ngIf",!0===e.statusObj.loading),t.xp6(2),t.Q6J("ngIf",e.statusObj.errorMessage)}}const ye=function(o){return{"d-none":o}},we=function(o){return[o]},Ze=function(){return{user_click:"true"}};let Se=(()=>{class o extends l.Q{constructor(e,n,i,r){super(e),this.commonService=e,this.localStorageObjetct=n,this.formBuilder=i,this.qrCodeForgotPasswordService=r,this.subscriptions=new nt.w,this.form=new c.cw({}),this.stepByStep=0,this.sussScanNextConf=!1}getError(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}getErrorType(e,n){var i,r;return"repassword"===e&&"confirm_pass"===n?this.form.controls.repassword.value!=this.form.controls.password.value:!!(null===(i=this.form.controls[e].errors)||void 0===i?void 0:i[n])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[n])}reloadProcessForgot(){this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam(),this.stepByStep=0,this.form.reset(),this.initStatusObj(),this.sussScanNextConf=!1}outContentScan(e){null!==e?this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordAnonymousCheckForgotPasswordQrCodePost({hash:e}).subscribe(i=>{var r;1==i.success&&1==(null===(r=null==i?void 0:i.data)||void 0===r?void 0:r.status)?(this.stepByStep=1,this.form.controls.hash.setValue(e),this.sussScanNextConf=!0):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}changePassword(){this.initStatusObj();var e=this.commonService.getFormObj(this.form);this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordChangePasswordByQrcodePost({hash:e.hash,password:e.password}).subscribe(i=>{0!=i.success?(this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng.",!0),this.commonService.myNavigation("/auth/forgot_password_susscess")):(this.errorStatusObj("Y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u th\u1ea5t b\u1ea1i.",!0),this.successStatusObj())})}ngAfterViewInit(){setTimeout(()=>{this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam()},0)}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.form=this.formBuilder.group({hash:["",[c.kI.required]],password:["",[c.kI.required,c.kI.minLength(6)]],repassword:["",[c.kI.required,c.kI.minLength(6)]]}),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.v),t.Y36(X.L),t.Y36(c.qu),t.Y36(S.qY))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-forgot-password"]],viewQuery:function(e,n){if(1&e&&t.Gf(_e,5),2&e){let i;t.iGM(i=t.CRH())&&(n.elementaztScanQrcode=i.first)}},features:[t.qOj],decls:33,vars:15,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"loginscan_scanmode_cam",3,"ngClass"],[1,"text-center","mb-3"],[3,"outContentScan"],["aztScanQrcode",""],["class","loginscan_scanmode_conf",4,"ngIf"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal","mt-1",3,"routerLink","queryParams"],[1,"loginscan_scanmode_conf"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\xe3 x\xe1c th\u1ef1c","formControlName","hash",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[4,"ngIf"],["class","col-sm-12 mt-2",4,"ngIf"],[1,"alert","alert-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-sm-12","mt-2"],[1,"text-danger"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"h2",5),t._UZ(6,"img",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8),t._UZ(9,"div",9)(10,"div",9)(11,"div",9),t.qZA()(),t.TgZ(12,"div",10)(13,"div",11)(14,"span",12),t._uU(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi b\u1eb1ng m\xe3 QRCode"),t.qZA()(),t.TgZ(16,"div",13)(17,"div",14)(18,"div",15),t._uU(19," Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode "),t.qZA(),t.TgZ(20,"azt-scan-qrcode",16,17),t.NdJ("outContentScan",function(r){return n.outContentScan(r)}),t.qZA()(),t.YNc(22,be,34,6,"div",18),t.qZA(),t._UZ(23,"hr"),t.TgZ(24,"div",15)(25,"div",19)(26,"a",20),t._uU(27,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),t.qZA()(),t.TgZ(28,"div")(29,"a",21),t.ALo(30,"localize"),t._uU(31,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),t.qZA()()()()(),t._UZ(32,"div",3),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(8),t.Q6J("ngClass",n.stepByStep+2==1?"active":n.stepByStep+2>1?"active pro":""),t.xp6(1),t.Q6J("ngClass",n.stepByStep+2==2?"active":n.stepByStep+2>2?"active pro":""),t.xp6(1),t.Q6J("ngClass",n.stepByStep+2==3?"active":n.stepByStep+2>3?"active pro":""),t.xp6(6),t.Q6J("ngClass",t.VKq(10,ye,n.sussScanNextConf)),t.xp6(5),t.Q6J("ngIf",n.sussScanNextConf),t.xp6(7),t.Q6J("routerLink",t.VKq(12,we,t.lcZ(30,8,"/auth/login")))("queryParams",t.DdM(14,Ze)))},directives:[c._Y,c.JL,c.sg,p.mk,st,p.O5,c.Fj,c.JJ,c.u,T.Hw,D.lW,E.yS],pipes:[Q.lO],styles:['#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),o})();var F=g(88341),Te=g(17852),ke=g(58496);function Qe(o,s){if(1&o&&(t.TgZ(0,"div",3)(1,"mat-icon",4),t._uU(2,"access_time"),t.qZA(),t._uU(3),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.hij(" ",e.stringDuration,"")}}let at=(()=>{class o extends l.Q{constructor(){super(...arguments),this.content="",this.width=0,this.height=0,this.expired=0,this.expiredAction=new t.vpe,this.startDuration=0,this.isDuration=!1,this.stringDuration="__ : __"}ngAfterViewInit(){setTimeout(()=>{this.reInitComponent()},0)}reInitComponent(){this.bindUrlToQrCode(),0!=this.expired&&(this.isDuration=!0,this.startDuration=Math.floor(Date.now()/1e3),this.initLoopDuration())}initLoopDuration(){this.loopDuration=setInterval(()=>{var e=Math.floor(Date.now()/1e3),i=this.expired-(e-this.startDuration);if(i<0)this.clearLoopDuration(),this.qrcode.clear(),this.expiredAction.emit();else{var r=Math.floor(i/60),a=i-60*r;this.stringDuration=(r<10?"0"+r:""+r)+" : "+(a<10?"0"+a:""+a)}},1e3)}clearLoopDuration(){this.loopDuration&&clearInterval(this.loopDuration)}bindUrlToQrCode(){this.qrcode=this.commonService.createObjectQrcode(this.content,this.width,this.height,"text",!0,"image-qrcode-created"),this.qrcode._oDrawing._elCanvas.style.width="100%",this.qrcode._oDrawing._elCanvas.style.opacity=".9"}downloadQrcode(e){e||(e="azota-qr"),e=this.getTimeSaveQrcode()+"_"+e+".jpg";var n=this.createFrameQrcodeSaveLocal(this.qrcode._oDrawing._elCanvas),i=document.createElement("a");document.body.appendChild(i),i.setAttribute("href",n),i.setAttribute("download",e),i.click()}getTimeSaveQrcode(){var e=new Date,n=e.getMonth()+1,i=e.getDate();return[e.getFullYear(),(n>9?"":"0")+n,(i>9?"":"0")+i].join("_")}createFrameQrcodeSaveLocal(e){var n=document.createElement("canvas");const i=n.getContext("2d");return n.width=420,n.height=420,i&&(i.fillStyle="white",i.fillRect(0,0,n.width,n.height),i.drawImage(e,0,0,e.width,e.height,Math.floor((n.height-e.height)/2),(n.width-e.width)/2,e.width,e.height)),n.toDataURL("image/jpeg",1)}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-create-qr-image"]],inputs:{content:"content",width:"width",height:"height",expired:"expired"},outputs:{expiredAction:"expiredAction"},features:[t.qOj],decls:3,vars:1,consts:[[1,"qr-scan-box"],["class","duration",4,"ngIf"],["id","image-qrcode-created"],[1,"duration"],[2,"font-size","18px"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Qe,4,1,"div",1),t._UZ(2,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.isDuration))},directives:[p.O5,T.Hw],styles:[".qr-scan-box[_ngcontent-%COMP%]{border:1px solid #e0e0e0}#image-qrcode-created[_ngcontent-%COMP%]{margin:20px}.duration[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;font-weight:500}"]}),o})();const Oe=["elementCreateQr"];function De(o,s){1&o&&t._UZ(0,"header-backend",13),2&o&&t.Q6J("headerTitle","")("back_link","/admin/testbank/dashboard")}function Pe(o,s){1&o&&t._UZ(0,"header-frontend",14),2&o&&t.Q6J("headerTitle","")("back_link","/student/dashboard/0")}function qe(o,s){if(1&o&&(t.TgZ(0,"div",15),t._UZ(1,"azt-create-qr-image",16,17),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("content",e.contentQrcodeHash)("width",350)("height",350)("expired",0)}}function Me(o,s){if(1&o&&(t.TgZ(0,"div",18)(1,"div",19)(2,"mat-icon"),t._uU(3,"visibility_off"),t.qZA()(),t.TgZ(4,"div",20),t._uU(5),t.qZA()()),2&o){const e=t.oxw();t.xp6(5),t.hij(" ",e.notiContentString," ")}}function Ie(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",7)(1,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().downloadQrCode()}),t.TgZ(2,"mat-icon",22),t._uU(3,"download"),t.qZA(),t._uU(4," T\u1ea3i xu\u1ed1ng m\xe3"),t.qZA()()}}function Le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",7)(1,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDialog()}),t.TgZ(2,"mat-icon",22),t._uU(3,"add_photo_alternate"),t.qZA(),t._uU(4," T\u1ea1o m\xe3 qu\xean m\u1eadt kh\u1ea9u m\u1edbi"),t.qZA()()}}let Ue=(()=>{class o extends l.Q{constructor(e,n,i,r){super(e),this.commonService=e,this.dialog=n,this.activeRoute=i,this.qrCodeForgotPasswordService=r,this.notiContentString="",this.contentQrcodeHash="",this.role=0}checkQrThisMe(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCheckForgotPasswordQrCodeGet().subscribe(e=>{var n;1==e.success?this.notiContentString=0!=(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.status)?"M\xe3 Qrcode \u0111\xe3 t\u1ed3n t\u1ea1i. B\u1ea1n kh\xf4ng th\u1ec3 xem m\xe3 hi\u1ec7n t\u1ea1i. T\u1ea1o m\xe3 m\u1edbi trong tr\u01b0\u1eddng h\u1ee3p b\u1ea1n \u0111\xe3 m\u1ea5t m\xe3 Qrcode.":"B\u1ea1n ch\u01b0a t\u1ea1o m\xe3 Qrcode d\xf9ng trong tr\u01b0\u1eddng h\u1ee3p qu\xean m\u1eadt kh\u1ea9u. Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi.":this.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}createQrcodeForgot(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCreateForgotPasswordQrCodeGet().subscribe(e=>{var n,i;1==e.success?this.contentQrcodeHash=null!==(i=null===(n=e.data)||void 0===n?void 0:n.qrCode)&&void 0!==i?i:"":this.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}openDialog(){this.dialog.open(Fe).afterClosed().subscribe(n=>{!0===n&&this.createQrcodeForgot()})}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-forgot")}ngOnInit(){var e,n=null!==(e=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==e?e:"0";this.role=parseInt(n,10),this.checkQrThisMe(),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.v),t.Y36(F.uw),t.Y36(E.gz),t.Y36(S.qY))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-gzip-tool"]],viewQuery:function(e,n){if(1&e&&t.Gf(Oe,5),2&e){let i;t.iGM(i=t.CRH())&&(n.elementCreateQr=i.first)}},features:[t.qOj],decls:16,vars:6,consts:[["class","mb-3",3,"headerTitle","back_link",4,"ngIf"],[3,"headerTitle","back_link",4,"ngIf"],[1,"container","component-wrap","centerBoth","hasBg","mt-3"],[1,"card","mb-5"],[1,"card-body"],[1,"text-center"],[1,"card-content","mt-3","text-center"],[1,"card-center-row"],[1,"qrcode-block","card-center-row"],[1,"qrcode-block-fake","card-center-row"],["class","qrcode-block-real",4,"ngIf"],["class","qrcode-block-fake-content",4,"ngIf"],["class","card-center-row",4,"ngIf"],[1,"mb-3",3,"headerTitle","back_link"],[3,"headerTitle","back_link"],[1,"qrcode-block-real"],[3,"content","width","height","expired"],["elementCreateQr",""],[1,"qrcode-block-fake-content"],[1,"qrcode-block-icon"],[1,"qrcode-block-note"],[1,"card-center-row","btn","btn-outline-primary",3,"click"],[2,"margin-right","10px"]],template:function(e,n){1&e&&(t.YNc(0,De,1,2,"header-backend",0),t.YNc(1,Pe,1,2,"header-frontend",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5)(6,"b"),t._uU(7,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),t.qZA()(),t.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),t.YNc(12,qe,3,4,"div",10),t.YNc(13,Me,6,1,"div",11),t.qZA()()(),t.YNc(14,Ie,5,0,"div",12),t.YNc(15,Le,5,0,"div",12),t.qZA()()()()),2&e&&(t.Q6J("ngIf",0==n.role),t.xp6(1),t.Q6J("ngIf",1==n.role),t.xp6(11),t.Q6J("ngIf",n.contentQrcodeHash),t.xp6(1),t.Q6J("ngIf",!n.contentQrcodeHash),t.xp6(1),t.Q6J("ngIf",n.contentQrcodeHash),t.xp6(1),t.Q6J("ngIf",!n.contentQrcodeHash))},directives:[p.O5,Te.p,ke.d,at,T.Hw],styles:[".card-center-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.qrcode-block[_ngcontent-%COMP%]{padding:10px;border:1px solid #e0e0e0;margin-bottom:20px;max-width:400px;max-height:400px;min-width:300px;min-height:300px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.qrcode-block-fake[_ngcontent-%COMP%]{width:100%;height:100%}.qrcode-block-fake-content[_ngcontent-%COMP%]{padding:10px}.qrcode-block-note[_ngcontent-%COMP%]{line-height:30px}"]}),o})(),Fe=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["dialog-conf-content-qrcode-dialog"]],decls:16,vars:1,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-dialog-close","",1,"btn","btn-default","mr-3"],["cdkFocusInitial","",1,"btn","btn-outline-primary",3,"mat-dialog-close"]],template:function(e,n){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"h3"),t._uU(4,'B\u1ea5m "X\xe1c nh\u1eadn" \u0111\u1ed3ng ngh\u0129a v\u1edbi vi\u1ec7c b\u1ea1n \u0111\xe3 hi\u1ec3u v\u1ec1 c\xe1c \u0111i\u1ec1u sau'),t.qZA(),t.TgZ(5,"p"),t._uU(6,"1. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 duy nh\u1ea5t. Khi b\u1ea1n t\u1ea1o m\u1edbi m\xe3, m\xe3 c\u0169 s\u1ebd kh\xf4ng c\xf2n gi\xe1 tr\u1ecb s\u1eed d\u1ee5ng."),t.qZA(),t.TgZ(7,"p"),t._uU(8,"2. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 ch\xeca kho\xe1. Vui l\xf2ng kh\xf4ng chia s\u1ebb hay \u0111\u1ec3 ng\u01b0\u1eddi kh\xe1c c\xf3 \u0111\u01b0\u1ee3c m\xe3 qrcode c\u1ee7a b\u1ea1n."),t._UZ(9,"br"),t._uU(10,"Sau khi t\u1ea1o th\xe0nh c\xf4ng, vui l\xf2ng t\u1ea3i xu\u1ed1ng m\xe3 Qrcode \u0111\u1ec3 s\u1eed d\u1ee5ng cho m\u1ee5c \u0111\xedch qu\xean m\u1eadt kh\u1ea9u sau n\xe0y."),t.qZA()(),t.TgZ(11,"mat-dialog-actions",2)(12,"button",3),t._uU(13,"Hu\u1ef7"),t.qZA(),t.TgZ(14,"button",4),t._uU(15,"X\xe1c nh\u1eadn"),t.qZA()()),2&e&&(t.xp6(14),t.Q6J("mat-dialog-close",!0))},directives:[F.uh,F.xY,F.H8,F.ZT],encapsulation:2}),o})(),Be=(()=>{class o extends l.Q{constructor(){super(...arguments),this.step_by_step=3}redirectToCreateQrCode(){this.commonService.myNavigation("/auth/create-qr-forgot-pass/0")}redirectToHome(){this.commonService.myNavigation("/admin/testbank/dashboard")}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-forgot-password"]],features:[t.qOj],decls:25,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"btn-block-center"],[1,"btn","btn-outline-info","w-100","mr-3",3,"click"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"h2",5),t._UZ(6,"img",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8),t._UZ(9,"div",9)(10,"div",9)(11,"div",9),t.qZA()(),t.TgZ(12,"div",10)(13,"div",11)(14,"span",12),t._uU(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng"),t.qZA()(),t.TgZ(16,"div",13)(17,"p"),t._uU(18,"B\u1ea1n \u0111\xe3 \u0111\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng. M\xe3 Qrcode \u0111\xe3 s\u1eed d\u1ee5ng c\xf3 th\u1ec3 s\u1eed d\u1ee5ng l\u1ea1i. \u0110\u1ec3 \u0111\u1ea3m b\u1ea3o an to\xe0n, b\u1ea1n n\xean t\u1ea1o l\u1ea1i m\xe3 Qrcode."),t.qZA(),t.TgZ(19,"div",14)(20,"a",15),t.NdJ("click",function(){return n.redirectToHome()}),t._uU(21,"B\u1ecf qua v\xe0 v\u1ec1 trang ch\u1ee7"),t.qZA(),t.TgZ(22,"a",16),t.NdJ("click",function(){return n.redirectToCreateQrCode()}),t._uU(23,"T\u1ea1o l\u1ea1i m\xe3 Qrcode"),t.qZA()()()()(),t._UZ(24,"div",3),t.qZA()()()),2&e&&(t.xp6(9),t.Q6J("ngClass",n.step_by_step+2==1?"active":n.step_by_step+2>1?"active pro":""),t.xp6(1),t.Q6J("ngClass",n.step_by_step+2==2?"active":n.step_by_step+2>2?"active pro":""),t.xp6(1),t.Q6J("ngClass",n.step_by_step+2==3?"active":n.step_by_step+2>3?"active pro":""))},directives:[p.mk],styles:['#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.btn-block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}']}),o})();var Ne=g(89892);const Re=["elementCreateQr"],Je=["aztScanQrcode"];function Ye(o,s){1&o&&(t.TgZ(0,"h2",25),t._UZ(1,"img",26),t.ALo(2,"convertCdn"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("src",t.lcZ(2,1,"azota_assets/images/logo.svg"),t.LSH))}function je(o,s){1&o&&(t.TgZ(0,"div",20),t._uU(1,"\u0110\u1ec3 \u0111\u0103ng nh\u1eadp l\xean thi\u1ebft b\u1ecb n\xe0y, vui l\xf2ng t\u1ea1o m\xe3 \u0111\u1ec3 thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp qu\xe9t."),t.qZA())}function ze(o,s){1&o&&(t.TgZ(0,"div",20),t._uU(1,"D\xf9ng thi\u1ebft b\u1ecb c\u1ea7n \u0111\u0103ng nh\u1eadp qu\xe9t m\xe3 b\xean d\u01b0\u1edbi"),t.qZA())}function He(o,s){if(1&o&&(t.TgZ(0,"div",27),t._UZ(1,"span",28),t._uU(2),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.hij("\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode: ",e.nameSessionConfirm,"")}}function Ve(o,s){1&o&&(t.TgZ(0,"div",27),t._UZ(1,"span",28),t._uU(2,"\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode"),t.qZA())}function We(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),t._UZ(2,"br"),t._uU(3),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.hij("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",e.nameSessionConfirm,"")}}function Ge(o,s){1&o&&(t.TgZ(0,"div"),t._UZ(1,"span",28),t._uU(2,"\xa0 "),t.TgZ(3,"span",36),t._uU(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),t.qZA()())}function Ke(o,s){if(1&o&&(t.TgZ(0,"div",37),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.textResultErr)}}function $e(o,s){if(1&o&&(t.TgZ(0,"div",38),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.textResultSuss)}}function Xe(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",28),t._uU(2,"\xa0"),t.qZA())}function tn(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",28),t._uU(2,"\xa0"),t.qZA())}function en(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confContentPendingLogin(1)}),t.YNc(2,Xe,3,0,"span",32),t._uU(3," Ch\u1ea5p nh\u1eadn "),t.qZA(),t.TgZ(4,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confContentPendingLogin(2)}),t.YNc(5,tn,3,0,"span",32),t._uU(6," T\u1eeb ch\u1ed1i "),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.isLoadingBtn||e.textResultErr),t.xp6(1),t.Q6J("ngIf",e.isLoadingBtn),t.xp6(2),t.Q6J("disabled",e.isLoadingBtn||e.textResultErr),t.xp6(1),t.Q6J("ngIf",e.isLoadingBtn)}}function nn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"button",42),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).backScanActionWithIsLogin()}),t._uU(2,"Quay l\u1ea1i"),t.qZA()()}}function on(o,s){if(1&o&&(t.TgZ(0,"div",29)(1,"div",30)(2,"div",31),t.YNc(3,We,4,1,"span",32),t.qZA(),t.YNc(4,Ge,5,0,"div",32),t.YNc(5,Ke,2,1,"div",33),t.YNc(6,$e,2,1,"div",34),t.YNc(7,en,7,4,"div",35),t.YNc(8,nn,3,0,"div",32),t.qZA()()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.nameSessionConfirm),t.xp6(1),t.Q6J("ngIf",e.isLoadingBtn),t.xp6(1),t.Q6J("ngIf",e.textResultErr),t.xp6(1),t.Q6J("ngIf",e.textResultSuss),t.xp6(1),t.Q6J("ngIf",!e.textResultSuss||!e.isConfirmBtn),t.xp6(1),t.Q6J("ngIf",e.isLogin&&!1===e.isLoadingBtn&&!0===e.isConfirmBtn)}}function rn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).createRequestLoginHashCodeAction()}),t.TgZ(1,"div",47)(2,"div")(3,"mat-icon"),t._uU(4,"sync"),t.qZA()(),t.TgZ(5,"div"),t._uU(6,"T\u1ea1o m\u1edbi m\xe3"),t.qZA()()()}}function sn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-create-qr-image",48,49),t.NdJ("expiredAction",function(){return t.CHM(e),t.oxw(2).expiredQrcodeAction()}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("content",e.contentCreateQrcode)("width",350)("height",350)("expired",e.durationQrcodeExpire)}}function an(o,s){if(1&o&&(t.TgZ(0,"div",43),t.YNc(1,rn,7,0,"div",44),t.YNc(2,sn,2,4,"azt-create-qr-image",45),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!1===e.isLogin&&!e.contentCreateQrcode),t.xp6(1),t.Q6J("ngIf",e.contentCreateQrcode)}}function cn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",50),t.NdJ("click",function(){return t.CHM(e),t.oxw().downloadQrCode()}),t.TgZ(1,"mat-icon"),t._uU(2,"download"),t.qZA(),t._uU(3," T\u1ea3i xu\u1ed1ng m\xe3"),t.qZA()}}function un(o,s){1&o&&(t.TgZ(0,"div",16)(1,"span"),t._uU(2,"- HO\u1eb6C B\u1ea0N C\xd3 TH\u1ec2 -"),t.qZA()())}function dn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"a",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().switchModeView()}),t.TgZ(2,"span",52)(3,"mat-icon",53),t._uU(4,"center_focus_strong"),t.qZA(),t._uU(5," Qu\xe9t m\xe3 QR c\xf3 s\u1eb5n"),t.qZA()()()}}function ln(o,s){if(1&o&&(t.TgZ(0,"div",37),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.textResultErr)}}function gn(o,s){if(1&o&&(t.TgZ(0,"div",38),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.textResultSuss)}}function hn(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",28),t._uU(2,"\xa0"),t.qZA())}function mn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confContentLogin()}),t.YNc(2,hn,3,0,"span",32),t._uU(3," \u0110\u0103ng nh\u1eadp "),t.qZA(),t.TgZ(4,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).reopenScanCamInit()}),t._uU(5,"Th\u1eed l\u1ea1i"),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.isLoadingBtn||e.textResultErr),t.xp6(1),t.Q6J("ngIf",e.isLoadingBtn),t.xp6(2),t.Q6J("disabled",e.isLoadingBtn)}}function pn(o,s){if(1&o&&(t.TgZ(0,"div",29)(1,"div",30)(2,"div",31),t._uU(3,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),t._UZ(4,"br"),t._uU(5,"v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n"),t.qZA(),t.YNc(6,ln,2,1,"div",33),t.YNc(7,gn,2,1,"div",34),t.YNc(8,mn,6,3,"div",35),t.qZA()()),2&o){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.textResultErr),t.xp6(1),t.Q6J("ngIf",e.textResultSuss),t.xp6(1),t.Q6J("ngIf",!e.textResultSuss)}}function _n(o,s){1&o&&(t.TgZ(0,"div"),t._UZ(1,"span",28),t._uU(2,"\xa0 "),t.TgZ(3,"span",36),t._uU(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),t.qZA()())}function fn(o,s){if(1&o&&t._UZ(0,"div",56),2&o){const e=t.oxw(2);t.Q6J("innerHTML",e.textResultErr,t.oJD)}}function vn(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",28),t._uU(2,"\xa0"),t.qZA())}function An(o,s){if(1&o&&(t.TgZ(0,"button",57),t.YNc(1,vn,3,0,"span",32),t._uU(2),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("disabled",!e.textResultSuss),t.xp6(1),t.Q6J("ngIf",e.isLoadingBtn),t.xp6(1),t.hij(" ",e.textResultSuss," ")}}function Cn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),t._uU(4,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),t._UZ(5,"br"),t._uU(6),t.qZA()(),t.YNc(7,_n,5,0,"div",32),t.YNc(8,fn,1,1,"div",54),t.TgZ(9,"div",39),t.YNc(10,An,3,3,"button",55),t.TgZ(11,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().reopenScanCamInit()}),t._uU(12,"Th\u1eed l\u1ea1i"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(6),t.hij("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",e.nameSessionConfirm,""),t.xp6(1),t.Q6J("ngIf",e.isLoadingBtn),t.xp6(1),t.Q6J("ngIf",e.textResultErr),t.xp6(2),t.Q6J("ngIf",!e.textResultSuss&&e.isLoadingBtn),t.xp6(1),t.Q6J("disabled",e.isLoadingBtn)}}const ct=function(o){return[o]},En=function(o){return{return_url:o,user_click:"true"}},tt=function(o){return{"d-none":o}},xn=function(o){return{return_url:o}};let bn=(()=>{class o extends l.Q{constructor(e,n,i,r,a,u){super(e),this.commonService=e,this.baseApiService=n,this.localStorageObjetct=i,this.activeRoute=r,this.qrCodeLoginService=a,this.redirectService=u,this.returnUrl="",this.isLogin=!1,this.modeShowInit="create",this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.pendingDuration=!1,this.role=0,this.backLink=""}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}reloadLogin(){this.isLogin&&this.redirectService.redirectToDashboard()}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-login")}switchModeView(){this.modeShowInit="create"===this.modeShowInit?"scan":"create",this.elementaztScanQrcode&&("scan"===this.modeShowInit?(this.elementaztScanQrcode.initScanCam(),this.clearLoopRefLogin(),this.clearLoopPendingLogin()):(this.elementaztScanQrcode.unInitSscanCam(),this.initLoopRefLogin(),this.initPendingLoadingConfirm()))}clearLoopPendingLogin(){this.loopPendingLogin&&clearInterval(this.loopPendingLogin)}clearLoopRefLogin(){this.loopRefCheckQrcodeLogin&&clearInterval(this.loopRefCheckQrcodeLogin)}reopenScanCamInit(){this.textResultErr="",this.textResultSuss="",this.elementaztScanQrcode&&(this.elementaztScanQrcode.initScanCam(),this.sussScanNextConf=!1)}backScanActionWithIsLogin(){this.isLogin&&(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.createQrCodeWithUser())}expiredQrcodeAction(){this.pendingDuration||(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.isLogin?(this.createQrCodeWithUser(),this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, \u0111\xe3 t\u1ea1o m\xe3 qrcode m\u1edbi. Vui l\xf2ng thao t\xe1c l\u1ea1i.")):this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, vui l\xf2ng t\u1ea1o m\u1edbi v\xe0 thao t\xe1c l\u1ea1i."))}createQrCodeWithUser(){this.initStatusObj(),this.subscriptions.add(this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeGet().subscribe(e=>{var n,i,r,a;1==e.success?(this.successStatusObj(),this.contentCreateQrcode=null!==(i=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.qrCode)&&void 0!==i?i:"",this.durationQrcodeExpire=null!==(a=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.duration)&&void 0!==a?a:0,this.initPendingLoadingConfirm()):this.errorStatusObj("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u",!0)}))}outContentScan(e){var n;null!==e?(this.scanQrContent=e,this.sussScanNextConf=!0,this.isLogin||(null===(n=this.elementaztScanQrcode)||void 0===n||n.pauseScanQrcode(),this.isLoadingBtn=!0,this.textResultSuss="",this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeRequestPost({qrCode:this.scanQrContent}).subscribe(r=>{var a,u,h,_;this.isLoadingBtn=!1,console.log(r),1==r.success?(this.isLoadingBtn=!0,this.scanQrContentConfirm=null!==(u=null===(a=null==r?void 0:r.data)||void 0===a?void 0:a.qrCode)&&void 0!==u?u:"",this.nameSessionConfirm=null!==(_=null===(h=null==r?void 0:r.data)||void 0===h?void 0:h.name)&&void 0!==_?_:"",this.textResultSuss="",this.initLoopPendingLogin()):(this.textResultSuss="",this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.")}))):(this.sussScanNextConf=!0,this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng \u0111\xfang. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",""))}initLoopPendingLogin(){this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginCheckLoginQrCodeRequestConfirmedPost({qrCode:this.scanQrContentConfirm}).subscribe(n=>{var i,r;1==n.success&&(1==(null===(i=n.data)||void 0===i?void 0:i.status)?(this.clearLoopPendingLogin(),this.commonService.gaEvent("sign_in_login_in"),this.isLoadingBtn=!1,this.textResultSuss="",this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng.",!0),this.baseApiService.redirectLoginByRole(null!==(r=this.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:"")):n.data&&2===n.data.status&&(this.clearLoopPendingLogin(),this.isLoadingBtn=!1,this.errorStatusObj("X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",!0),this.textResultErr="X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i.<br/> M\xe3 Qr kh\xf4ng c\xf2n ho\u1ea1t \u0111\u1ed9ng.<br/> Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi \u0111\u1ec3 \u0111\u0103ng nh\u1eadp l\u1ea1i.",this.textResultSuss=""))})},3e3)}initPendingLoadingConfirm(){this.isLogin&&(this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginGetFirstQrCodeLoginRequestGet().subscribe(e=>{var n,i,r,a;1==e.success&&e.data&&""!==e.data.qrCode&&(this.pendingDuration=!0,this.scanQrContentConfirm=null!==(i=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.qrCode)&&void 0!==i?i:"",this.nameSessionConfirm=null!==(a=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.name)&&void 0!==a?a:"",this.clearLoopPendingLogin())})},3e3))}confContentPendingLogin(e){this.isLogin&&(this.isLoadingBtn=!0,this.qrCodeLoginService.apiQrCodeLoginConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContentConfirm,status:e}).subscribe(i=>{1==i.success?this.textResultSuss=1==e?"X\xe1c nh\u1eadn th\xe0nh c\xf4ng":"T\u1eeb ch\u1ed1i th\xe0nh c\xf4ng":this.textResultErr="H\u1ec7 th\u1ed1ng kh\xf4ng ph\u1ea3n h\u1ed3i. Vui l\xf2ng t\u1ea3i l\u1ea1i trang \u0111\u1ec3 th\u1eed l\u1ea1i.",this.isConfirmBtn=!0,this.isLoadingBtn=!1}))}createRequestLoginHashCodeAction(){this.isLogin||this.qrCodeLoginService.apiQrCodeLoginAnonymousCreateLoginQrCodePost().subscribe(e=>{var n,i,r,a,u,h;1==e.success&&(this.contentCreateQrcode=null!==(i=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.qrCode)&&void 0!==i?i:"",this.nameSessionConfirm=null!==(a=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.name)&&void 0!==a?a:"",this.durationQrcodeExpire=null!==(h=null===(u=null==e?void 0:e.data)||void 0===u?void 0:u.duration)&&void 0!==h?h:0,this.initLoopRefLogin())})}initLoopRefLogin(){0==this.isLogin&&(this.loopRefCheckQrcodeLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginAnonymousCheckLoginQrCodeRequestConfimedPost({qrCode:this.contentCreateQrcode,status:0}).subscribe(n=>{var i,r;1===n.success&&404!=(null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.status)&&(this.commonService.gaEvent("sign_in_login_in"),this.commonService.snackSuccess("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng."),this.baseApiService.redirectLoginByRole(null!==(r=this.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:""))})},3e3))}confContentLogin(){this.isLoadingBtn=!0,this.isLogin&&this.qrCodeLoginService.apiQrCodeLoginAnonymousConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContent,status:1}).subscribe(n=>{this.isLoadingBtn=!1,1===n.success?this.textResultSuss="X\xe1c nh\u1eadn th\xe0nh c\xf4ng. Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c ph\xea duy\u1ec7t":this.textResultErr="Thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp ho\u1eb7c m\xe3 \u0111\u0103ng nh\u1eadp kh\xf4ng h\u1ee3p l\u1ec7. Vui l\xf2ng ki\u1ec3m tra v\xe0 thao t\xe1c l\u1ea1i"})}ngOnInit(){var e,n=null!==(e=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==e?e:"0";switch(this.role=parseInt(n,10),this.role){case 0:this.backLink="/admin/testbank/dashboard";break;case 1:this.backLink="/student/dashboard/0";break;case 2:this.backLink="/auth/login"}this.isLogin=this.baseApiService.isLogin(),this.isLogin&&this.createQrCodeWithUser(),this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.clearLoopRefLogin(),this.clearLoopPendingLogin(),super.ngDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.v),t.Y36(O._),t.Y36(X.L),t.Y36(E.gz),t.Y36(Ne.A),t.Y36(j.V))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Re,5),t.Gf(Je,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.elementCreateQr=i.first),t.iGM(i=t.CRH())&&(n.elementaztScanQrcode=i.first)}},features:[t.qOj],decls:39,vars:37,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6","mb-5"],["class","text-center",4,"ngIf"],[1,"card"],[1,"text-center","loginscan__card-header"],[1,"back-btn",2,"font-size","16px","color","#6d6d6d",3,"routerLink","queryParams"],[2,"font-size","16px","color","#6d6d6d","font-weight","500"],[1,"loginscan__card-body"],[1,"loginscan_createmode",3,"ngClass"],["class","text-center mb-3",4,"ngIf"],["class","text-center mb-3 block-inline-center",4,"ngIf"],["class","loginscan_scanmode_conf",4,"ngIf"],["class","loginscan__card-img",4,"ngIf"],[1,"text-center","mt-3"],["class","link-center",3,"click",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[1,"loginscan_scanmode",3,"ngClass"],[1,"text-center","mb-3"],[3,"routerLink","queryParams"],[1,"loginscan_scanmode_cam",3,"ngClass"],[3,"outContentScan"],["aztScanQrcode",""],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],[1,"text-center","mb-3","block-inline-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"loginscan_scanmode_conf"],[1,"loginscan_scanmode_conf--box"],[1,"boxtext"],[4,"ngIf"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336",4,"ngIf"],["class","boxtext-suss","style","font-size: 20px; margin-bottom: 20px; color: #009688",4,"ngIf"],["class","mt-3",4,"ngIf"],[2,"font-size","18px"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336"],[1,"boxtext-suss",2,"font-size","20px","margin-bottom","20px","color","#009688"],[1,"mt-3"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled","click"],["type","button",1,"btn","btn-warning",3,"disabled","click"],["type","button",1,"btn","btn-primary","mr-3",3,"click"],[1,"loginscan__card-img"],["class","box-create-login-img",3,"click",4,"ngIf"],[3,"content","width","height","expired","expiredAction",4,"ngIf"],[1,"box-create-login-img",3,"click"],[1,"box-create-login-content"],[3,"content","width","height","expired","expiredAction"],["elementCreateQr",""],[1,"link-center",3,"click"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"link-center"],[1,"mr-1"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336; line-height: 30px",3,"innerHTML",4,"ngIf"],["type","button","class","btn btn-primary mr-3",3,"disabled",4,"ngIf"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336","line-height","30px",3,"innerHTML"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4),t.YNc(5,Ye,3,3,"h2",5),t.TgZ(6,"div",6)(7,"div",7)(8,"a",8),t.ALo(9,"localize"),t.TgZ(10,"mat-icon"),t._uU(11,"arrow_back"),t.qZA()(),t.TgZ(12,"span",9),t._uU(13,"\u0110\u0103ng nh\u1eadp v\u1edbi m\xe3 qr code"),t.qZA()(),t.TgZ(14,"div",10)(15,"div",11),t.YNc(16,je,2,0,"div",12),t.YNc(17,ze,2,0,"div",12),t.YNc(18,He,3,1,"div",13),t.YNc(19,Ve,3,0,"div",13),t.YNc(20,on,9,6,"div",14),t.YNc(21,an,3,2,"div",15),t.TgZ(22,"div",16),t.YNc(23,cn,4,0,"a",17),t.qZA(),t.YNc(24,un,3,0,"div",18),t.YNc(25,dn,6,0,"div",18),t.qZA(),t.TgZ(26,"div",19)(27,"div",20),t._uU(28,"Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode \u0111\u0103ng nh\u1eadp ( "),t.TgZ(29,"a",21),t.ALo(30,"localize"),t._uU(31,"H\u01b0\u1edbng d\u1eabn"),t.qZA(),t._uU(32," )"),t.qZA(),t.TgZ(33,"div",22)(34,"azt-scan-qrcode",23,24),t.NdJ("outContentScan",function(r){return n.outContentScan(r)}),t.qZA()(),t.YNc(36,pn,9,3,"div",14),t.YNc(37,Cn,13,5,"div",14),t.qZA()()()(),t._UZ(38,"div",3),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",!n.isLogin),t.xp6(3),t.Q6J("routerLink",t.VKq(23,ct,t.lcZ(9,19,n.backLink)))("queryParams",t.VKq(25,En,n.returnUrl)),t.xp6(7),t.Q6J("ngClass",t.VKq(27,tt,"create"!==n.modeShowInit)),t.xp6(1),t.Q6J("ngIf",!n.isLogin),t.xp6(1),t.Q6J("ngIf",n.isLogin),t.xp6(1),t.Q6J("ngIf",!n.isLogin&&n.contentCreateQrcode),t.xp6(1),t.Q6J("ngIf",n.isLogin&&n.contentCreateQrcode&&!n.scanQrContentConfirm),t.xp6(1),t.Q6J("ngIf",n.scanQrContentConfirm&&n.isLogin),t.xp6(1),t.Q6J("ngIf",!n.scanQrContentConfirm),t.xp6(2),t.Q6J("ngIf",n.contentCreateQrcode&&!n.scanQrContentConfirm),t.xp6(1),t.Q6J("ngIf",!n.scanQrContentConfirm),t.xp6(1),t.Q6J("ngIf",!n.scanQrContentConfirm),t.xp6(1),t.Q6J("ngClass",t.VKq(29,tt,"scan"!==n.modeShowInit)),t.xp6(3),t.Q6J("routerLink",t.VKq(31,ct,t.lcZ(30,21,"/auth/register")))("queryParams",t.VKq(33,xn,n.returnUrl)),t.xp6(4),t.Q6J("ngClass",t.VKq(35,tt,!1!==n.sussScanNextConf)),t.xp6(3),t.Q6J("ngIf",!0===n.sussScanNextConf&&n.isLogin),t.xp6(1),t.Q6J("ngIf",!0===n.sussScanNextConf&&!n.isLogin))},directives:[p.O5,E.yS,T.Hw,p.mk,at,st],pipes:[C.BI,Q.lO],styles:[".loginscan__card-header[_ngcontent-%COMP%]{padding:15px;text-transform:uppercase;display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-body[_ngcontent-%COMP%]{padding:15px}.loginscan__card-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.loginscan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.loginscan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:#2462ae6e;color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.box-create-login-img[_ngcontent-%COMP%]{display:flex;height:100px;background:#f5f5f5;justify-content:center;align-items:center;border:1px solid #e0e0e0;padding:10px;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.box-create-login-img[_ngcontent-%COMP%]:hover{background:#eceff1}.box-create-login-content[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf[_ngcontent-%COMP%]{width:100%;background:#e0f2f1;padding:10px;display:flex;align-items:center;justify-content:center;height:300px}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]   .boxtext[_ngcontent-%COMP%]{font-size:20px;line-height:30px;margin-bottom:20px}.block-inline-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.back-btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:14px}.back-btn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),o})();var ut=g(73396);function yn(o,s){1&o&&(t.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function wn(o,s){1&o&&(t.TgZ(0,"div",37)(1,"div"),t._uU(2,"Vui l\xf2ng nh\u1eadp \u0111\xfang S\u0110T."),t.qZA()())}function Zn(o,s){1&o&&(t.TgZ(0,"div",37)(1,"div"),t._uU(2,"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u."),t.qZA()())}function Sn(o,s){if(1&o&&(t.TgZ(0,"div",20)(1,"label",38),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij("*** ",t.lcZ(3,1,e.statusObj.errorMessage),"")}}function Tn(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",39),t._uU(2,"\xa0"),t.qZA())}const dt=function(o){return[o]},kn=function(o){return{return_url:o,user_click:"true"}};function Qn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",16)(2,"a",17),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).loginZalo()}),t._UZ(3,"img",18),t.ALo(4,"convertCdn"),t.TgZ(5,"span"),t._uU(6,"\u0110\u0103ng nh\u1eadp b\u1eb1ng Zalo"),t.qZA()(),t._UZ(7,"br")(8,"br"),t.TgZ(9,"div",6)(10,"span",19),t._uU(11,"- HO\u1eb6C -"),t.qZA()(),t._UZ(12,"br"),t.qZA(),t.TgZ(13,"div",20)(14,"div",21)(15,"div",22),t._UZ(16,"input",23),t.TgZ(17,"div",24)(18,"span",25)(19,"mat-icon"),t._uU(20,"phone_enabled"),t.qZA()()()(),t.YNc(21,wn,3,0,"div",26),t.qZA()(),t.TgZ(22,"div",20)(23,"div",21)(24,"div",22),t._UZ(25,"input",27),t.TgZ(26,"div",24)(27,"span",25)(28,"mat-icon"),t._uU(29,"lock"),t.qZA()()()(),t.YNc(30,Zn,3,0,"div",26),t.qZA()(),t.YNc(31,Sn,4,3,"div",28),t.TgZ(32,"div",20)(33,"div",29)(34,"div",16)(35,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).login()}),t.YNc(36,Tn,3,0,"span",12),t._uU(37,"\u0110\u0103ng nh\u1eadp "),t.qZA(),t.TgZ(38,"a",31),t.ALo(39,"mylocalize"),t.TgZ(40,"mat-icon",32),t._uU(41,"center_focus_strong"),t.qZA(),t.TgZ(42,"span"),t._uU(43,"\u0110\u0103ng nh\u1eadp b\u1eb1ng m\xe3 Qrcode"),t.qZA()()()()(),t.TgZ(44,"div",33)(45,"a",34),t.ALo(46,"localize"),t._uU(47,"\u0110\u0103ng k\xfd th\xe0nh vi\xean m\u1edbi"),t.qZA()(),t.TgZ(48,"div",35)(49,"a",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).forgotPassword()}),t._uU(50,"Qu\xean m\u1eadt kh\u1ea9u?"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("src",t.lcZ(4,9,"azota_assets/images/zaloicon.png"),t.LSH),t.xp6(18),t.Q6J("ngIf",e.form.controls.phone.invalid&&(e.form.controls.phone.dirty||e.form.controls.phone.touched)),t.xp6(9),t.Q6J("ngIf",e.form.controls.password.invalid&&(e.form.controls.password.dirty||e.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",e.statusObj.errorMessage),t.xp6(4),t.Q6J("disabled",e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading),t.xp6(2),t.Q6J("routerLink",t.VKq(15,dt,t.lcZ(39,11,"/auth/login-scan/2"))),t.xp6(7),t.Q6J("routerLink",t.VKq(17,dt,t.lcZ(46,13,"/auth/register")))("queryParams",t.VKq(19,kn,e.returnUrl))}}function On(o,s){if(1&o&&(t.TgZ(0,"div",1)(1,"form",2)(2,"div",3),t._UZ(3,"div",4),t.TgZ(4,"div",5)(5,"h2",6),t._UZ(6,"img",7),t.ALo(7,"convertCdn"),t.qZA(),t.TgZ(8,"div",8)(9,"div",9)(10,"span",10),t._uU(11,"\u0110\u0103ng nh\u1eadp"),t.qZA()(),t.TgZ(12,"div",11),t.YNc(13,yn,6,3,"div",12),t.YNc(14,Qn,51,21,"div",12),t.qZA()()(),t._UZ(15,"div",4),t.qZA()()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(5),t.Q6J("src",t.lcZ(7,4,"azota_assets/images/logo.svg"),t.LSH),t.xp6(7),t.Q6J("ngIf",e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",!e.statusObj.loading)}}let Dn=(()=>{class o extends l.Q{constructor(e,n,i,r,a,u){super(n),this.formBuilder=e,this.commonService=n,this.baseApiService=i,this.localStorageObjetct=r,this.authService=a,this.recaptchaV3Service=u,this.form=new c.cw({}),this.zaloAccessTkn="",this.mAccessTkn="",this.returnUrl="",this.zaloLoginUrl="",this.loginByToken=!0,this.initStatusObj()}executeImportantAction(){return new Promise(e=>{this.recaptchaV3Service.execute("importantAction").subscribe(n=>{e(n)})})}getError(e){return!(!this.form.controls[e]||!this.form.controls[e].errors)&&this.form.controls[e].errors}loginZalo(){this.commonService.gaEvent("sign_in_click_sign_in_by_zalo"),window.location.href=this.zaloLoginUrl}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}login(){this.form.valid&&(this.initStatusObj(),this.commonService.gaEvent("sign_in_login_in"),this.executeImportantAction().then(e=>{var n=this.commonService.getFormObj(this.form);this.subscriptions.add(this.authService.apiAuthLoginWebPost({phone:n.phone,password:n.password,tokenCaptcha:e}).subscribe(r=>{var a,u;1==r.success?(this.localStorageObjetct.clearAllCache(),this.baseApiService.redirectLoginByRole(null!==(a=this.commonService.getMyQueryParam("return_url"))&&void 0!==a?a:""),this.successStatusObj()):this.errorStatusObj(null!==(u=r.message)&&void 0!==u?u:"")}))}))}loginAnonymous(){this.initStatusObj(),this.commonService.gaEvent("sign_in_login_anonymous"),this.executeImportantAction().then(e=>{this.subscriptions.add(this.authService.apiAuthLoginAnonymousFromWebV2Post({tokenCaptcha:e}).subscribe(i=>{var r,a;1==i.success?(this.baseApiService.redirectLoginByRole(null!==(r=this.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:""),this.successStatusObj()):this.errorStatusObj(null!==(a=i.message)&&void 0!==a?a:"")}))})}loginWithZaloAccessToken(e){var n,i=this.parseJwt(e);if(i){var r=this.baseApiService.getUserObj();r.id=i.hasOwnProperty("id")?i.id:r.id,r.avatar=i.hasOwnProperty("avatar")?i.avatar:r.avatar,r.email=i.hasOwnProperty("email")?i.email:r.email,r.fullName=i.hasOwnProperty("full_name")?i.full_name:r.fullName,r.password=i.hasOwnProperty("password")?i.password:r.password,r.phone=i.hasOwnProperty("phone")?i.phone:r.phone,r.roles=i.hasOwnProperty("roles")?i.roles:r.roles,r.zaloId=i.hasOwnProperty("zalo_id")?i.zalo_id:r.zaloId,r.birthday=i.hasOwnProperty("birthday")?i.birthday:r.birthday,r.gender=i.hasOwnProperty("gender")?i.gender:r.gender,r.amount=i.hasOwnProperty("amount")?i.amount:r.amount,r.rememberToken=e,this.baseApiService.saveUserObj(r),this.baseApiService.redirectLoginByRole(null!==(n=this.commonService.getMyQueryParam("return_url"))&&void 0!==n?n:"")}else this.errorStatusObj("lang_core_invalid_login_token"),this.loginByToken=!1}parseJwt(e){var i=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(i).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return this.commonService.parseJson(r)}ngOnInit(){var e,n,i,r;if(this.zaloAccessTkn=null!==(e=this.commonService.getMyQueryParam("zaccess_token"))&&void 0!==e?e:"",this.mAccessTkn=null!==(n=this.commonService.getMyQueryParam("access_token"))&&void 0!==n?n:"",!this.commonService.getMyQueryParam("not_register")&&this.zaloAccessTkn)this.loginByToken=!0,this.loginWithZaloAccessToken(this.zaloAccessTkn);else if(!this.commonService.getMyQueryParam("not_register")&&this.mAccessTkn)this.loginByToken=!0,this.loginWithZaloAccessToken(this.mAccessTkn);else{this.loginByToken=!1,this.initStatusObj();var a=!1;this.form=this.formBuilder.group({phone:["",[c.kI.required,x._.noWhiteSpace]],password:["",c.kI.required]}),this.commonService.getMyQueryParam("not_register")?this.commonService.myNavigation("/auth/register"):this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole()?this.baseApiService.redirectLoginByRole(null!==(i=this.commonService.getMyQueryParam("return_url"))&&void 0!==i?i:""):(this.returnUrl=this.commonService.getMyQueryParam("return_url")||"",-1===this.returnUrl.indexOf("/test/")&&-1===this.returnUrl.indexOf("/de-thi/")&&-1===this.returnUrl.indexOf("/bai-tap/")||"register"==this.commonService.getMyQueryParam("from")?(this.zaloLoginUrl=z.N.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_login=1"),a=!0):this.baseApiService.isLogin()?this.baseApiService.redirectLoginByRole(null!==(r=this.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:""):this.loginAnonymous()),a&&(!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()?this.myNavigation("/student/dashboard/0"):(this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),this.stopStatusObj(),super.ngOnInit()))}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(b.v),t.Y36(O._),t.Y36(X.L),t.Y36(S.e8),t.Y36(ut.YC))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],features:[t.qOj],decls:1,vars:1,consts:[["class","container-fluid component-wrap centerBoth hasBg",4,"ngIf"],[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"col-md-12"],[1,"btn","btn-outline-primary","mt-2",2,"width","100%",3,"click"],["alt","Zalo Icon",1,"img-responsive","zalo-icon",3,"src"],[1,"h6","mute-text"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","tel","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon2",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password",1,"form-control"],["class","form-group",4,"ngIf"],[2,"display","flex"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],[1,"btn","btn-outline-primary","mt-3",2,"width","100%","display","flex","align-items","center","justify-content","center",3,"routerLink"],[2,"margin-right","10px"],[1,"text-center","mt-3"],[3,"routerLink","queryParams"],[1,"text-center","mt-1"],[2,"color","rgb(216, 2, 2)",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,n){1&e&&t.YNc(0,On,16,6,"div",0),2&e&&t.Q6J("ngIf",!n.loginByToken)},directives:[p.O5,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,T.Hw,D.lW,E.yS],pipes:[C.BI,C.bT,C.mp,Q.lO],styles:[".checkboxInput[_ngcontent-%COMP%]{padding:5px 15px;font-size:1rem;font-weight:400;line-height:2}.zalo-icon[_ngcontent-%COMP%]{height:30px;margin-right:10px}"]}),o})(),Pn=(()=>{class o extends l.Q{constructor(e,n,i){super(e),this.commonService=e,this.baseApiService=n,this.redirectService=i}ngOnInit(){this.baseApiService.logout();var e=this.commonService.getMyQueryParam("return_url")||null;e?this.redirectService.redirectSimpleLoginWithReturnUrl(e):this.redirectService.redirectSimpleLogin(),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.v),t.Y36(O._),t.Y36(j.V))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-register"]],features:[t.qOj],decls:0,vars:0,template:function(e,n){},encapsulation:2}),o})();var qn=g(6517);function Mn(o,s){1&o&&(t.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function In(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeRegisterType(1)}),t.TgZ(2,"div",18),t._UZ(3,"i",19),t.TgZ(4,"p"),t._uU(5,"T\xf4i l\xe0 h\u1ecdc sinh"),t.qZA()()(),t.TgZ(6,"div",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeRegisterType(2)}),t.TgZ(7,"div",18),t._UZ(8,"img",20),t.ALo(9,"convertCdn"),t.TgZ(10,"p"),t._uU(11,"T\xf4i l\xe0 gi\xe1o vi\xean"),t.qZA()()()()}2&o&&(t.xp6(8),t.Q6J("src",t.lcZ(9,1,"azota_assets/images/teacher.png"),t.LSH))}function Ln(o,s){1&o&&(t.TgZ(0,"div",53)(1,"div"),t._uU(2,"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean."),t.qZA()())}function Un(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"Y\xeau c\u1ea7u nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"),t.qZA())}function Fn(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1!"),t.qZA())}function Bn(o,s){if(1&o&&(t.TgZ(0,"div",53),t.YNc(1,Un,2,0,"div",10),t.YNc(2,Fn,2,0,"div",10),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.getErrorType("phone","required")),t.xp6(1),t.Q6J("ngIf",e.getErrorType("phone","pattern")||e.getErrorType("phone","minlength")||e.getErrorType("phone","maxlength"))}}function Nn(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6!"),t.qZA())}function Rn(o,s){if(1&o&&(t.TgZ(0,"div",53),t.YNc(1,Nn,2,0,"div",10),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.getErrorType("password","required")||e.getErrorType("password","minlength"))}}function Jn(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"Email b\u1ea1n nh\u1eadp sai \u0111\u1ecbnh d\u1ea1ng!"),t.qZA())}function Yn(o,s){if(1&o&&(t.TgZ(0,"div",53),t.YNc(1,Jn,2,0,"div",10),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.getErrorType("email","email"))}}function jn(o,s){if(1&o&&(t.TgZ(0,"div",39)(1,"label",54),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij("*** ",t.lcZ(3,1,e.statusObj.errorMessage),"")}}function zn(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",55),t._uU(2,"\xa0"),t.qZA())}function Hn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",36)(1,"form",37)(2,"div",27)(3,"div",38)(4,"div",39)(5,"div",40)(6,"div",41),t._UZ(7,"input",42),t.TgZ(8,"div",43)(9,"span",44)(10,"mat-icon"),t._uU(11,"account_box"),t.qZA()()()(),t.YNc(12,Ln,3,0,"div",45),t.qZA()()()(),t.TgZ(13,"div",27)(14,"div",38)(15,"div",39)(16,"div",40)(17,"div",41),t._UZ(18,"input",46),t.TgZ(19,"div",43)(20,"span",47)(21,"mat-icon"),t._uU(22,"phone_enabled"),t.qZA()()()(),t.YNc(23,Bn,3,2,"div",45),t.qZA()()()(),t.TgZ(24,"div",27)(25,"div",38)(26,"div",39)(27,"div",40)(28,"div",41),t._UZ(29,"input",48),t.TgZ(30,"div",43)(31,"span",49)(32,"mat-icon"),t._uU(33,"lock"),t.qZA()()()(),t.YNc(34,Rn,2,1,"div",45),t.qZA()()()(),t.TgZ(35,"div",27)(36,"div",38)(37,"div",39)(38,"div",40)(39,"div",41),t._UZ(40,"input",50),t.TgZ(41,"div",43)(42,"span",47)(43,"mat-icon"),t._uU(44,"email"),t.qZA()()()(),t.YNc(45,Yn,2,1,"div",45),t.qZA()()()(),t.YNc(46,jn,4,3,"div",51),t.TgZ(47,"div",39)(48,"div",27)(49,"div",38)(50,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.form.invalid||i.statusObj.loading||i.registerForTeacher()}),t.YNc(51,zn,3,0,"span",10),t._uU(52,"\u0110\u0103ng k\xfd "),t.qZA()()()()()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(11),t.Q6J("ngIf",e.form.controls.fullName.invalid&&(e.form.controls.fullName.dirty||e.form.controls.fullName.touched)),t.xp6(11),t.Q6J("ngIf",e.form.controls.phone.invalid&&(e.form.controls.phone.dirty||e.form.controls.phone.touched)),t.xp6(11),t.Q6J("ngIf",e.form.controls.password.invalid&&(e.form.controls.password.dirty||e.form.controls.password.touched)),t.xp6(11),t.Q6J("ngIf",e.form.controls.email.invalid&&(e.form.controls.email.dirty||e.form.controls.email.touched)),t.xp6(1),t.Q6J("ngIf",e.statusObj.errorMessage),t.xp6(4),t.Q6J("disabled",e.form.invalid||e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading)}}function Vn(o,s){1&o&&(t.TgZ(0,"div",63),t._uU(1,"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean."),t.qZA())}function Wn(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"B\u1ea1n ph\u1ea3i nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i."),t.qZA())}function Gn(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i l\xe0 10 s\u1ed1."),t.qZA())}function Kn(o,s){if(1&o&&(t.TgZ(0,"div",63),t.YNc(1,Wn,2,0,"div",10),t.YNc(2,Gn,2,0,"div",10),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.getErrorForm("studentPhone","required")),t.xp6(1),t.Q6J("ngIf",e.getErrorForm("studentPhone","minlength")||e.getErrorForm("studentPhone","maxlength"))}}function $n(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"B\u1ea1n ph\u1ea3i nh\u1eadp m\u1eadt kh\u1ea9u."),t.qZA())}function Xn(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"M\u1eadt kh\u1ea9u bao g\u1ed3m 6 k\xfd t\u1ef1."),t.qZA())}function to(o,s){if(1&o&&(t.TgZ(0,"div",63),t.YNc(1,$n,2,0,"div",10),t.YNc(2,Xn,2,0,"div",10),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.getErrorForm("passWord","required")),t.xp6(1),t.Q6J("ngIf",e.getErrorForm("passWord","minlength"))}}function eo(o,s){if(1&o&&(t.TgZ(0,"div",39)(1,"label",54),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij("*** ",t.lcZ(3,1,e.statusObj.errorMessage),"")}}function no(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",55),t._uU(2,"\xa0"),t.qZA())}function oo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",56)(1,"form",57)(2,"div",39),t._UZ(3,"input",58),t.YNc(4,Vn,2,0,"div",59),t.qZA(),t.TgZ(5,"div",39),t._UZ(6,"input",60),t.YNc(7,Kn,3,2,"div",59),t.qZA(),t.TgZ(8,"div",39),t._UZ(9,"input",61),t.YNc(10,to,3,2,"div",59),t.qZA()(),t.YNc(11,eo,4,3,"div",51),t._UZ(12,"br"),t.TgZ(13,"button",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.formRegister.invalid||i.statusObj.loading||i.registerForStudent()}),t.YNc(14,no,3,0,"span",10),t._uU(15," Ho\xe0n Th\xe0nh \u0110\u0103ng K\xfd "),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.formRegister),t.xp6(3),t.Q6J("ngIf",e.formRegister.controls.studentFullName.invalid&&(e.formRegister.controls.studentFullName.dirty||e.formRegister.controls.studentFullName.touched)),t.xp6(3),t.Q6J("ngIf",e.formRegister.controls.studentPhone.invalid&&(e.formRegister.controls.studentPhone.dirty||e.formRegister.controls.studentPhone.touched)),t.xp6(3),t.Q6J("ngIf",e.formRegister.controls.passWord.invalid&&(e.formRegister.controls.passWord.dirty||e.formRegister.controls.passWord.touched)),t.xp6(1),t.Q6J("ngIf",e.statusObj.errorMessage),t.xp6(2),t.Q6J("disabled",e.formRegister.invalid||e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading)}}const io=function(o){return[o]},ro=function(o){return{return_url:o,from:"register",user_click:"true"}};function so(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"a",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeRegisterType(1)}),t._UZ(4,"i",25),t._uU(5,"\xa0 T\xf4i l\xe0 h\u1ecdc sinh"),t.qZA()(),t.TgZ(6,"div",23)(7,"a",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeRegisterType(2)}),t._UZ(8,"i",26),t._uU(9,"\xa0 T\xf4i l\xe0 gi\xe1o vi\xean"),t.qZA()()(),t.TgZ(10,"div",27)(11,"div",28),t._UZ(12,"hr"),t.qZA()(),t.YNc(13,Hn,53,8,"div",29),t.YNc(14,oo,16,7,"div",30),t.TgZ(15,"div",31),t._uU(16,'B\u1eb1ng c\xe1ch \u1ea5n v\xe0o n\xfat "\u0110\u0102NG K\xdd", t\xf4i \u0111\u1ed3ng \xfd v\u1edbi '),t.TgZ(17,"a",32),t._uU(18," \u0110i\u1ec1u Kho\u1ea3n S\u1eed D\u1ee5ng "),t.qZA(),t._uU(19," v\xe0 "),t.TgZ(20,"a",32),t._uU(21," Ch\xednh S\xe1ch B\u1ea3o M\u1eadt c\u1ee7a AZOTA."),t.qZA()(),t.TgZ(22,"div",33)(23,"p",34),t._uU(24,"B\u1ea1n \u0111\xe3 c\xf3 t\xe0i kho\u1ea3n?"),t.qZA(),t.TgZ(25,"p")(26,"a",35),t.ALo(27,"localize"),t._uU(28,"\u0110\u0103ng nh\u1eadp"),t.qZA()()()()}if(2&o){const e=t.oxw();t.Q6J("hidden",e.isShowOption),t.xp6(3),t.ekj("select-style-active",e.isStudent),t.xp6(4),t.ekj("select-style-active",e.isTeacher),t.xp6(6),t.Q6J("ngIf",1==e.isTeacher),t.xp6(1),t.Q6J("ngIf",1==e.isStudent),t.xp6(12),t.Q6J("routerLink",t.VKq(11,io,t.lcZ(27,9,"/auth/login")))("queryParams",t.VKq(13,ro,e.returnUrl))}}const ao={parse:{dateInput:"LL"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}};let lt=(()=>{class o extends l.Q{constructor(e,n,i,r,a,u,h){super(r),this.formBuilder=e,this.activeRoute=n,this.titleCasePipe=i,this.commonService=r,this.baseApiService=a,this.recaptchaV3Service=u,this.authService=h,this.form=new c.cw({}),this.formRegister=new c.cw({}),this.returnUrl="",this.zaloLoginUrl="",this.isHiddenFormRegister=!0,this.isTeacher=!1,this.isStudent=!1,this.yesterday=new Date,this.isShowOption=!0,this.isShowRegisterForStudent=!1,this.isShowRegisterForTeacher=!1,this.initStatusObj()}executeImportantAction(){return new Promise(e=>{this.recaptchaV3Service.execute("importantAction").subscribe(n=>{e(n)})})}getError(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}getErrorType(e,n){var i,r;return!!(null===(i=this.form.controls[e].errors)||void 0===i?void 0:i[n])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[n])}getErrorForm(e,n){var i,r;return!!(null===(i=this.formRegister.controls[e].errors)||void 0===i?void 0:i[n])&&(null===(r=this.formRegister.controls[e].errors)||void 0===r?void 0:r[n])}goToConfirm(){var e;this.returnUrl=null!==(e=this.commonService.getMyQueryParam("return_url"))&&void 0!==e?e:"";var n="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=confirm_phone_register";this.commonService.myNavigationWithQueryString("/auth/checking_service",n)}changeRegisterType(e){this.isShowOption=!1,1==e?(this.commonService.gaEvent("sign_up_switch_to_student"),this.isTeacher=!1,this.isStudent=!0):(this.commonService.gaEvent("sign_up_switch_to_teacher"),this.isTeacher=!0,this.isStudent=!1)}loginZalo(){this.commonService.gaEvent("sign_up_teacher_by_zalo"),window.location.href=this.zaloLoginUrl}registerForTeacher(){this.form.valid&&this.executeImportantAction().then(e=>{var n=this.commonService.getFormObj(this.form);this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRegisterPost({fullName:n.fullName,phone:n.phone,email:n.email,password:n.password,tokenCaptcha:e}).subscribe(r=>{var a,u;1==r.success?(this.commonService.gaEvent("sign_up_teacher"),this.successStatusObj(),this.baseApiService.redirectLoginByRoleForRegister(null!==(a=this.commonService.getMyQueryParam("return_url"))&&void 0!==a?a:"")):this.errorStatusObj(null!==(u=r.message)&&void 0!==u?u:"")}))})}registerForStudent(){this.executeImportantAction().then(e=>{this.commonService.gaEvent("sign_up_student");var n=this.commonService.getFormObj(this.formRegister);this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRegisterForStudentPost({phone:n.studentPhone,fullName:n.studentFullName,password:n.passWord,tokenCaptcha:e}).subscribe(r=>{var a,u;1==r.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole(null!==(a=this.commonService.getMyQueryParam("return_url"))&&void 0!==a?a:"")):this.errorStatusObj(null!==(u=r.message)&&void 0!==u?u:"")}))})}ngOnInit(){var e;if(this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole())this.baseApiService.redirectLoginByRole("");else{var n=this.commonService.getMyParam(this.activeRoute,"type");if(null!=n){var i=parseInt(null==n?void 0:n.toString(),10);this.changeRegisterType(0==i?0:1)}this.yesterday.setDate(this.yesterday.getDate()-1),this.form=this.formBuilder.group({fullName:["",[c.kI.required,x._.noWhiteSpace]],phone:["",[c.kI.required,c.kI.pattern("^[0-9]*$"),c.kI.minLength(10),c.kI.maxLength(10)]],password:["",[c.kI.required,c.kI.minLength(6)]],email:["",c.kI.email]}),this.formRegister=this.formBuilder.group({studentPhone:["",[c.kI.required,c.kI.pattern("^[0-9]*$"),c.kI.minLength(10),c.kI.maxLength(10)]],studentFullName:["",[c.kI.required,x._.noWhiteSpace]],passWord:["",[c.kI.required,c.kI.minLength(6)]]}),null===(e=this.form.get("fullName"))||void 0===e||e.valueChanges.subscribe(a=>{var u=this.titleCasePipe.transform(a);a!=u&&this.form.controls.fullName.setValue(u)}),this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getLocalRouter("/admin/testbank/dashboard"),this.zaloLoginUrl=z.N.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_register=1"),!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()&&this.myNavigation("/student/dashboard/0"),this.commonService.translateMetaData({title:"lang_cms_auth_register_title",description:"lang_cms_auth_register_description",image:"lang_cms_test_image"}),this.stopStatusObj()}super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(E.gz),t.Y36(p.rS),t.Y36(b.v),t.Y36(O._),t.Y36(ut.YC),t.Y36(S.e8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-register"]],features:[t._Bn([p.rS,{provide:w._A,useClass:qn.t7,deps:[w.Ad]},{provide:w.sG,useValue:ao}]),t.qOj],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"row","py-5"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],["class","row","style","justify-content: space-around",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"row",2,"justify-content","space-around"],[1,"col-sm-4","border-card","mb-3",3,"click"],[1,"df-logo"],[1,"fas","fa-graduation-cap","pb-3",2,"font-size","36px"],["width","36px","height","45px",1,"mb-3",3,"src"],[3,"hidden"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-6","text-center","mb-3"],[1,"clickable","select-style",3,"click"],[1,"fas","fa-graduation-cap"],[1,"fas","fa-user-alt"],[1,"row"],[1,"col-12"],["id","teacher",4,"ngIf"],["id","chilren",4,"ngIf"],[1,"mt-2",2,"text-align","justify","font-size","13px"],["href","/privacy/index.html","target","_blank"],[1,"text-center","mt-3"],[1,"text-normal"],[3,"routerLink","queryParams"],["id","teacher"],[1,"form-horizontal",3,"formGroup"],[1,"col-sm-12"],[1,"form-group"],[1,"col-sm-12","p-0"],[1,"input-group","mb-3"],["type","text","placeholder","H\u1ecd t\xean","formControlName","fullName","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["type","phone","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone","autocomplete","new-password",1,"form-control"],["id","basic-addon2",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password","autocomplete","new-password",1,"form-control"],["id","basic-addon3",1,"input-group-text"],["type","phone","placeholder","Email (kh\xf4ng b\u1eaft bu\u1ed9c nh\u1eadp)","formControlName","email","autocomplete","new-password",1,"form-control"],["class","form-group",4,"ngIf"],["mat-raised-button","","color","primary",2,"width","100%",3,"disabled","click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],["id","chilren"],["autocomplete","off",1,"form-horinzal",3,"formGroup"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","studentFullName","autocomplete","new-password",1,"form-control"],["class","alert alert-danger mt-3",4,"ngIf"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","studentPhone","autocomplete","new-password",1,"form-control"],["type","password","placeholder","M\u1eadt Kh\u1ea9u","formControlName","passWord","autocomplete","new-password",1,"form-control"],["mat-raised-button","",1,"button-color","text-uppercase",2,"width","100%",3,"disabled","click"],[1,"alert","alert-danger","mt-3"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),t._UZ(7,"img",7),t.ALo(8,"convertCdn"),t.qZA(),t.TgZ(9,"h3",8),t._uU(10,"N\u1ec1n t\u1ea3ng gi\xe1o d\u1ee5c s\u1ed1"),t.qZA()(),t.TgZ(11,"div",9),t.YNc(12,Mn,6,3,"div",10),t.YNc(13,In,12,3,"div",11),t.YNc(14,so,29,15,"div",12),t.qZA()()(),t._UZ(15,"div",2),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("src",t.lcZ(8,4,"azota_assets/images/logo.svg"),t.LSH),t.xp6(5),t.Q6J("ngIf",n.statusObj.loading),t.xp6(1),t.Q6J("ngIf",1==n.isShowOption),t.xp6(1),t.Q6J("ngIf",!n.statusObj.loading))},directives:[p.O5,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,T.Hw,D.lW,E.yS],pipes:[C.BI,C.bT,Q.lO],styles:['.zalo-icon[_ngcontent-%COMP%]{height:40px;margin-right:10px}.select-style[_ngcontent-%COMP%]{color:#868686!important}.select-style[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.select-style[_ngcontent-%COMP%]:hover, .select-style-active[_ngcontent-%COMP%]{color:#0eafc0!important}.df-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.register--login[_ngcontent-%COMP%]{width:88px;height:88px}.two-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%;height:100vh;margin:auto}.register-button[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center}.btn-max-width[_ngcontent-%COMP%]{width:100%;padding-top:1.25rem;padding-bottom:1.25rem;font-size:1.5rem}.responsive__text[_ngcontent-%COMP%]{width:90%;margin-left:auto;margin-right:auto}.btn-outline-primary[_ngcontent-%COMP%]{color:#0eafc0!important;border-color:#0eafc0!important}.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#0eafc0!important;background-color:#0eafc0!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b818e!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#0eafc0!important;border-color:#0eafc0!important;background-color:#0eacbe26}.btn-border-fix[_ngcontent-%COMP%]{border-radius:10px!important}.border-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(220,220,220,.8);border-radius:8px;cursor:pointer;padding:12px;align-items:center;text-align:center}.border-card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 20px #00000012,-10px -10px 20px #fffc}.button-color[_ngcontent-%COMP%]{background-color:#0eafc0!important;color:#fff!important}.text-line[_ngcontent-%COMP%]{position:relative;text-align:center}.text-line[_ngcontent-%COMP%]:before{content:"";display:block;width:45%;height:.5px;position:absolute;right:0;background-color:#868686;top:50%}.text-line[_ngcontent-%COMP%]:after{content:"";display:block;width:45%;height:.5px;position:absolute;left:0;background-color:#868686;top:50%}.border-select-box[_ngcontent-%COMP%]{border:1px solid #ccd0d5;border-radius:4px;padding:8px 16px}  .mat-radio-label{margin-bottom:0!important}  .mat-radio-label-content{padding-left:16px!important}  .mat-radio-button.mat-accent .mat-radio-inner-circle, .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#0eafc0!important}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#0eafc0!important}  .mat-input-element{font-size:18px!important;caret-color:#0eafc0!important}  .mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon, .mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-datepicker-toggle-default-icon[_ngcontent-%COMP%]{width:1.5em!important}button[_ngcontent-%COMP%]:disabled{background-color:#0000001f!important}@media only screen and (max-width: 424px){.btn-max-width[_ngcontent-%COMP%]{font-size:1rem}}@media only screen and (max-width: 364px){.text-line[_ngcontent-%COMP%]:after, .text-line[_ngcontent-%COMP%]:before{width:40%}}']}),o})();function co(o,s){1&o&&(t.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function uo(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),t.qZA())}function lo(o,s){if(1&o&&(t.TgZ(0,"div",28),t.YNc(1,uo,2,0,"div",11),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getErrorType("password","required")||e.getErrorType("password","minlength"))}}function go(o,s){if(1&o&&(t.TgZ(0,"div",15)(1,"label",29),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("*** ",t.lcZ(3,1,e.statusObj.errorMessage),"")}}function ho(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",30),t._uU(2,"\xa0"),t.qZA())}const mo=function(o){return[o]},po=function(){return{user_click:"true"}};function _o(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17),t._UZ(4,"input",18),t.TgZ(5,"div",19)(6,"span",20)(7,"mat-icon"),t._uU(8,"lock"),t.qZA()()()(),t.TgZ(9,"div",17),t._UZ(10,"input",21),t.TgZ(11,"div",19)(12,"span",20)(13,"mat-icon"),t._uU(14,"lock"),t.qZA()()()(),t.YNc(15,lo,2,1,"div",22),t.qZA()(),t.YNc(16,go,4,3,"div",23),t.TgZ(17,"div",15)(18,"div",16)(19,"div",24)(20,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.form.invalid||i.statusObj.loading||i.changePassword()}),t.YNc(21,ho,3,0,"span",11),t._uU(22,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),t.qZA()()()(),t._UZ(23,"hr"),t.TgZ(24,"div",26)(25,"a",27),t.ALo(26,"localize"),t._uU(27,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(15),t.Q6J("ngIf",e.form.controls.password.invalid&&(e.form.controls.password.dirty||e.form.controls.password.touched)),t.xp6(1),t.Q6J("ngIf",e.statusObj.errorMessage),t.xp6(4),t.Q6J("disabled",e.form.invalid||e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading),t.xp6(4),t.Q6J("routerLink",t.VKq(8,mo,t.lcZ(26,6,"/auth/login")))("queryParams",t.DdM(10,po))}}function vo(o,s){1&o&&(t.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function Ao(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",21),t._uU(2,"\xa0"),t.qZA())}function Co(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.statusObj.loading||i.becomeTeacher()}),t.YNc(4,Ao,3,0,"span",12),t._uU(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 tr\u1edf th\xe0nh gi\xe1o vi\xean "),t.qZA()()(),t.TgZ(6,"div",19)(7,"a",20),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).goBack()}),t._uU(8,"Quay l\u1ea1i trang ch\u1ee7"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("disabled",e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading)}}function Eo(o,s){if(1&o&&(t.TgZ(0,"div",5)(1,"h2",6),t._UZ(2,"img",7),t.ALo(3,"convertCdn"),t.qZA(),t.TgZ(4,"div",8)(5,"div",9)(6,"span",10),t._uU(7,"T\xf4i mu\u1ed1n th\xe0nh gi\xe1o vi\xean"),t.qZA()(),t.TgZ(8,"div",11),t.YNc(9,vo,6,3,"div",12),t.YNc(10,Co,9,2,"div",12),t.qZA()()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("src",t.lcZ(3,3,"azota_assets/images/logo.svg"),t.LSH),t.xp6(7),t.Q6J("ngIf",e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",!e.statusObj.loading)}}function xo(o,s){1&o&&(t.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function bo(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",21),t._uU(2,"\xa0"),t.qZA())}function yo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.statusObj.loading||i.becomeStudent()}),t.YNc(4,bo,3,0,"span",12),t._uU(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 b\u1ecf quy\u1ec1n gi\xe1o vi\xean "),t.qZA()()(),t.TgZ(6,"div",19)(7,"a",20),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).goBack()}),t._uU(8,"Quay l\u1ea1i trang ch\u1ee7"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("disabled",e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading)}}function wo(o,s){if(1&o&&(t.TgZ(0,"div",5)(1,"h2",6),t._UZ(2,"img",7),t.ALo(3,"convertCdn"),t.qZA(),t.TgZ(4,"div",8)(5,"div",9)(6,"span",10),t._uU(7,"T\xf4i mu\u1ed1n b\u1ecf quy\u1ec1n gi\xe1o vi\xean"),t.qZA()(),t.TgZ(8,"div",11),t.YNc(9,xo,6,3,"div",12),t.YNc(10,yo,9,2,"div",12),t.qZA()()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("src",t.lcZ(3,3,"azota_assets/images/logo.svg"),t.LSH),t.xp6(7),t.Q6J("ngIf",e.statusObj.loading),t.xp6(1),t.Q6J("ngIf",!e.statusObj.loading)}}const Zo=[{path:"",children:[{path:"",children:[{path:"login",component:Dn},{path:"login-scan/:role",component:bn},{path:"register",component:lt},{path:"register/:type",component:lt},{path:"logout",component:Pn},{path:"confirm_forgot_password",component:ee},{path:"forgot_password_susscess",component:Be},{path:"confirm_forgot_password_qr",component:Se},{path:"confirm_forgot_password_old",component:de},{path:"confirm_account",component:Ut},{path:"checking_service",component:Tt},{path:"set_new_password",component:(()=>{class o extends l.Q{constructor(e,n,i,r){super(n),this.formBuilder=e,this.commonService=n,this.baseApiService=i,this.authService=r,this.form=new c.cw({})}getError(e){return!!this.form.controls[e].errors&&this.form.controls[e].errors}getErrorType(e,n){var i,r;return!!(null===(i=this.form.controls[e].errors)||void 0===i?void 0:i[n])&&(null===(r=this.form.controls[e].errors)||void 0===r?void 0:r[n])}changePassword(){if(this.form.valid)if(this.form.value.password!=this.form.value.confirm_password)this.showErrorSnack("X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp");else{this.initStatusObj();var e=this.commonService.getFormObj(this.form),n=this.commonService.getMyQueryParam("token"),i=this.commonService.getMyQueryParam("app_name");this.subscriptions.add(this.authService.apiAuthChangePasswordByFirebasePost({firebaseToken:n,newPassword:e.password,appName:i}).subscribe(a=>{var u;1==a.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(u=a.message)&&void 0!==u?u:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[c.kI.required,c.kI.minLength(6)]],confirm_password:""}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(b.v),t.Y36(O._),t.Y36(S.e8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-forgot-password"]],features:[t.qOj],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","off",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u","formControlName","confirm_password","autocomplete","off",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"h2",5),t._UZ(6,"img",6),t.ALo(7,"convertCdn"),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"span",9),t._uU(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),t.qZA()(),t.TgZ(12,"div",10),t.YNc(13,co,6,3,"div",11),t.YNc(14,_o,28,11,"div",11),t.qZA()()(),t._UZ(15,"div",3),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("src",t.lcZ(7,4,"azota_assets/images/logo.svg"),t.LSH),t.xp6(7),t.Q6J("ngIf",n.statusObj.loading),t.xp6(1),t.Q6J("ngIf",!n.statusObj.loading))},directives:[c._Y,c.JL,c.sg,p.O5,c.Fj,c.JJ,c.u,T.Hw,D.lW,E.yS],pipes:[C.BI,C.bT,Q.lO],encapsulation:2}),o})()},{path:"change-info",component:St},{path:"switch-teacher-student",component:(()=>{class o extends l.Q{constructor(e,n,i){super(i),this.baseApiService=e,this.authService=n,this.commonService=i,this.isTeacher=!1,this.isStudent=!1}goBack(){this.baseApiService.redirectLoginByRole("")}becomeTeacher(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConvertToTeacherGet().subscribe(e=>{var n;1==e.success?this.baseApiService.redirectLoginByRole(""):this.errorStatusObj(null!==(n=e.message)&&void 0!==n?n:"",!0)}))}becomeStudent(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRemoveTeacherRoleGet().subscribe(e=>{var n;1==e.success?this.baseApiService.redirectLoginByRole(this.commonService.getLocalRouter("/student/dashboard/0")):this.errorStatusObj(null!==(n=e.message)&&void 0!==n?n:"",!0)}))}ngOnInit(){this.commonService.translateMetaData({title:"\u0110\u1ed5i Vai Tr\xf2",description:"\u0110\u1ed5i Vai Tr\xf2",image:"lang_cms_test_image"}),this.isTeacher=this.baseApiService.isTeacherRole(),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O._),t.Y36(S.e8),t.Y36(b.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-switch-teacher-student"]],features:[t.qOj],decls:7,vars:2,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.YNc(4,Eo,11,5,"div",4),t.YNc(5,wo,11,5,"div",4),t._UZ(6,"div",3),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",0==n.isTeacher),t.xp6(1),t.Q6J("ngIf",1==n.isTeacher))},directives:[p.O5,D.lW],pipes:[C.BI,C.bT],styles:[""]}),o})()},{path:"create-qr-forgot-pass/:role",component:Ue}]}]}];let So=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[E.Bz.forChild(Zo)],E.Bz,Q.fQ]}),o})(),To=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[E.Bz,p.ez,c.u5,G.Z_,K.j,c.UX,So,k.W,Y.Z]]}),o})()},60703:(gt,J,g)=>{g.d(J,{HF:()=>I,o8:()=>Y});var p=g(42856),c=g(5e3),E=g(15439);const k=g.n(E)()||E,Y=new c.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function K(){return{useUtc:!1}}});function Q(w,M){const d=Array(w);for(let l=0;l<w;l++)d[l]=M(l);return d}let I=(()=>{class w extends p.fM{constructor(d){super(),this._options=d,this._localeData={firstDayOfWeek:0,longMonths:"",shortMonths:"",dates:"",longDaysOfWeek:"",shortDaysOfWeek:"",narrowDaysOfWeek:""};let t="vi";-1===window.location.href.indexOf("en")&&(t="vi"),k.locale(),this.setLocale(t||k.locale())}setLocale(d){super.setLocale(d);const l=k.localeData(d);this._localeData={firstDayOfWeek:l.firstDayOfWeek(),longMonths:l.months(),shortMonths:l.monthsShort(),dates:Q(31,x=>this.createDate(2017,0,x+1).format("D")),longDaysOfWeek:l.weekdays(),shortDaysOfWeek:l.weekdaysShort(),narrowDaysOfWeek:l.weekdaysMin()}}getYear(d){return this.clone(d).year()}getMonth(d){return this.clone(d).month()}getDate(d){return this.clone(d).date()}getDayOfWeek(d){return this.clone(d).day()}getMonthNames(d){return"long"===d?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(d){return"long"===d?this._localeData.longDaysOfWeek:"short"===d?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(d){return this.clone(d).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(d){return this.clone(d).daysInMonth()}clone(d){return d.clone().locale(this.locale)}createDate(d,l,x){if(l<0||l>11)throw Error(`Invalid month index "${l}". Month index has to be between 0 and 11.`);if(x<1)throw Error(`Invalid date "${x}". Date has to be greater than 0.`);const t=this._createMoment({year:d,month:l,date:x}).locale(this.locale);if(!t.isValid())throw Error(`Invalid date "${x}" for month with index "${l}".`);return t}today(){return this._createMoment().locale(this.locale)}parse(d,l){return d&&"string"==typeof d?this._createMoment(d,l,this.locale):d?this._createMoment(d).locale(this.locale):null}format(d,l){if(d=this.clone(d),!this.isValid(d))throw Error("MomentDateAdapter: Cannot format invalid date.");return d.format(l)}addCalendarYears(d,l){return this.clone(d).add({years:l})}addCalendarMonths(d,l){return this.clone(d).add({months:l})}addCalendarDays(d,l){return this.clone(d).add({days:l})}toIso8601(d){return this.clone(d).format()}deserialize(d){let l;if(d instanceof Date)l=this._createMoment(d).locale(this.locale);else if(this.isDateInstance(d))return this.clone(d);if("string"==typeof d){if(!d)return null;l=this._createMoment(d,k.ISO_8601).locale(this.locale)}return l&&this.isValid(l)?this._createMoment(l).locale(this.locale):super.deserialize(d)}isDateInstance(d){return k.isMoment(d)}isValid(d){return this.clone(d).isValid()}invalid(){return k.invalid()}getHour(d){return d.hours()}getMinute(d){return d.minutes()}getSecond(d){return d.seconds()}setHour(d,l){d.hours(l)}setMinute(d,l){d.minutes(l)}setSecond(d,l){d.seconds(l)}_createMoment(d,l,x){const{strict:t,useUtc:b}=this._options||{};return b?k.utc(d,l,x,t):k(d,l,x,t)}}return w.\u0275fac=function(d){return new(d||w)(c.LFG(Y,8))},w.\u0275prov=c.Yz7({token:w,factory:w.\u0275fac}),w})()}}]);