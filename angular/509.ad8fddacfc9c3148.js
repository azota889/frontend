"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[509],{73852:(u,p,_)=>{_.d(p,{x:()=>D});var e=_(5e3),s=_(55330),v=_(51442),m=_(35018),l=_(22313),f=_(15043),a=_(41752),c=_(69808),h=_(25245),x=_(1737),w=_(1033);function C(t,r){1&t&&(e.TgZ(0,"div",2)(1,"div",3)(2,"span",4),e._uU(3,"Loading..."),e.qZA()()())}function M(t,r){if(1&t&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Oqu(i.fileOption.name)}}function O(t,r){if(1&t&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Oqu(i.fileNameCustom)}}function P(t,r){if(1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.HOy("",e.lcZ(2,4,"lang_auto_dung_luong"),": ",i.fileMb," ",e.lcZ(3,6,"lang_auto_mb_|_loai")," : ",i.fileOption.mimes,"")}}function T(t,r){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function y(t,r){if(1&t&&(e.TgZ(0,"a",22)(1,"mat-icon",16),e._uU(2,"save_alt"),e.qZA()()),2&t){const i=e.oxw(2);e.uIk("href",i.rootLink,e.LSH)("download",i.fileOption.name)}}function b(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"audio",29)(3,"source",30),e.NdJ("load",function(){e.CHM(i);const o=e.oxw(3);return e.KtG(o.onLoad())}),e.qZA(),e._uU(4," Your browser does not support the audio element. "),e.qZA()()()}if(2&t){const i=e.oxw(3);e.xp6(3),e.Q6J("src",i.cdnLink,e.LSH),e.uIk("type",null==i.fileOption?null:i.fileOption.mimes)}}function A(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div",31)(2,"video",32)(3,"source",30),e.NdJ("load",function(){e.CHM(i);const o=e.oxw(3);return e.KtG(o.onLoad())}),e.qZA(),e.TgZ(4,"p",33),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()()}if(2&t){const i=e.oxw(3);e.xp6(2),e.s9C("poster",i.videoThumbUrl,e.LSH),e.xp6(1),e.Q6J("src",i.cdnLink,e.LSH),e.uIk("type",null==i.fileOption?null:i.fileOption.mimes),e.xp6(2),e.Oqu(e.lcZ(6,4,"lang_auto_ban_dang_su_dung_trinh_duyet_khong_ho_tro_xem_video_truc_tuyen"))}}function L(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"iframe",34),e.NdJ("load",function(){e.CHM(i);const o=e.oxw(3);return e.KtG(o.onLoad())}),e.qZA()()}if(2&t){const i=e.oxw(3);e.xp6(1),e.Q6J("src",i.cdnLink,e.uOi)}}function E(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div",31)(2,"img",35),e.NdJ("load",function(){e.CHM(i);const o=e.oxw(3);return e.KtG(o.onLoad())}),e.qZA()()()}if(2&t){const i=e.oxw(3);e.xp6(2),e.uIk("src",i.cdnLink,e.LSH)}}function k(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div",36)(2,"iframe",37),e.NdJ("load",function(){e.CHM(i);const o=e.oxw(3);return e.KtG(o.onLoad())}),e.qZA()()()}if(2&t){const i=e.oxw(3);e.xp6(2),e.Q6J("src",i.cdnLink,e.uOi)}}function Z(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div",38)(2,"pdf-viewer",39),e.NdJ("load",function(){e.CHM(i);const o=e.oxw(3);return e.KtG(o.onLoad())}),e.qZA()()()}if(2&t){const i=e.oxw(3);e.xp6(2),e.Q6J("src",i.cdnLink)("show-all",!0)}}function I(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24),e.YNc(3,b,5,2,"div",25),e.YNc(4,A,7,6,"div",25),e.YNc(5,L,2,1,"div",25),e.YNc(6,E,3,1,"div",25),e.YNc(7,k,3,1,"div",25),e.YNc(8,Z,3,2,"div",25),e._UZ(9,"div",26),e.qZA(),e._UZ(10,"div",27),e.qZA(),e.BQk()),2&t){const i=e.oxw(2);e.xp6(3),e.Q6J("ngIf","audio"===i.typeFile),e.xp6(1),e.Q6J("ngIf","video"===i.typeFile),e.xp6(1),e.Q6J("ngIf","vimeo"===i.typeFile),e.xp6(1),e.Q6J("ngIf","image"===i.typeFile),e.xp6(1),e.Q6J("ngIf","officeapps"===i.typeFile),e.xp6(1),e.Q6J("ngIf","pdf"===i.typeFile)}}function z(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",23)(1,"div",24)(2,"div",40)(3,"img",41),e.NdJ("load",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.onLoad())}),e.qZA()()()()}if(2&t){const i=e.oxw(2);e.xp6(3),e.uIk("src",i.linkUrl,e.LSH)}}function U(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),e._UZ(4,"div",9),e.qZA(),e.YNc(5,M,2,1,"div",10),e.YNc(6,O,2,1,"div",10),e.YNc(7,P,4,8,"div",11),e.YNc(8,T,3,3,"div",11),e.qZA(),e.TgZ(9,"div",12)(10,"span",13),e.YNc(11,y,3,2,"a",14),e.qZA(),e.TgZ(12,"span",15),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.btnClosePreview())}),e.TgZ(13,"mat-icon",16),e._uU(14,"close"),e.qZA()()()(),e.TgZ(15,"div",17),e.YNc(16,I,11,6,"ng-container",18),e.YNc(17,z,4,1,"ng-template",null,19,e.W1O),e.qZA()()}if(2&t){const i=e.MAs(18),n=e.oxw();e.xp6(5),e.Q6J("ngIf",null!=n.fileOption),e.xp6(1),e.Q6J("ngIf",null==n.fileOption),e.xp6(1),e.Q6J("ngIf",null!=n.fileOption),e.xp6(1),e.Q6J("ngIf",null==n.fileOption),e.xp6(3),e.Q6J("ngIf",null!=n.fileOption),e.xp6(5),e.Q6J("ngIf",0==n.typePreview)("ngIfElse",i)}}let D=(()=>{class t extends s.Q{constructor(i,n,o,d){super(i),this.commonService=i,this.dom=n,this.cdnService=o,this.envService=d,this.typePreview=0,this.fileNameCustom="",this.closePreview=new e.vpe,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.isVimeoLink=!1}onLoad(){this.stopStatusObj()}initData(){var i,n,o,d,g;if(0==this.typePreview){let N=null!==(i=this.fileOption)&&void 0!==i&&i.size?Number(this.fileOption.size):0,F=null!==(n=this.fileOption)&&void 0!==n&&n.mimes?this.fileOption.mimes:"";if(this.cdnLink=this.cdnService.getMyCdn(null!==(d=null===(o=this.fileOption)||void 0===o?void 0:o.url)&&void 0!==d?d:""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(N),this.typeFile=(0,v.Z9)(F),"string"==typeof this.cdnLink&&(this.isVimeoLink=this.cdnLink.includes("https://player.vimeo.com/")||this.cdnLink.includes("https://mega.nz")),this.isVimeoLink&&(this.typeFile="vimeo"),"string"==typeof this.cdnLink&&""!=this.cdnLink)switch(this.typeFile){case"pdf":this.cdnLink=this.cdnLink;break;case"officeapps":this.cdnLink=this.dom.bypassSecurityTrustResourceUrl(this.envService.getLinkEmbedDocument(this.cdnLink));break;default:this.cdnLink=this.dom.bypassSecurityTrustResourceUrl(this.cdnLink)}}else this.linkUrl=this.cdnService.getMyCdn(null!==(g=this.linkUrl)&&void 0!==g?g:"");setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.closePreview.emit()}getFileMB(i){return i&&i>0?(i/=1048576).toFixed(2):0}reloadFrame(i){let n=document.getElementById(i);n&&n.parentNode&&n.parentNode.replaceChild(n.cloneNode(),n)}ngOnInit(){document.body.classList.add("overflow-hidden"),setTimeout(()=>{this.initData()},0),this.videoThumbUrl=this.cdnService.convertLinkCdn("azota_assets/images/video-thumb.png"),this.initStatusObj(),super.ngOnInit()}ngOnDestroy(){this.removeClassCss(),super.ngDestroy()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(m.v),e.Y36(l.H7),e.Y36(f.U),e.Y36(a.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["azt-preview-media"]],inputs:{fileOption:"fileOption",typePreview:"typePreview",fileNameCustom:"fileNameCustom",linkUrl:"linkUrl"},outputs:{closePreview:"closePreview"},features:[e.qOj],decls:2,vars:2,consts:[["class","loading-block",4,"ngIf"],["class","file-preview",4,"ngIf"],[1,"loading-block"],["role","status",1,"spinner-border","text-secondary",2,"width","5rem","height","5rem"],[1,"sr-only"],[1,"file-preview"],[1,"file-preview__header","flx","flx-sp-btw"],[1,"file-preview__header-left"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-image","url('https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/documents.png')","background-size","cover"],["class","file-preview__header__title",4,"ngIf"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"file-preview__controls-container"],["class","clickable download","target","_blank",4,"ngIf"],[1,"file-preview__buttons-container",3,"click"],[2,"color","rgb(53, 53, 53)","cursor","pointer"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"file-preview__header__title"],[1,"file-preview__header__send-time"],["target","_blank",1,"clickable","download"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[4,"ngIf"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],["controls",""],[3,"src","load"],[1,"pl-2","pr-2","mt-3"],["id","my-video","playsinline","playsinline","controls","","preload","auto","data-setup","{}",1,"video-js",2,"max-height","calc(100vh - 80px)","width","100%","padding-bottom","1rem",3,"poster"],[1,"vjs-no-js"],["frameborder","0","allowfullscreen","",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],[1,"pl-2","pr-2","mp-0"],["frameborder","0",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"src","show-all","load"],[1,"pl-2","pr-2","mt-3","block-img"],["alt","Responsive image",1,"img-fluid","image-preview",3,"load"]],template:function(i,n){1&i&&(e.YNc(0,C,4,0,"div",0),e.YNc(1,U,19,7,"div",1)),2&i&&(e.Q6J("ngIf",n.statusObj.loading),e.xp6(1),e.Q6J("ngIf",(null!=n.fileOption||""!=n.linkUrl)&&!n.statusObj.loading))},dependencies:[c.O5,h.Hw,x.rQ,w.bT],styles:[".file-preview[_ngcontent-%COMP%]{background:#ECF0F5;position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0}.block-img[_ngcontent-%COMP%]{background:#a3a3a3;width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#ecf0f5}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed;background:#ECF0F5}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;background:#fff;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;color:#fff;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#e5efff}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;color:#222;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{color:#fff;margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.file-preview__buttons-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;position:relative}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),t})()},41752:(u,p,_)=>{_.d(p,{D:()=>m});var e=_(92340),s=_(5e3),v=_(58914);let m=(()=>{class l{constructor(a){this.configService=a}getCurrentVersion(){return e.N.versionTime}getGlobalNotice(){return this.configService.getConfig("globalNotice")}getEnvValue(a){return this.configService.getConfig(a)}getLinkEmbedDocument(a){var c=this.configService.getConfig("docView");return c&&"MICROSOFT"!=c?`https://docs.google.com/viewer?url=${a}&embedded=true`:`https://view.officeapps.live.com/op/embed.aspx?src=${a}`}}return l.\u0275fac=function(a){return new(a||l)(s.LFG(v.E))},l.\u0275prov=s.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);