"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[832],{71572:(fe,W,_)=>{_.d(W,{o:()=>R});var k=_(55330),d=_(5e3),A=_(25245),Z=_(92181),$=_(87238),P=_(1033);let R=(()=>{class q extends k.Q{constructor(){super(...arguments),this.linkUrl="",this.id="",this.fileName=""}bindUrlToQrCode(){let D=document.getElementById("qrcode_making"+this.id);D&&(D.textContent="");try{this.qrcode=this.commonService.createObjectQrcode(this.linkUrl,128,128,"url",!1,"qrcode_making"+this.id)}catch(N){console.log("Create qrcode error")}}downloadQrCode(){try{var D=this.qrcode._oDrawing.dataURL,N=document.createElement("a");document.body.appendChild(N),N.setAttribute("href",D),N.setAttribute("download",""!=this.fileName?this.commonService.createFileNameExportFile([this.fileName])+".jpg":this.commonService.createFileNameExportFile(["azota-qr-code-"])+".jpg"),N.click()}catch(K){console.log("Download qrcode error")}}}return q.\u0275fac=function(){let z;return function(N){return(z||(z=d.n5z(q)))(N||q)}}(),q.\u0275cmp=d.Xpm({type:q,selectors:[["azt-download-qr-code"]],inputs:{linkUrl:"linkUrl",id:"id",fileName:"fileName"},features:[d.qOj],decls:12,vars:8,consts:[[1,"clickable",2,"font-size","19px","height","19px","width","19px","color","#2163ae",3,"matMenuTriggerFor","matTooltip","click"],["showQrCode","matMenu"],[1,"content",3,"click"],[1,"upload-qr-box-item-content-qr",3,"id"],[1,"pt-2","clickable",2,"color","#007bff","align-items","center","display","flex","justify-content","center",3,"click"]],template:function(D,N){if(1&D&&(d.TgZ(0,"mat-icon",0),d.NdJ("click",function(){return N.bindUrlToQrCode()}),d.ALo(1,"mytranslate"),d._uU(2,"qr_code"),d.qZA(),d.TgZ(3,"mat-menu",null,1)(5,"div",2),d.NdJ("click",function(ae){return ae.stopPropagation()}),d._UZ(6,"div",3),d.TgZ(7,"div",4),d.NdJ("click",function(){return N.downloadQrCode()}),d.TgZ(8,"mat-icon"),d._uU(9,"save_alt"),d.qZA(),d._uU(10),d.ALo(11,"mytranslate"),d.qZA()()()),2&D){const K=d.MAs(4);d.s9C("matTooltip",d.lcZ(1,4,"lang_auto_quet_hoac_tai_ma_qr_code")),d.Q6J("matMenuTriggerFor",K),d.xp6(6),d.MGl("id","qrcode_making",N.id,""),d.xp6(4),d.hij(" ",d.lcZ(11,6,"lang_auto_tai_ve_may"),"")}},dependencies:[A.Hw,Z.VK,Z.p6,$.gM,P.bT],styles:[".upload-qr-box[_ngcontent-%COMP%]{margin-top:10px}.upload-qr-box-item[_ngcontent-%COMP%]{display:flex}.upload-qr-box-item-content[_ngcontent-%COMP%]{font-size:16px;margin-left:10px;width:100%}.upload-qr-box-item-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px!important}.upload-qr-box-item-content-qr[_ngcontent-%COMP%]{display:flex;justify-content:center}.upload-qr-box-url[_ngcontent-%COMP%]{margin-top:10px}.upload-qr-box-url-link[_ngcontent-%COMP%]{font-weight:500;text-align:center;color:#42aba2;font-size:larger;background:white;padding:5px;border-radius:5px}.content[_ngcontent-%COMP%]{margin:0 20px}"]}),q})()},63382:(fe,W,_)=>{_.d(W,{X:()=>A});var k=_(5e3),d=_(35018);let A=(()=>{class Z{constructor(P){this.commonService=P}isInIframe(){try{return window.self!==window.top}catch(P){return!0}}sendMessageToParentIframe(P){try{window.parent.postMessage(P,"*")}catch(R){}}sendMessageToIFrame(P,R){const q=document.getElementById(P),z=q?q.contentWindow:null;null!=z&&z.postMessage(R,"*")}}return Z.\u0275fac=function(P){return new(P||Z)(k.LFG(d.v))},Z.\u0275prov=k.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()},9714:(fe,W,_)=>{_.r(W),_.d(W,{HomeworkModule:()=>_i});var k=_(69808),d=_(93075),A=_(48966),Z=_(74202),$=_(51908),P=_(1737),R=_(44841),q=_(63312),z=_(75658),D=_(10738),N=_(37389),K=_(6834),ae=_(70655),se=_(70024),le=_(40520),Pe=_(53170),we=_(90508),V=_(36053),Je=_(96551),qe=_(60703),ke=_(85053),L=_(55330),Ue=_(61447),De=_(41303),ne=_(51442),e=_(5e3),I=_(35018),Ee=_(58326),Fe=_(57521),Y=_(82878),ve=_(12813),ie=_(2366),_e=_(72491),Qe=_(88386),ze=_(79001),B=_(47423),xe=_(77446),U=_(25245),me=_(67322),Ye=_(98833),G=_(87238),X=_(47691),ee=_(17852),be=_(73852),re=_(49692),Be=_(16883),Ge=_(73727),y=_(1033);function Re(n,s){1&n&&e._UZ(0,"azt-loading-effect")}function Ke(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"header-backend",59),e.NdJ("MenuEvent",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.callbackMenuEvent(i))}),e.ALo(2,"mytranslate"),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("headerTitle",e.lcZ(2,2,"lang_homework_add_home_work_add_home_work"))("headerBackTolink","/admin/homework/classes/1"))}function We(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"header-backend",60),e.NdJ("MenuEvent",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.callbackMenuEvent(i))})("RedirectToLink",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.redirectToBackLink())}),e.ALo(1,"mytranslate"),e.qZA()}2&n&&e.Q6J("headerTitle",e.lcZ(1,2,"lang_homework_add_home_work_update_home_work"))("checkUrlFunction",!0)}function $e(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("*** ",e.lcZ(2,1,"lang_homework_add_home_work_validate_enter_null_name_homework"),"."))}function Ve(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("*** ",e.lcZ(2,1,"lang_homework_add_home_work_validate_enter_name_homework"),"."))}function Xe(n,s){if(1&n&&(e.TgZ(0,"div",61)(1,"div")(2,"div",62)(3,"div",63),e.YNc(4,$e,3,3,"div",27),e.YNc(5,Ve,3,3,"div",27),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.form.controls.nameExam.errors.required||t.form.controls.nameExam.errors.noWhiteSpace),e.xp6(1),e.Q6J("ngIf",t.form.controls.nameExam.errors.maxlength)}}function et(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"OK"),e.qZA())}function tt(n,s){1&n&&(e.ynx(0),e.TgZ(1,"small",64),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.hij(" * ",e.lcZ(3,1,"lang_auto_warning_teacher_startdate_dateline")," "))}function ot(n,s){1&n&&(e.TgZ(0,"span"),e._uU(1,"OK"),e.qZA())}function nt(n,s){1&n&&(e.ynx(0),e.TgZ(1,"small",65),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.hij(" * ",e.lcZ(3,1,"lang_auto_warning_teacher_deadline_startdate")," "))}function it(n,s){1&n&&(e.TgZ(0,"div",66)(1,"div",67)(2,"span",68),e._uU(3,"Loading..."),e.qZA()()())}function rt(n,s){1&n&&(e.TgZ(0,"div",69),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_cms_add_homework_input_file")))}function at(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div")(2,"button",70),e.NdJ("click",function(){const r=e.CHM(t).index,a=e.oxw(2);return e.KtG(!!a.formHomework.files&&a.formHomework.files.splice(r,1))}),e.TgZ(3,"mat-icon",71),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"a",72),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.onShowFile(r,-1))}),e.TgZ(6,"span",73),e._uU(7),e.qZA()()()()}if(2&n){const t=s.$implicit;e.xp6(6),e.Q6J("title",t.name),e.xp6(1),e.Oqu(t.name)}}function st(n,s){if(1&n&&(e.TgZ(0,"div",74)(1,"div",48),e._uU(2),e.ALo(3,"mytranslate"),e.TgZ(4,"span",75),e._uU(5),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_homework_add_home_work_edit_homework"),": "),e.xp6(3),e.hij(" ",t.classroomObj.name,"")}}function lt(n,s){1&n&&(e.TgZ(0,"div",78),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" *** ",e.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function ct(n,s){if(1&n&&(e.TgZ(0,"div",76),e.YNc(1,lt,3,3,"div",77),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors.checkboxValidatorWithoutWhoAllow)}}function dt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.redirectClasses())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.saveHomeworkProgress(0))}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"button",81),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.saveHomeworkProgress(1))}),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,5,"lang_buttom_cancel")),e.xp6(2),e.Q6J("disabled",t.form.invalid||t.checkDeadLineValid(t.form.controls.startDateHomework.value,t.form.controls.deadlineHomework.value)<0),e.xp6(1),e.Oqu(e.lcZ(6,7,"lang_auto_luu")),e.xp6(2),e.Q6J("disabled",t.form.invalid||t.checkDeadLineValid(t.form.controls.startDateHomework.value,t.form.controls.deadlineHomework.value)<0),e.xp6(1),e.Oqu(e.lcZ(9,9,"lang_auto_xuat_ban"))}}function _t(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.redirectBack())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA(),e.TgZ(3,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.updateHomeworkProgress(0))}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"button",81),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.updateHomeworkProgress(1))}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,5,"lang_buttom_cancel")),e.xp6(2),e.Q6J("disabled",t.form.controls.nameExam.errors||t.checkDeadLineValid(t.form.controls.startDateHomework.value,t.form.controls.deadlineHomework.value)<0),e.xp6(1),e.Oqu(e.lcZ(5,7,"lang_auto_luu")),e.xp6(2),e.Q6J("disabled",t.form.controls.nameExam.errors||t.checkDeadLineValid(t.form.controls.startDateHomework.value,t.form.controls.deadlineHomework.value)<0),e.xp6(1),e.Oqu(e.lcZ(8,9,"lang_auto_xuat_ban"))}}function mt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-preview-media",82),e.NdJ("closePreview",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onFileClose())}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("fileOption",t.previewFile)}}const Ce=function(){return{standalone:!0}},ht=function(){return[]},ut=function(n){return{height:350,menubar:!1,plugins:n,toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}},gt=function(n){return{suppressScrollX:!0,suppressScrollY:n}};function ft(n,s){if(1&n){const t=e.EpF();e.YNc(0,Ke,3,4,"div",0),e.YNc(1,We,2,4,"ng-template",null,2,e.W1O),e.TgZ(3,"form",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"p",9),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.qZA(),e.TgZ(14,"div",12),e.YNc(15,Xe,6,2,"div",13),e.qZA()(),e.TgZ(16,"div",7)(17,"div",8)(18,"p",9),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()(),e.TgZ(21,"div",14)(22,"div",15)(23,"div",16)(24,"div",17)(25,"mat-form-field",18)(26,"input",19),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(31);return e.KtG(i.open())}),e.qZA(),e.TgZ(27,"button",20),e.NdJ("click",function(i){return e.CHM(t),e.MAs(31).open(),e.KtG(i.stopPropagation())}),e.TgZ(28,"mat-icon"),e._uU(29,"today"),e.qZA()(),e.TgZ(30,"ngx-mat-datetime-picker",null,21),e.YNc(32,et,2,0,"ng-template"),e.qZA()()(),e.TgZ(33,"div",22)(34,"div",23)(35,"div")(36,"a",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearTimeStart())}),e.ALo(37,"mytranslate"),e.TgZ(38,"mat-icon",25),e._uU(39,"cancel"),e.qZA()()()()()()()(),e.TgZ(40,"div",26),e.YNc(41,tt,4,3,"ng-container",27),e.TgZ(42,"small",28),e._uU(43),e.ALo(44,"mytranslate"),e.qZA(),e.TgZ(45,"small",28),e._uU(46),e.ALo(47,"mytranslate"),e.qZA()()(),e.TgZ(48,"div",7)(49,"div",8)(50,"p",9),e._uU(51),e.ALo(52,"mytranslate"),e.qZA()(),e.TgZ(53,"div",14)(54,"div",15)(55,"div",16)(56,"div",17)(57,"mat-form-field",18)(58,"input",29),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(63);return e.KtG(i.open())}),e.qZA(),e.TgZ(59,"button",20),e.NdJ("click",function(i){return e.CHM(t),e.MAs(63).open(),e.KtG(i.stopPropagation())}),e.TgZ(60,"mat-icon"),e._uU(61,"today"),e.qZA()(),e.TgZ(62,"ngx-mat-datetime-picker",null,30),e.YNc(64,ot,2,0,"ng-template"),e.qZA()()(),e.TgZ(65,"div",22)(66,"div",23)(67,"div")(68,"a",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearTime())}),e.ALo(69,"mytranslate"),e.TgZ(70,"mat-icon",25),e._uU(71,"cancel"),e.qZA()()()()()()()(),e.TgZ(72,"div",26),e.YNc(73,nt,4,3,"ng-container",27),e.TgZ(74,"small",28),e._uU(75),e.ALo(76,"mytranslate"),e.qZA()()(),e.TgZ(77,"div",31)(78,"div",32)(79,"div",12)(80,"div",33)(81,"input",34,35),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onFileSelected(i))}),e.qZA(),e.TgZ(83,"a",36),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(82);return e.KtG(i.click())}),e.TgZ(84,"span"),e._uU(85),e.ALo(86,"mytranslate"),e.qZA()(),e.YNc(87,it,4,0,"div",37),e.YNc(88,rt,3,3,"div",38),e.YNc(89,at,8,2,"div",39),e.qZA()()()(),e.TgZ(90,"div",40)(91,"editor",41),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.formHomework.content=i)}),e.qZA()(),e.TgZ(92,"div",42)(93,"div",33)(94,"mat-checkbox",43),e._uU(95),e.ALo(96,"mytranslate"),e.qZA()(),e.TgZ(97,"div",44)(98,"mat-checkbox",45),e._uU(99),e.ALo(100,"mytranslate"),e.qZA()()(),e.YNc(101,st,6,4,"div",46),e.TgZ(102,"div",47)(103,"div",48),e._uU(104),e.ALo(105,"mytranslate"),e.qZA(),e.TgZ(106,"div",49)(107,"div",50),e._UZ(108,"azt-list-classroom-checkall",51),e.qZA(),e.TgZ(109,"div",52)(110,"perfect-scrollbar",53),e.ALo(111,"customScrollConfig"),e._UZ(112,"azt-list-classroom-checkbox",54),e.qZA()()()(),e.YNc(113,ct,2,1,"div",55),e.TgZ(114,"div",56)(115,"div",57),e.YNc(116,dt,10,11,"div",0),e.YNc(117,_t,9,11,"ng-template",null,58,e.W1O),e.qZA()()()()()(),e.YNc(119,mt,2,1,"div",27)}if(2&n){const t=e.MAs(2),o=e.MAs(31),i=e.MAs(63),r=e.MAs(118),a=e.oxw();e.Q6J("ngIf",0==a.isCheckUpdate)("ngIfElse",t),e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(7),e.Oqu(e.lcZ(11,42,"lang_homework_add_home_work_name_home_work")),e.xp6(5),e.Q6J("ngIf",a.form.controls.nameExam.errors&&(a.form.controls.nameExam.touched||a.form.controls.nameExam.dirty)),e.xp6(4),e.Oqu(e.lcZ(20,44,"lang_homework_add_home_work_startDate_old")),e.xp6(7),e.Q6J("ngxMatDatetimePicker",o),e.xp6(10),e.s9C("matTooltip",e.lcZ(37,46,"lang_homework_add_home_work_reset_time")),e.xp6(5),e.Q6J("ngIf",a.form.controls.startDateHomework.touched&&a.checkDeadLineValid(a.form.controls.startDateHomework.value,a.form.controls.deadlineHomework.value)<0),e.xp6(2),e.hij("* ",e.lcZ(44,48,"lang_homework_add_home_work_startDate_introduce"),""),e.xp6(3),e.hij("* ",e.lcZ(47,50,"lang_homework_add_home_work_tutorial_enter_time"),""),e.xp6(5),e.Oqu(e.lcZ(52,52,"lang_homework_add_home_work_deadline")),e.xp6(7),e.Q6J("ngxMatDatetimePicker",i),e.xp6(10),e.s9C("matTooltip",e.lcZ(69,54,"lang_homework_add_home_work_reset_time")),e.xp6(5),e.Q6J("ngIf",a.form.controls.deadlineHomework.touched&&a.checkDeadLineValid(a.form.controls.startDateHomework.value,a.form.controls.deadlineHomework.value)<0),e.xp6(2),e.hij(" * ",e.lcZ(76,56,"lang_homework_add_home_work_tutorial_enter_time")," "),e.xp6(6),e.Q6J("ngModelOptions",e.DdM(68,Ce)),e.xp6(4),e.hij("+ ",e.lcZ(86,58,"lang_homework_add_home_work_add_file_homework"),""),e.xp6(2),e.Q6J("ngIf",a.loadingUpload),e.xp6(1),e.Q6J("ngIf",!a.formHomework.files||0==a.formHomework.files.length),e.xp6(1),e.Q6J("ngForOf",a.formHomework.files),e.xp6(2),e.Q6J("ngModel",a.formHomework.content)("ngModelOptions",e.DdM(69,Ce))("init",e.VKq(71,ut,e.DdM(70,ht))),e.xp6(4),e.hij(" ",e.lcZ(96,60,"lang_homework_add_home_work_request_login")," "),e.xp6(4),e.hij(" ",e.lcZ(100,62,"lang_homework_add_home_work_dont_view_point")," "),e.xp6(2),e.Q6J("ngIf",a.isCheckUpdate),e.xp6(1),e.Q6J("hidden",a.isCheckUpdate),e.xp6(2),e.hij(" ",e.lcZ(105,64,"lang_homework_add_home_work_select_class")," "),e.xp6(4),e.Q6J("form",a.form)("objs",a.classroomObjs)("permissionName",a.permissionTypes.homework),e.xp6(2),e.Q6J("config",e.VKq(73,gt,e.lcZ(111,66,"")))("scrollIndicators",!0),e.xp6(2),e.Q6J("form",a.form)("objs",a.classroomObjs)("homeworkObj",a.homeworkObj)("permissionName",a.permissionTypes.homework),e.xp6(1),e.Q6J("ngIf",!a.isCheckUpdate&&a.form.controls.classroomIds.errors),e.xp6(3),e.Q6J("ngIf",0==a.isCheckUpdate)("ngIfElse",r),e.xp6(3),e.Q6J("ngIf",a.isShowPreviewFile)}}let Oe=(()=>{class n extends L.Q{constructor(t,o,i,r,a,l,c,m,h,p,u,g){super(i),this.dialog=t,this.activeRoute=o,this.commonService=i,this.myPdfService=r,this.fb=a,this.homeworkService=l,this.classroomService=c,this.apiUploadService=m,this.zipdataService=h,this.timeService=p,this.userService=u,this.sEAztClassroomCheckboxService=g,this.form=new d.nJ({}),this.permissionTypes=ke.$,this.isShowPreviewFile=!1,this.uploadProgress=-1,this.formHomework={files:[],content:""},this.classroomObjs=[],this.prevData="",this.isCheckUpdate=!1,this.classroomId=0,this.homeworkId=0,this.homeworkHashId="",this.cateId="",this.listIds="",this.homeworkObj={},this.classroomObj={},this.paramBackToLink="",this.backToLink="",this.loadingUpload=!1,this.contentBase64Count=0,this.homeWorkContent="",this.newListUrls=[],this.convertBlobToBase64=w=>(0,ae.mG)(this,void 0,void 0,function*(){return new Promise(C=>{var O=new Image;O.crossOrigin="Anonymous",O.addEventListener("load",function(){var j=document.createElement("canvas"),T=j.getContext("2d");j.width=O.width,j.height=O.height,null==T||T.drawImage(O,0,0);var f=j.toDataURL("image/png");C(f)},!1),O.src=w})})}redirectBack(){this.commonService.myNavigation(this.paramBackToLink)}redirectClasses(){this.commonService.myNavigation("/admin/homework/classes/1")}redirectToSuccess(t){this.commonService.myNavigation("/admin/homework/create-homework-success/"+t)}redirectToBackLink(){return this.commonService.myNavigationWithQueryString("/admin/homework/score-list/"+this.classroomId+"/"+this.homeworkId+"/"+this.homeworkObj.hashId,"?backto="+encodeURIComponent(this.backToLink))}disableScroll(){let t=window.pageYOffset||document.documentElement.scrollLeft,o=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(t,o)}}enableScroll(){window.onscroll=()=>{}}callbackMenuEvent(t){}convertFullNumber(t){return t>=10?t:`0${t}`}onFileClose(){this.enableScroll(),this.isShowPreviewFile=!1,this.previewFile=void 0}onShowFile(t,o){this.isShowPreviewFile=!0,this.disableScroll(),this.previewFile=Object.assign(Object.assign({},t),{index:o})}findAllSubString(t,o){for(var i=0,r=0,a=[];t.indexOf(o,i)>-1;)r=t.indexOf(o,i),a.push(r),i=r+o.length;return a}getTypeFile(t){var o=t.indexOf(";");return t.substring(5,o)}getFileName(t){var o=t.split("").reverse().join(""),i=o.indexOf(";"),r=o.indexOf("/",i);return o.substring(i,r).split("").reverse().join("")}onFileSelected(t){let i=t.target,r=i.files,a=!!r&&r[0];0!=a&&((0,ne.C0)(a.type)?(0,ne.ml)(a.type)?this.showErrorSnack("lang_auto_file_gap_loi: "+a.name+"lang_auto__kieu: "+a.type+"lang_auto__chua_ho_tro_dinh_dang_video_wmv_vui_long_thu_lai"):(this.loadingUpload=!0,this.uploadProgress=0,(0,ne.hv)(a).then(l=>{this.apiUploadService.uploadToCdnForHomework(l).subscribe(c=>{var m;c.type!=le.dt.UploadProgress&&(1==c.success?(this.formHomework.files&&!Array.isArray(this.formHomework.files)&&(this.formHomework.files=[]),null===(m=this.formHomework.files)||void 0===m||m.push(Object.assign({},c.data)),this.loadingUpload=!1,this.uploadProgress=-1):(this.loadingUpload=!1,this.showErrorSnack("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi__split_lang"+c.message)))})})):this.showErrorSnack("lang_cms_add_homework_not_support_file_upload")),i.files=null}clearTime(){this.form.controls.deadlineHomework.setValue("")}clearTimeStart(){this.form.controls.startDateHomework.setValue("")}checkDeadLineValid(t,o){return""!=t&&""!=o?this.timeService.getDiffFromTwoDate(o,t):0}startUploadBlobFile(t,o,i){if(o&&""!=o){var r=this.getTypeFile(o),a=this.myPdfService.b64toFile(o,this.getFileName(r),r);(0,ne.hv)(a).then(l=>{this.apiUploadService.uploadToCdnForHomework(l).subscribe(c=>{var m,h;if(c.type!=le.dt.UploadProgress)if(1==c.success){var p=Object.assign(Object.assign({},t),{newUrl:null!==(h=null===(m=c.data)||void 0===m?void 0:m.url)&&void 0!==h?h:""});this.newListUrls.push(p),this.contentBase64Count-=1,0==this.contentBase64Count&&this.changeContent(i)}else this.showErrorSnack("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi__split_lang"+c.message),this.stopStatusObj()})})}else this.showErrorSnack("lang_cms_add_homework_upload_file_error"),this.stopStatusObj()}reUploadBlobFile(t,o){var i;if(t&&t.length>0){this.contentBase64Count=t.length;for(var r=0;r<t.length;r++){new FileReader;const l=t[r],c=null===(i=null==l?void 0:l.oldUrl)||void 0===i?void 0:i.substring(0,l.oldUrl.length-1);this.convertBlobToBase64(null!=c?c:"").then(m=>{this.startUploadBlobFile(l,m,o)})}}else this.showErrorSnack("lang_cms_add_homework_upload_file_error"),this.stopStatusObj()}reUploadBase64File(t,o){var i;if(t&&t.length>0){this.contentBase64Count=t.length;for(var r=0;r<t.length;r++){const c=t[r],m=null===(i=c.oldUrl)||void 0===i?void 0:i.substring(0,c.oldUrl.length-1);var a=this.getTypeFile(null!=m?m:""),l=this.myPdfService.b64toFile(null!=m?m:"",this.getFileName(a),a);(0,ne.hv)(l).then(h=>{this.apiUploadService.uploadToCdnForHomework(h).subscribe(p=>{var u,g;if(p.type!=le.dt.UploadProgress)if(1==p.success){var w=Object.assign(Object.assign({},c),{newUrl:null!==(g=null===(u=p.data)||void 0===u?void 0:u.url)&&void 0!==g?g:""});this.newListUrls.push(w),this.contentBase64Count-=1,0==this.contentBase64Count&&this.changeContent(o)}else this.showErrorSnack("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi__split_lang"+p.message),this.stopStatusObj()})})}}else this.showErrorSnack("lang_cms_add_homework_upload_file_error"),this.stopStatusObj()}foundImgInContent(t,o){var i=this.findAllSubString(t,"<img"),r=[],a=[];i.forEach(l=>{var c=t.indexOf("src=",l),m=t.indexOf('"',Number(c)+5),h=t.substring(Number(c)+5,Number(m)+1);h.includes(";base64")?r.push({oldUrl:h}):h.includes("blob:")&&a.push({oldUrl:h})}),r.length>0?this.reUploadBase64File(r,o):a.length>0?this.reUploadBlobFile(a,o):this.changeContent(o)}changeContent(t){this.newListUrls.length>0&&this.newListUrls.forEach(o=>{var i,r=this.homeWorkContent.replace(null!==(i=o.oldUrl)&&void 0!==i?i:"  ",o.newUrl+'" class="w-100 img-fluid"');this.homeWorkContent=r}),this.isCheckUpdate?this.updateHomeWork(t):this.saveHomework(t)}saveHomeworkProgress(t){this.initStatusObj(),null==this.formHomework.content||null==this.formHomework.content?(this.homeWorkContent="",this.saveHomework(t)):(this.homeWorkContent=this.formHomework.content,this.homeWorkContent.includes("<img ")?this.foundImgInContent(this.homeWorkContent,t):this.saveHomework(t))}updateHomeworkProgress(t){this.initStatusObj(),null==this.formHomework.content||null==this.formHomework.content?(this.homeWorkContent="",this.updateHomeWork(t)):(this.homeWorkContent=this.formHomework.content,this.homeWorkContent.includes("<img ")?this.foundImgInContent(this.formHomework.content,t):this.updateHomeWork(t))}saveHomework(t){let o=this.commonService.getFormObj(this.form);o.startDateHomework=""===o.startDateHomework||null===o.startDateHomework?null:(0,k.p6)(o.startDateHomework,"yyyy-MM-ddTHH:mm:00","en_vn"),o.deadlineHomework=""===o.deadlineHomework||null===o.deadlineHomework?null:(0,k.p6)(o.deadlineHomework,"yyyy-MM-ddTHH:mm:00","en_vn"),o.isCheckLogin=1!=o.isCheckLogin?0:1,o.whenShowAnswer=1!=o.whenShowAnswer?0:1,this.homeWorkContent=this.zipdataService.convertContentGzip(this.homeWorkContent);let i=this.userService.getUserObj(),r=JSON.stringify({type:"homework",id:this.homeworkId,user:i.id});var a=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,ke.$.homework);const l=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,a,o.classroomIds);let c={name:o.nameExam,content:this.homeWorkContent,startDate:o.startDateHomework,deadline:o.deadlineHomework,testbankExams:"",files:JSON.stringify(this.formHomework.files),mustVerified:o.isCheckLogin,whenShowAnswer:o.whenShowAnswer,isPublished:t,categoryId:this.cateId?Number(this.cateId):void 0,classroomIds:l};this.subscriptions.add(this.homeworkService.apiHomeworkSaveObjPost(c,r).subscribe(m=>{var h,p,u;if(1==m.success){this.showSuccessSnack("lang_auto_tao_bai_tap_thanh_cong");var g=[];if(null!==(h=m.data)&&void 0!==h&&h.objs)for(var w=0;w<m.data.objs.length;w++)g.push(null===(p=m.data)||void 0===p?void 0:p.objs[w].hashId);this.listIds=JSON.stringify(g),this.redirectToSuccess(this.listIds),this.successStatusObj()}else this.errorStatusObj(null!==(u=m.message)&&void 0!==u?u:"",!0)}))}updateHomeWork(t){let o=this.commonService.getFormObj(this.form);o.startDateHomework=""===o.startDateHomework||null===o.startDateHomework?null:(0,k.p6)(o.startDateHomework,"yyyy-MM-ddTHH:mm:00","en_vn"),o.deadlineHomework=""===o.deadlineHomework||null===o.deadlineHomework?null:(0,k.p6)(o.deadlineHomework,"yyyy-MM-ddTHH:mm:00 Z","en_vn"),o.isCheckLogin=1!=o.isCheckLogin?0:1,o.whenShowAnswer=1!=o.whenShowAnswer?0:1,this.homeWorkContent=this.zipdataService.convertContentGzip(this.homeWorkContent);let i=this.userService.getUserObj(),r=JSON.stringify({type:"homework",id:this.homeworkId,user:i.id}),a={id:this.homeworkId,homeworkHashId:this.homeworkHashId,name:o.nameExam,content:this.homeWorkContent,startDate:o.startDateHomework,deadline:o.deadlineHomework,testbankExams:"",files:JSON.stringify(this.formHomework.files),mustVerified:o.isCheckLogin,whenShowAnswer:o.whenShowAnswer,isPublished:t||this.homeworkObj.isPublished};this.subscriptions.add(this.homeworkService.apiHomeworkUpdateObjPost(a,r).subscribe(l=>{var c;1==l.success?(this.showSuccessSnack("lang_auto_cap_nhat_thanh_cong"),this.redirectToBackLink(),this.successStatusObj()):this.errorStatusObj(null!==(c=l.message)&&void 0!==c?c:"",!0)}))}getHomework(t){this.isCheckUpdate=!!t,this.subscriptions.add(this.homeworkService.apiHomeworkGetObjGet(this.isCheckUpdate?this.homeworkHashId:"add_new").subscribe(o=>{var i,r,a,l,c,m,h,p,u,g,w,C,O,j,T,f,x,v;1==o.success?(this.classroomObjs=null!==(r=null===(i=null==o?void 0:o.data)||void 0===i?void 0:i.classroomObjs)&&void 0!==r?r:new Array,this.isCheckUpdate&&(this.formHomework.files=null!==(l=null===(a=o.data)||void 0===a?void 0:a.homeworkObj)&&void 0!==l&&l.files?this.commonService.myParseJson(null===(m=null===(c=o.data)||void 0===c?void 0:c.homeworkObj)||void 0===m?void 0:m.files):[],this.formHomework.content=null!==(p=null===(h=o.data)||void 0===h?void 0:h.homeworkObj)&&void 0!==p&&p.content?this.zipdataService.decodeContentGzip(null===(g=null===(u=o.data)||void 0===u?void 0:u.homeworkObj)||void 0===g?void 0:g.content):"",this.classroomObj=null!==(C=null===(w=null==o?void 0:o.data)||void 0===w?void 0:w.classroomObj)&&void 0!==C?C:{},this.homeworkObj=null!==(j=null===(O=null==o?void 0:o.data)||void 0===O?void 0:O.homeworkObj)&&void 0!==j?j:{},this.classroomId=null!==(x=null===(f=null===(T=null==o?void 0:o.data)||void 0===T?void 0:T.classroomObj)||void 0===f?void 0:f.id)&&void 0!==x?x:0,this.paramBackToLink="/admin/homework/score-list/"+this.classroomId+"/"+this.homeworkId+"/"+this.homeworkObj.hashId,this.form.patchValue({nameExam:this.homeworkObj.name,startDateHomework:null!=this.homeworkObj.startDate?this.homeworkObj.startDate:"",deadlineHomework:null!=this.homeworkObj.deadline?this.homeworkObj.deadline:"",isCheckLogin:0!=this.homeworkObj.mustVerified,whenShowAnswer:0!=this.homeworkObj.whenShowAnswer})),this.successStatusObj()):this.errorStatusObj(null!==(v=o.message)&&void 0!==v?v:"",!0)}))}ngOnInit(){this.initStatusObj(),(0,V.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var t,o,i,r;this.homeworkId=null!==(t=Number(this.commonService.getMyParam(this.activeRoute,"id")))&&void 0!==t?t:0,this.homeworkHashId=null!==(o=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==o?o:"",this.backToLink=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"",this.cateId=null!==(r=this.commonService.getMyQueryParam("cateId"))&&void 0!==r?r:"",this.getHomework(this.homeworkId)}),this.form=this.fb.group({nameExam:new d.p4("",[d.kI.required,d.kI.maxLength(180),De._.noWhiteSpace]),startDateHomework:new d.p4(""),deadlineHomework:new d.p4(""),isCheckLogin:new d.p4(""),contentHomework:new d.p4,whenShowAnswer:new d.p4(""),classroomIds:this.fb.array([])},{validators:[Ue.c.checkboxValidatorWithoutWhoAllow]}),this.form.valueChanges.subscribe(t=>{let o=JSON.stringify(t);o!=this.prevData&&(this.prevData=o,this.form.patchValue(t))}),this.commonService.translateMetaData({title:"lang_cms_homework_add_exercise_title",description:"lang_cms_homework_add_exercise_description",image:"lang_cms_test_image"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.uw),e.Y36(Z.gz),e.Y36(I.v),e.Y36(Ee.t),e.Y36(d.QS),e.Y36(Fe.L),e.Y36(Y.um),e.Y36(ve.$),e.Y36(ie.n),e.Y36(_e.O),e.Y36(Qe.K),e.Y36(ze.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-home-work"]],features:[e._Bn([{provide:se.fM,useClass:qe.HF,deps:[we.Ad,Pe.o8]},{provide:se.ab,useValue:Je.O}]),e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],["header",""],[1,"p-3",3,"formGroup"],[1,"container","pb-80"],[1,"row","py-md-4"],[1,"col-md-12","add-homework--form"],[1,"row","m-0","pb-3"],[1,"col-4","col-md-3","add-homework--form__label","text-md-right"],[1,"p-0","m-0"],[1,"col-8","col-md-9","pl-0","pr-0"],["type","text","formControlName","nameExam","placeholder","",1,"form-control","add-homework--form__input"],[1,"row"],["class","col-12 pt-1",4,"ngIf"],[1,"col-8","col-md-9","pl-0","pr-0","add-homework--form__padding"],[1,"add-homework--form__border","d-flex","align-items-center"],[1,"row","m-0","p-0","align-items-center","justify-content-around","homework-box",2,"width","100%"],[1,"col-9","col-md-10","pr-0","pl-0",2,"border","1px solid #ced4da","border-radius","3px"],[1,"myTimePicker","pt-0"],["matInput","","readonly","","formControlName","startDateHomework",3,"ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",2,"font-size","18px",3,"click"],["startDate",""],[1,"col-2","col-md-1","pl-0","pr-0"],[1,"pl-1","d-flex","align-items-center","justify-content-center",2,"padding-top","3px"],[1,"clickable",2,"color","#3f51b5",3,"matTooltip","click"],[2,"vertical-align","middle"],[1,"col-12","pl-0","pr-0"],[4,"ngIf"],[1,"clearfix","pt-1",2,"color","rgba(0, 0, 0, 0.4)"],["matInput","","readonly","","formControlName","deadlineHomework",3,"ngxMatDatetimePicker","click"],["durationTime",""],[1,"row","pt-2","m-0"],[1,"col-12","add-homework--form__title","none-top__border","none-bottom__border"],[1,"col-md-12"],["type","file","name","fileHomework",2,"display","none",3,"ngModelOptions","change"],["formChoseFile",""],[1,"d-flex","align-items-center",2,"color","#3c8dbc",3,"click"],["class","d-flex justify-content-center my-2",4,"ngIf"],["style","color: #747373; font-size: 10px",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-12","p-0","mh-250"],["apiKey","ldij13v1886vlrnk42g9bvngyqdc6gxpe8l0n9mo8gdjpg9d",3,"ngModel","ngModelOptions","init","ngModelChange"],[1,"row","pt-3","pb-3"],["color","primary","formControlName","isCheckLogin"],[1,"col-md-6"],["color","primary","formControlName","whenShowAnswer"],["class","row m-0 pt-3",4,"ngIf"],[1,"row","m-0","pt-3",3,"hidden"],[1,"col-12","add-homework--form__title","none-bottom__border"],[1,"col-12","add-homework--form__content","none-top__border",2,"width","100%"],[1,"classroom_check_all"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],[3,"config","scrollIndicators"],["formArrayName","classroomIds",3,"form","objs","homeworkObj","permissionName"],["class","col-12 pl-0 pt-3",4,"ngIf"],[1,"row","m-0","pt-4","pb-3"],[1,"col-12","text-right"],["button",""],[3,"headerTitle","headerBackTolink","MenuEvent"],[3,"headerTitle","checkUrlFunction","MenuEvent","RedirectToLink"],[1,"col-12","pt-1"],[1,"text-left"],[1,"text-danger"],[1,"text-danger","clearfix","pt-1"],[1,"clearfix","pt-1","text-danger"],[1,"d-flex","justify-content-center","my-2"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[2,"color","#747373","font-size","10px"],[1,"btn","btn-sm",3,"click"],[2,"font-size","15px","padding-top","5px"],[3,"click"],[2,"color","gray","word-wrap","break-word",3,"title"],[1,"row","m-0","pt-3"],[2,"color","black","font-weight","bold"],[1,"col-12","pl-0","pt-3"],["class","text-left text-danger",4,"ngIf"],[1,"text-left","text-danger"],[1,"button-cancel",3,"click"],[1,"button-not-published",3,"disabled","click"],[1,"button-save",3,"disabled","click"],[3,"fileOption","closePreview"]],template:function(t,o){if(1&t&&(e.YNc(0,Re,1,0,"azt-loading-effect",0),e.YNc(1,ft,120,75,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",1==o.statusObj.loading)("ngIfElse",i)}},dependencies:[k.sg,k.O5,R.Vv,B.lW,xe.oG,U.Hw,me.KE,me.R9,Ye.Nt,G.gM,se.AB,se.g2,$.PG,d._Y,d.Fj,d.JJ,d.JL,d.On,d.sg,d.u,d.CE,X.Q,ee.p,be.x,re.M,Be.o,Ge.g,y.bT,y.SJ],styles:["body[_ngcontent-%COMP%]{overflow-y:auto}.add-homework--form[_ngcontent-%COMP%]{background-color:#fff;padding:10px 8px;border:1px solid rgb(236,236,236);border-radius:5px}.add-homework--form__label[_ngcontent-%COMP%]{padding:.75rem;align-self:center;font-weight:400;line-height:1.5;color:#495057;font-size:1rem;background-color:#e9ecef;border:1px solid #ced4da;border-bottom-left-radius:.25rem;border-top-left-radius:.25rem}.add-homework--form__title[_ngcontent-%COMP%]{padding:.75rem;align-self:center;font-weight:400;line-height:1.5;color:#495057;font-size:1rem;background-color:#e9ecef;border:1px solid #ced4da;border-radius:5px}.add-homework--form__input[_ngcontent-%COMP%]{height:100%;border-left:0px;border-top-left-radius:0;border-bottom-left-radius:0}.add-homework--form__border[_ngcontent-%COMP%]{border:1px solid #ced4da;height:100%;border-left:none;border-radius:0 4px 4px 0/0px 4px 4px 0px}.add-homework--form__content[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgb(244,244,244);border-radius:3px;padding:10px}.pb-80[_ngcontent-%COMP%]{padding-bottom:80px}.mh-250[_ngcontent-%COMP%]{min-height:250px}.none-top__border[_ngcontent-%COMP%]{border-top-left-radius:0;border-top-right-radius:0}.none-bottom__border[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.button-save[_ngcontent-%COMP%]{background-color:#169bd5;border:none;color:#fff;padding:8px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:14px;margin:4px 16px;cursor:pointer;border-radius:5px;border:1px solid rgb(22,155,213);text-transform:uppercase}.button-save[_ngcontent-%COMP%]:hover{background-color:#0069d9;border-color:#0069d9}.button-not-published[_ngcontent-%COMP%]{background:#28a745;color:#fff;transition:all .5s;border:none;padding:8px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:14px;margin:4px 0 4px 16px;cursor:pointer;border:1px solid #28a745;border-radius:5px;text-transform:uppercase}.button-not-published[_ngcontent-%COMP%]:hover{background-color:#218838;border-color:#1e7e34}.button-cancel[_ngcontent-%COMP%]{background-color:#fff!important;border:none;color:#333;padding:8px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:14px;margin:4px 2px;cursor:pointer;border:1px solid rgb(121,121,121);border-radius:5px;text-transform:uppercase}.button-cancel[_ngcontent-%COMP%]:hover{background-color:#00000005!important}.files[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f2f2f2;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e5e5e5;border-left:0px;border-right:0px;border-radius:0;box-shadow:none;margin:0 -24px}.files[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:10px 20px}.file[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}.files-custom[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%]:disabled{background-color:#0000001f!important;border-color:#0000001f!important}.library[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f9f9f9;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e9e9e9;border-radius:5px;box-shadow:none;padding:10px}.library--breadcum[_ngcontent-%COMP%]{background:inherit;background-color:#fafafa;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#f1f1f1;border-bottom:0px;border-radius:3px 3px 0 0/3px 3px 0px 0px;box-shadow:none}.library--content[_ngcontent-%COMP%]{border-width:0px;height:100px;background:inherit;background-color:#fff;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#f4f4f4;border-radius:0 0 3px 3px/0px 0px 3px 3px;box-shadow:none;padding:10px}  .mat-checkbox-layout{white-space:normal!important}.link__color[_ngcontent-%COMP%]{color:#2262ae!important}.link__hover[_ngcontent-%COMP%]:hover{color:#0a8f9e!important}@media screen and (max-width: 768px){.px-00[_ngcontent-%COMP%]{padding-left:0;padding-right:0;margin-top:12px}}@media screen and (max-width: 576px){.button-save[_ngcontent-%COMP%], .button-cancel[_ngcontent-%COMP%]{padding:8px 16px}}  .mat-checkbox-checked.mat-accent.mat-checkbox-disabled .mat-checkbox-background, .mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#3f51b5!important}"]}),n})();var Te=_(34782),he=_(69287);function wt(n,s){if(1&n&&(e.TgZ(0,"div",3)(1,"h5",7),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.s9C("matTooltip",t.className),e.xp6(1),e.Oqu(t.className)}}function kt(n,s){1&n&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_moi_tao")))}function vt(n,s){1&n&&(e.TgZ(0,"span",21),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_moi_tao")))}const xt=function(n){return[n]},bt=function(n){return{backto:n}};let Ze=(()=>{class n extends L.Q{constructor(t){super(t),this.commonService=t,this.isMobile=!1,this.classId="0",this.backToLink="",this.name="",this.className="",this.totalStudent=0,this.totalTakeTest=0,this.homeworkId=0,this.hashId="",this.isNew=0,this.redirectId=new e.vpe}handleRedirect(t){this.redirectId.emit(t)}checkWidth(){this.isMobile=window.innerWidth<768}copyLinkToClipboard(){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${this.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_duong_dan_nop_bai_thanh_cong")}onResize(t){this.isMobile=t.target.innerWidth<768}ngOnInit(){this.checkWidth(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-home-work-file"]],inputs:{classId:"classId",backToLink:"backToLink",name:"name",className:"className",dateCreated:"dateCreated",deadLine:"deadLine",totalStudent:"totalStudent",totalTakeTest:"totalTakeTest",homeworkId:"homeworkId",hashId:"hashId",isNew:"isNew"},outputs:{redirectId:"redirectId"},features:[e.qOj],decls:37,vars:36,consts:[[1,"row","mx-0","home-work-file","align-items-center","my-2",3,"resize"],[1,"col-9","pr-0","ellipsis-text",3,"click"],[1,"link-text",3,"routerLink","queryParams"],[1,"d-flex","align-items-center"],[1,"align-items-center"],[3,"src"],[1,"p-2","align-items-center","ellipsis-text"],[1,"home-work-name","font-size-12","ellipsis-text",3,"matTooltip"],["class","d-flex align-items-center",4,"ngIf"],[1,"font-size-12","m-0",2,"color","#000"],["class","badge badge-success ml-2",4,"ngIf"],[1,"p-0","m-0","font-size-12",2,"color","#0EAFC0"],[1,"col-3",2,"cursor","default"],[1,"d-flex","flex-column","text-center"],["class","badge badge-success",4,"ngIf"],[1,"p-0","m-0","home-work-text"],[1,"p-0","m-0"],[1,"d-flex","justify-content-center"],["matTooltip","Copy link",1,"btn-copy",3,"cdkCopyToClipboard","click"],[2,"font-size","16px","color","#3c8dbc"],[1,"badge","badge-success","ml-2"],[1,"badge","badge-success"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("resize",function(r){return o.onResize(r)},!1,e.Jf7),e.TgZ(1,"div",1),e.NdJ("click",function(){return o.handleRedirect(o.homeworkId)}),e.TgZ(2,"a",2),e.ALo(3,"mylocalize"),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.ALo(7,"convertCdn"),e.qZA(),e.TgZ(8,"div",6)(9,"h4",7),e._uU(10),e.qZA(),e.YNc(11,wt,3,2,"div",8),e.TgZ(12,"div",3)(13,"p",9),e._uU(14),e.ALo(15,"mytranslate"),e.ALo(16,"date"),e.qZA(),e.YNc(17,kt,3,3,"span",10),e.qZA(),e.TgZ(18,"p",11),e._uU(19),e.ALo(20,"mytranslate"),e.ALo(21,"date"),e.qZA()()()()(),e.TgZ(22,"div",12)(23,"div",13)(24,"div"),e.YNc(25,vt,3,3,"span",14),e.qZA(),e.TgZ(26,"div")(27,"h4",15),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()(),e.TgZ(30,"div")(31,"p",16),e._uU(32),e.qZA()(),e.TgZ(33,"div",17)(34,"button",18),e.NdJ("click",function(){return o.showCopySuccess()}),e.TgZ(35,"mat-icon",19),e._uU(36,"file_copy"),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.VKq(32,xt,e.lcZ(3,16,"/admin/homework/score-list/"+o.classId+"/"+o.homeworkId+"/"+o.hashId)))("queryParams",e.VKq(34,bt,o.backToLink)),e.xp6(4),e.Q6J("src",e.lcZ(7,18,"azota_assets/images/u416.svg"),e.LSH),e.xp6(3),e.s9C("matTooltip",o.name),e.xp6(1),e.Oqu(o.name),e.xp6(1),e.Q6J("ngIf",null!=o.className&&""!=o.className),e.xp6(3),e.AsE("",e.lcZ(15,20,"lang_auto_ngay_tao")," : ",e.xi3(16,22,o.dateCreated,"dd/MM/yyyy HH:mm"),""),e.xp6(3),e.Q6J("ngIf",1==o.isNew&&0==o.isMobile),e.xp6(2),e.AsE("",e.lcZ(20,25,"lang_auto_thoi_gian_nop_bai")," : ",null!==o.deadLine?e.xi3(21,27,o.deadLine,"dd/MM/yyyy HH:mm"):"Kh\xf4ng th\u1eddi h\u1ea1n"," "),e.xp6(6),e.Q6J("ngIf",1==o.isNew&&1==o.isMobile),e.xp6(3),e.Oqu(e.lcZ(29,30,"lang_auto_da_nop")),e.xp6(4),e.AsE("",null!=o.totalTakeTest?o.totalTakeTest:0,"/",null!=o.totalStudent?o.totalStudent:0,""),e.xp6(2),e.Q6J("cdkCopyToClipboard",o.copyLinkToClipboard()))},dependencies:[Z.yS,k.O5,he.i3,U.Hw,G.gM,k.uU,y.mp,y.bT,y.BI],styles:[".home-work-file[_ngcontent-%COMP%]{background-color:#fff;box-shadow:none;border:1px solid rgb(236,236,236);border-radius:5px;cursor:pointer}.home-work-name[_ngcontent-%COMP%]{font-weight:500;margin:0!important}.home-work-text[_ngcontent-%COMP%]{color:#a2a2a2;font-size:12px}.font-size-12[_ngcontent-%COMP%]{font-size:12px}.btn-copy[_ngcontent-%COMP%]{margin:2px 0 0;padding:0;border:none;background-color:#fff;text-transform:inherit}.ellipsis-text[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:99%;white-space:nowrap}.block-home[_ngcontent-%COMP%]{position:relative}@media screen and (max-width: 480px){.home-copy[_ngcontent-%COMP%]{display:none}}"]}),n})();function Ct(n,s){1&n&&e._UZ(0,"azt-loading-effect")}function Ot(n,s){1&n&&(e.TgZ(0,"span",22),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}function Tt(n,s){1&n&&(e.TgZ(0,"div")(1,"div",23)(2,"div",24)(3,"p",25),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"lang_homework_classroom_list_not_found_homework")))}function Zt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-home-work-file",27),e.NdJ("redirectId",function(i){const a=e.CHM(t).$implicit,l=e.oxw(2).$implicit,c=e.oxw(3);return e.KtG(c.redirectHomework(i,l.id&&"share"!=l.id?l.id:a.classroomId?a.classroomId.toString():"0",a.hashId?a.hashId:""))}),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("classId","share"!=o.id?o.id:null==t.classroomId?null:t.classroomId.toString())("name",t.name?t.name:"")("dateCreated",t.createdAt)("deadLine",t.deadline)("totalTakeTest",t.count?t.count:0)("totalStudent",t.countStudents?t.countStudents:0)("hashId",t.hashId?t.hashId:"")("homeworkId",t.id?t.id:0)("className","share"==o.id&&t.className?t.className:"")("backToLink",i.backToLink)}}function yt(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Zt,2,10,"div",26),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.homeworks)}}function St(n,s){1&n&&e._UZ(0,"div",29)}function At(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,r=e.oxw(3);return e.KtG(r.getClassroomHomeworkInArchive(i))}),e.ALo(2,"mytranslate"),e.TgZ(3,"mat-icon"),e._uU(4,"keyboard_arrow_down"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_homework_classroom_list_see_more_old")),e.Q6J("disabled",!t.nextPage)}}function jt(n,s){if(1&n&&(e.TgZ(0,"div",28),e.YNc(1,St,1,0,"div",11),e.YNc(2,At,5,4,"ng-container",12),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.isLoadingPage),e.xp6(1),e.Q6J("ngIf",!t.isLoadingPage)}}const Mt=function(n){return{"pb-0":n}},ye=function(n){return[n]};function Ht(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"p",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(3);return e.KtG(a.goToStudentList(r.id?r.id:"0"))}),e._uU(5),e.qZA(),e.YNc(6,Ot,3,3,"span",18),e.ALo(7,"fullPermission"),e.qZA(),e.TgZ(8,"div",19)(9,"a",20),e.ALo(10,"localize"),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()(),e.YNc(13,Tt,6,3,"div",12),e.YNc(14,yt,2,1,"div",12),e.YNc(15,jt,3,2,"div",21),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(16,Mt,1==(null==t.homeworks?null:t.homeworks.length))),e.xp6(3),e.s9C("matTooltip",t.name),e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",0==o.checkPermissionObj(e.xi3(7,9,t.permissionObj,"classroom"))),e.xp6(3),e.Q6J("routerLink",e.VKq(18,ye,e.lcZ(10,12,"/admin/homework/homework-list/"+t.id))),e.xp6(2),e.Oqu(e.lcZ(12,14,"lang_auto_xem_tat_ca")),e.xp6(2),e.Q6J("ngIf",0==(null==t.homeworks?null:t.homeworks.length)&&!t.nextPage),e.xp6(1),e.Q6J("ngIf",t.homeworks&&t.homeworks.length>0),e.xp6(1),e.Q6J("ngIf",t.homeworks&&t.homeworks.length<2)}}function Lt(n,s){1&n&&e._UZ(0,"div",29)}function It(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.seeMore())}),e.ALo(2,"mytranslate"),e.TgZ(3,"mat-icon"),e._uU(4,"keyboard_arrow_down"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_buttom_see_more")),e.Q6J("disabled",!t.nextPage)}}function Nt(n,s){if(1&n&&(e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"a",8),e.ALo(4,"localize"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()(),e.TgZ(7,"div",6),e.YNc(8,Ht,16,20,"div",9),e.qZA(),e.TgZ(9,"div",10),e.YNc(10,Lt,1,0,"div",11),e.YNc(11,It,5,4,"ng-container",12),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("routerLink",e.VKq(9,ye,e.lcZ(4,5,"/admin/homework/add-new-homework/0"))),e.xp6(2),e.hij("+ ",e.lcZ(6,7,"lang_homework_classroom_list_create_homework"),""),e.xp6(3),e.Q6J("ngForOf",t.classroomObjs),e.xp6(2),e.Q6J("ngIf",1==t.loadingMore),e.xp6(1),e.Q6J("ngIf",0==t.loadingMore)}}function Pt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"a",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.redirectToClassList())}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,3,"lang_homework_classroom_list_tutorial_header"),' "'),e.xp6(3),e.hij(" ",e.lcZ(5,5,"lang_homework_classroom_list_tutorial_center")," "),e.xp6(2),e.hij('" ',e.lcZ(7,7,"lang_homework_classroom_list_tutorial_end"),". "))}function Jt(n,s){if(1&n&&(e.YNc(0,Nt,12,11,"div",3),e.YNc(1,Pt,8,9,"ng-template",null,4,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.classroomObjs.length&&o.classroomObjs.length>1)("ngIfElse",t)}}let pe=(()=>{class n extends L.Q{constructor(t,o,i,r,a){super(o),this.activeRoute=t,this.commonService=o,this.classroomService=i,this.homeworkService=r,this.browserStorageService=a,this.classroomObjs=[],this.nextPage="",this.loadingMore=!1,this.curPage=1,this.backToLink="/admin/homework/classes/"+this.curPage}getAllClass(){this.subscriptions.add(this.classroomService.apiClassroomGetInfoForClassroomObjsGet(this.nextPage).subscribe(t=>{var o,i,r,a,l;if(1===t.success){this.classroomObjs=this.classroomObjs.concat(null!==(i=null===(o=t.data)||void 0===o?void 0:o.classroomObjs)&&void 0!==i?i:[]);for(let c=0;c<this.classroomObjs.length;c++)this.classroomObjs[c].isLoadingPage=!1;this.nextPage=null!==(a=null===(r=t.data)||void 0===r?void 0:r.nextPage)&&void 0!==a?a:"",this.successStatusObj()}else this.errorStatusObj(null!==(l=t.message)&&void 0!==l?l:"",!0);this.loadingMore=!1}))}getClassroomHomeworkInArchive(t){var o,i;t.isLoadingPage=!0,this.subscriptions.add(this.homeworkService.apiHomeworkGetObjsAndPermissionsByClassroomGet(null!==(o=t.id)&&void 0!==o?o:"0",null!==(i=t.nextPage)&&void 0!==i?i:"").subscribe(r=>{var a,l,c,m;if(1==r.success)for(let h=0;h<this.classroomObjs.length;h++)this.classroomObjs[h].id==t.id&&(this.classroomObjs[h].nextPage=null===(a=r.data)||void 0===a?void 0:a.nextPage,this.classroomObjs[h].homeworks=(null!==(l=this.classroomObjs[h].homeworks)&&void 0!==l?l:[]).concat(null!==(m=null===(c=r.data)||void 0===c?void 0:c.homeworkObjs)&&void 0!==m?m:[]));t.isLoadingPage=!1}))}redirectToClassList(){this.commonService.myNavigation("/admin/student/manage-class/0")}redirectHomework(t,o,i){this.commonService.myNavigation("/admin/homework/score-list/"+o+"/"+t+"/"+i)}goToStudentList(t){"share"!=t&&this.commonService.myNavigation("/admin/student/class-details/"+t)}redirectToStudentList(t){this.commonService.myNavigation("/admin/student/class-details/"+t)}checkPermissionObj(t){return t}seeMore(){this.loadingMore=!0,this.curPage=this.curPage+1,this.getAllClass()}ngOnInit(){(0,V.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let t=Number(this.commonService.getMyParam(this.activeRoute,"page"));this.backToLink="/admin/homework/classes/"+t,this.initStatusObj(),this.getAllClass()}),this.commonService.translateMetaData({title:"lang_cms_homework_classroom_list_title",description:"lang_cms_homework_classroom_list_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.browserStorageService.clearSimpleSessionStorage(),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.gz),e.Y36(I.v),e.Y36(Y.um),e.Y36(Y.Lk),e.Y36(Te.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-classes"]],features:[e.qOj],decls:5,vars:6,consts:[[3,"headerTitle","headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["class","container my-3 pb-80",4,"ngIf","ngIfElse"],["noData",""],[1,"container","my-3","pb-80"],[1,"row"],[1,"col-12","text-right"],[1,"btn","btn-success",3,"routerLink"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-12","text-center","mt-2"],["class","spinner-border text-secondary","role","status",4,"ngIf"],[4,"ngIf"],[1,"col-md-4"],[1,"classes-remake","height-default",3,"ngClass"],[1,"row","m-0","p-0","align-items-center"],[1,"col-8","text-left","text-ellipsis"],[1,"m-0","p-0","text-ellipsis","clickable",2,"vertical-align","middle",3,"matTooltip","click"],["class","ml-2 badge badge-info","style","vertical-align: middle; margin-bottom: 2px;",4,"ngIf"],[1,"col-4","text-right"],[1,"text-right","m-0","p-0",3,"routerLink"],["class","clickable center-pos",4,"ngIf"],[1,"ml-2","badge","badge-info",2,"vertical-align","middle","margin-bottom","2px"],[1,"row","text-center","block-null"],[1,"col-12"],[1,"p-0","m-0"],[4,"ngFor","ngForOf"],[3,"classId","name","dateCreated","deadLine","totalTakeTest","totalStudent","hashId","homeworkId","className","backToLink","redirectId"],[1,"clickable","center-pos"],["role","status",1,"spinner-border","text-secondary"],["mat-button","",3,"matTooltip","disabled","click"],["mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"],[1,"text-center","p-5"],[2,"color","#2361ae","font-weight","bold",3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"header-backend",0),e.ALo(1,"mytranslate"),e.YNc(2,Ct,1,0,"azt-loading-effect",1),e.YNc(3,Jt,3,2,"ng-template",null,2,e.W1O)),2&t){const i=e.MAs(4);e.Q6J("headerTitle",e.lcZ(1,4,"lang_homework_classroom_list_header_title"))("headerBackTolink","/admin/dashboard"),e.xp6(2),e.Q6J("ngIf",o.statusObj.loading&&0==o.loadingMore)("ngIfElse",i)}},dependencies:[k.mk,k.sg,k.O5,Z.yS,B.lW,U.Hw,G.gM,X.Q,Ze,ee.p,N.lO,y.bT,y.Gf],styles:[".classes-remake[_ngcontent-%COMP%]{box-shadow:0 0 5px #00000014;border-radius:5px;background-color:#f3f3f3;padding:10px;margin-bottom:15px;margin-top:15px}.pb-0[_ngcontent-%COMP%]{padding-bottom:.5px!important}.pb-80[_ngcontent-%COMP%]{padding-bottom:80px}.block-else[_ngcontent-%COMP%]{height:50vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.center-pos[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%)}.block-null[_ngcontent-%COMP%]{height:200px;align-items:center}.height-default[_ngcontent-%COMP%]{min-height:240px;position:relative}.block-else-text[_ngcontent-%COMP%]{font-size:19px;margin-bottom:25px}.text-ellipsis[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:70%;white-space:nowrap}@media screen and (max-width: 768px){.block-null[_ngcontent-%COMP%]{height:86px}.height-default[_ngcontent-%COMP%]{height:auto}}.btn-all-add[_ngcontent-%COMP%]{margin:auto;background-color:#fff}"]}),n})();var te=_(24096),qt=_(43767),Ut=_(74107),Dt=_(63910);function Et(n,s){if(1&n&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Ft(n,s){1&n&&e._UZ(0,"azt-loading-effect")}function Qt(n,s){1&n&&(e.TgZ(0,"div",18)(1,"span",19),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,1,"lang_homework_content_store_not_found_search"),"!"))}function zt(n,s){1&n&&(e.TgZ(0,"span",33),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_homework_content_store_free")))}function Yt(n,s){if(1&n&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",e.lcZ(2,1,t.amount)," Azo")}}function Bt(n,s){1&n&&(e.TgZ(0,"span",35),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_homework_content_store_bought")))}function Gt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.downloadFrontFileContent(i.id?i.id:0))}),e.TgZ(1,"mat-icon",37),e._uU(2,"save_alt"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_homework_content_store_download")," "))}function Rt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.openBuyContentDialog(i,r.userObj&&r.userObj.amount?r.userObj.amount:0))}),e.TgZ(1,"mat-icon",37),e._uU(2,"shopping_cart"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_buttom_buy")," "))}function Kt(n,s){if(1&n&&(e.TgZ(0,"div",22)(1,"div",23),e._UZ(2,"img",24),e.ALo(3,"mycdn"),e.TgZ(4,"div",25)(5,"p",26),e._uU(6),e.qZA(),e.TgZ(7,"div",27),e.YNc(8,zt,3,3,"span",28),e.YNc(9,Yt,3,3,"span",29),e.YNc(10,Bt,3,3,"span",30),e.YNc(11,Gt,5,3,"a",31),e.YNc(12,Rt,5,3,"a",32),e.qZA()()()()),2&n){const t=s.$implicit;e.xp6(2),e.s9C("src",e.lcZ(3,7,t.thumb),e.LSH),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Q6J("ngIf",0==t.amount),e.xp6(1),e.Q6J("ngIf",0!=t.amount&&-1!=t.amount),e.xp6(1),e.Q6J("ngIf",-1==t.amount),e.xp6(1),e.Q6J("ngIf",0==t.amount||-1==t.amount),e.xp6(1),e.Q6J("ngIf",(t&&t.amount?t.amount:0)>0)}}function Wt(n,s){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,Kt,13,9,"div",21),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.objs)}}function $t(n,s){if(1&n&&(e.YNc(0,Qt,4,3,"div",16),e.YNc(1,Wt,2,1,"ng-template",null,17,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.isNullData)("ngIfElse",t)}}function Vt(n,s){if(1&n&&(e.TgZ(0,"div",12)(1,"p",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p")(5,"span",5),e._uU(6),e.qZA()(),e.TgZ(7,"span",14),e._uU(8),e.ALo(9,"mytranslate"),e.TgZ(10,"span",15),e._uU(11),e.ALo(12,"number"),e.qZA(),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"lang_homework_content_store_definitely_want_to_buy")),e.xp6(4),e.hij(" ",t.content.name,""),e.xp6(2),e.hij(" ",e.lcZ(9,7,"lang_homework_content_store_with_price")," "),e.xp6(3),e.hij("",e.lcZ(12,9,t.content.amount)," Azo"),e.xp6(2),e.hij(" ",e.lcZ(14,11,"lang_homework_content_store_not"),"?")}}function Xt(n,s){if(1&n&&(e.TgZ(0,"div",12)(1,"p",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p")(5,"span",5),e._uU(6),e.qZA()(),e.TgZ(7,"span",14),e._uU(8),e.ALo(9,"mytranslate"),e.TgZ(10,"span",15),e._uU(11),e.ALo(12,"number"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"lang_homework_content_store_not_enough_azo")),e.xp6(4),e.hij(" ",t.content.name,""),e.xp6(2),e.hij(" ",e.lcZ(9,6,"lang_homework_content_store_with_price")," "),e.xp6(3),e.hij("",e.lcZ(12,8,t.content.amount)," Azo")}}function eo(n,s){1&n&&(e.TgZ(0,"div",4)(1,"span",16),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_homework_content_store_please"),"!"))}function to(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.buyContent())}),e.TgZ(1,"mat-icon",18),e._uU(2,"shopping_cart"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_buttom_buy")," "))}function oo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.gotoPack())}),e.TgZ(1,"mat-icon",18),e._uU(2,"account_balance_wallet"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_homework_content_store_recharge")," "))}let no=(()=>{class n extends L.Q{constructor(t,o,i,r,a,l){super(o),this.activeRoute=t,this.commonService=o,this.userInfoService=i,this.frontFileContentService=r,this.formBuilder=a,this.dialog=l,this.options={path:"https://assets8.lottiefiles.com/packages/lf20_eebdoe5f.json"},this.isNullData=!1,this.form=new d.nJ({}),this.subscriptions=new te.w,this.objs=[],this.categories=[],this.userObj={},this.selectedValue=""}getData(){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet().subscribe(t=>{var o,i,r;1==t.success?(this.objs=null!==(i=null===(o=t.data)||void 0===o?void 0:o.objs)&&void 0!==i?i:new Array,this.successStatusObj()):this.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:"")}))}getInfo(){this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoInfoGet().subscribe(t=>{var o,i;1==t.success?(this.userObj=null!==(o=t.data)&&void 0!==o?o:{},this.successStatusObj()):this.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"")}))}getCategories(){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetCategoriesObjsGet().subscribe(t=>{var o,i,r;1==t.success?(this.categories=null!==(i=null===(o=t.data)||void 0===o?void 0:o.objs)&&void 0!==i?i:new Array,this.successStatusObj()):this.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:"")}))}openBuyContentDialog(t,o){this.openDialog(!(t.amount&&t.amount>o),t,o)}openDialog(t,o,i){this.dialog.open(io,{width:"380px",panelClass:"buyContentDialogBox",data:{status:t,content:o,userAmount:i}}).afterClosed().subscribe(a=>{})}selectValue(t){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet(void 0,t).subscribe(o=>{var i,r,a,l,c;1==o.success?(null===(i=o.data)||void 0===i?void 0:i.objs)&&(null===(r=o.data)||void 0===r?void 0:r.objs.length)>0?(this.isNullData=!1,this.objs=null!==(l=null===(a=o.data)||void 0===a?void 0:a.objs)&&void 0!==l?l:new Array,this.successStatusObj()):(this.isNullData=!0,this.stopStatusObj()):this.errorStatusObj(null!==(c=o.message)&&void 0!==c?c:"")}))}onSearch(){var t=this.commonService.getFormObj(this.form);this.initStatusObj(),""==t.searchContent?(this.isNullData=!1,this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet().subscribe(o=>{var i,r,a;1==o.success?(this.objs=null!==(r=null===(i=o.data)||void 0===i?void 0:i.objs)&&void 0!==r?r:new Array,this.successStatusObj()):this.errorStatusObj(null!==(a=o.message)&&void 0!==a?a:"")}))):this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet(t.searchContent).subscribe(o=>{var i,r,a,l,c;1==o.success?((null===(i=o.data)||void 0===i?void 0:i.objs)&&0==(null===(r=o.data)||void 0===r?void 0:r.objs.length)?this.isNullData=!0:this.objs=null!==(l=null===(a=o.data)||void 0===a?void 0:a.objs)&&void 0!==l?l:new Array,this.successStatusObj()):this.errorStatusObj(null!==(c=o.message)&&void 0!==c?c:"")}))}downloadFrontFileContent(t){this.frontFileContentService.apiFrontFileContentGetFileLinkGet(t).subscribe(o=>{var i,r;if(1==o.success){var a=document.createElement("a");document.body.appendChild(a),a.href=null!==(r=null===(i=o.data)||void 0===i?void 0:i.link)&&void 0!==r?r:"",a.click()}else this.showErrorSnack("lang_cms_content_store_download_fail")})}ngOnInit(){(0,V.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([t,o])=>{this.getData(),this.getInfo(),this.getCategories()}),this.form=this.formBuilder.group({searchContent:new d.p4("",d.kI.required)}),this.commonService.translateMetaData({title:"lang_cms_homework_content_store_title",description:"lang_cms_homework_content_store_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.subscriptions.unsubscribe(),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.gz),e.Y36(I.v),e.Y36(Y.$C),e.Y36(qt.c),e.Y36(d.QS),e.Y36(A.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-content-store"]],features:[e.qOj],decls:21,vars:14,consts:[[3,"headerTitle","headerBackTolink"],[1,"container-fluid","component-wrap","W1200","m-auto","mt-3","pb-mb-80","pb-4"],[3,"formGroup"],[1,"row","justify-content-between"],[1,"col-md-8","mt-2"],[1,"search-bar","form-group"],[1,"input-group-append"],["type","text","formControlName","searchContent",1,"form-control",3,"placeholder","keyup.enter"],["id","basic-addon2",1,"input-group-text",3,"click"],[1,"col-md-4","content-store-select"],["appearance","fill"],["name","category",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"value"],["class","text-center mt-3 mb-3",4,"ngIf","ngIfElse"],["HasData",""],[1,"text-center","mt-3","mb-3"],[1,"h3"],[1,"row","mt-2"],["class","col-12 col-sm-4 col-md-4 col-lg-4 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-sm-4","col-md-4","col-lg-4","mb-2"],[1,"card"],["alt","thumbnail",1,"card-img-top",3,"src"],[1,"card-body"],[1,"truncate","card-text"],[1,"d-flex","justify-content-between","actionZone"],["class","azo-price text-warning",4,"ngIf"],["class","azo-price text-danger",4,"ngIf"],["class","azo-price ",4,"ngIf"],["class","actionBtn clickable",3,"click",4,"ngIf"],["class","actionBtn","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"azo-price","text-warning"],[1,"azo-price","text-danger"],[1,"azo-price"],[1,"actionBtn","clickable",3,"click"],[2,"vertical-align","sub"],[1,"actionBtn",2,"cursor","pointer",3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"header-backend",0),e.ALo(1,"mytranslate"),e.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"input",7),e.NdJ("keyup.enter",function(){return o.onSearch()}),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return o.onSearch()}),e.TgZ(11,"mat-icon"),e._uU(12,"search"),e.qZA()()()()(),e.TgZ(13,"div",9)(14,"mat-form-field",10)(15,"mat-select",11),e.NdJ("selectionChange",function(r){return o.selectValue(r.value)}),e.ALo(16,"mytranslate"),e.YNc(17,Et,2,2,"mat-option",12),e.qZA()()()()(),e.YNc(18,Ft,1,0,"azt-loading-effect",13),e.YNc(19,$t,3,2,"ng-template",null,14,e.W1O),e.qZA()),2&t){const i=e.MAs(20);e.Q6J("headerTitle",e.lcZ(1,8,"lang_homework_content_store_content_bank"))("headerBackTolink","/admin/dashboard"),e.xp6(3),e.Q6J("formGroup",o.form),e.xp6(5),e.s9C("placeholder",e.lcZ(9,10,"lang_homework_content_store_search")),e.xp6(7),e.s9C("placeholder",e.lcZ(16,12,"lang_homework_content_store_all")),e.xp6(2),e.Q6J("ngForOf",o.categories),e.xp6(1),e.Q6J("ngIf",o.statusObj.loading)("ngIfElse",i)}},dependencies:[k.sg,k.O5,we.ey,U.Hw,me.KE,Ut.gD,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,X.Q,ee.p,re.M,k.JJ,y.bT,y.GT],styles:[".dashboard__header[_ngcontent-%COMP%]{background-color:#0089a7;border-radius:5px}.border-test[_ngcontent-%COMP%]{border:1px solid red;min-height:50px}.azo-price[_ngcontent-%COMP%]{padding-top:5px;font-weight:500;font-size:1.2rem}.content-store-select[_ngcontent-%COMP%]{margin-top:5px}.card-text[_ngcontent-%COMP%]{display:block!important;max-width:245px!important}.content-header[_ngcontent-%COMP%]{background:inherit;background-color:#0089a7;padding:20px 0}.user_amount[_ngcontent-%COMP%]{background:inherit;background-color:#009cbe;border:none;border-radius:5px;padding:10px;box-shadow:none}.user_amount[_ngcontent-%COMP%]:hover{text-decoration:none}.mat-card-avatar[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;flex-shrink:0;object-fit:cover}@media (max-width: 992px){.dashboard__header[_ngcontent-%COMP%]{background-color:#0089a7;margin-top:-15px;margin-left:-15px;margin-right:-15px;border-radius:0}}@media (max-width: 768px){.azo-price[_ngcontent-%COMP%]{padding-top:5px;font-weight:400;font-size:14px;text-align:center;position:absolute;left:20px}.actionZone[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center!important}.card-text[_ngcontent-%COMP%]{display:block!important;max-width:120px}.header-col-center[_ngcontent-%COMP%]{text-align:center!important;display:block!important}.header-col-center[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;margin-bottom:10px!important;text-align:center!important;display:inline-flex!important}.user_amount[_ngcontent-%COMP%]{margin-left:0!important;margin-bottom:10px!important}.content-header[_ngcontent-%COMP%]{padding:20px 0 0}}"]}),n})(),io=(()=>{class n extends L.Q{constructor(t,o,i,r){super(i),this.dialogRef=t,this.paymentService=o,this.commonService=i,this.data=r,this.subscriptions=new te.w,this.content={}}getData(){this.initStatusObj(),this.data.content?(this.content=this.data.content,this.successStatusObj()):this.errorStatusObj("lang_auto_khong_tai_duoc_du_lieu")}buyContent(){this.initStatusObj(),this.subscriptions.add(this.paymentService.apiPaymentBuyFileContentByAzoPost(this.content.id).subscribe(t=>{var o;1==t.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_ban_da_mua_thanh_cong"),this.onNoClick(),setTimeout(()=>{document.location.reload()},3e3)):(this.errorStatusObj(null!==(o=t.message)&&void 0!==o?o:"",!0),this.showErrorSnack("lang_auto_thanh_toan_khong_thanh_cong"),this.onNoClick(),setTimeout(()=>{document.location.reload()},3e3))}))}gotoPack(){this.onNoClick(),this.commonService.myNavigation("/payment/azo-pack")}ngOnInit(){this.getData(),super.ngOnInit()}onNoClick(){this.dialogRef.close()}ngOnDestroy(){this.subscriptions.unsubscribe(),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.so),e.Y36(Dt.t),e.Y36(I.v),e.Y36(A.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["buy-content-dialog"]],features:[e.qOj],decls:21,vars:16,consts:[[3,"hidden"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"text-center"],[1,"h5"],["class","text-left","style","border: 1px dashed red; padding: 10px 5px; border-radius: 5px;",4,"ngIf"],["class","text-center",4,"ngIf"],["mat-dialog-actions","",1,"float-right"],[1,"azt-block-button"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"click"],[1,"text-left",2,"border","1px dashed red","padding","10px 5px","border-radius","5px"],[1,"h5","text-danger"],[1,"h5","mt-1"],[1,"text-danger"],[1,"h6","mt-2","mb-1"],[1,"btn","btn-primary",3,"click"],[2,"font-size","23px","vertical-align","sub"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4,"..."),e.qZA()()()(),e.TgZ(5,"div",0)(6,"div",4)(7,"p",5),e._uU(8),e.ALo(9,"mytranslate"),e.ALo(10,"number"),e.qZA()(),e.YNc(11,Vt,15,13,"div",6),e.YNc(12,Xt,13,10,"div",6),e.YNc(13,eo,4,3,"div",7),e.qZA(),e.TgZ(14,"div",8)(15,"div",9),e.YNc(16,to,5,3,"button",10),e.YNc(17,oo,5,3,"button",10),e.qZA(),e.TgZ(18,"button",11),e.NdJ("click",function(){return o.onNoClick()}),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()),2&t&&(e.Q6J("hidden",!o.statusObj.loading),e.xp6(5),e.Q6J("hidden",o.statusObj.loading),e.xp6(3),e.AsE("",e.lcZ(9,10,"lang_homework_content_store_having")," ",e.lcZ(10,12,o.data.userAmount)," Azo"),e.xp6(3),e.Q6J("ngIf",o.data.status),e.xp6(1),e.Q6J("ngIf",!o.data.status),e.xp6(1),e.Q6J("ngIf",!o.data.status),e.xp6(3),e.Q6J("ngIf",o.data.status),e.xp6(1),e.Q6J("ngIf",!o.data.status),e.xp6(2),e.Oqu(e.lcZ(20,14,"lang_buttom_cancel")))},dependencies:[k.O5,A.H8,U.Hw,k.JJ,y.bT],encapsulation:2}),n})();function ro(n,s){if(1&n&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.className,", ")}}function ao(n,s){if(1&n&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.className," ")}}function so(n,s){if(1&n&&(e.TgZ(0,"span",7),e.YNc(1,ro,2,1,"span",13),e.YNc(2,ao,2,1,"span",13),e.qZA()),2&n){const t=s.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t<o.listHomework.length-1),e.xp6(1),e.Q6J("ngIf",t==o.listHomework.length-1)}}function lo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"p",18),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",19)(5,"button",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.showCopySuccess())}),e.TgZ(6,"span",21)(7,"mat-icon",22),e._uU(8,"file_copy"),e.qZA(),e._uU(9," \xa0Copy link "),e.qZA()()()()}if(2&n){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.s9C("matTooltip",t.className),e.xp6(1),e.AsE("",e.lcZ(3,4,"lang_homework_create_homework_success_class")," : ",t.className,""),e.xp6(3),e.Q6J("cdkCopyToClipboard",o.copylinkToClipboard(t.hashId?t.hashId:""))}}function co(n,s){if(1&n&&(e.TgZ(0,"div",15),e.YNc(1,lo,10,6,"div",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.listHomework)}}function _o(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"p",25),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",19)(5,"button",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.showCopySuccess())}),e.TgZ(6,"span",21)(7,"mat-icon",22),e._uU(8,"file_copy"),e.qZA(),e._uU(9," \xa0Copy link "),e.qZA()()()()}if(2&n){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.s9C("matTooltip",t.className),e.xp6(1),e.AsE("",e.lcZ(3,4,"lang_homework_create_homework_success_class")," : ",t.className,""),e.xp6(3),e.Q6J("cdkCopyToClipboard",o.copylinkToClipboard(t.hashId?t.hashId:""))}}function mo(n,s){if(1&n&&(e.TgZ(0,"div",15),e.YNc(1,_o,10,6,"div",23),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.listHomework)}}let ho=(()=>{class n extends L.Q{constructor(t,o,i){super(i),this.activeRoute=t,this.homeworkService=o,this.commonService=i,this.subscriptions=new te.w,this.menuObjs=[],this.nameExam="",this.lstHashIds=[],this.listHomework=[]}getListHomeWork(t){this.initStatusObj(),this.subscriptions.add(this.homeworkService.apiHomeworkGetSuccessHomeworkObjsPost({homeworkHashIds:t}).subscribe(i=>{var r,a,l,c;1==i.success?(this.listHomework=null!==(a=null===(r=i.data)||void 0===r?void 0:r.objs)&&void 0!==a?a:new Array,this.nameExam=null!==(l=this.listHomework[0].name)&&void 0!==l?l:"",this.successStatusObj()):this.errorStatusObj(null!==(c=i.message)&&void 0!==c?c:"",!0)}))}callbackMenuEvent(t){}showCopySuccess(){this.showSuccessSnack("lang_cms_copy_link_success")}copylinkToClipboard(t){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${t}`}redirectClasses(){this.commonService.myNavigation("/admin/homework/classes/1")}ngOnInit(){(0,V.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var t;let o=null!==(t=this.commonService.getMyParam(this.activeRoute,"hash_ids"))&&void 0!==t?t:"",i=this.commonService.myParseJson(o);this.lstHashIds=null!=i?i:[],this.getListHomeWork(this.lstHashIds)}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.gz),e.Y36(Y.Lk),e.Y36(I.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-homework-success"]],features:[e.qOj],decls:29,vars:25,consts:[[3,"menu_objs","headerTitle","headerBackTolink","MenuEvent"],[1,"container","py-5"],[1,"row","p-0","m-0"],[1,"col-md-2","p-0","m-0"],[1,"col-md-8","p-0","m-0"],[1,"box--create"],[1,"text-center","mx-auto"],[1,"font-weight-bold"],["class","font-weight-bold",4,"ngFor","ngForOf"],["class","row p-0 m-0 pt-3",4,"ngIf"],[1,"row","p-0","m-0","pt-5"],[1,"col-12","text-center"],[1,"clickable","text--blue",3,"click"],["style","word-break: break-word;",4,"ngIf"],[2,"word-break","break-word"],[1,"row","p-0","m-0","pt-3"],["class","col-md-4 text-center pb-3 d-flex flex-col",4,"ngFor","ngForOf"],[1,"col-md-4","text-center","pb-3","d-flex","flex-col"],[1,"text--over","m-0","pb-2",3,"matTooltip"],[1,"width-100"],[1,"button--copy",3,"cdkCopyToClipboard","click"],[1,"d-flex",2,"vertical-align","middle","align-items","center"],[2,"font-size","24px","color","#3c8dbc"],["class","col-md-12 text-center pb-3 d-flex flex-col",4,"ngFor","ngForOf"],[1,"col-md-12","text-center","pb-3","d-flex","flex-col"],[1,"m-0","pb-2",3,"matTooltip"]],template:function(t,o){1&t&&(e.TgZ(0,"header-backend",0),e.NdJ("MenuEvent",function(r){return o.callbackMenuEvent(r)}),e.ALo(1,"mytranslate"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2),e._UZ(4,"div",3),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"h4",7),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"mytranslate"),e.TgZ(14,"span",7),e._uU(15),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.YNc(18,so,3,2,"span",8),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.YNc(21,co,2,1,"div",9),e.YNc(22,mo,2,1,"div",9),e.TgZ(23,"div",10)(24,"div",11)(25,"div",12),e.NdJ("click",function(){return o.redirectClasses()}),e._uU(26),e.ALo(27,"mytranslate"),e.qZA()()()()(),e._UZ(28,"div",3),e.qZA()()),2&t&&(e.Q6J("menu_objs",o.menuObjs)("headerTitle",e.lcZ(1,13,"lang_homework_create_homework_success_add_homework_success"))("headerBackTolink","/admin/homework/classes/1"),e.xp6(9),e.AsE("",e.lcZ(10,15,"lang_homework_create_homework_success_create_success")," ",o.nameExam," "),e.xp6(3),e.hij(" ",e.lcZ(13,17,"lang_homework_create_homework_success_teacher_create_success")," "),e.xp6(3),e.hij("",o.nameExam," "),e.xp6(1),e.hij("",e.lcZ(17,19,"lang_homework_create_homework_success_assigned_class")," "),e.xp6(2),e.Q6J("ngForOf",o.listHomework),e.xp6(1),e.hij(". ",e.lcZ(20,21,"lang_homework_create_homework_success_tutorial"),". "),e.xp6(2),e.Q6J("ngIf",(o.listHomework?o.listHomework.length:0)>1),e.xp6(1),e.Q6J("ngIf",1==(null==o.listHomework?null:o.listHomework.length)),e.xp6(4),e.Oqu(e.lcZ(27,23,"lang_homework_create_homework_success_back_list_homework")))},dependencies:[k.sg,k.O5,he.i3,U.Hw,G.gM,ee.p,y.bT],styles:[".box--create[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgb(236,236,236);border-radius:5px;padding:20px}.button--copy[_ngcontent-%COMP%]{background-color:#f7f7f7;border-width:1px;border-style:solid;border-color:#e8e8e8;border-radius:5px;cursor:pointer;padding:8px 18px;font-size:13px;text-transform:capitalize;color:#3c8dbc;align-items:center;vertical-align:middle}.box-class[_ngcontent-%COMP%]{flex-direction:column}.flex-col[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.text--blue[_ngcontent-%COMP%]{color:#3c8dbc}.text--over[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:99%;white-space:nowrap}@media screen and (max-width: 767px){.width-100[_ngcontent-%COMP%]{width:100%;max-width:100%}.button--copy[_ngcontent-%COMP%]{width:100%}}"]}),n})();var Se=_(94327),Ae=_(25650),ce=_(37234),po=_(296),uo=_(16031),go=_(20814),je=_(15043),fo=_(35191),wo=_(1643),Me=_(37104);function ko(n,s){1&n&&e._UZ(0,"azt-loading-effect")}function vo(n,s){1&n&&e._UZ(0,"span",31)}function xo(n,s){if(1&n&&(e.TgZ(0,"div",11),e.YNc(1,vo,1,0,"span",30),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.countDonePdf<((null==t.curExportArr?null:t.curExportArr.length)||-1)),e.xp6(1),e.lnq(" ",e.lcZ(3,4,"lang_homework_export_homework_request"),"",t.countDonePdf," / ",null==t.curExportArr?null:t.curExportArr.length," ")}}function bo(n,s){if(1&n&&(e.TgZ(0,"div",11)(1,"mat-icon",32),e._uU(2," check_circle "),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);let o;e.xp6(3),e.lnq(" ",e.lcZ(4,3,"lang_homework_export_homework_complete")," ",t.countDonePdf," / ",null!==(o=null==t.curExportArr?null:t.curExportArr.length)&&void 0!==o?o:0," ")}}const Co=function(){return{fontFamily:"font_chu_dam"}};function Oo(n,s){if(1&n&&(e.TgZ(0,"div",33)(1,"span",34),e._UZ(2,"azt-check-mark",35),e.qZA(),e.TgZ(3,"span",28),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(4);e.Q6J("ngClass",t.curAnswer.resultParse.hideMark?"":"display")("hidden",t.curAnswer.resultParse.hideMark),e.xp6(1),e.Q6J("ngStyle",e.DdM(7,Co)),e.xp6(1),e.Q6J("mark",t.curAnswer.resultParse.point),e.xp6(2),e.Oqu(e.lcZ(5,5,"lang_point"))}}const To=function(n){return{"font-family":n}};function Zo(n,s){if(1&n&&e._UZ(0,"p",36),2&n){const t=e.oxw(4);e.Q6J("ngStyle",e.VKq(2,To,null!=t.curAnswer.resultParse&&null!=t.curAnswer.resultParse.staticTextConfigParse&&t.curAnswer.resultParse.staticTextConfigParse.txtCommentFont?null==t.curAnswer.resultParse||null==t.curAnswer.resultParse.staticTextConfigParse?null:t.curAnswer.resultParse.staticTextConfigParse.txtCommentFont:"font_chu_dep"))("innerHtml",null==t.curAnswer.resultParse?null:t.curAnswer.resultParse.comment,e.oJD)}}function yo(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"img",39),e.BQk()),2&n){const t=s.$implicit,o=s.index,i=e.oxw(5);e.xp6(1),e.s9C("id","imgEmoji_"+o),e.s9C("src",i.isBase64ImageToExport?t:i.linkCdnGitHub+t,e.LSH)}}function So(n,s){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,yo,2,2,"ng-container",38),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",null==t.curAnswer.resultParse?null:t.curAnswer.resultParse.commentEmoji)}}const Ao=function(){return{}};function jo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"h1",10),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",11),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"div",11)(12,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.openDialog(i.submitedStudents))}),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.YNc(15,xo,4,6,"div",13),e.YNc(16,bo,5,5,"div",13),e.TgZ(17,"div",14)(18,"div",15)(19,"h2",16)(20,"span"),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()(),e.TgZ(23,"div",17)(24,"div",18)(25,"h3",19),e._uU(26),e.ALo(27,"mytranslate"),e.qZA(),e.TgZ(28,"h3",19),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div",20)(32,"h3",19),e._uU(33),e.ALo(34,"mytranslate"),e.qZA()()(),e.TgZ(35,"div",21)(36,"div",22),e.YNc(37,Oo,6,8,"div",23),e.TgZ(38,"div",24)(39,"div",25),e.YNc(40,Zo,1,4,"p",26),e.YNc(41,So,2,1,"div",27),e.qZA(),e.TgZ(42,"span",28),e._uU(43),e.ALo(44,"mytranslate"),e.qZA()()()()(),e._UZ(45,"azt-export-essay-template",29),e.ALo(46,"mytranslate"),e.qZA()()()()()()}if(2&n){const t=e.oxw(3);let o;e.xp6(6),e.Oqu(e.lcZ(7,21,"lang_homework_export_homework_export_pdf")),e.xp6(3),e.AsE(" ",e.lcZ(10,23,"lang_homework_export_homework_number_student_dotted"),": ",t.submitedStudents.length," "),e.xp6(3),e.Q6J("disabled",t.loadingExportBtn),e.xp6(1),e.hij(" ",e.lcZ(14,25,"lang_homework_export_homework_continue")," "),e.xp6(2),e.Q6J("ngIf",t.isProcessingPdf),e.xp6(1),e.Q6J("ngIf",((null==t.curExportArr?null:t.curExportArr.length)||-1)>0&&t.countDonePdf===(null!==(o=null==t.curExportArr?null:t.curExportArr.length)&&void 0!==o?o:0)),e.xp6(5),e.AsE("",e.lcZ(22,27,"lang_first_and_last_name"),": ",null==t.curAnswer?null:t.curAnswer.fullName,""),e.xp6(5),e.AsE("",e.lcZ(27,29,"lang_homework_export_homework_class"),": ",null==t.data.classroomObj?null:t.data.classroomObj.name,""),e.xp6(3),e.AsE("",e.lcZ(30,31,"lang_homework_export_homework_home_work"),": ",null==t.data.homeworkObj?null:t.data.homeworkObj.name,""),e.xp6(4),e.AsE("",e.lcZ(34,33,"lang_homework_export_homework_code"),": ",null==t.curAnswer?null:t.curAnswer.id,""),e.xp6(4),e.Q6J("ngIf",t.curAnswer.resultParse),e.xp6(3),e.Q6J("ngIf",null==t.curAnswer.resultParse?null:t.curAnswer.resultParse.comment),e.xp6(1),e.Q6J("ngIf",null==t.curAnswer.resultParse?null:t.curAnswer.resultParse.commentEmoji),e.xp6(2),e.Oqu(e.lcZ(44,35,"lang_homework_export_homework_comment_of_teacher")),e.xp6(2),e.Q6J("title",e.lcZ(46,37,"lang_homework_export_homework_assignment"))("result",t.curAnswer.resultParse||e.DdM(39,Ao))}}function Mo(n,s){1&n&&(e.TgZ(0,"div",40)(1,"div",41),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_homework_export_homework_request_marking")))}function Ho(n,s){if(1&n&&(e.YNc(0,jo,47,40,"div",3),e.YNc(1,Mo,4,3,"ng-template",null,4,e.W1O)),2&n){const t=e.MAs(2),o=e.oxw(2);e.Q6J("ngIf",o.submitedStudents.length>0)("ngIfElse",t)}}function Lo(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ko,1,0,"azt-loading-effect",0),e.YNc(2,Ho,3,2,"ng-template",null,2,e.W1O),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.statusObj.loading)("ngIfElse",t)}}function Io(n,s){1&n&&(e.TgZ(0,"div",42),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_homework_export_homework_request_browser")))}function No(n,s){if(1&n&&(e.TgZ(0,"mat-checkbox",10),e._uU(1),e.qZA()),2&n){const t=s.index,o=e.oxw();e.Q6J("checked",o.form.value.exports[t])("formControlName",t),e.xp6(1),e.AsE(" ",t+1,". ",o.data.resultsArr[t].fullName," ")}}const Po=function(n){return{selects:n}};let Jo=(()=>{class n extends L.Q{constructor(t,o,i,r,a,l,c,m,h,p,u,g){super(r),this.cdr=t,this.answerService=o,this.dialog=i,this.commonService=r,this.activeRoute=a,this.exportPdfConvertDataService=l,this.newPdfExportService=c,this.exportPdfUtilsService=m,this.zipdataService=h,this.cdnService=p,this.timeService=u,this.homeworkExamService=g,this.folderName="results",this.homeworkHashId="",this.homeworkId="",this.countDonePdf=0,this.isProcessingPdf=!1,this.data={},this.curAnswer={},this.submitedStudents=[],this.myZip=new Ae,this.linkCdnGitHub="https://azota889.github.io/storage_public/mnote/",this.isBase64ImageToExport=!1,this.loadingExportBtn=!1}askBeforeCloseWindow(t){return!this.isProcessingPdf||(t.returnValue=!1)}openDialog(t){this.dialog.open(qo,{width:"1100px",data:{resultsArr:t}}).afterClosed().subscribe(i=>{if(i){const r=[];for(let a=0;a<i.selects.length;a++)i.selects[a]&&r.push(t[a]);this.zipAll(r)}})}finalSaveAll(){this.myZip.generateAsync({type:"blob"}).then(t=>{var o,i,r,a;this.countDonePdf++;let l=this.commonService.createFileNameExportFile([null!==(i=null===(o=this.data.classroomObj)||void 0===o?void 0:o.name)&&void 0!==i?i:"",null!==(a=null===(r=this.data.homeworkObj)||void 0===r?void 0:r.name)&&void 0!==a?a:""])+"_homework_result.zip";(0,Se.saveAs)(t,l),console.log("after save"),this.isProcessingPdf=!1,this.cdr.detectChanges()},t=>{console.log(t)})}zipAll(t){var o,i,r,a,l,c;return(0,ae.mG)(this,void 0,void 0,function*(){this.isProcessingPdf=!0,this.loadingExportBtn=!0,document.body.style.overflow="hidden",this.countDonePdf=0,this.curExportArr=t,this.myZip=new Ae;for(const p of t){const u=yield this.answerService.apiAnswerGetObjGet(this.homeworkHashId,null===(o=p.answer)||void 0===o?void 0:o.id).toPromise();if(1==u.success){this.zipdataService.convertSubmittedAnswersObj(null===(i=u.data)||void 0===i?void 0:i.answerObj);var m=this.homeworkExamService.parserHomeworkIframeResult(null===(r=u.data)||void 0===r?void 0:r.answerObj);this.curAnswer=m||{},this.curAnswer.fullName=null!==(l=this.commonService.convertVietnameseToEnglish(null!==(a=p.fullName)&&void 0!==a?a:""))&&void 0!==l?l:"",this.curAnswer.resultParse=this.curAnswer.resultParse?yield this.exportPdfConvertDataService.processEssayResultToBase64(this.curAnswer.resultParse):this.curAnswer.resultParse,this.isBase64ImageToExport=!0;try{yield this.exportPdfUtilsService.asyncTimeout(3e3);var h=this.timeService.getCurrentSecond();console.log("Start export for "+this.curAnswer.fullName+": 0 seconds");const g=yield this.newPdfExportService.homeworkToPdf();console.log("End export: "+(this.timeService.getCurrentSecond()-h)+" seconds"),this.myZip.file(`${this.folderName}/${this.commonService.convertVietnameseToEnglish(this.curAnswer.fullName)}_${this.curAnswer.id}.pdf`,g)}catch(g){console.log(g)}this.countDonePdf<t.length-1&&this.countDonePdf++}else this.errorStatusObj(null!==(c=u.message)&&void 0!==c?c:"",!0)}this.finalSaveAll(),document.body.style.overflow="auto",setTimeout(()=>{this.loadingExportBtn=!1},2e3)})}getData(){this.homeworkId?this.answerService.apiAnswerGetStudentsHomeworkGet(parseInt(this.homeworkId,10),this.homeworkHashId).subscribe(t=>{var o,i,r,a,l,c,m,h;1==t.success?(this.zipdataService.convertStudentsHomeworkObj(null===(o=t.data)||void 0===o?void 0:o.studentObjs),this.data=null!==(i=t.data)&&void 0!==i?i:{},this.submitedStudents=t.data&&Array.isArray(null===(r=t.data)||void 0===r?void 0:r.studentObjs)?null===(a=t.data)||void 0===a?void 0:a.studentObjs.filter(p=>p.confirmedAt):new Array,this.submitedStudents.length>0?this.answerService.apiAnswerGetObjGet(this.homeworkHashId,null!==(m=null===(c=null===(l=this.submitedStudents[0])||void 0===l?void 0:l.answer)||void 0===c?void 0:c.id)&&void 0!==m?m:0).subscribe(p=>{var u,g,w;if(1==p.success){this.zipdataService.convertSubmittedAnswersObj(null===(u=p.data)||void 0===u?void 0:u.answerObj);var C=this.homeworkExamService.parserHomeworkIframeResult(null===(g=p.data)||void 0===g?void 0:g.answerObj),O=this.commonService.myClone(C);console.log(O),this.curAnswer=C||{},this.curAnswer.fullName=this.submitedStudents[0].fullName,this.successStatusObj()}else this.errorStatusObj(null!==(w=t.message)&&void 0!==w?w:"",!0)}):this.stopStatusObj()):this.errorStatusObj(null!==(h=t.message)&&void 0!==h?h:"",!0)}):(this.stopStatusObj(),this.showErrorSnack("lang_cms_export_homework_cannot_get_data"))}ngOnInit(){var t,o;if(this.homeworkHashId=null!==(t=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==t?t:"",this.isSupportedBrowswer=this.exportPdfUtilsService.isSupportedBrowswer(),this.homeworkId=null!==(o=this.activeRoute.snapshot.paramMap.get("id"))&&void 0!==o?o:"",this.isSupportedBrowswer){this.initStatusObj();var i=[{source:this.cdnService.convertLinkCdn("azota_assets/js/html2pdf.bundle.js?v=28092021"),name:"html2pdf.bundle.js"}];this.commonService.loadScriptPromises(i).then(()=>{this.commonService.translateMetaData({title:"lang_cms_export_homework_title",description:"lang_cms_export_homework_description",image:"lang_cms_test_image"}),this.getData()})}super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(ce.P),e.Y36(A.uw),e.Y36(I.v),e.Y36(Z.gz),e.Y36(po.S),e.Y36(uo.I),e.Y36(go.V),e.Y36(ie.n),e.Y36(je.U),e.Y36(_e.O),e.Y36(fo.j))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-export-homework"]],hostBindings:function(t,o){1&t&&e.NdJ("beforeunload",function(r){return o.askBeforeCloseWindow(r)},!1,e.Jf7)},features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notBrowserSupport",""],["doneLoading",""],["id","test_review_container","class","container-fluid mt-2",4,"ngIf","ngIfElse"],["noSubmit",""],["id","test_review_container",1,"container-fluid","mt-2"],["id","tabRowExam",1,"row",2,"margin-bottom","10px"],["id","test_review_area",1,"col"],["id","col_examContent_wrap",2,"width","1100px!important","margin","0 auto"],["id","mbTestContent"],[1,"text-center"],[1,"buttons-area","mb-3","text-center"],[1,"btn","btn-info",3,"disabled","click"],["class","buttons-area mb-3 text-center",4,"ngIf"],["id","multipleChoiceWrap",1,"exportPdfModeIndex",2,"padding","30px"],["id","multipleChoiceWrapHeader"],["id","mainTitle",1,"mb-1","text-center"],["id","detailInfo",1,"d-flex","justify-content-between"],["id","colLeftInfo"],[1,"mb-0"],["id","colRightInfo"],["id","teacherMessage",1,"pt-5"],[1,"contentNote"],["class","box-point",3,"ngClass","hidden",4,"ngIf"],[1,"box-msg"],[1,"note"],[3,"ngStyle","innerHtml",4,"ngIf"],["class","box-emoji",4,"ngIf"],[1,"cap"],[3,"title","result"],["style","color: darkgrey;","class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","darkgrey"],[2,"color","green","vertical-align","bottom"],[1,"box-point",3,"ngClass","hidden"],[1,"point",3,"ngStyle"],[3,"mark"],[3,"ngStyle","innerHtml"],[1,"box-emoji"],[4,"ngFor","ngForOf"],["alt","icon-emoji",1,"comment-emoji","img-fluid","mr-2",3,"id","src"],[2,"padding","50px"],[1,"alert","alert-info"],[1,"p-5","text-center","alert","alert-danger"]],template:function(t,o){if(1&t&&(e.YNc(0,Lo,4,2,"ng-container",0),e.YNc(1,Io,3,3,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isSupportedBrowswer)("ngIfElse",i)}},dependencies:[k.mk,k.sg,k.O5,k.PC,U.Hw,X.Q,wo.p,Me.B,y.bT],styles:["#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px;align-items:center}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}#multipleChoiceWrapHeader[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}#unsupportFallback[_ngcontent-%COMP%]{width:750px;height:350px;border:1px solid grey;border-radius:3px;display:flex;align-items:center;justify-content:center}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]{display:flex}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{position:absolute;top:-30px;font-family:font_chu_dep;font-weight:700;font-size:25px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-point[_ngcontent-%COMP%]{width:200px;min-width:200px;min-height:200px;border:2px solid #333;border-right:none;position:relative;display:flex;align-items:center;justify-content:center;padding:15px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-point[_ngcontent-%COMP%]   span.point[_ngcontent-%COMP%]{color:red;font-size:60px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]{border:2px solid #333;padding:15px;position:relative;flex:auto;min-height:200px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{width:100%;height:100%;border:none;color:red;font-size:24px;line-height:1.5}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{left:300px}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:#ffffffe3;width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:-4px;z-index:2}.viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%], .viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%]{display:none}#col_examContent_wrap[_ngcontent-%COMP%]{width:1100px;margin:0 auto}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:fixed;right:5px;top:50%;z-index:3;font-size:35px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background-color:#c9c9c97a;border-radius:50%;color:#fff;margin-top:-20px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:5px}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width: 320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.6117647059);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}#multipleChoiceWrap[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;padding-top:5px}}.buttons-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:none!important}.box-emoji[_ngcontent-%COMP%]{margin-top:5px;padding:5px;width:88px;display:flex}@media screen and (max-width: 1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}"]}),n})(),qo=(()=>{class n extends L.Q{constructor(t,o,i,r){super(o),this.dialogRef=t,this.commonService=o,this.fb=i,this.data=r,this.form=new d.nJ({}),this.isSelectAll=new d.p4(!1)}get exportsFormArray(){return this.form.controls.exports}get countSelected(){return this.exportsFormArray.value.filter(t=>!0===t).length}selectAll(){const t=[];this.data.resultsArr.forEach(()=>{t.push(this.isSelectAll.value)}),this.form.controls.exports.setValue(t)}ngOnInit(){this.form=this.fb.group({exports:new d.vC([],Uo(1))}),this.data.resultsArr.forEach(()=>{this.exportsFormArray.push(new d.p4(!1))}),super.ngOnInit()}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.so),e.Y36(I.v),e.Y36(d.QS),e.Y36(A.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["what-export-dialog"]],features:[e.qOj],decls:24,vars:28,consts:[[1,"text-center","mb-2"],[1,"h4"],[1,"clickable","d-flex","align-items-center",2,"font-weight","500"],["color","primary",1,"example-margin",3,"formControl","change"],["mat-dialog-content","",1,"mt-3"],[3,"formGroup"],["formArrayName","exports","ngFor","",3,"ngForOf"],[1,"text-right"],["mat-raised-button","",1,"mr-2",3,"click"],["mat-raised-button","","color","warn",3,"disabled","mat-dialog-close"],["color","primary",1,"mr-2","mb-2",3,"checked","formControlName"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()(),e.TgZ(4,"p")(5,"i"),e._uU(6),e.ALo(7,"mytranslate"),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"span",2)(10,"mat-checkbox",3),e.NdJ("change",function(){return o.selectAll()}),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"mytranslate"),e.qZA()(),e.TgZ(14,"div",4)(15,"form",5),e.YNc(16,No,2,4,"ng-template",6),e.qZA()(),e.TgZ(17,"div",7)(18,"button",8),e.NdJ("click",function(){return o.onNoClick()}),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"button",9),e._uU(22),e.ALo(23,"mytranslate"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,12,"lang_homework_export_homework_select_students_export_pdf"),"!"),e.xp6(4),e.lnq("*** ",e.lcZ(7,14,"lang_homework_export_homework_tutorial")," (",e.lcZ(8,16,"lang_homework_export_homework_choose"),": ",o.countSelected,")"),e.xp6(4),e.Q6J("formControl",o.isSelectAll),e.xp6(1),e.Oqu(o.isSelectAll.value?e.lcZ(12,18,"lang_homework_export_homework_clear_select_all"):e.lcZ(13,20,"lang_homework_export_homework_select_all")),e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("ngForOf",o.exportsFormArray.controls),e.xp6(3),e.Oqu(e.lcZ(20,22,"lang_buttom_cancel_clear")),e.xp6(2),e.Q6J("disabled",!o.form.valid)("mat-dialog-close",e.VKq(26,Po,o.exportsFormArray.value)),e.xp6(1),e.Oqu(e.lcZ(23,24,"lang_buttom_agree")))},dependencies:[k.sg,B.lW,xe.oG,A.ZT,A.xY,d._Y,d.JJ,d.JL,d.oH,d.sg,d.u,d.CE,re.M,y.bT],encapsulation:2}),n})();function Uo(n=1){return t=>t.controls.map(i=>i.value).reduce((i,r)=>r?i+r:i,0)>=n?null:{required:!0}}var E=_(65239),He=_(86317);function Do(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"azt-home-work-file",15),e.NdJ("redirectId",function(i){const a=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.redirectHomework(i,"share"!=l.classroomId?l.classroomId:a.classroomId?a.classroomId.toString():"0",a.hashId?a.hashId:""))}),e.qZA()()}if(2&n){const t=s.$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("classId","share"!=o.classroomId?o.classroomId:null==t.classroomId?null:t.classroomId.toString())("name",t.name?t.name:"")("dateCreated",t.createdAt)("deadLine",t.deadline)("totalTakeTest",t.count?t.count:0)("totalStudent",t.countStudents?t.countStudents:0)("homeworkId",t.id?t.id:0)("isNew",t.isNew?t.isNew:0)("hashId",t.hashId?t.hashId:"")("className","share"==o.classroomId&&t.className?t.className:"")("backToLink",o.backToLink)}}function Eo(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",12),e.YNc(2,Do,2,11,"div",13),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.homeworkObjs)}}function Fo(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"p",18),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(t.checkDataHomeworkObjsSearch?e.lcZ(6,3,"lang_homework_homework_list_not_found"):e.lcZ(5,1,"lang_homework_homework_list_not_assigned"))}}function Qo(n,s){1&n&&e._UZ(0,"div",19)}function zo(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.seeMore())}),e.ALo(2,"mytranslate"),e.TgZ(3,"mat-icon"),e._uU(4,"keyboard_arrow_down"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_homework_homework_list_see_more")),e.Q6J("disabled",!t.nextPage)}}function Yo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"input",7),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeValueSearch())})("keyup.enter",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeValueSearch())}),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"mat-icon",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.changeValueSearch())}),e._uU(8,"search"),e.qZA()()()(),e.YNc(9,Eo,3,1,"div",9),e.YNc(10,Fo,7,5,"div",9),e.TgZ(11,"div",10),e.YNc(12,Qo,1,0,"div",11),e.YNc(13,zo,5,4,"ng-container",9),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(5),e.s9C("placeholder",e.lcZ(6,6,"lang_homework_homework_list_search")),e.Q6J("formControl",t.searchText),e.xp6(4),e.Q6J("ngIf",t.homeworkObjs.length>0),e.xp6(1),e.Q6J("ngIf",0==t.homeworkObjs.length&&!t.loadingMore),e.xp6(2),e.Q6J("ngIf",!0===t.loadingMore),e.xp6(1),e.Q6J("ngIf",!1===t.loadingMore&&0==t.checkDataHomeworkObjsSearch)}}let Bo=(()=>{class n extends L.Q{constructor(t,o,i,r,a,l,c){super(o),this.activeRoute=t,this.commonService=o,this.homeworkService=i,this.classroomService=r,this.zipdataService=a,this.timeService=l,this.sortService=c,this.classroomId="0",this.menuObjs=[],this.classroomObj={},this.rawHomeworkObjs=[],this.homeworkObjs=[],this.checkNew=!1,this.nextPage="",this.ParamNextPage="",this.checkDataHomeworkObjsSearch=!1,this.loadingMore=!1,this.searchText=new d.p4(""),this.backToLink=""}changeValueSearch(){if(""!=this.searchText.value){this.checkDataHomeworkObjsSearch=!0;let t=this.commonService.searchArray(this.rawHomeworkObjs,this.searchText.value);this.homeworkObjs=Array.isArray(t)?t:[]}else this.homeworkObjs=this.rawHomeworkObjs}getData(){this.initStatusObj(),this.loadingMore=!0,this.subscriptions.add(this.homeworkService.apiHomeworkGetObjsAndPermissionsByClassroomGet(this.classroomId.toString(),this.ParamNextPage).subscribe(t=>{var o,i,r,a,l,c,m,h,p;1==t.success?(this.nextPage=null!==(i=null===(o=t.data)||void 0===o?void 0:o.nextPage)&&void 0!==i?i:"",0==(null===(a=null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.homeworkObjs)||void 0===a?void 0:a.length)&&this.nextPage?this.seeMore():(this.classroomObj=null!==(c=null===(l=t.data)||void 0===l?void 0:l.classroomObj)&&void 0!==c?c:{},this.rawHomeworkObjs=this.rawHomeworkObjs.concat(null!==(h=null===(m=t.data)||void 0===m?void 0:m.homeworkObjs)&&void 0!==h?h:new Array),this.homeworkObjs=this.rawHomeworkObjs,"share"!=this.classroomId&&(this.menuObjs=[{code:"logPoidClass",name:"lang_auto_xuat_bang_diem_lop_hoc"}]),this.successStatusObj(),this.loadingMore=!1)):(this.errorStatusObj(null!==(p=t.message)&&void 0!==p?p:""),this.showErrorSnack("lang_cms_export_homework_cannot_get_data"),this.loadingMore=!1)}))}seeMore(){this.ParamNextPage=this.nextPage,this.getData()}redirectHomework(t,o,i){this.commonService.myNavigation("/admin/homework/score-list/"+o+"/"+t+"/"+i)}changePermission(){this.getData()}callbackMenuEvent(t){if("logPoidClass"==t){var o=["STT","H\u1ecd v\xe0 t\xean","M\xe3 h\u1ecdc sinh","Gi\u1edbi t\xednh","Ng\xe0y sinh"];this.subscriptions.add(this.classroomService.apiClassroomExportDataGet(Number(this.classroomId)).subscribe(i=>{var r,a,l,c;if(1==i.success){let p=[],u=[],g=this.sortService.sortFirstNameStudents(null!==(a=null===(r=i.data)||void 0===r?void 0:r.objs)&&void 0!==a?a:[]),w=0;g.forEach(v=>{var F;w+=1;var H={},b={};null===(F=v.dataHomework)||void 0===F||F.forEach(S=>{for(var M,J,ge,Q=this.timeService.getFormatDate(null!==(M=S.createdAt)&&void 0!==M?M:"")+` (${S.name})`,Ie=1;H[`${Q}`];)Ie++,Q=`${this.timeService.getFormatDate(null!==(J=S.createdAt)&&void 0!==J?J:"")} (${S.name}) (${Ie})`;switch(S.point){case 1e3:H[`${Q}`]="\u0110\u1ea1t";break;case 1001:H[`${Q}`]="Ch\u01b0a \u0110\u1ea1t";break;case 2e3:H[`${Q}`]="Ho\xe0n Th\xe0nh";break;case 2001:H[`${Q}`]="Ch\u01b0a Ho\xe0n Th\xe0nh";break;case 3e3:H[`${Q}`]="Ho\xe0n Th\xe0nh T\u1ed1t";break;default:H[`${Q}`]=`${S.point}`}let Ne=this.commonService.willDeleteParseJson(this.zipdataService.decodeContentGzip(null!==(ge=S.result)&&void 0!==ge?ge:""));b[`${Q}`]=null==Ne?"":Ne.comment,1===w&&o.push(Q)}),p.push(Object.assign({STT:w,"H\u1ecd v\xe0 t\xean":v.fullname,"M\xe3 h\u1ecdc sinh":v.code,"Gi\u1edbi t\xednh":v.gender,"Ng\xe0y sinh":null!=v.birthday?this.timeService.getFormatDate(v.birthday):""},H)),u.push(Object.assign({STT:w,"H\u1ecd v\xe0 t\xean":v.fullname,"M\xe3 h\u1ecdc sinh":v.code,"Gi\u1edbi t\xednh":v.gender,"Ng\xe0y sinh":null!=v.birthday?this.timeService.getFormatDate(v.birthday):""},b))});let C=this.commonService.createFileNameExportFile(["T\u1ed5ng k\u1ebft \u0111i\u1ec3m L\u1edbp",null!==(l=this.classroomObj.name)&&void 0!==l?l:""]);var m=E.utils.aoa_to_sheet([[`Danh s\xe1ch \u0111i\u1ec3m - ${this.classroomObj.name}`],o]);E.utils.sheet_add_json(m,p,{origin:-1,header:o,skipHeader:!0});var h=E.utils.aoa_to_sheet([[`Danh s\xe1ch nh\u1eadn x\xe9t - ${this.classroomObj.name}`],o]);E.utils.sheet_add_json(h,u,{origin:-1,header:o,skipHeader:!0});const j=E.write({Sheets:{"B\u1ea3ng \u0111i\u1ec3m":m,"Nh\u1eadn x\xe9t":h},SheetNames:["B\u1ea3ng \u0111i\u1ec3m","Nh\u1eadn x\xe9t"]},{bookType:"xlsx",type:"array"});let f=".xlsx";const x=new Blob([j],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Se.saveAs(x,C+f)}else this.errorStatusObj(null!==(c=i.message)&&void 0!==c?c:"",!0)}))}}ngOnInit(){var t;this.ParamNextPage=null!==(t=this.commonService.getMyQueryParam("nextPage"))&&void 0!==t?t:"",(0,V.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var o;this.classroomId=null!==(o=this.commonService.getMyParam(this.activeRoute,"id"))&&void 0!==o?o:"0",this.backToLink="/admin/homework/homework-list/"+this.classroomId,this.getData()}),this.commonService.translateMetaData({title:"lang_cms_homework_list_exercise_title",description:"lang_cms_homework_list_exercise_description",image:"lang_cms_test_image"}),this.commonService.gaEvent("teacher_homework_list"),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.gz),e.Y36(I.v),e.Y36(Y.Lk),e.Y36(Y.um),e.Y36(ie.n),e.Y36(_e.O),e.Y36(He.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["list-homework"]],features:[e.qOj],decls:3,vars:6,consts:[[3,"menu_objs","headerTitle","headerBackTolink","MenuEvent"],["class","mb-2 mt-3 pb-80","style","max-width: 1400px; margin: auto",4,"ngIf"],[1,"mb-2","mt-3","pb-80",2,"max-width","1400px","margin","auto"],[1,"header-box","mt-3","pl-2","pr-2"],[1,"row"],[1,"col-md-12"],[1,"search-block"],["type","text",1,"search-input",3,"formControl","placeholder","change","keyup.enter"],[1,"search-icon",2,"padding-top","2px",3,"click"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["class","spinner-border text-secondary my-3","role","status",4,"ngIf"],[1,"row",2,"min-height","80px"],["class","col-md-6 col-xl-4 col-12",4,"ngFor","ngForOf"],[1,"col-md-6","col-xl-4","col-12"],[1,"relative",3,"classId","name","dateCreated","deadLine","totalTakeTest","totalStudent","homeworkId","isNew","hashId","className","backToLink","redirectId"],[1,"row","text-center","py-5"],[1,"col-12"],[1,"p-0","m-0"],["role","status",1,"spinner-border","text-secondary","my-3"],["mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"header-backend",0),e.NdJ("MenuEvent",function(r){return o.callbackMenuEvent(r)}),e.ALo(1,"mytranslate"),e.qZA(),e.YNc(2,Yo,14,8,"div",1)),2&t&&(e.Q6J("menu_objs",o.menuObjs)("headerTitle",o.classroomObj.name?e.lcZ(1,4,"lang_auto_danh_sach_bai_tap")+" - "+o.classroomObj.name:"")("headerBackTolink","/admin/homework/classes/1"),e.xp6(2),e.Q6J("ngIf",o.classroomObj))},dependencies:[k.sg,k.O5,B.lW,U.Hw,G.gM,d.Fj,d.JJ,d.oH,Ze,ee.p,y.bT],styles:[".header-box[_ngcontent-%COMP%]{border:1px solid #dfdfdf;background-color:#f3f3f3;border-radius:5px;margin:0 15px}.page-item[_ngcontent-%COMP%]{margin:0 3px}.pb-80[_ngcontent-%COMP%]{padding-bottom:80px}.btn-pag[_ngcontent-%COMP%]{padding:5px 8px}.btn-add-teacher[_ngcontent-%COMP%]{border:1px solid #ececec}.relative[_ngcontent-%COMP%]{position:relative}.absolute[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.content-flex[_ngcontent-%COMP%]{display:flex;flex-direction:column}.break[_ngcontent-%COMP%]{flex-basis:100%;width:0}.block-flex-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:120px;width:100%;font-weight:700}.search-block[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:5px;display:flex;justify-content:flex-end;position:relative}.search-input[_ngcontent-%COMP%]{border:1px solid rgba(234,234,234,.8901960784);padding:.1rem .55rem;border-radius:3px;padding:2px 30px 2px 5px;font-size:12px}.search-input[_ngcontent-%COMP%]:focus{border:1px solid #0EAFC0;outline:none}.search-icon[_ngcontent-%COMP%]{position:absolute;transition:all .5s;height:100%;border-left:none;cursor:pointer!important;color:#0eafc0}.search-icon[_ngcontent-%COMP%]:hover{background:#d7d7d7;border-radius:3px;cursor:pointer}.btn-all-add[_ngcontent-%COMP%]{background:transparent;margin:15px}"]}),n})();var Go=_(91153),Ro=_(30592),oe=_(92181),ue=_(2638),Ko=_(32368),Wo=_(83467),$o=_(90167),Vo=_(71572);function Xo(n,s){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",12),e._uU(2,"\xa0"),e.qZA())}function en(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"p",4),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"p",5)(7,"span",6),e._uU(8),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",8)(11,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.btnCloseDialog())}),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()(),e.TgZ(14,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmDelete())}),e.YNc(15,Xo,3,0,"span",11),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,7,"lang_homework_utils_delete_homework_dialog_title"),":"),e.xp6(3),e.s9C("matTooltip",t.data.homeworkObj?t.data.homeworkObj.name:""),e.xp6(1),e.Oqu(t.data.homeworkObj?t.data.homeworkObj.name:""),e.xp6(4),e.hij(" ",e.lcZ(13,9,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!0===t.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(17,11,"lang_cms_common_confirm_btn")," ")}}let tn=(()=>{class n extends L.Q{constructor(t,o){super(t),this.commonService=t,this.homeworkService=o,this.data={homeworkObj:{},isShow:!1},this.closeDialog=new e.vpe,this.subscriptions=new te.w,this.form=new d.nJ({}),this.type=0}confirmDelete(){var t;this.initStatusObj(),this.subscriptions.add(this.homeworkService.apiHomeworkDeleteObjGet(null===(t=this.data.homeworkObj)||void 0===t?void 0:t.hashId).subscribe(o=>{var i;1==o.success?(this.closeDialog.emit(!0),this.successStatusObj(),this.showSuccessSnack("lang_cms_homework_delete_success")):(this.btnCloseDialog(),this.errorStatusObj(null!==(i=o.message)&&void 0!==i?i:"",!0))}))}btnCloseDialog(){this.closeDialog.emit(!1)}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.v),e.Y36(Y.Lk))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-homework"]],inputs:{data:"data"},outputs:{closeDialog:"closeDialog"},features:[e.qOj],decls:1,vars:1,consts:[["class","school-info_bg",4,"ngIf"],[1,"school-info_bg"],[1,"school-info","p-4"],[1,"text-center"],[1,"h5","mb-1"],[1,"h5","text-danger",2,"padding-bottom","21px","border-bottom","1px solid #b2b4b7"],[1,"truncate",3,"matTooltip"],[1,"d-flex","float-right","mt-3"],[1,"azt-block-button"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","warn",2,"margin-left","15px",3,"disabled","click"],[4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,o){1&t&&e.YNc(0,en,18,13,"div",0),2&t&&e.Q6J("ngIf",o.data.isShow)},dependencies:[k.O5,B.lW,G.gM,y.bT],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:9998;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background:rgba(0,0,0,.5607843137)}.school-info[_ngcontent-%COMP%]{z-index:9999;top:50%;left:50%;min-width:30%;transform:translate(-50%,-50%);position:fixed;max-width:600px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.truncate[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:90%;padding:5px 0;white-space:nowrap}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-7px;padding:5px 10px;background:#dadada;cursor:pointer;border-radius:20px}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:95%}}"]}),n})();const on=["TABLE"],nn=function(){return{}};function rn(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td",4),e._uU(2),e.qZA(),e.TgZ(3,"td",4),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"td",4),e._uU(11),e.qZA(),e.TgZ(12,"td",4),e._uU(13),e.ALo(14,"mytranslate"),e.ALo(15,"mytranslate"),e.ALo(16,"mytranslate"),e.qZA(),e.TgZ(17,"td",4),e._uU(18),e.qZA()()),2&n){const t=s.$implicit,o=e.oxw();e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(e.xi3(5,6,t.birthday,"dd/MM/yyyy")),e.xp6(3),e.Oqu(0==t.gender?e.lcZ(8,9,"lang_gender_female"):1==t.gender?e.lcZ(9,11,"lang_gender_male"):""),e.xp6(4),e.Oqu(t.code),e.xp6(2),e.Oqu(t.isMarked?o.checkPoint(t.point?t.point:0):t.mustReSubmit?e.lcZ(14,13,"lang_homework_utils_excel_table_export_must_resubmit"):t.isNotSubmit?e.lcZ(15,15,"lang_homework_utils_excel_table_export_not_submit"):e.lcZ(16,17,"lang_homework_utils_excel_table_export_not_point")),e.xp6(5),e.Oqu(o.getComment(t.answer?t.answer:e.DdM(19,nn)))}}let an=(()=>{class n extends L.Q{constructor(t){super(t),this.commonService=t,this.studentList=[],this.homeworkObj={},this.currentDate=new Date,this.tableType="homework"}ExportTOExcel(){var t,o;const i=E.utils.table_to_sheet(null===(t=this.TABLE)||void 0===t?void 0:t.nativeElement,{raw:!0}),r=E.utils.book_new();E.utils.book_append_sheet(r,i,"Sheet1"),this.homeworkObj.hasOwnProperty("name")?E.writeFile(r,this.commonService.createFileNameExportFile([null!==(o=this.homeworkObj.name)&&void 0!==o?o:""])+"-ScoreSheet.xlsx"):E.writeFile(r,this.commonService.createFileNameExportFile(["ScoreSheet"])+".xlsx")}checkPoint(t){switch(t){case 1e3:return"\u0110\u1ea1t";case 1001:return"Ch\u01b0a \u0110\u1ea1t";case 2e3:return"Ho\xe0n Th\xe0nh";case 2001:return"Ch\u01b0a Ho\xe0n Th\xe0nh";case 3e3:return"Ho\xe0n Th\xe0nh T\u1ed1t";default:return t}}getComment(t){var o="";return null!=t&&t.result&&(o=this.commonService.willDeleteParseJson(t.result).comment),o}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-excel-export"]],viewQuery:function(t,o){if(1&t&&e.Gf(on,5),2&t){let i;e.iGM(i=e.CRH())&&(o.TABLE=i.first)}},inputs:{studentList:"studentList",homeworkObj:"homeworkObj",currentDate:"currentDate",tableType:"tableType"},features:[e.qOj],decls:47,vars:34,consts:[[1,"table","table-bordered","d-none",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],[1,"border-table"],[4,"ngFor","ngForOf"],["colspan","2"]],template:function(t,o){1&t&&(e.TgZ(0,"table",0,1),e.NdJ("click",function(){return o.ExportTOExcel()}),e.TgZ(2,"thead",2)(3,"tr")(4,"th",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"tr"),e._UZ(8,"th"),e.qZA(),e.TgZ(9,"tr")(10,"th",3),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"date"),e.qZA()(),e.TgZ(14,"tr"),e._UZ(15,"th"),e.qZA(),e.TgZ(16,"tr")(17,"th",4),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"th",4),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"th",4),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"th",4),e._uU(27),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"th",4),e._uU(30),e.ALo(31,"mytranslate"),e.qZA(),e.TgZ(32,"th",4),e._uU(33),e.ALo(34,"mytranslate"),e.qZA()()(),e.TgZ(35,"tbody"),e.YNc(36,rn,19,20,"tr",5),e._UZ(37,"tr"),e.TgZ(38,"tr"),e._UZ(39,"td")(40,"td")(41,"td")(42,"td"),e.TgZ(43,"td",6),e._uU(44),e.ALo(45,"mytranslate"),e.qZA(),e._UZ(46,"td"),e.qZA()()()),2&t&&(e.MGl("id","table_",o.tableType,""),e.xp6(5),e.AsE("",e.lcZ(6,13,"lang_homework_utils_excel_table_export_homework"),": ",o.homeworkObj.name,""),e.xp6(6),e.AsE("",e.lcZ(12,15,"lang_homework_utils_excel_table_export_time_export_result"),": ",e.xi3(13,17,o.currentDate,"dd/MM/yyyy"),""),e.xp6(7),e.Oqu(e.lcZ(19,20,"lang_first_and_last_name")),e.xp6(3),e.Oqu(e.lcZ(22,22,"lang_birthday")),e.xp6(3),e.Oqu(e.lcZ(25,24,"lang_gender")),e.xp6(3),e.Oqu(e.lcZ(28,26,"lang_number_code")),e.xp6(3),e.Oqu(e.lcZ(31,28,"lang_point")),e.xp6(3),e.Oqu(e.lcZ(34,30,"lang_homework_utils_excel_table_export_comment")),e.xp6(3),e.Q6J("ngForOf",o.studentList),e.xp6(8),e.hij("",e.lcZ(45,32,"lang_homework_utils_excel_table_export_verifil_teacher"),": "))},dependencies:[k.sg,k.uU,y.bT],encapsulation:2}),n})();const sn=["drawer"],ln=["boxContent"];function cn(n,s){1&n&&e._UZ(0,"azt-loading-effect")}function dn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-delete-homework",9),e.NdJ("closeDialog",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.closeDeleteHomework(i))}),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("data",t.deleteHomeworkData)}}function _n(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-preview-media",10),e.NdJ("closePreview",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.onFileClose())}),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("fileOption",t.previewFile)}}function mn(n,s){if(1&n&&(e.TgZ(0,"div",11)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.AsE("",e.lcZ(3,2,"lang_homework_homework_score_list_not_search_data"),"! ",e.lcZ(4,4,"lang_core_not_found_classroom_or_homework"==t.errorMessage?"lang_homework_homework_score_list_class_maybe_delete":""),"")}}function hn(n,s){if(1&n&&(e.TgZ(0,"p",88),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"date"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_homework_homework_score_list_dealine"),": ",e.xi3(3,4,t.homeworkObj.deadline,"dd/MM/yyyy HH:mm"),"")}}function pn(n,s){1&n&&(e.TgZ(0,"p",88),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_homework_homework_score_list_dealine_not_time")))}function un(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(6);return e.KtG(a.onShowFile(r,-1))}),e.TgZ(2,"mat-icon",98),e._uU(3," text_snippet"),e.qZA(),e.TgZ(4,"span",99),e._uU(5),e.qZA()()()}if(2&n){const t=s.$implicit,o=e.oxw(6);e.xp6(4),e.Q6J("matTooltip",o.getFileName(t)),e.xp6(1),e.Oqu(o.getFileName(t))}}function gn(n,s){if(1&n&&(e.TgZ(0,"div",94),e.YNc(1,un,6,2,"div",95),e.qZA()),2&n){const t=e.oxw(5);e.xp6(1),e.Q6J("ngForOf",t.homeworkObj.fileObjs)}}function fn(n,s){if(1&n&&(e._UZ(0,"div",100),e.ALo(1,"safeContentQuestion"),e.ALo(2,"mathJaxContent")),2&n){const t=e.oxw(5);e.Q6J("innerHTML",e.lcZ(1,1,e.lcZ(2,3,t.homeworkObj.content)),e.oJD)}}const de=function(n){return[n]},Le=function(n){return{backto:n}};function wn(n,s){if(1&n&&(e.TgZ(0,"a",101),e.ALo(1,"mylocalize"),e.TgZ(2,"mat-icon",102),e._uU(3,"edit"),e.qZA(),e.TgZ(4,"span",103),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(5);e.Q6J("routerLink",e.VKq(7,de,e.lcZ(1,3,"/admin/homework/add-new-homework/"+t.homeworkObj.id+"/"+t.homeworkHashId)))("queryParams",e.VKq(9,Le,t.backToLink)),e.xp6(5),e.Oqu(e.lcZ(6,5,"lang_buttom_edit"))}}function kn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",104),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(5);return e.KtG(i.deleteHomework())}),e.TgZ(1,"mat-icon",102),e._uU(2,"delete"),e.qZA(),e.TgZ(3,"span",103),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"lang_buttom_delete")))}function vn(n,s){if(1&n&&(e.YNc(0,gn,2,1,"div",89),e.YNc(1,fn,3,5,"div",90),e.TgZ(2,"div",91),e.YNc(3,wn,7,11,"a",92),e.ALo(4,"editPermission"),e.YNc(5,kn,6,3,"a",93),e.ALo(6,"deletePermission"),e.qZA()),2&n){const t=e.oxw(4);e.Q6J("ngIf",t.homeworkObj.files&&t.homeworkObj.files.length>0),e.xp6(1),e.Q6J("ngIf",t.homeworkObj.content&&""!=t.homeworkObj.content),e.xp6(2),e.Q6J("ngIf",e.xi3(4,4,t.homeworkObj.permissionObj,"homework")),e.xp6(2),e.Q6J("ngIf",e.xi3(6,7,t.homeworkObj.permissionObj,"homework"))}}function xn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",105),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.toggleShowActions())}),e.TgZ(1,"mat-icon",102),e._uU(2,"expand_more"),e.qZA()()}}function bn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",105),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.toggleShowActions())}),e.TgZ(1,"mat-icon",102),e._uU(2,"expand_less"),e.qZA()()}}function Cn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",106),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.openDrawer())}),e.ALo(1,"mytranslate"),e.TgZ(2,"mat-icon",107),e._uU(3," menu_open"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_homework_homework_score_list_open_menu"))}function On(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",106),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.closeDrawer())}),e.ALo(1,"mytranslate"),e.TgZ(2,"mat-icon",108),e._uU(3,"menu_open "),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_homework_homework_score_list_close_menu"))}function Tn(n,s){if(1&n&&(e.TgZ(0,"p",88),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"date"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_homework_homework_score_list_dealine"),": ",e.xi3(3,4,t.homeworkObj.deadline,"dd/MM/yyyy HH:mm"),"")}}function Zn(n,s){1&n&&(e.TgZ(0,"p",88),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_homework_homework_score_list_dealine_not_time")))}function yn(n,s){if(1&n&&(e.TgZ(0,"a",109),e.ALo(1,"mylocalize"),e.TgZ(2,"mat-icon",110),e._uU(3," edit"),e.qZA(),e.TgZ(4,"span",103),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(4);e.Q6J("routerLink",e.VKq(7,de,e.lcZ(1,3,"/admin/homework/add-new-homework/"+t.homeworkObj.id+"/"+t.homeworkHashId)))("queryParams",e.VKq(9,Le,t.backToLink)),e.xp6(5),e.Oqu(e.lcZ(6,5,"lang_buttom_edit"))}}function Sn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",111),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.deleteHomework())}),e.TgZ(1,"mat-icon",112),e._uU(2," delete"),e.qZA(),e.TgZ(3,"span",113),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"lang_buttom_delete")))}function An(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(6);return e.KtG(a.onShowFile(r,-1))}),e.TgZ(2,"mat-icon",98),e._uU(3," text_snippet"),e.qZA(),e.TgZ(4,"span",99),e._uU(5),e.qZA()()()}if(2&n){const t=s.$implicit,o=e.oxw(6);e.xp6(4),e.Q6J("matTooltip",o.getFileName(t)),e.xp6(1),e.Oqu(o.getFileName(t))}}function jn(n,s){if(1&n&&(e.TgZ(0,"div",94),e.YNc(1,An,6,2,"div",95),e.qZA()),2&n){const t=e.oxw(5);e.xp6(1),e.Q6J("ngForOf",t.homeworkObj.fileObjs)}}function Mn(n,s){if(1&n&&(e._UZ(0,"div",116),e.ALo(1,"safeContentQuestion"),e.ALo(2,"mathJaxContent")),2&n){const t=e.oxw(5);e.Q6J("innerHTML",e.lcZ(1,1,e.lcZ(2,3,t.homeworkObj.content)),e.oJD)}}function Hn(n,s){if(1&n&&(e.YNc(0,jn,2,1,"div",114),e.YNc(1,Mn,3,5,"div",115)),2&n){const t=e.oxw(4);e.Q6J("ngIf",t.homeworkObj.files&&t.homeworkObj.files.length>0),e.xp6(1),e.Q6J("ngIf",t.homeworkObj.content&&""!=t.homeworkObj.content)}}function Ln(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",105),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.toggleShowActions())}),e.TgZ(1,"mat-icon",102),e._uU(2,"expand_more "),e.qZA()()}}function In(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",105),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.toggleShowActions())}),e.TgZ(1,"mat-icon",102),e._uU(2,"expand_less "),e.qZA()()}}function Nn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",117)(1,"div",77)(2,"form",48)(3,"input",49),e.NdJ("keyup.enter",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.search())}),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.search())}),e.TgZ(6,"mat-icon",51),e._uU(7," search "),e.qZA()()()(),e.TgZ(8,"div",118)(9,"div",53)(10,"button",119)(11,"span",55),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"mat-icon",56),e._uU(15,"filter_alt "),e.qZA()()(),e.TgZ(16,"mat-menu",57,58)(18,"a",59),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(19,"span",60),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"mat-slide-toggle",61),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(4);return e.KtG(r.toggleFilterSubmitted(i))}),e.qZA()(),e.TgZ(23,"a",59),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(24,"span",60),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.TgZ(27,"mat-slide-toggle",61),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(4);return e.KtG(r.toggleFilterNotSubmit(i))}),e.qZA()(),e.TgZ(28,"a",59),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(29,"span",60),e._uU(30),e.ALo(31,"mytranslate"),e.qZA(),e.TgZ(32,"mat-slide-toggle",61),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(4);return e.KtG(r.toggleFilterMarked(i))}),e.qZA()(),e.TgZ(33,"a",59),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(34,"span",60),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.TgZ(37,"mat-slide-toggle",61),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(4);return e.KtG(r.toggleFilterReSubmit(i))}),e.qZA()(),e.TgZ(38,"div",62)(39,"a",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.confirmFilter())}),e.TgZ(40,"span",120),e._uU(41),e.ALo(42,"mytranslate"),e.qZA()(),e.TgZ(43,"a",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.clearFilter())}),e.TgZ(44,"span",55),e._uU(45),e.ALo(46,"mytranslate"),e.qZA()()()()()()}if(2&n){const t=e.MAs(17),o=e.oxw(4);e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(1),e.s9C("placeholder",e.lcZ(4,14,"lang_homework_homework_score_list_search")),e.xp6(7),e.Q6J("matMenuTriggerFor",t),e.xp6(2),e.Oqu(e.lcZ(13,16,"lang_homework_homework_score_list_sort")),e.xp6(8),e.hij(" ",e.lcZ(21,18,"lang_homework_homework_score_list_sort_student_not_marking")," "),e.xp6(2),e.Q6J("checked",o.isSubmitted),e.xp6(3),e.hij(" ",e.lcZ(26,20,"lang_homework_homework_score_list_sort_student_not_yet_paid")," "),e.xp6(2),e.Q6J("checked",o.isNotSubmit),e.xp6(3),e.hij(" ",e.lcZ(31,22,"lang_homework_homework_score_list_sort_mark")," "),e.xp6(2),e.Q6J("checked",o.isMarked),e.xp6(3),e.hij(" ",e.lcZ(36,24,"lang_homework_homework_score_list_sort_student_resubmit")," "),e.xp6(2),e.Q6J("checked",o.mustReSubmit),e.xp6(4),e.hij(" ",e.lcZ(42,26,"lang_buttom_agree")," "),e.xp6(4),e.hij(" ",e.lcZ(46,28,"lang_buttom_delete"),"")}}function Pn(n,s){1&n&&(e.TgZ(0,"div",76)(1,"p",121),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_homework_homework_score_list_list_submit")))}function Jn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",122)(1,"div",123)(2,"p",121),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"a",42),e.ALo(6,"mylocalize"),e._uU(7),e.ALo(8,"slice"),e.qZA()()(),e.TgZ(9,"div",124)(10,"div",64)(11,"button",65)(12,"mat-icon",66),e._uU(13,"menu"),e.qZA()()(),e.TgZ(14,"mat-menu",57,67)(16,"a",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.exportToExcel("homework"))}),e.TgZ(17,"mat-icon",69),e._uU(18,"file_download"),e.qZA(),e.TgZ(19,"span",70),e.ALo(20,"mytranslate"),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()(),e.TgZ(23,"a",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(4);return e.KtG(i.exportToPDF())}),e.TgZ(24,"mat-icon",69),e._uU(25,"picture_as_pdf"),e.qZA(),e.TgZ(26,"span",70),e.ALo(27,"mytranslate"),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()(),e.TgZ(30,"a",63),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(31,"mat-icon",69),e._uU(32,"sort"),e.qZA(),e.TgZ(33,"span",70),e.ALo(34,"mytranslate"),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.TgZ(37,"mat-slide-toggle",71),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(4);return e.KtG(r.sortByTimeDESC(i))}),e.qZA()()()()()}if(2&n){const t=e.MAs(15),o=e.oxw(4);e.xp6(3),e.hij("",e.lcZ(4,12,"lang_homework_homework_score_list_list_submit_class")," : "),e.xp6(2),e.s9C("matTooltip",o.classObj.name),e.Q6J("routerLink",e.VKq(32,de,e.lcZ(6,14,"/admin/student/class-details/"+o.classId))),e.xp6(2),e.hij("",o.classObj.name&&o.classObj.name.length>20?e.Dn7(8,16,o.classObj.name,0,20)+"..":o.classObj.name," "),e.xp6(4),e.Q6J("matMenuTriggerFor",t),e.xp6(8),e.s9C("matTooltip",e.lcZ(20,20,"lang_homework_homework_score_list_export_excel")),e.xp6(2),e.hij(" ",e.lcZ(22,22,"lang_homework_homework_score_list_export_excel"),""),e.xp6(5),e.s9C("matTooltip",e.lcZ(27,24,"lang_homework_homework_score_list_export_pdf")),e.xp6(2),e.hij(" ",e.lcZ(29,26,"lang_homework_homework_score_list_export_pdf"),""),e.xp6(5),e.s9C("matTooltip",e.lcZ(34,28,"lang_homework_homework_score_list_sort_time_submit")),e.xp6(2),e.hij(" ",e.lcZ(36,30,"lang_homework_homework_score_list_sort_time_submit")," "),e.xp6(2),e.Q6J("checked",o.isSortByTimeDESC)}}function qn(n,s){1&n&&(e.TgZ(0,"div",34)(1,"div",125)(2,"p",126),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("",e.lcZ(4,1,"lang_not_found_search"),"!"))}function Un(n,s){1&n&&e._UZ(0,"azt-loading-effect")}function Dn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-student-homework-result",127),e.NdJ("goToResult",function(i){e.CHM(t);const r=e.oxw(4);return e.KtG(r.goToTestReview(i))}),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("isSortByTime",t.isSortByTimeDESC)("backToLink",t.paramBackLink)("searchKey",t.form.controls.searchContent.value)("studentLists",t.dataListStudents)("isNotTestedYet",t.isNotTestedYet)("isOpenSideNav",t.isOpenSideNav)("obj",t.homeworkObj)}}const En=function(n,s){return{"w-60":n,"w-30":s}},Fn=function(n){return{"px-0":n}},Qn=function(n){return{"justify-content-center":n}};function zn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-drawer-container",12)(1,"mat-drawer",13,14)(3,"div",15)(4,"div",16)(5,"div",17)(6,"div",18)(7,"p",19),e._uU(8),e.qZA()()(),e.TgZ(9,"div",20)(10,"div",21)(11,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.showCopySuccess())}),e.TgZ(12,"mat-icon",23),e._uU(13,"file_copy"),e.qZA(),e._uU(14," Copy link "),e.qZA()()(),e.TgZ(15,"div",24),e._UZ(16,"azt-download-qr-code",25),e.qZA()(),e.TgZ(17,"div",18)(18,"p",26),e._uU(19),e.ALo(20,"mytranslate"),e.ALo(21,"date"),e.qZA()(),e.TgZ(22,"div",18),e.YNc(23,hn,4,7,"p",27),e.YNc(24,pn,3,3,"p",27),e.qZA(),e.TgZ(25,"div"),e._UZ(26,"azt-share",28),e.qZA(),e.YNc(27,vn,7,10,"ng-template",29),e.TgZ(28,"div",30),e.YNc(29,xn,3,0,"a",31),e.YNc(30,bn,3,0,"a",31),e.qZA()()(),e.TgZ(31,"mat-drawer-content",32)(32,"div",33)(33,"div",34,35)(35,"div",36)(36,"div",37)(37,"div",38)(38,"div",39),e.YNc(39,Cn,4,3,"a",40),e.YNc(40,On,4,3,"a",40),e.TgZ(41,"p",41)(42,"a",42),e.ALo(43,"mylocalize"),e._uU(44),e.ALo(45,"slice"),e.qZA(),e.TgZ(46,"mat-icon",43),e._uU(47," chevron_right"),e.qZA(),e.TgZ(48,"span",44),e._uU(49),e.ALo(50,"slice"),e.qZA()()(),e.TgZ(51,"div",45)(52,"div",46)(53,"div",47)(54,"form",48)(55,"input",49),e.NdJ("keyup.enter",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.search())}),e.ALo(56,"mytranslate"),e.qZA(),e.TgZ(57,"div",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.search())}),e.TgZ(58,"mat-icon",51),e._uU(59," search "),e.qZA()()()(),e.TgZ(60,"div",52)(61,"div",53)(62,"button",54)(63,"span",55),e._uU(64),e.ALo(65,"mytranslate"),e.qZA(),e.TgZ(66,"mat-icon",56),e._uU(67,"filter_alt "),e.qZA()()(),e.TgZ(68,"mat-menu",57,58)(70,"a",59),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(71,"span",60),e._uU(72),e.ALo(73,"mytranslate"),e.qZA(),e.TgZ(74,"mat-slide-toggle",61),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.toggleFilterSubmitted(i))}),e.qZA()(),e.TgZ(75,"a",59),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(76,"span",60),e._uU(77),e.ALo(78,"mytranslate"),e.qZA(),e.TgZ(79,"mat-slide-toggle",61),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.toggleFilterNotSubmit(i))}),e.qZA()(),e.TgZ(80,"a",59),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(81,"span",60),e._uU(82),e.ALo(83,"mytranslate"),e.qZA(),e.TgZ(84,"mat-slide-toggle",61),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.toggleFilterMarked(i))}),e.qZA()(),e.TgZ(85,"a",59),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(86,"span",60),e._uU(87),e.ALo(88,"mytranslate"),e.qZA(),e.TgZ(89,"mat-slide-toggle",61),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.toggleFilterReSubmit(i))}),e.qZA()(),e.TgZ(90,"div",62)(91,"a",63),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.clearFilter())}),e.TgZ(92,"span",55),e._uU(93),e.ALo(94,"mytranslate"),e.qZA()()()()(),e.TgZ(95,"div")(96,"div",64)(97,"button",65)(98,"mat-icon",66),e._uU(99,"menu"),e.qZA()()(),e.TgZ(100,"mat-menu",57,67)(102,"a",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.exportToExcel("homework"))}),e.TgZ(103,"mat-icon",69),e._uU(104,"file_download"),e.qZA(),e.TgZ(105,"span",70),e.ALo(106,"mytranslate"),e._uU(107),e.ALo(108,"mytranslate"),e.qZA()(),e.TgZ(109,"a",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.exportToPDF())}),e.TgZ(110,"mat-icon",69),e._uU(111,"picture_as_pdf"),e.qZA(),e.TgZ(112,"span",70),e.ALo(113,"mytranslate"),e._uU(114),e.ALo(115,"mytranslate"),e.qZA()(),e.TgZ(116,"a",63),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(117,"mat-icon",69),e._uU(118,"sort"),e.qZA(),e.TgZ(119,"span",70),e.ALo(120,"mytranslate"),e._uU(121),e.ALo(122,"mytranslate"),e.qZA(),e.TgZ(123,"mat-slide-toggle",71),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(3);return e.KtG(r.sortByTimeDESC(i))}),e.qZA()()()()()()()(),e.TgZ(124,"div",72)(125,"div",16)(126,"div",73)(127,"div",18)(128,"p",19),e._uU(129),e.qZA()()(),e.TgZ(130,"div",74)(131,"div",21)(132,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.showCopySuccess())}),e.TgZ(133,"mat-icon",23),e._uU(134,"file_copy "),e.qZA(),e._uU(135," Copy link "),e.qZA()()(),e.TgZ(136,"div",75),e._UZ(137,"azt-download-qr-code",25),e.qZA()(),e.TgZ(138,"div",16)(139,"div",76)(140,"div",18)(141,"p",26),e._uU(142),e.ALo(143,"mytranslate"),e.ALo(144,"date"),e.qZA()()()(),e.TgZ(145,"div",16)(146,"div",77)(147,"div",18),e.YNc(148,Tn,4,7,"p",27),e.YNc(149,Zn,3,3,"p",27),e.qZA()(),e.TgZ(150,"div",78)(151,"div",79),e.YNc(152,yn,7,11,"a",80),e.ALo(153,"editPermission"),e.YNc(154,Sn,6,3,"a",81),e.ALo(155,"deletePermission"),e.qZA()(),e.TgZ(156,"div",76),e._UZ(157,"azt-share",28),e.qZA()(),e.YNc(158,Hn,2,2,"ng-template",29),e.TgZ(159,"div",16)(160,"div",76)(161,"div",30),e.YNc(162,Ln,3,0,"a",31),e.YNc(163,In,3,0,"a",31),e.qZA()()()()()(),e.YNc(164,Nn,47,30,"div",82),e.TgZ(165,"div",83),e.YNc(166,Pn,4,3,"div",84),e.YNc(167,Jn,38,34,"ng-template",null,85,e.W1O),e.qZA(),e.YNc(169,qn,5,3,"div",86),e.YNc(170,Un,1,0,"azt-loading-effect",3),e.YNc(171,Dn,1,7,"ng-template",29),e.qZA(),e._UZ(172,"app-excel-export",87),e.qZA()()}if(2&n){const t=e.MAs(69),o=e.MAs(101),i=e.MAs(168),r=e.oxw(3);e.Q6J("hasBackdrop",r.hasBackdrop),e.xp6(1),e.s9C("opened",r.isOpenSideNav?"true":"false"),e.Q6J("mode",r.mode)("ngClass",e.WLB(130,En,r.isMobile,!r.isMobile)),e.xp6(7),e.Oqu(r.homeworkObj.name),e.xp6(3),e.Q6J("cdkCopyToClipboard",r.copylinkToClipboard(r.homeworkObj.hashId?r.homeworkObj.hashId:"")),e.xp6(5),e.Q6J("fileName","azota_score_list_qrcode_"+r.homeworkObj.hashId)("linkUrl",r.copylinkToClipboard(r.homeworkObj.hashId?r.homeworkObj.hashId:"")),e.xp6(3),e.AsE("",e.lcZ(20,78,"lang_homework_homework_score_list_create_date"),": ",e.xi3(21,80,r.homeworkObj.createdAt,"dd/MM/yyyy HH:mm"),""),e.xp6(4),e.Q6J("ngIf",r.hasDeadline),e.xp6(1),e.Q6J("ngIf",!r.hasDeadline),e.xp6(2),e.Q6J("type",2)("typeObj","HOMEWORK")("id",r.homeworkObj.id)("permissionObj",r.homeworkObj.permissionObj),e.xp6(1),e.Q6J("ngIf",r.isShowActions),e.xp6(2),e.Q6J("ngIf",!r.isShowActions),e.xp6(1),e.Q6J("ngIf",r.isShowActions),e.xp6(2),e.Q6J("ngClass",e.VKq(133,Fn,r.isMobile)),e.xp6(3),e.Q6J("ngClass",e.VKq(135,Qn,r.isMobile)),e.xp6(2),e.Q6J("hidden",1==r.isMobile),e.xp6(2),e.Q6J("ngIf",!r.isOpenSideNav||r.isMobile),e.xp6(1),e.Q6J("ngIf",r.isOpenSideNav&&!r.isMobile),e.xp6(2),e.s9C("matTooltip",r.classObj.name),e.Q6J("routerLink",e.VKq(137,de,e.lcZ(43,83,"/admin/student/class-details/"+r.classId))),e.xp6(2),e.hij("",r.classObj.name&&r.classObj.name.length>20?e.Dn7(45,85,r.classObj.name,0,20)+"..":r.classObj.name," "),e.xp6(4),e.s9C("matTooltip",r.homeworkObj.name),e.xp6(1),e.hij(" ",r.homeworkObj.name&&r.homeworkObj.name.length>40?e.Dn7(50,89,r.homeworkObj.name,0,40)+"..":r.homeworkObj.name," "),e.xp6(5),e.Q6J("formGroup",r.form),e.xp6(1),e.s9C("placeholder",e.lcZ(56,93,"lang_homework_homework_score_list_search")),e.xp6(7),e.Q6J("matMenuTriggerFor",t),e.xp6(2),e.Oqu(e.lcZ(65,95,"lang_homework_homework_score_list_sort")),e.xp6(8),e.hij(" ",e.lcZ(73,97,"lang_homework_homework_score_list_sort_student_not_marking")," "),e.xp6(2),e.Q6J("checked",r.isSubmitted),e.xp6(3),e.hij(" ",e.lcZ(78,99,"lang_homework_homework_score_list_sort_student_not_yet_paid")," "),e.xp6(2),e.Q6J("checked",r.isNotSubmit),e.xp6(3),e.hij(" ",e.lcZ(83,101,"lang_homework_homework_score_list_sort_mark")," "),e.xp6(2),e.Q6J("checked",r.isMarked),e.xp6(3),e.hij(" ",e.lcZ(88,103,"lang_homework_homework_score_list_sort_student_resubmit")," "),e.xp6(2),e.Q6J("checked",r.mustReSubmit),e.xp6(4),e.hij(" ",e.lcZ(94,105,"lang_buttom_delete"),""),e.xp6(4),e.Q6J("matMenuTriggerFor",o),e.xp6(8),e.s9C("matTooltip",e.lcZ(106,107,"lang_homework_homework_score_list_export_excel")),e.xp6(2),e.hij(" ",e.lcZ(108,109,"lang_homework_homework_score_list_export_excel"),""),e.xp6(5),e.s9C("matTooltip",e.lcZ(113,111,"lang_homework_homework_score_list_export_pdf")),e.xp6(2),e.hij(" ",e.lcZ(115,113,"lang_homework_homework_score_list_export_pdf"),""),e.xp6(5),e.s9C("matTooltip",e.lcZ(120,115,"lang_homework_homework_score_list_sort_time_submit")),e.xp6(2),e.hij(" ",e.lcZ(122,117,"lang_homework_homework_score_list_sort_time_submit")," "),e.xp6(2),e.Q6J("checked",r.isSortByTimeDESC),e.xp6(1),e.Q6J("hidden",0==r.isMobile),e.xp6(5),e.Oqu(r.homeworkObj.name),e.xp6(3),e.Q6J("cdkCopyToClipboard",r.copylinkToClipboard(r.homeworkObj.hashId?r.homeworkObj.hashId:"")),e.xp6(5),e.Q6J("fileName","azota_score_list_qrcode_"+r.homeworkObj.hashId)("linkUrl",r.copylinkToClipboard(r.homeworkObj.hashId?r.homeworkObj.hashId:"")),e.xp6(5),e.AsE("",e.lcZ(143,119,"lang_homework_homework_score_list_create_date"),": ",e.xi3(144,121,r.homeworkObj.createdAt,"dd/MM/yyyy HH:mm"),""),e.xp6(6),e.Q6J("ngIf",r.hasDeadline),e.xp6(1),e.Q6J("ngIf",!r.hasDeadline),e.xp6(3),e.Q6J("ngIf",e.xi3(153,124,r.homeworkObj.permissionObj,"homework")),e.xp6(2),e.Q6J("ngIf",e.xi3(155,127,r.homeworkObj.permissionObj,"homework")),e.xp6(3),e.Q6J("type",2)("typeObj","HOMEWORK")("id",r.homeworkObj.id)("permissionObj",r.homeworkObj.permissionObj),e.xp6(1),e.Q6J("ngIf",r.isShowActions),e.xp6(4),e.Q6J("ngIf",!r.isShowActions),e.xp6(1),e.Q6J("ngIf",r.isShowActions),e.xp6(1),e.Q6J("ngIf",r.isMobile),e.xp6(2),e.Q6J("ngIf",0==r.isMobile)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",r.isNullSearchData),e.xp6(1),e.Q6J("ngIf",1==r.isLoadingSearch),e.xp6(1),e.Q6J("ngIf",!r.isNullSearchData&&0==r.isLoadingSearch),e.xp6(1),e.Q6J("studentList",r.dataListStudents)("homeworkObj",r.homeworkObj)("currentDate",r.currentDate)("typeTable","homework")}}function Yn(n,s){1&n&&e._UZ(0,"div",128)}function Bn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,dn,1,1,"app-delete-homework",4),e.YNc(2,_n,2,1,"div",3),e.TgZ(3,"div",5),e.NdJ("resize",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onResize(i))},!1,e.Jf7),e.YNc(4,mn,5,6,"div",6),e.YNc(5,zn,173,139,"mat-drawer-container",7),e.qZA(),e.YNc(6,Yn,1,0,"div",8),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.deleteHomeworkData.isShow),e.xp6(1),e.Q6J("ngIf",t.isShowPreviewFile),e.xp6(2),e.Q6J("ngIf",""!=t.errorMessage),e.xp6(1),e.Q6J("ngIf",""==t.errorMessage),e.xp6(1),e.Q6J("ngIf",1==t.isMobile)}}function Gn(n,s){if(1&n&&e.YNc(0,Bn,7,5,"div",3),2&n){const t=e.oxw();e.Q6J("ngIf",t.homeworkObj)}}let Rn=(()=>{class n extends L.Q{constructor(t,o,i,r,a,l,c,m,h,p,u){super(o),this.dialog=t,this.commonService=o,this.localize=i,this.activeRoute=r,this.fb=a,this.answerService=l,this.zipdataService=c,this.sortService=m,this.browserStorageService=h,this.examFilterService=p,this.switchVersionService=u,this.currentDate=new Date,this.homeworkId="",this.homeworkHashId="",this.categoryId=0,this.classId=0,this.form=new d.nJ({}),this.contentHeight=0,this.backUpHeight=0,this.backToLink="",this.hasBackdrop=!1,this.mode="side",this.isMobile=!1,this.isShowActions=!0,this.isOpenSideNav=!0,this.isHomeworkFlow=!0,this.isSortByTimeDESC=!1,this.isSubmitted=!1,this.isNotSubmit=!1,this.isMarked=!1,this.mustReSubmit=!1,this.isLoadingSearch=!1,this.deleteHomeworkData={homeworkObj:{},isShow:!1},this.homeworkUserList=[],this.studentObjs=[],this.homeworkObj={},this.classObj={},this.isNotTestedYet=!1,this.isNullSearchData=!1,this.hasDeadline=!1,this.isShowPreviewFile=!1,this.previewFile={},this.errorMessage="",this.keyFilter="",this.dataListStudents=[],this.paramBackLink=""}getData(){this.initStatusObj(),this.subscriptions.add(this.answerService.apiAnswerGetStudentsHomeworkGet(Number(this.homeworkId),this.homeworkHashId).subscribe(t=>{var o,i,r,a,l,c,m,h,p,u,g,w;if(1==t.success){if(this.errorMessage="",this.zipdataService.convertStudentsHomeworkObj(null===(o=t.data)||void 0===o?void 0:o.studentObjs),this.homeworkUserList=this.checkStatusStudent(null!==(r=null===(i=t.data)||void 0===i?void 0:i.studentObjs)&&void 0!==r?r:new Array),this.homeworkObj=this.parseHomeworkData(null!==(l=null===(a=t.data)||void 0===a?void 0:a.homeworkObj)&&void 0!==l?l:{}),this.classObj=null!==(m=null===(c=t.data)||void 0===c?void 0:c.classroomObj)&&void 0!==m?m:{},this.classId=null!==(h=this.classObj.id)&&void 0!==h?h:0,(null===(p=this.homeworkObj)||void 0===p?void 0:p.deadline)&&null!=this.homeworkObj.deadline&&""!=this.homeworkObj.deadline.toString()&&(this.hasDeadline=!0),0==this.homeworkUserList.length)return this.isNotTestedYet=!0,void this.errorStatusObj("NO_TESTED_YET");this.studentObjs=this.commonService.myClone(this.homeworkUserList),this.isNullSearchData=!1,setTimeout(()=>{this.checkFilterValue()},0),this.getStatusSideNav();var C=this.browserStorageService.getSimpleStorage(this.homeworkId+"_azt_setting_sort_desc_submit_by_time");C&&"true"==C?(this.isSortByTimeDESC=!0,this.dataListStudents=this.checkSortListStudent(99,this.studentObjs)):(this.isSortByTimeDESC=!1,this.dataListStudents=this.checkSortListStudent(null!==(u=this.classObj.sortType)&&void 0!==u?u:0,this.studentObjs)),this.successStatusObj()}else this.errorMessage=null!==(g=t.message)&&void 0!==g?g:"",this.errorStatusObj(null!==(w=t.message)&&void 0!==w?w:"",!0)}))}checkStatusStudent(t){for(var o,i,r=[],a=0;a<t.length;a++)r.push(Object.assign(Object.assign({},null==t?void 0:t[a]),{index:a})),t[a].confirmedAt&&t[a].confirmedAt&&r[a].index==a?r[a].isMarked=!0:null==t[a].answer||t[a].confirmedAt||r[a].index!=a?null==t[a].answer&&null!=t[a].answerHistory&&r[a].index==a?r[a].mustReSubmit=!0:r[a].isNotSubmit=!0:r[a].isSubmitted=!0,r[a].answerFileObjs=this.castJsonToObj(null!==(i=null===(o=t[a].answer)||void 0===o?void 0:o.files)&&void 0!==i?i:"");return r}parseHomeworkData(t){var o=this.castObj(t);return null!=o&&o.files&&(o.fileObjs=this.commonService.myParseJson(o.files)),this.zipdataService.convertHomeworkObj(null!=o?o:{}),o}fillerArr(t,o){var i;o=this.commonService.convertVietnameseToEnglish(o);var r=[];for(let c=0;c<t.length;c++)-1!=this.commonService.convertVietnameseToEnglish(null!==(i=t[c].fullName)&&void 0!==i?i:"").toLowerCase().indexOf(o.toLowerCase())&&r.push(t[c]);return r}search(){var t,o;this.isLoadingSearch=!0;var i=this.commonService.getFormObj(this.form);if(""!=i.searchContent){var r=this.commonService.myClone(this.checkSortListStudent(null!==(t=this.classObj.sortType)&&void 0!==t?t:0,this.studentObjs)),a=this.fillerArr(r,i.searchContent);this.dataListStudents=a,this.isLoadingSearch=!1}else this.isLoadingSearch=!1,this.homeworkUserList=this.studentObjs,this.dataListStudents=this.checkSortListStudent(null!==(o=this.classObj.sortType)&&void 0!==o?o:0,this.studentObjs),this.isNullSearchData=!1,this.errorStatusObj("NO_TESTED_YET")}toggleFilterSubmitted(t){this.isSubmitted=!!t.checked,this.confirmFilter()}toggleFilterNotSubmit(t){this.isNotSubmit=!!t.checked,this.confirmFilter()}toggleFilterMarked(t){this.isMarked=!!t.checked,this.confirmFilter()}toggleFilterReSubmit(t){this.mustReSubmit=!!t.checked,this.confirmFilter()}confirmFilter(){var t,o=[],i=[],r=[],a=[];this.saveFilterValue(),this.isSubmitted&&(o=this.studentObjs.filter(m=>1==m.isSubmitted)),this.isNotSubmit&&(i=this.studentObjs.filter(m=>1==m.isNotSubmit)),this.isMarked&&(r=this.studentObjs.filter(m=>1==m.isMarked)),this.mustReSubmit&&(a=this.studentObjs.filter(m=>1==m.mustReSubmit)),this.isSubmitted||this.isNotSubmit||this.isMarked||this.mustReSubmit?this.homeworkUserList=this.sortIndex([...o,...i,...r,...a]):this.clearFilter();let l=this.homeworkUserList;var c=this.browserStorageService.getSimpleStorage(this.homeworkId+"_azt_setting_sort_desc_submit_by_time");this.dataListStudents=this.checkSortListStudent(c&&"true"==c?99:null!==(t=this.classObj.sortType)&&void 0!==t?t:0,l)}clearFilter(){var t;this.isSubmitted=!1,this.isNotSubmit=!1,this.isMarked=!1,this.mustReSubmit=!1,this.homeworkUserList=this.studentObjs;var o=this.browserStorageService.getSimpleStorage(this.homeworkId+"_azt_setting_sort_desc_submit_by_time");this.dataListStudents=this.checkSortListStudent(o&&"true"==o?99:null!==(t=this.classObj.sortType)&&void 0!==t?t:0,this.studentObjs),this.removeFilterStore()}removeFilterStore(){this.examFilterService.removeCustomFilter("homework",this.homeworkId)}exportToExcel(t){setTimeout(()=>{var o;null===(o=document.getElementById("table_"+t))||void 0===o||o.click()},1e3)}exportToPDF(){this.commonService.gaEvent("go_to_exp_pdf_homework");const t=this.localize.translateRoute("/admin/homework/export-homework")+"/"+this.classId+"/"+this.homeworkId+"/"+this.homeworkHashId;window.open(t,"_blank")}resizeImg(t,o,i){var r,a=document.getElementById("media_content_"+t),l=null!==(r=null==a?void 0:a.offsetWidth)&&void 0!==r?r:0;return a?l/o<=1?Math.round(i*(l/o)):Math.round(i):0}sortIndex(t){return t.sort((o,i)=>Number(o)-Number(i))}sortByName(){this.homeworkUserList=this.sortService.sortFirstNameStudents(this.studentObjs)}onResize(t){var o;t.target.innerWidth<768?(this.contentHeight=(null===(o=this.boxContent)||void 0===o?void 0:o.nativeElement.offsetHeight)+45,this.isMobile=!0,this.mode="over",this.hasBackdrop=!0,this.isOpenSideNav=!1):(this.contentHeight=166,this.isMobile=!1,this.mode="side",this.hasBackdrop=!1,this.isOpenSideNav=!0)}checkWidth(){window.innerWidth<768?(this.isMobile=!0,this.mode="over",this.hasBackdrop=!0):(this.isMobile=!1,this.mode="side",this.hasBackdrop=!1)}getFileName(t){var o;return"object"==typeof t&&t.hasOwnProperty("name")&&null!==(o=t.name)&&void 0!==o?o:""}sortByTimeDESC(t){var o;t.checked?(this.isSortByTimeDESC=t.checked,this.dataListStudents=this.checkSortListStudent(99,this.commonService.myClone(this.studentObjs)),this.browserStorageService.saveSimpleStorage(this.homeworkId+"_azt_setting_sort_desc_submit_by_time",t.checked.toString())):(this.isSortByTimeDESC=t.checked,this.dataListStudents=this.checkSortListStudent(null!==(o=this.classObj.sortType)&&void 0!==o?o:0,this.studentObjs),this.browserStorageService.saveSimpleStorage(this.homeworkId+"_azt_setting_sort_desc_submit_by_time",t.checked.toString()))}goToTestReview(t){var o;this.backToLink="/admin/homework/score-list/"+this.classId+"/"+this.homeworkId+"/"+this.homeworkHashId,this.commonService.myNavigationWithQueryString("/admin/homework/mark-exercise/"+(null===(o=t.answer)||void 0===o?void 0:o.id)+"/"+this.homeworkHashId,"?backto="+encodeURIComponent(this.backToLink))}goToEditHomework(){var t;this.commonService.myNavigation("/admin/homework/add-new-homework/"+(null===(t=this.homeworkObj)||void 0===t?void 0:t.id)+"/"+this.homeworkHashId)}disableScroll(){let t=window.pageYOffset||document.documentElement.scrollLeft,o=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(t,o)}}enableScroll(){window.onscroll=()=>{}}deleteHomework(){this.deleteHomeworkData={homeworkObj:this.homeworkObj,isShow:!0}}closeDeleteHomework(t){t?(this.deleteHomeworkData={homeworkObj:{},isShow:!1},this.commonService.myNavigation("/admin/homework/homework-list/"+this.classObj.id)):this.deleteHomeworkData={homeworkObj:{},isShow:!1}}onFileClose(){this.enableScroll(),this.isShowPreviewFile=!1,this.previewFile={}}onShowFile(t,o){this.isShowPreviewFile=!0,this.disableScroll(),this.previewFile=Object.assign(Object.assign({},t),{index:o})}toggleDrawer(){var t;null===(t=this.drawer)||void 0===t||t.toggle(),this.isOpenSideNav=!this.isOpenSideNav}openDrawer(){var t;null===(t=this.drawer)||void 0===t||t.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){var t;null===(t=this.drawer)||void 0===t||t.close(),this.isOpenSideNav=!1,this.saveStatusSideNav()}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("homework",this.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("homework")}getStatusSideNav(){if(window.innerWidth>768){let t=this.examFilterService.getStatusSideNav("homework");this.isOpenSideNav=!t||"close"!=t}else this.isOpenSideNav=!1}toggleShowActions(){this.isShowActions=!this.isShowActions,this.isMobile&&(this.contentHeight=0==this.isShowActions?200:this.backUpHeight)}showCopySuccess(){this.showSuccessSnack("lang_cms_copy_link_success")}copylinkToClipboard(t){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${t}`}goToStudentList(){this.commonService.myNavigation("/admin/student/manage-class/0")}checkSortListStudent(t,o){return 0==t?this.sortService.sortFirstNameStudents(this.commonService.myClone(o)):99==t?this.sortService.sortTimeDESC(this.commonService.myClone(o)):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(o),"pos","id")}saveFilterValue(){let t={};this.isMarked&&(t.isMarked=!0),this.isSubmitted&&(t.isSubmitted=!0),this.isNotSubmit&&(t.isNotSubmit=!0),this.mustReSubmit&&(t.mustReSubmit=!0),this.examFilterService.setCustomFilter(t,"homework",this.homeworkId)}checkFilterValue(){let t=this.examFilterService.getCustomFilter("homework",this.homeworkId);null!=t&&""!=t&&(t.includes("isMarked")&&(this.isMarked=!0),t.includes("isSubmitted")&&(this.isSubmitted=!0),t.includes("isNotSubmit")&&(this.isNotSubmit=!0),t.includes("mustReSubmit")&&(this.mustReSubmit=!0),this.confirmFilter())}ngOnInit(){this.form=this.fb.group({searchContent:new d.p4("",d.kI.required)}),(0,V.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.initStatusObj(),this.switchVersionService.isUseNewDashboard().subscribe(t=>{var o,i,r,a;this.categoryId=null!=this.activeRoute.snapshot.paramMap.get("cat_id")?Number(this.activeRoute.snapshot.paramMap.get("cat_id")):0,this.homeworkId=null!==(o=this.activeRoute.snapshot.paramMap.get("id"))&&void 0!==o?o:"",this.homeworkHashId=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:"",this.classId=null!==(r=Number(this.activeRoute.snapshot.paramMap.get("class_id")))&&void 0!==r?r:0,this.paramBackLink=`/admin/homework/score-list/${this.classId}/${this.homeworkId}/${this.homeworkHashId}`,this.backToLink=null!==(a=this.commonService.getMyQueryParam("backto"))&&void 0!==a?a:"/admin/homework/classes/1",t?this.myNavigation(`/admin/testbank/homework-results-list/${this.categoryId}/${this.homeworkId}/${this.homeworkHashId}`):(this.getData(),this.checkWidth())})}),this.commonService.translateMetaData({title:"lang_cms_homework_submit_list_title",description:"lang_cms_homework_submit_list_description",image:"lang_cms_homework_image"}),this.commonService.gaEvent("teacher_homework_score"),super.ngOnInit()}ngAfterViewInit(){setTimeout(()=>{var t,o;this.isMobile?(this.contentHeight=(null===(t=this.boxContent)||void 0===t?void 0:t.nativeElement.offsetHeight)+45,this.backUpHeight=(null===(o=this.boxContent)||void 0===o?void 0:o.nativeElement.offsetHeight)+45):this.contentHeight=166},1e3)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.uw),e.Y36(I.v),e.Y36(N.An),e.Y36(Z.gz),e.Y36(d.QS),e.Y36(ce.P),e.Y36(ie.n),e.Y36(He.K),e.Y36(Te.z),e.Y36(Go.Y),e.Y36(Ro.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-homework-submit-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(sn,5),e.Gf(ln,5)),2&t){let i;e.iGM(i=e.CRH())&&(o.drawer=i.first),e.iGM(i=e.CRH())&&(o.boxContent=i.first)}},features:[e.qOj],decls:4,vars:4,consts:[[3,"headerTitle","headerBackTolink","removeFilter"],[4,"ngIf","ngIfElse"],["doneLoading",""],[4,"ngIf"],[3,"data","closeDialog",4,"ngIf"],[1,"container-fluid","py-3",3,"resize"],["class","alert alert-danger",4,"ngIf"],["class","tested_list_container","style","border-radius: 5px;",3,"hasBackdrop",4,"ngIf"],["class","py-4",4,"ngIf"],[3,"data","closeDialog"],[3,"fileOption","closePreview"],[1,"alert","alert-danger"],[1,"tested_list_container",2,"border-radius","5px",3,"hasBackdrop"],[1,"test",2,"background-color","#ecf0f5","border","none",3,"mode","opened","ngClass"],["drawer",""],[1,"container-fluid","box-content","pt-2","pb-2"],[1,"row"],[1,"col-md-7"],[1,"text-left"],[1,"homework_title","mt-2","mb-2"],[1,"col-md-4","block-btn"],[1,"d-flex","justify-content-end","align-self-end"],["tabindex","-1","mat-button","",1,"btn",2,"font-size","10px","padding-top","0","color","#0eafc0",3,"cdkCopyToClipboard","click"],[2,"font-size","12px","padding-top","5px"],[1,"col-md-1","p-0","d-flex"],[1,"m-auto",3,"fileName","linkUrl"],[1,"mb-1",2,"font-size","14px","color","#8E8E8E"],["class","mb-1","style","font-size: 14px; color: #0EAFC0;",4,"ngIf"],[3,"type","typeObj","id","permissionObj"],[3,"ngIf"],[1,"text-center"],["class","clickable","style","user-select: none;",3,"click",4,"ngIf"],[2,"background-color","#ecf0f5","overflow","hidden"],[1,"container-fluid","content-zone",2,"background-color","#ecf0f5",3,"ngClass"],[1,"box-content","py-2"],["boxContent",""],[1,"row","pl-0","pr-0","ml-0","mr-0",3,"ngClass"],[1,"col-md-12","pl-0","pr-0"],[1,"row","pl-0","pr-0","ml-0","mr-0","justify-content-between",3,"hidden"],[1,"col-sm-6","d-flex"],["class","clickable",3,"matTooltip","click",4,"ngIf"],[1,"mb-0","ml-3","align-self-center"],[1,"clickable","link-stu",2,"vertical-align","middle",3,"routerLink","matTooltip"],[2,"vertical-align","middle","color","#646464a1","height","20px","font-size","20px","width","20px"],[1,"truncate_custom",2,"vertical-align","middle",3,"matTooltip"],[1,"col-sm-6","align-self-center"],[1,"d-flex","justify-content-end"],[1,"col-6","pl-0","pr-0","text-right"],[2,"position","relative",3,"formGroup"],["type","text","formControlName","searchContent",1,"input-search",3,"placeholder","keyup.enter"],[1,"search-icon","clickable",3,"click"],[1,"search-ver",2,"vertical-align","middle","font-size","18px","height","16px","width","18px"],[1,"ml-2","mr-2","text-center"],[1,"filter_btn"],["mat-button","",1,"menu-button",3,"matMenuTriggerFor"],[2,"vertical-align","middle","color","#828282"],[2,"font-size","16px","height","16px"],["xPosition","before"],["beforeMenu","matMenu"],["mat-menu-item","",1,"cursorDefault","mb-2",2,"height","30px","line-height","30px",3,"click"],[2,"vertical-align","middle"],["color","primary",2,"vertical-align","middle","margin-left","5px",3,"checked","change"],[1,"d-flex","justify-content-end","px-2"],["mat-menu-item","",1,"clickable",2,"height","30px","line-height","30px",3,"click"],[1,"filter_btn","bg-light"],["mat-button","",1,"menu-button","pl-0","pr-0","pb-0",2,"min-width","auto",3,"matMenuTriggerFor"],[2,"vertical-align","middle","color","#333333"],["menu","matMenu"],["mat-menu-item","",1,"clickable","mb-2",2,"height","30px","line-height","30px",3,"click"],[1,"menu-icon"],[2,"vertical-align","middle","color","#828282",3,"matTooltip"],["color","primary",2,"vertical-align","middle","margin-left","10px",3,"checked","change"],[1,"col-12",3,"hidden"],[1,"col-6"],[1,"col-5","block-btn"],[1,"col-1","p-0","d-flex"],[1,"col-12"],[1,"col-8"],[1,"col-4"],[1,"d-flex","justify-content-end","align-self-center"],["class","clickable d-flex align-items-center","style","user-select: none; font-size: 16px;",3,"routerLink","queryParams",4,"ngIf"],["class","clickable ml-3 d-flex align-items-center","style","user-select: none; font-size: 16px;",3,"click",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3","ml-0","mr-0",2,"width","100%"],["class","col-12",4,"ngIf","ngIfElse"],["dd",""],["class","box-content py-2",4,"ngIf"],[3,"studentList","homeworkObj","currentDate","typeTable"],[1,"mb-1",2,"font-size","14px","color","#0EAFC0"],["class","row ml-0 mr-0 files_zone mt-3",4,"ngIf"],["id","description_content","class","description text-left align-self-center py-2 px-3",3,"innerHTML",4,"ngIf"],[1,"d-flex","justify-content-end","align-self-center","mt-2"],["class","clickable","style","user-select: none; font-size: 16px;",3,"routerLink","queryParams",4,"ngIf"],["class","clickable ml-3","style","user-select: none; font-size: 16px;",3,"click",4,"ngIf"],[1,"row","ml-0","mr-0","files_zone","mt-3"],["class","col-12 col-sm-12 col-md-12 align-self-center",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-12","align-self-center"],[1,"file_obj","d-flex","text-left","py-2","clickable",3,"click"],[2,"font-size","18px","vertical-align","middle","color","#3C8DBC","margin-right","3px","height","20px","width","20px"],[1,"truncate",2,"vertical-align","middle","color","#3C8DBC",3,"matTooltip"],["id","description_content",1,"description","text-left","align-self-center","py-2","px-3",3,"innerHTML"],[1,"clickable",2,"user-select","none","font-size","16px",3,"routerLink","queryParams"],[2,"vertical-align","middle","color","#8E8E8E"],[2,"vertical-align","middle","color","#8E8E8E","font-size","14px"],[1,"clickable","ml-3",2,"user-select","none","font-size","16px",3,"click"],[1,"clickable",2,"user-select","none",3,"click"],[1,"clickable",3,"matTooltip","click"],[2,"vertical-align","middle","color","#646464","transform","rotateY(180deg)"],[2,"vertical-align","middle","color","#646464"],[1,"clickable","d-flex","align-items-center",2,"user-select","none","font-size","16px",3,"routerLink","queryParams"],[2,"vertical-align","middle","color","#8E8E8E","font-size","19px"],[1,"clickable","ml-3","d-flex","align-items-center",2,"user-select","none","font-size","16px",3,"click"],[2,"vertical-align","middle","color","#bd3737","font-size","19px"],[2,"vertical-align","middle","color","#bd3737","font-size","14px"],["class","row ml-0 mr-0  files_zone mt-3",4,"ngIf"],["class","description text-left align-self-center py-2 px-3",3,"innerHTML",4,"ngIf"],[1,"description","text-left","align-self-center","py-2","px-3",3,"innerHTML"],[1,"row","mt-3"],[1,"col-4","pl-0"],["mat-button","",1,"menu-button","menu-button-mb",3,"matMenuTriggerFor"],[2,"vertical-align","middle","color","#0EAFC0"],[1,"mb-1","h6",2,"font-weight","400","font-size","14px"],[1,"row","align-items-center","mx-auto",2,"width","100%"],[1,"col-10","p-0","text-left"],[1,"col-2","p-0","pb-2","d-flex","justify-content-end"],[1,"text-center","mt-3"],[1,"h4"],[3,"isSortByTime","backToLink","searchKey","studentLists","isNotTestedYet","isOpenSideNav","obj","goToResult"],[1,"py-4"]],template:function(t,o){if(1&t&&(e.TgZ(0,"header-backend",0),e.NdJ("removeFilter",function(){return o.removeFilterStore()}),e.qZA(),e.YNc(1,cn,1,0,"azt-loading-effect",1),e.YNc(2,Gn,1,1,"ng-template",null,2,e.W1O)),2&t){const i=e.MAs(3);e.Q6J("headerTitle",(null==o.homeworkObj?null:o.homeworkObj.name)||"")("headerBackTolink",o.backToLink),e.xp6(1),e.Q6J("ngIf",o.statusObj.loading)("ngIfElse",i)}},dependencies:[k.mk,k.sg,k.O5,Z.yS,he.i3,B.lW,U.Hw,oe.VK,oe.OP,oe.p6,ue.jA,ue.kh,ue.LW,Ko.Rr,G.gM,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,X.Q,ee.p,Wo.O,be.x,$o.I,Vo.o,re.M,tn,an,k.OU,k.uU,y.mp,y.bT,y.QA,y.Ev,y.BU,y.vL],styles:[".tested_list_container[_ngcontent-%COMP%]{overflow:hidden;height:calc(100vh - 77px - .5rem)}  .mat-drawer-inner-container::-webkit-scrollbar{width:8px;margin:5px}  .mat-drawer-inner-container::-webkit-scrollbar-thumb{background:rgb(207,206,206);border-radius:10px}  .mat-drawer-inner-container{overflow:auto!important}.link-stu[_ngcontent-%COMP%]{color:#000}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.box-content[_ngcontent-%COMP%]{background:inherit;background-color:#f9f9f9;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e9e9e9;border-radius:5px;box-shadow:none}.exam_info[_ngcontent-%COMP%]{padding:8px 16px}.exam_title[_ngcontent-%COMP%]{font-size:16px;color:#646464}.w-30[_ngcontent-%COMP%]{width:30%}.w-60[_ngcontent-%COMP%]{width:60%}.search-icon[_ngcontent-%COMP%]{position:absolute;right:5px;top:2px;color:#0eafc0}.input-search[_ngcontent-%COMP%]{width:100%;border:1px solid rgba(234,234,234,.8901960784);padding:.1rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:1px solid #0EAFC0;outline:none}.btn_action[_ngcontent-%COMP%]{background:inherit;background-color:#fafafa;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#f1f1f1;border-radius:0;box-shadow:none}.filter_btn[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{font-size:12px;font-weight:400!important;border:1px solid rgba(234,234,234,.8901960784);border-radius:3px;text-transform:none;padding-right:6px;padding-bottom:3px;color:#414141;line-height:20px}.content-zone[_ngcontent-%COMP%]{height:100%}.scrollable-content[_ngcontent-%COMP%]{height:calc(100vh - 466px);overflow:hidden}.box-item[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px}.student-item[_ngcontent-%COMP%]{display:flex;position:relative}.student-item[_ngcontent-%COMP%]   .enterClsWrap[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .deleteBtn[_ngcontent-%COMP%]{display:flex}.stdimg[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:10px}.stdinfo[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto}.menu-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#828282}.truncate_custom[_ngcontent-%COMP%]{max-width:80%;display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.homework_title[_ngcontent-%COMP%]{font-size:16px;color:#646464;word-break:break-word}.files_zone[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{background:inherit;background-color:#fafafa;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#f1f1f1;border-radius:0/0 0 0px 0px;box-shadow:none;font-size:13px;word-break:break-word}.cursorDefault[_ngcontent-%COMP%]{cursor:default}@media (max-width: 756px){.tested_list_container[_ngcontent-%COMP%]{height:auto}.truncate_custom[_ngcontent-%COMP%]{max-width:70%}}.input-search-mb[_ngcontent-%COMP%]{width:100%;padding:2px}.menu-button-mb[_ngcontent-%COMP%]{text-align:center;width:100%}.truncate[_ngcontent-%COMP%]{word-break:break-word!important;white-space:unset!important}"]}),n})(),Kn=(()=>{class n extends L.Q{constructor(t,o,i,r,a,l){super(a),this.dialogRef=t,this.answerService=o,this.activeRoute=i,this.fb=r,this.commonService=a,this.data=l,this.subscriptions=new te.w,this.form=new d.nJ({}),this.result=!1,this.homeworkHashId=""}getData(){this.initStatusObj(),this.data.status?this.successStatusObj():this.stopStatusObj()}cleanResult(){var t=this.commonService.getFormObj(this.form),o={homeworkHashId:this.data.itemHomework.hashId,id:this.data.ans_id,resendNote:t.reason};this.initStatusObj(),this.subscriptions.add(this.answerService.apiAnswerResendAnswerPost(o).subscribe(i=>{var r;1==i.success?(this.showSuccessSnack("lang_cms_send_request_success"),this.result=!0,this.onSubmit({result:this.result,id:this.data.ans_id,itemHomework:this.data.itemHomework}),this.data.redirect&&this.commonService.myNavigation("/admin/homework/score-list/"+this.data.classID+"/"+this.data.itemHomework.id+"/"+this.homeworkHashId),this.successStatusObj()):(this.showErrorSnack("lang_cms_send_request_error"),this.result=!1,this.onSubmit({result:this.result,id:this.data.ans_id,itemHomework:this.data.itemHomework}),this.errorStatusObj(null!==(r=i.message)&&void 0!==r?r:""))}))}ngOnInit(){var t;this.homeworkHashId=null!==(t=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==t?t:"",this.getData(),this.form=this.fb.group({reason:new d.p4("",d.kI.required)}),super.ngOnInit()}onNoClick(){this.dialogRef.close()}onSubmit(t){this.dialogRef.close(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.so),e.Y36(Y.P6),e.Y36(Z.gz),e.Y36(d.QS),e.Y36(I.v),e.Y36(A.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["clean-result-dialog"]],features:[e.qOj],decls:40,vars:32,consts:[[3,"hidden"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],["enctype","multipart/form-data",1,"form-horizontal","text-center",3,"formGroup"],[1,"text-center"],[1,"h5"],[1,"text-left",2,"border","1px dashed red","padding","10px 5px","border-radius","5px"],[1,"h5","text-danger","text-center"],[1,"h5","mb-1"],[1,"text-danger"],[1,"h5","text-danger","mt-1","mb-1"],["type","text","id","reason","formControlName","reason",1,"form-control"],["mat-dialog-actions","",1,"d-flex","float-right","mt-3"],[1,"azt-block-button"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4,"..."),e.qZA()()()(),e.TgZ(5,"div",0)(6,"form",4)(7,"div",5)(8,"p",6),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",7)(12,"p",8),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"p",9),e._uU(16),e.ALo(17,"mytranslate"),e.TgZ(18,"span",10),e._uU(19),e.qZA(),e._uU(20),e.ALo(21,"mytranslate"),e.TgZ(22,"span",10),e._uU(23),e.ALo(24,"date"),e.qZA(),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e._UZ(27,"hr"),e.TgZ(28,"p",11),e._uU(29),e.ALo(30,"mytranslate"),e.qZA(),e._UZ(31,"input",12),e.qZA()()(),e.TgZ(32,"div",13)(33,"div",14)(34,"button",15),e.NdJ("click",function(){return o.cleanResult()}),e._uU(35),e.ALo(36,"mytranslate"),e.qZA()(),e.TgZ(37,"button",16),e.NdJ("click",function(){return o.onNoClick()}),e._uU(38),e.ALo(39,"mytranslate"),e.qZA()()),2&t&&(e.Q6J("hidden",!o.statusObj.loading),e.xp6(5),e.Q6J("hidden",o.statusObj.loading),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(3),e.Oqu(e.lcZ(10,13,"lang_homework_mark_exercise_utils_request_resubmit")),e.xp6(4),e.hij("(*) ",e.lcZ(14,15,"lang_homework_mark_exercise_utils_note"),":"),e.xp6(3),e.hij("",e.lcZ(17,17,"lang_homework_mark_exercise_utils_request")," "),e.xp6(3),e.hij(" ",o.data.name," "),e.xp6(1),e.hij(" ",e.lcZ(21,19,"lang_homework_mark_exercise_utils_in_homework"),"\xa0"),e.xp6(3),e.Oqu(e.xi3(24,21,o.data.deadline?o.data.deadline:o.data.itemHomework.createdAt,"dd/MM/yyyy")),e.xp6(2),e.hij("\xa0",e.lcZ(26,24,"lang_homework_mark_exercise_utils_will_be_deleted"),"!"),e.xp6(4),e.Oqu(e.lcZ(30,26,"lang_homework_mark_exercise_utils_coment_request_resubmit")),e.xp6(6),e.hij(" ",e.lcZ(36,28,"lang_buttom_confirm")," "),e.xp6(3),e.Oqu(e.lcZ(39,30,"lang_buttom_cancel")))},dependencies:[A.H8,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,re.M,k.uU,y.bT],encapsulation:2}),n})(),Wn=(()=>{class n extends L.Q{constructor(t,o,i,r){super(i),this.dialogRef=t,this.answerService=o,this.commonService=i,this.data=r,this.success=!1}ngOnInit(){this.success=this.data.status}checkNextAns(){this.dialogRef.close(),this.answerService.apiAnswerGetNextObjByHomeworkGet(this.data.homeworkHashId).subscribe(t=>{var o,i;0!=t.success?(this.commonService.myNavigationWithQueryString("/admin/homework/mark-exercise/"+(null===(i=null===(o=t.data)||void 0===o?void 0:o.obj)||void 0===i?void 0:i.id)+"/"+this.data.homeworkHashId,"?backto="+encodeURIComponent(this.data.backToLink)),setTimeout(()=>{document.location.reload()},500)):this.commonService.myNavigation("/admin/homework/score-list/"+this.data.classID+"/"+this.data.homeWorkID+"/"+this.data.homeworkHashId)})}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.so),e.Y36(ce.P),e.Y36(I.v),e.Y36(A.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["notice-dialog"]],features:[e.qOj],decls:16,vars:10,consts:[["mat-dialog-title","",1,"d-flex","align-items-center",2,"color","#6d6d6d"],[1,"mr-1",2,"color","green"],["mat-dialog-content",""],[2,"color","red","font-size","120%","font-weight","500"],[3,"mark"],[1,"d-flex","float-right","mt-3"],["id","ok","mat-raised-button","",3,"click"],["id","next","mat-raised-button","",1,"ml-2",2,"background-color","#2361ae","color","#fff",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"h2",0)(1,"mat-icon",1),e._uU(2,"check_circle"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",2),e._uU(6),e.ALo(7,"mytranslate"),e.TgZ(8,"span",3),e._UZ(9,"azt-check-mark",4),e.qZA()(),e.TgZ(10,"div",5)(11,"button",6),e.NdJ("click",function(){return o.onNoClick()}),e._uU(12,"Ok"),e.qZA(),e.TgZ(13,"button",7),e.NdJ("click",function(){return o.checkNextAns()}),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,4,"lang_homework_mark_exercise_utils_mark_success"),""),e.xp6(3),e.hij(" ",e.lcZ(7,6,"lang_homework_mark_exercise_utils_assignment_marking")," "),e.xp6(3),e.Q6J("mark",o.data.score),e.xp6(5),e.Oqu(e.lcZ(15,8,"lang_homework_mark_exercise_utils_mark_continue")))},dependencies:[B.lW,A.uh,A.xY,U.Hw,Me.B,y.bT],styles:["#ok[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}#next[_ngcontent-%COMP%]:hover{background-color:#1e579d!important}"]}),n})();var $n=_(43147),Vn=_(15431),Xn=_(41752),ei=_(64123);function ti(n,s){if(1&n&&(e.TgZ(0,"button",13),e.ALo(1,"mytranslate"),e.TgZ(2,"mat-icon"),e._uU(3,"history"),e.qZA()()),2&n){e.oxw();const t=e.MAs(8);e.s9C("matTooltip",e.lcZ(1,2,"lang_homework_mark_exercise_history_submit")),e.Q6J("matMenuTriggerFor",t)}}function oi(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.getDataHistory(r.id?r.id.toString():""))}),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"date"),e.qZA()(),e.BQk()}if(2&n){const t=s.$implicit,o=s.index;e.xp6(3),e.lnq("",e.lcZ(4,3,"lang_homework_mark_exercise_times")," ",o+1," - ",e.xi3(5,5,t.createdAt,"dd/MM/yyyy HH:mm:ss"),"")}}function ni(n,s){if(1&n&&(e.TgZ(0,"span"),e._UZ(1,"azt-create-avatar",15),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hYB("matTooltip","",e.lcZ(2,5,"lang_homework_mark_exercise_teacher_mark")," ",": "+t.markedByObj.fullName,""),e.Q6J("nameCreateAvatar",t.markedByObj.fullName)("size",25)("linkAvatar",t.markedByObj.avatar)}}function ii(n,s){if(1&n&&(e.TgZ(0,"h4",14),e.YNc(1,ni,3,7,"span",11),e._uU(2),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isMarked),e.xp6(1),e.AsE(" ",t.studentObj.fullName,", ",t.classroomObj.name," ")}}function ri(n,s){1&n&&(e._UZ(0,"azt-loading-effect",16),e.ALo(1,"mytranslate")),2&n&&e.Q6J("customText",e.lcZ(1,1,"lang_homework_mark_exercise_loading_data_mark"))}function ai(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",17)(2,"div",18)(3,"div",19),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,1,t.errorMessage))}}function si(n,s){if(1&n&&(e.TgZ(0,"div",20),e._UZ(1,"iframe",21),e.ALo(2,"safe"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",e.lcZ(2,1,t.iframeSrc),e.uOi)}}let li=(()=>{class n extends L.Q{constructor(t,o,i,r,a,l,c,m,h,p){super(r),this.activeRoute=t,this.answerService=o,this.baseApiService=i,this.commonService=r,this.permissionService=a,this.dialog=l,this.cdnService=c,this.zipdataService=m,this.envService=h,this.apiUploadService=p,this.subscriptions=new te.w,this.result={},this.answerId=0,this.homeworkID="",this.historyId="",this.iframeSrc="",this.isMarked=!1,this.jsonData={},this.errorMessage="",this.files=[],this.classID="",this.homeworkObj={},this.studentName="",this.markedByObj={},this.studentObj={},this.classroomObj={},this.score=0,this.mnoteJsonData={},this.pagesCount=0,this.backToLink="",this.hasSendDataToIframe=!1,this.hasLoadedData=!1,this.historyAnswerObjs=[],this.countLoad=1,this.homeworkHashId="",this.useNewDashboard=!1,this.handleIframe=u=>{var g;"MNoteJson"==u.data.cmd&&(this.initStatusObj(),this.mnoteJsonData=u.data.data,this.uploadAll(null!==(g=this.mnoteJsonData.pages)&&void 0!==g?g:[],u.data.data.point)),"MNoteReSubmit"==u.data.cmd&&(console.log("listend res submit"),this.handleOpenReSubmit()),"MNoteLoadComplete"==u.data&&(this.hasLoadedData?(this.hasSendDataToIframe=!0,""==this.historyId?this.sendDataToIframe():this.sendDataToIframeHistory()):this.hasSendDataToIframe=!1)}}onPopState(t){this.goBack()}uploadDrawBase64ToCDN(t,o,i){let r=this.baseApiService.dataURItoBlob(t);this.apiUploadService.commonUploadForMarkResult(r,`essay_note_${o}_${this.answerId}.png`,"image/png",1e4).subscribe(a=>{var l,c;a.type!=le.dt.UploadProgress&&(1==a.success?(!(null===(l=this.mnoteJsonData.pages)||void 0===l)&&l[o]&&(this.mnoteJsonData.pages[o].draw=null===(c=a.data)||void 0===c?void 0:c.url),this.pagesCount--,0==this.pagesCount&&this.remark(this.answerId,i,this.mnoteJsonData)):(this.showErrorSnack("lang_cms_cannot_save_data_marked"),this.stopStatusObj()))})}uploadAll(t,o){this.pagesCount=0;for(let i=0;i<t.length;i++)t[i].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(this.answerId,o,this.mnoteJsonData);else for(let i=0;i<t.length;i++)t[i].draw&&this.uploadDrawBase64ToCDN(t[i].draw,i,o)}reloadPage(){location.reload()}sendDataToIframe(){var t,o,i,r,a,l,c,m,h,p,u,g,w,C,O;const j=document.getElementById("mNote"),T=j?j.contentWindow:null;if(null!==T){let f=this.result.hasOwnProperty("answerObj")&&null!==(t=this.castObj(this.result.answerObj))&&void 0!==t?t:{};if(this.result.hasOwnProperty("answerObj")){let b=this.commonService.willDeleteParseJson(null!==(o=f.result)&&void 0!==o?o:"");if(null!=b){let M=null!==(r=null===(i=b.pages)||void 0===i?void 0:i.length)&&void 0!==r?r:0;for(let J=0;J<M;J++)!(null===(a=null==b?void 0:b.pages)||void 0===a)&&a[J].backgroundImage&&(b.pages[J].backgroundImage=this.cdnService.getMyCdn(null!==(l=b.pages[J].backgroundImage)&&void 0!==l?l:"")),null!==(c=b.pages)&&void 0!==c&&c[J].draw&&(b.pages[J].draw=this.cdnService.getMyCdn(b.pages[J].draw));b=JSON.stringify(b),f.result=b}let S=this.commonService.willDeleteParseJson(null!==(m=f.files)&&void 0!==m?m:"");if(null!=S){for(let M=0;M<S.length;M++)S[M].url&&(S[M].url=this.cdnService.getMyCdn(S[M].url)),S[M].thumb&&(S[M].thumb=this.cdnService.getMyCdn(S[M].thumb));S=JSON.stringify(S),f.files=S}}let x=this.result.hasOwnProperty("studentObj")?this.result.studentObj:{},v=this.result.hasOwnProperty("classroomObj")?this.result.classroomObj:{},F=this.result.hasOwnProperty("homeworkObj")?this.result.homeworkObj:{},H=this.commonService.myParseJson(null!==(h=f.result)&&void 0!==h?h:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let b=0;b<(null!==(u=null===(p=this.jsonData.pages)||void 0===p?void 0:p.length)&&void 0!==u?u:0);b++)!(null===(g=this.jsonData.pages)||void 0===g)&&g[b].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[b].backgroundImage=this.cdnService.getMyCdn(null!==(w=this.jsonData.pages[b].backgroundImage)&&void 0!==w?w:"")),null!==(C=this.jsonData.pages)&&void 0!==C&&C[b].hasOwnProperty("draw")&&(this.jsonData.pages[b].draw=this.cdnService.getMyCdn(null!==(O=this.jsonData.pages[b].draw)&&void 0!==O?O:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.answer_obj=f,this.jsonData.student_obj=x,this.jsonData.classroom_obj=v,this.jsonData.homework_obj=F,H&&H.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=H.hideMark),T.postMessage(this.jsonData,"*");else{let b=[];this.files.forEach(M=>{b.push({backgroundImage:M.url})});let S={cmd:"initMNote",mode:"edit",pages:b,answer_obj:f,student_obj:x,classroom_obj:v,homework_obj:F};H&&H.hasOwnProperty("hideMark")&&(S.hideMark=H.hideMark),T.postMessage(S,"*")}}}sendDataToIframeHistory(){var t,o,i,r,a,l,c,m,h,p;const u=document.getElementById("mNote");u&&1==this.countLoad&&(u.src+="");const g=u?u.contentWindow:null;if(null!==g){let w=this.result.hasOwnProperty("answerObj")&&null!==(t=this.castObj(this.result.answerObj))&&void 0!==t?t:{};if(this.result.hasOwnProperty("answerObj")){let f=this.commonService.willDeleteParseJson(null!==(o=w.result)&&void 0!==o?o:"");if(null!=f){for(let v=0;v<f.pages.length;v++)f.pages[v].backgroundImage&&(f.pages[v].backgroundImage=this.cdnService.getMyCdn(f.pages[v].backgroundImage)),f.pages[v].draw&&(f.pages[v].draw=this.cdnService.getMyCdn(f.pages[v].draw));f=JSON.stringify(f),w.result=f}let x=this.commonService.willDeleteParseJson(null!==(i=w.files)&&void 0!==i?i:"");if(null!=x){for(let v=0;v<x.length;v++)x[v].url&&(x[v].url=this.cdnService.getMyCdn(x[v].url)),x[v].thumb&&(x[v].thumb=this.cdnService.getMyCdn(x[v].thumb));x=JSON.stringify(x),w.files=x}}let C=this.studentObj,O=this.classroomObj,j=this.homeworkObj,T=this.commonService.willDeleteParseJson(null!==(r=w.result)&&void 0!==r?r:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let f=0;f<(null!==(l=null===(a=this.jsonData.pages)||void 0===a?void 0:a.length)&&void 0!==l?l:0);f++)!(null===(c=this.jsonData.pages)||void 0===c)&&c[f].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[f].backgroundImage=this.cdnService.getMyCdn(null!==(m=this.jsonData.pages[f].backgroundImage)&&void 0!==m?m:"")),null!==(h=this.jsonData.pages)&&void 0!==h&&h[f].hasOwnProperty("draw")&&(this.jsonData.pages[f].draw=this.cdnService.getMyCdn(null!==(p=this.jsonData.pages[f].draw)&&void 0!==p?p:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=w,this.jsonData.student_obj=C,this.jsonData.classroom_obj=O,this.jsonData.homework_obj=j,T&&T.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=T.hideMark),g.postMessage(this.jsonData,"*");else{let f=[];this.files.forEach(v=>{f.push({backgroundImage:v.url})});let x={cmd:"initMNote",mode:"view",pages:f,answer_obj:w,student_obj:C,classroom_obj:O,homework_obj:j};T&&T.hasOwnProperty("hideMark")&&(x.hideMark=T.hideMark),g.postMessage(x,"*")}}}getHistoryObjs(t){this.initStatusObj(),this.answerService.apiAnswerGetHistoryObjsGet(this.homeworkHashId,t).subscribe(o=>{var i,r,a;1==o.success?this.historyAnswerObjs=null!==(r=null===(i=o.data)||void 0===i?void 0:i.objs)&&void 0!==r?r:new Array:this.errorMessage=null!==(a=o.message)&&void 0!==a?a:"",this.stopStatusObj()})}getDataHistory(t){this.historyId=t,this.errorMessage="",this.countLoad=1,this.answerService.apiAnswerGetHistoryObjGet(this.homeworkHashId,this.answerId,parseInt(t,10)).subscribe(o=>{var i,r,a,l,c,m,h,p,u,g,w,C,O,j,T,f;if(1==o.success){if(this.zipdataService.convertSubmittedAnswersHistoryObj(null===(i=o.data)||void 0===i?void 0:i.answerObj),this.result=null!==(r=o.data)&&void 0!==r?r:{},this.markedByObj=null!==(l=null===(a=o.data)||void 0===a?void 0:a.markedByObj)&&void 0!==l?l:{},this.score=null!==(h=null===(m=null===(c=o.data)||void 0===c?void 0:c.answerObj)||void 0===m?void 0:m.point)&&void 0!==h?h:0,this.files=null!==(w=this.commonService.myParseJson(null!==(g=null===(u=null===(p=o.data)||void 0===p?void 0:p.answerObj)||void 0===u?void 0:u.files)&&void 0!==g?g:""))&&void 0!==w?w:[],null!=this.files)for(let x=0;x<this.files.length;x++)this.files[x].url=this.cdnService.getMyCdn(null!==(O=null===(C=this.files)||void 0===C?void 0:C[x].url)&&void 0!==O?O:""),this.files[x].thumb=this.cdnService.getMyCdn(null!==(T=null===(j=this.files)||void 0===j?void 0:j[x].thumb)&&void 0!==T?T:"");this.handleJsonData(),this.hasLoadedData=!0,1==this.countLoad&&(this.hasSendDataToIframe=!1),0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframeHistory()),this.successStatusObj(),this.countLoad++}else this.errorMessage=null!==(f=o.message)&&void 0!==f?f:"",this.stopStatusObj()})}handleJsonData(){var t,o,i,r,a,l,c;if(this.jsonData={},null!==(o=null===(t=this.result)||void 0===t?void 0:t.answerObj)&&void 0!==o&&o.confirmedAt||null!==(r=null===(i=this.result)||void 0===i?void 0:i.answerObj)&&void 0!==r&&r.result||(this.isMarked=!1),null!==(a=this.result.answerObj)&&void 0!==a&&a.confirmedAt){this.isMarked=!0;var m=this.commonService.myParseJson(null!==(c=null===(l=this.result.answerObj)||void 0===l?void 0:l.result)&&void 0!==c?c:"");m&&(this.jsonData=m,null==this.jsonData&&(this.isMarked=!1))}}getData(t){this.initStatusObj(),this.errorMessage="",this.answerId=t,this.answerService.apiAnswerGetObjGet(this.homeworkHashId,t).subscribe(o=>{var i,r,a,l,c,m,h,p,u,g,w,C,O,j,T,f,x,v,F,H,b,S;if(1==o.success)if(this.zipdataService.convertSubmittedAnswersObj(null===(i=o.data)||void 0===i?void 0:i.answerObj),(null===(r=o.data)||void 0===r?void 0:r.hasOwnProperty("studentObj"))&&null!=(null===(a=o.data)||void 0===a?void 0:a.studentObj)){if(this.result=o.data,this.markedByObj=null!==(l=o.data.markedByObj)&&void 0!==l?l:{},this.score=null!==(h=null===(m=null===(c=o.data)||void 0===c?void 0:c.answerObj)||void 0===m?void 0:m.point)&&void 0!==h?h:0,this.homeworkID=null!==(u=null===(p=o.data.homeworkObj)||void 0===p?void 0:p.id)&&void 0!==u?u:0,this.classID=null!==(w=null===(g=o.data.classroomObj)||void 0===g?void 0:g.id)&&void 0!==w?w:0,this.files=null!==(j=this.commonService.myParseJson(null!==(O=null===(C=o.data.answerObj)||void 0===C?void 0:C.files)&&void 0!==O?O:""))&&void 0!==j?j:[],this.studentObj=o.data.studentObj,this.classroomObj=null!==(T=o.data.classroomObj)&&void 0!==T?T:{},null!=this.files)for(let M=0;M<this.files.length;M++)this.files[M].url=this.cdnService.getMyCdn(null!==(x=null===(f=this.files)||void 0===f?void 0:f[M].url)&&void 0!==x?x:""),this.files[M].thumb=this.cdnService.getMyCdn(null!==(F=null===(v=this.files)||void 0===v?void 0:v[M].thumb)&&void 0!==F?F:"");this.homeworkObj=null!==(H=o.data.homeworkObj)&&void 0!==H?H:{},this.studentName=null!==(b=o.data.studentObj.fullName)&&void 0!==b?b:"",this.handleJsonData(),this.hasLoadedData=!0,0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframe()),this.successStatusObj()}else this.errorMessage="lang_core_not_found_student",this.stopStatusObj();else this.errorMessage=null!==(S=o.message)&&void 0!==S?S:"",this.stopStatusObj()})}openDialog(t,o){this.dialog.open(Wn,{width:"280px",autoFocus:!1,data:{score:o,status:t,homeWorkID:this.homeworkID,homeworkHashId:this.homeworkHashId,classID:this.classID,backToLink:this.backToLink}}).afterClosed().subscribe(r=>{})}handleOpenReSubmit(){var t;this.openDialogReSubmit(!0,null!==(t=this.homeworkObj.deadline)&&void 0!==t?t:void 0,this.homeworkObj,this.answerId,this.studentName)}openDialogReSubmit(t,o,i,r,a){this.dialog.open(Kn,{width:"380px",panelClass:"cleanResultDialogBox",data:{status:t,deadline:o,itemHomework:i,ans_id:r,name:a,redirect:!0,classID:this.classID}}).afterClosed().subscribe(c=>{})}remark(t,o,i){let r=JSON.stringify({type:"homework",id:this.homeworkObj.id,user:this.homeworkObj.tenantId});if(""==this.historyId)if(1==this.permissionService.hasMarkPointPermission("homework",this.homeworkObj.permissionObj)){let a={id:t,comment:i.comment,hideMark:i.hideMark?1:0,point:o?parseFloat(o.replace(",",".")):0,result:this.zipdataService.convertContentGzip(JSON.stringify(i)),homeworkHashId:this.homeworkHashId};this.answerService.apiAnswerSaveResultPost(a,r).subscribe(l=>{var c,m;1==l.success?(this.openDialog(!0,null===(m=null===(c=l.data)||void 0===c?void 0:c.obj)||void 0===m?void 0:m.point),this.successStatusObj()):(this.stopStatusObj(),this.showErrorSnack("lang_cms_mark_fail"))})}else this.showErrorSnack("lang_cms_no_permission_on_homework"),this.stopStatusObj();else this.stopStatusObj(),this.showErrorSnack("lang_cms_cannot_remark_student_history_result")}goBack(){var t;this.commonService.myNavigation(this.backToLink?this.backToLink:this.useNewDashboard?"/admin/testbank/homework-results-list/"+(null!==(t=this.homeworkObj.categoryId)&&void 0!==t?t:"0")+"/"+this.homeworkID+"/"+this.homeworkObj.hashId:"/admin/homework/score-list/"+this.classID+"/"+this.homeworkID+"/"+this.homeworkObj.hashId);let o=document.body,i=document.getElementById("azota-app-html");null==i||i.classList.remove("overflow-hidden"),null==i||i.classList.remove("height-100"),o.classList.remove("overflow-hidden"),o.classList.remove("height-100")}ngOnInit(){var t,o,i,r;let a=document.body,l=document.getElementById("azota-app-html");null==l||l.classList.add("overflow-hidden"),null==l||l.classList.add("height-100"),a.classList.add("overflow-hidden"),a.classList.add("height-100"),this.iframeSrc=null!==(t=this.envService.getEnvValue("classliveUrl"))&&void 0!==t?t:"";const c=this.commonService.getMyParam(this.activeRoute,"id")?Number(this.commonService.getMyParam(this.activeRoute,"id")):0,m=null!==(o=this.commonService.getMyParam(this.activeRoute,"historyId"))&&void 0!==o?o:"";this.homeworkHashId=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:"",this.backToLink=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"",this.getData(c),this.getHistoryObjs(c),m&&this.getDataHistory(m),this.commonService.translateMetaData({title:"lang_cms_homework_mark_exercise_title",description:"lang_cms_homework_mark_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnDestroy(){this.goBack(),window.removeEventListener("message",this.handleIframe),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.gz),e.Y36(ce.P),e.Y36($n._),e.Y36(I.v),e.Y36(Vn.$),e.Y36(A.uw),e.Y36(je.U),e.Y36(ie.n),e.Y36(Xn.D),e.Y36(ve.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mark-exericse"]],hostBindings:function(t,o){1&t&&e.NdJ("popstate",function(r){return o.onPopState(r)},!1,e.Jf7)},features:[e.qOj],decls:19,vars:13,consts:[["id","markContainer",1,"maxW1000"],["id","titleRow"],[1,"block-left"],["mat-button","",3,"title","click"],["mat-icon-button","",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngFor","ngForOf"],["class","studentInfo","style","padding-right: 10px; color: #fff",4,"ngIf"],[3,"customText",4,"ngIf"],[3,"hidden"],[4,"ngIf"],["class","card-box listPhotos",4,"ngIf"],["mat-icon-button","",3,"matTooltip","matMenuTriggerFor"],[1,"studentInfo",2,"padding-right","10px","color","#fff"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],[3,"customText"],[1,"row","justify-content-center","py-5"],[1,"col-12","text-center"],[1,"alert","alert-danger"],[1,"card-box","listPhotos"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),e.NdJ("click",function(){return o.goBack()}),e.ALo(4,"mytranslate"),e._uU(5,"keyboard_arrow_left"),e.qZA(),e.YNc(6,ti,4,4,"button",4),e.TgZ(7,"mat-menu",null,5)(9,"button",6),e.NdJ("click",function(){return o.reloadPage()}),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.YNc(13,oi,6,8,"ng-container",7),e.qZA()(),e.YNc(14,ii,3,3,"h4",8),e.qZA(),e.YNc(15,ri,2,3,"azt-loading-effect",9),e.TgZ(16,"div",10),e.YNc(17,ai,6,3,"div",11),e.YNc(18,si,3,3,"div",12),e.qZA()()),2&t&&(e.xp6(3),e.s9C("title",e.lcZ(4,9,"lang_buttom_back")),e.xp6(3),e.Q6J("ngIf",null!=o.historyAnswerObjs&&o.historyAnswerObjs.length>0),e.xp6(5),e.Oqu(e.lcZ(12,11,"lang_homework_mark_exercise_last")),e.xp6(2),e.Q6J("ngForOf",o.historyAnswerObjs),e.xp6(1),e.Q6J("ngIf",o.classroomObj),e.xp6(1),e.Q6J("ngIf",o.statusObj.loading),e.xp6(1),e.Q6J("hidden",o.statusObj.loading),e.xp6(1),e.Q6J("ngIf",""!=o.errorMessage),e.xp6(1),e.Q6J("ngIf",""==o.errorMessage))},dependencies:[k.sg,k.O5,B.lW,U.Hw,oe.VK,oe.OP,oe.p6,G.gM,X.Q,ei.t,k.uU,y.bT,y.yl],styles:["#markContainer[_ngcontent-%COMP%]{position:relative}#titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;position:relative;align-items:center;display:flex;justify-content:space-between;color:#fff}#titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}#titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}.block-left[_ngcontent-%COMP%]{display:flex;align-items:center}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f2f2f2;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e5e5e5;border-left:0px;border-right:0px;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width: 1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}"]}),n})();const ci=[{path:"",component:(()=>{class n extends L.Q{constructor(t){super(t),this.commonService=t}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["homework-master-page"]],features:[e.qOj],decls:2,vars:0,consts:[["id","homework-layout"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[Z.lC],encapsulation:2}),n})(),canActivate:[K.v],children:[{path:"classes",component:pe},{path:"classes/:page",component:pe},{path:"homework-list/:id",component:Bo},{path:"add-new-homework/:id",component:Oe},{path:"add-new-homework/:id/:hash_id",component:Oe},{path:"score-list/:class_id/:id/:hash_id",component:Rn},{path:"export-homework/:class_id/:id/:hash_id",component:Jo},{path:"mark-exercise/:id/:hash_id",component:li},{path:"create-homework-success/:hash_ids",component:ho},{path:"content-store",component:no},{path:"",component:pe}]}];let di=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Z.Bz.forChild(ci),Z.Bz,N.fQ]}),n})(),_i=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[R.Xd,Z.Bz,k.ez,D.j,$.Z_,di,d.u5,d.UX,A.Is,z.Z,P.xC,q.W]}),n})()}}]);