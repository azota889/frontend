"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[284],{12011:(xe,me,m)=>{m.d(me,{Dh:()=>ae,GT:()=>se,cc:()=>U,hO:()=>C,on:()=>Q,pX:()=>O,xv:()=>oe});var E=m(5e3),Y=m(70127),d=m(26351);xe=m.hmd(xe);const P=["ngOnDestroy"],O=(b,x,F,j={})=>new Proxy(b,{get:(ce,G)=>F.runOutsideAngular(()=>{var te;if(b[G])return!(null===(te=null==j?void 0:j.spy)||void 0===te)&&te.get&&j.spy.get(G,b[G]),b[G];if(P.indexOf(G)>-1)return()=>{};const M=x.toPromise().then(W=>{const N=W&&W[G];return"function"==typeof N?N.bind(W):N&&N.then?N.then($=>F.run(()=>$)):F.run(()=>N)});return new Proxy(()=>{},{get:(W,N)=>M[N],apply:(W,N,$)=>M.then(_e=>{var be;const Ve=_e&&_e(...$);return!(null===(be=null==j?void 0:j.spy)||void 0===be)&&be.apply&&j.spy.apply(G,$,Ve),Ve})})})}),se=(b,x)=>{x.forEach(F=>{Object.getOwnPropertyNames(F.prototype||F).forEach(j=>{Object.defineProperty(b.prototype,j,Object.getOwnPropertyDescriptor(F.prototype||F,j))})})};class pe{constructor(x){return x}}const ae=new E.OlP("angularfire2.app.options"),oe=new E.OlP("angularfire2.app.name");function Q(b,x,F){const ce="object"==typeof F&&F||{};ce.name=ce.name||"string"==typeof F&&F||"[DEFAULT]";const te=Y.Z.apps.filter(M=>M&&M.name===ce.name)[0]||x.runOutsideAngular(()=>Y.Z.initializeApp(b,ce));try{JSON.stringify(b)!==JSON.stringify(te.options)&&e("error",`${te.name} Firebase App already initialized with different options${xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(M){}return new pe(te)}const e=(b,...x)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[b](...x)},A={provide:pe,useFactory:Q,deps:[ae,E.R0b,[new E.FiY,oe]]};let C=(()=>{class b{constructor(F){Y.Z.registerVersion("angularfire",d.q4.full,"core"),Y.Z.registerVersion("angularfire",d.q4.full,"app-compat"),Y.Z.registerVersion("angular",E.q4F.full,F.toString())}static initializeApp(F,j){return{ngModule:b,providers:[{provide:ae,useValue:F},{provide:oe,useValue:j}]}}}return b.\u0275fac=function(F){return new(F||b)(E.LFG(E.Lbi))},b.\u0275mod=E.oAB({type:b}),b.\u0275inj=E.cJS({providers:[A]}),b})();function U(b,x,F,j,ce){const[,G,te]=globalThis.\u0275AngularfireInstanceCache.find(M=>M[0]===b)||[];if(G)return function R(b,x){try{return b.toString()===x.toString()}catch(F){return b===x}}(ce,te)||(k("error",`${x} was already initialized on the ${F} Firebase App with different settings.${L?" You may need to reload as Firebase is not HMR aware.":""}`),k("warn",{is:ce,was:te})),G;{const M=j();return globalThis.\u0275AngularfireInstanceCache.push([b,M,ce]),M}}const L=!!xe.hot,k=(b,...x)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[b](...x)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},26351:(xe,me,m)=>{m.d(me,{q4:()=>Pr,iC:()=>Fr,HU:()=>Dr,vb:()=>cs,JM:()=>as});var E=m(5e3),Y=m(15867),d=m(15861),P=m(49681),O=m(42090),se=m(34859),pe=m(41877),ae=m(98766);const oe="@firebase/installations",Q="0.5.11",A=`w:${Q}`,C="FIS_v2",x=new O.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function F(o){return o instanceof O.ZR&&o.code.includes("request-failed")}function j({projectId:o}){return`https://firebaseinstallations.googleapis.com/v1/projects/${o}/installations`}function ce(o){return{token:o.token,requestStatus:2,expiresIn:_e(o.expiresIn),creationTime:Date.now()}}function G(o,s){return te.apply(this,arguments)}function te(){return(te=(0,d.Z)(function*(o,s){const l=(yield s.json()).error;return x.create("request-failed",{requestName:o,serverCode:l.code,serverMessage:l.message,serverStatus:l.status})})).apply(this,arguments)}function M({apiKey:o}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":o})}function W(o,{refreshToken:s}){const c=M(o);return c.append("Authorization",function be(o){return`${C} ${o}`}(s)),c}function N(o){return $.apply(this,arguments)}function $(){return($=(0,d.Z)(function*(o){const s=yield o();return s.status>=500&&s.status<600?o():s})).apply(this,arguments)}function _e(o){return Number(o.replace("s","000"))}function Ve(o,s){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,d.Z)(function*({appConfig:o,heartbeatServiceProvider:s},{fid:c}){const l=j(o),p=M(o),h=s.getImmediate({optional:!0});if(h){const Z=yield h.getHeartbeatsHeader();Z&&p.append("x-firebase-client",Z)}const y={method:"POST",headers:p,body:JSON.stringify({fid:c,authVersion:C,appId:o.appId,sdkVersion:A})},S=yield N(()=>fetch(l,y));if(S.ok){const Z=yield S.json();return{fid:Z.fid||c,registrationStatus:2,refreshToken:Z.refreshToken,authToken:ce(Z.authToken)}}throw yield G("Create Installation",S)})).apply(this,arguments)}function Ke(o){return new Promise(s=>{setTimeout(s,o)})}const $n=/^[cdef][\w-]{21}$/;function Xn(){try{const o=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(o),o[0]=112+o[0]%16;const c=function Xi(o){return function Wn(o){return btoa(String.fromCharCode(...o)).replace(/\+/g,"-").replace(/\//g,"_")}(o).substr(0,22)}(o);return $n.test(c)?c:""}catch(o){return""}}function De(o){return`${o.appName}!${o.appId}`}const Le=new Map;function ei(o,s){const c=De(o);ti(c,s),function no(o,s){const c=function ni(){return!we&&"BroadcastChannel"in self&&(we=new BroadcastChannel("[Firebase] FID Change"),we.onmessage=o=>{ti(o.data.key,o.data.fid)}),we}();c&&c.postMessage({key:o,fid:s}),function ii(){0===Le.size&&we&&(we.close(),we=null)}()}(c,s)}function ti(o,s){const c=Le.get(o);if(c)for(const l of c)l(s)}let we=null;const Te="firebase-installations-store";let It=null;function Pt(){return It||(It=(0,ae.X3)("firebase-installations-database",1,{upgrade:(o,s)=>{0===s&&o.createObjectStore(Te)}})),It}function gt(o,s){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,d.Z)(function*(o,s){const c=De(o),p=(yield Pt()).transaction(Te,"readwrite"),h=p.objectStore(Te),f=yield h.get(c);return yield h.put(s,c),yield p.done,(!f||f.fid!==s.fid)&&ei(o,s.fid),s})).apply(this,arguments)}function Dt(o){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*(o){const s=De(o),l=(yield Pt()).transaction(Te,"readwrite");yield l.objectStore(Te).delete(s),yield l.done})).apply(this,arguments)}function Ge(o,s){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(o,s){const c=De(o),p=(yield Pt()).transaction(Te,"readwrite"),h=p.objectStore(Te),f=yield h.get(c),y=s(f);return void 0===y?yield h.delete(c):yield h.put(y,c),yield p.done,y&&(!f||f.fid!==y.fid)&&ei(o,y.fid),y})).apply(this,arguments)}function Fe(o){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(o){let s;const c=yield Ge(o.appConfig,l=>{const p=ro(l),h=so(o,p);return s=h.registrationPromise,h.installationEntry});return""===c.fid?{installationEntry:yield s}:{installationEntry:c,registrationPromise:s}})).apply(this,arguments)}function ro(o){return ri(o||{fid:Xn(),registrationStatus:0})}function so(o,s){if(0===s.registrationStatus){if(!navigator.onLine)return{installationEntry:s,registrationPromise:Promise.reject(x.create("app-offline"))};const c={fid:s.fid,registrationStatus:1,registrationTime:Date.now()},l=function ao(o,s){return Ut.apply(this,arguments)}(o,c);return{installationEntry:c,registrationPromise:l}}return 1===s.registrationStatus?{installationEntry:s,registrationPromise:co(o)}:{installationEntry:s}}function Ut(){return(Ut=(0,d.Z)(function*(o,s){try{const c=yield Ve(o,s);return gt(o.appConfig,c)}catch(c){throw F(c)&&409===c.customData.serverCode?yield Dt(o.appConfig):yield gt(o.appConfig,{fid:s.fid,registrationStatus:0}),c}})).apply(this,arguments)}function co(o){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,d.Z)(function*(o){let s=yield oi(o.appConfig);for(;1===s.registrationStatus;)yield Ke(100),s=yield oi(o.appConfig);if(0===s.registrationStatus){const{installationEntry:c,registrationPromise:l}=yield Fe(o);return l||c}return s})).apply(this,arguments)}function oi(o){return Ge(o,s=>{if(!s)throw x.create("installation-not-found");return ri(s)})}function ri(o){return function Nt(o){return 1===o.registrationStatus&&o.registrationTime+1e4<Date.now()}(o)?{fid:o.fid,registrationStatus:0}:o}function We(o,s){return pt.apply(this,arguments)}function pt(){return(pt=(0,d.Z)(function*({appConfig:o,heartbeatServiceProvider:s},c){const l=uo(o,c),p=W(o,c),h=s.getImmediate({optional:!0});if(h){const Z=yield h.getHeartbeatsHeader();Z&&p.append("x-firebase-client",Z)}const y={method:"POST",headers:p,body:JSON.stringify({installation:{sdkVersion:A,appId:o.appId}})},S=yield N(()=>fetch(l,y));if(S.ok)return ce(yield S.json());throw yield G("Generate Auth Token",S)})).apply(this,arguments)}function uo(o,{fid:s}){return`${j(o)}/${s}/authTokens:generate`}function qt(o){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,d.Z)(function*(o,s=!1){let c;const l=yield Ge(o.appConfig,h=>{if(!zt(h))throw x.create("not-registered");const f=h.authToken;if(!s&&po(f))return h;if(1===f.requestStatus)return c=lo(o,s),h;{if(!navigator.onLine)throw x.create("app-offline");const y=mo(h);return c=go(o,y),y}});return c?yield c:l.authToken})).apply(this,arguments)}function lo(o,s){return jt.apply(this,arguments)}function jt(){return(jt=(0,d.Z)(function*(o,s){let c=yield si(o.appConfig);for(;1===c.authToken.requestStatus;)yield Ke(100),c=yield si(o.appConfig);const l=c.authToken;return 0===l.requestStatus?qt(o,s):l})).apply(this,arguments)}function si(o){return Ge(o,s=>{if(!zt(s))throw x.create("not-registered");return function fo(o){return 1===o.requestStatus&&o.requestTime+1e4<Date.now()}(s.authToken)?Object.assign(Object.assign({},s),{authToken:{requestStatus:0}}):s})}function go(o,s){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(o,s){try{const c=yield We(o,s),l=Object.assign(Object.assign({},s),{authToken:c});return yield gt(o.appConfig,l),c}catch(c){if(!F(c)||401!==c.customData.serverCode&&404!==c.customData.serverCode){const l=Object.assign(Object.assign({},s),{authToken:{requestStatus:0}});yield gt(o.appConfig,l)}else yield Dt(o.appConfig);throw c}})).apply(this,arguments)}function zt(o){return void 0!==o&&2===o.registrationStatus}function po(o){return 2===o.requestStatus&&!function ho(o){const s=Date.now();return s<o.creationTime||o.creationTime+o.expiresIn<s+36e5}(o)}function mo(o){const s={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},o),{authToken:s})}function Yt(){return(Yt=(0,d.Z)(function*(o){const s=o,{installationEntry:c,registrationPromise:l}=yield Fe(s);return l?l.catch(console.error):qt(s).catch(console.error),c.fid})).apply(this,arguments)}function Ht(){return(Ht=(0,d.Z)(function*(o,s=!1){const c=o;return yield Ao(c),(yield qt(c,s)).token})).apply(this,arguments)}function Ao(o){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,d.Z)(function*(o){const{registrationPromise:s}=yield Fe(o);s&&(yield s)})).apply(this,arguments)}function Wt(o){return x.create("missing-app-config-values",{valueName:o})}const ai="installations",Eo=o=>{const s=o.getProvider("app").getImmediate(),c=function Co(o){if(!o||!o.options)throw Wt("App Configuration");if(!o.name)throw Wt("App Name");const s=["projectId","apiKey","appId"];for(const c of s)if(!o.options[c])throw Wt(c);return{appName:o.name,projectId:o.options.projectId,apiKey:o.options.apiKey,appId:o.options.appId}}(s);return{app:s,appConfig:c,heartbeatServiceProvider:(0,P._getProvider)(s,"heartbeat"),_delete:()=>Promise.resolve()}},xo=o=>{const s=o.getProvider("app").getImmediate(),c=(0,P._getProvider)(s,ai).getImmediate();return{getId:()=>function _o(o){return Yt.apply(this,arguments)}(c),getToken:p=>function vo(o){return Ht.apply(this,arguments)}(c,p)}};(function wo(){(0,P._registerComponent)(new se.wA(ai,Eo,"PUBLIC")),(0,P._registerComponent)(new se.wA("installations-internal",xo,"PRIVATE"))})(),(0,P.registerVersion)(oe,Q),(0,P.registerVersion)(oe,Q,"esm2017");const $t="@firebase/remote-config",ue=new O.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Po{constructor(s,c,l,p){this.client=s,this.storage=c,this.storageCache=l,this.logger=p}isCachedDataFresh(s,c){if(!c)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const l=Date.now()-c,p=l<=s;return this.logger.debug(`Config fetch cache check. Cache age millis: ${l}. Cache max age millis (minimumFetchIntervalMillis setting): ${s}. Is cache hit: ${p}.`),p}fetch(s){var c=this;return(0,d.Z)(function*(){const[l,p]=yield Promise.all([c.storage.getLastSuccessfulFetchTimestampMillis(),c.storage.getLastSuccessfulFetchResponse()]);if(p&&c.isCachedDataFresh(s.cacheMaxAgeMillis,l))return p;s.eTag=p&&p.eTag;const h=yield c.client.fetch(s),f=[c.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===h.status&&f.push(c.storage.setLastSuccessfulFetchResponse(h)),yield Promise.all(f),h})()}}function Mo(o=navigator){return o.languages&&o.languages[0]||o.language}class Do{constructor(s,c,l,p,h,f){this.firebaseInstallations=s,this.sdkVersion=c,this.namespace=l,this.projectId=p,this.apiKey=h,this.appId=f}fetch(s){var c=this;return(0,d.Z)(function*(){var l,p,h;const[f,y]=yield Promise.all([c.firebaseInstallations.getId(),c.firebaseInstallations.getToken()]),Z=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${c.projectId}/namespaces/${c.namespace}:fetch?key=${c.apiKey}`,I={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":s.eTag||"*"},T={sdk_version:c.sdkVersion,app_instance_id:f,app_instance_id_token:y,app_id:c.appId,language_code:Mo()},ne={method:"POST",headers:I,body:JSON.stringify(T)},de=fetch(Z,ne),Zt=new Promise((Me,Ye)=>{s.signal.addEventListener(()=>{const $i=new Error("The operation was aborted.");$i.name="AbortError",Ye($i)})});let ut;try{yield Promise.race([de,Zt]),ut=yield de}catch(Me){let Ye="fetch-client-network";throw"AbortError"===(null===(l=Me)||void 0===l?void 0:l.name)&&(Ye="fetch-timeout"),ue.create(Ye,{originalErrorMessage:null===(p=Me)||void 0===p?void 0:p.message})}let ze=ut.status;const Ur=ut.headers.get("ETag")||void 0;let Gn,lt;if(200===ut.status){let Me;try{Me=yield ut.json()}catch(Ye){throw ue.create("fetch-client-parse",{originalErrorMessage:null===(h=Ye)||void 0===h?void 0:h.message})}Gn=Me.entries,lt=Me.state}if("INSTANCE_STATE_UNSPECIFIED"===lt?ze=500:"NO_CHANGE"===lt?ze=304:("NO_TEMPLATE"===lt||"EMPTY_CONFIG"===lt)&&(Gn={}),304!==ze&&200!==ze)throw ue.create("fetch-status",{httpStatus:ze});return{status:ze,eTag:Ur,config:Gn}})()}}class Fo{constructor(s,c){this.client=s,this.storage=c}fetch(s){var c=this;return(0,d.Z)(function*(){const l=(yield c.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return c.attemptFetch(s,l)})()}attemptFetch(s,{throttleEndTimeMillis:c,backoffCount:l}){var p=this;return(0,d.Z)(function*(){yield function $e(o,s){return new Promise((c,l)=>{const p=Math.max(s-Date.now(),0),h=setTimeout(c,p);o.addEventListener(()=>{clearTimeout(h),l(ue.create("fetch-throttle",{throttleEndTimeMillis:s}))})})}(s.signal,c);try{const h=yield p.client.fetch(s);return yield p.storage.deleteThrottleMetadata(),h}catch(h){if(!function Lo(o){if(!(o instanceof O.ZR&&o.customData))return!1;const s=Number(o.customData.httpStatus);return 429===s||500===s||503===s||504===s}(h))throw h;const f={throttleEndTimeMillis:Date.now()+(0,O.$s)(l),backoffCount:l+1};return yield p.storage.setThrottleMetadata(f),p.attemptFetch(s,f)}})()}}class Uo{constructor(s,c,l,p,h){this.app=s,this._client=c,this._storageCache=l,this._storage=p,this._logger=h,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ft(o,s){var c;const l=o.target.error||void 0;return ue.create(s,{originalErrorMessage:l&&(null===(c=l)||void 0===c?void 0:c.message)})}const Se="app_namespace_store";class Bo{constructor(s,c,l,p=function qo(){return new Promise((o,s)=>{var c;try{const l=indexedDB.open("firebase_remote_config",1);l.onerror=p=>{s(ft(p,"storage-open"))},l.onsuccess=p=>{o(p.target.result)},l.onupgradeneeded=p=>{0===p.oldVersion&&p.target.result.createObjectStore(Se,{keyPath:"compositeKey"})}}catch(l){s(ue.create("storage-open",{originalErrorMessage:null===(c=l)||void 0===c?void 0:c.message}))}})}()){this.appId=s,this.appName=c,this.namespace=l,this.openDbPromise=p}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(s){return this.set("last_fetch_status",s)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(s){return this.set("last_successful_fetch_timestamp_millis",s)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(s){return this.set("last_successful_fetch_response",s)}getActiveConfig(){return this.get("active_config")}setActiveConfig(s){return this.set("active_config",s)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(s){return this.set("active_config_etag",s)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(s){return this.set("throttle_metadata",s)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(s){var c=this;return(0,d.Z)(function*(){const l=yield c.openDbPromise;return new Promise((p,h)=>{var f;const S=l.transaction([Se],"readonly").objectStore(Se),Z=c.createCompositeKey(s);try{const I=S.get(Z);I.onerror=T=>{h(ft(T,"storage-get"))},I.onsuccess=T=>{const ne=T.target.result;p(ne?ne.value:void 0)}}catch(I){h(ue.create("storage-get",{originalErrorMessage:null===(f=I)||void 0===f?void 0:f.message}))}})})()}set(s,c){var l=this;return(0,d.Z)(function*(){const p=yield l.openDbPromise;return new Promise((h,f)=>{var y;const Z=p.transaction([Se],"readwrite").objectStore(Se),I=l.createCompositeKey(s);try{const T=Z.put({compositeKey:I,value:c});T.onerror=ne=>{f(ft(ne,"storage-set"))},T.onsuccess=()=>{h()}}catch(T){f(ue.create("storage-set",{originalErrorMessage:null===(y=T)||void 0===y?void 0:y.message}))}})})()}delete(s){var c=this;return(0,d.Z)(function*(){const l=yield c.openDbPromise;return new Promise((p,h)=>{var f;const S=l.transaction([Se],"readwrite").objectStore(Se),Z=c.createCompositeKey(s);try{const I=S.delete(Z);I.onerror=T=>{h(ft(T,"storage-delete"))},I.onsuccess=()=>{p()}}catch(I){h(ue.create("storage-delete",{originalErrorMessage:null===(f=I)||void 0===f?void 0:f.message}))}})})()}createCompositeKey(s){return[this.appId,this.appName,this.namespace,s].join()}}class jo{constructor(s){this.storage=s}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var s=this;return(0,d.Z)(function*(){const c=s.storage.getLastFetchStatus(),l=s.storage.getLastSuccessfulFetchTimestampMillis(),p=s.storage.getActiveConfig(),h=yield c;h&&(s.lastFetchStatus=h);const f=yield l;f&&(s.lastSuccessfulFetchTimestampMillis=f);const y=yield p;y&&(s.activeConfig=y)})()}setLastFetchStatus(s){return this.lastFetchStatus=s,this.storage.setLastFetchStatus(s)}setLastSuccessfulFetchTimestampMillis(s){return this.lastSuccessfulFetchTimestampMillis=s,this.storage.setLastSuccessfulFetchTimestampMillis(s)}setActiveConfig(s){return this.activeConfig=s,this.storage.setActiveConfig(s)}}function zo(){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(){if(!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(o){return!1}})).apply(this,arguments)}!function Jo(){(0,P._registerComponent)(new se.wA("remote-config",function o(s,{instanceIdentifier:c}){const l=s.getProvider("app").getImmediate(),p=s.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ue.create("registration-window");if(!(0,O.hl)())throw ue.create("indexed-db-unavailable");const{projectId:h,apiKey:f,appId:y}=l.options;if(!h)throw ue.create("registration-project-id");if(!f)throw ue.create("registration-api-key");if(!y)throw ue.create("registration-app-id");const S=new Bo(y,l.name,c=c||"firebase"),Z=new jo(S),I=new pe.Yd($t);I.logLevel=pe.in.ERROR;const T=new Do(p,P.SDK_VERSION,c,h,f,y),ne=new Fo(T,S),de=new Po(ne,S,Z,I),Zt=new Uo(l,de,Z,S,I);return function di(o){const s=(0,O.m9)(o);s._initializePromise||(s._initializePromise=s._storageCache.loadFromStorage().then(()=>{s._isInitializationComplete=!0}))}(Zt),Zt},"PUBLIC").setMultipleInstances(!0)),(0,P.registerVersion)($t,"0.3.10"),(0,P.registerVersion)($t,"0.3.10","esm2017")}();const Yo="/firebase-messaging-sw.js",Ho="/firebase-cloud-messaging-push-scope",pi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hi="google.c.a.c_id",Ko="google.c.a.c_l",Go="google.c.a.ts",Wo="google.c.a.e";var Qe=(()=>{return(o=Qe||(Qe={})).PUSH_RECEIVED="push-received",o.NOTIFICATION_CLICKED="notification-clicked",Qe;var o})();function ve(o){const s=new Uint8Array(o);return btoa(String.fromCharCode(...s)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $o(o){const c=(o+"=".repeat((4-o.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),l=atob(c),p=new Uint8Array(l.length);for(let h=0;h<l.length;++h)p[h]=l.charCodeAt(h);return p}const on="fcm_token_details_db",mi="fcm_token_object_Store";function er(o){return rn.apply(this,arguments)}function rn(){return rn=(0,d.Z)(function*(o){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(h=>h.name).includes(on))return null;let s=null;return(yield(0,ae.X3)(on,5,{upgrade:(l=(0,d.Z)(function*(p,h,f,y){var S;if(h<2||!p.objectStoreNames.contains(mi))return;const Z=y.objectStore(mi),I=yield Z.index("fcmSenderId").get(o);if(yield Z.clear(),I)if(2===h){const T=I;if(!T.auth||!T.p256dh||!T.endpoint)return;s={token:T.fcmToken,createTime:null!==(S=T.createTime)&&void 0!==S?S:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:ve(T.vapidKey)}}}else if(3===h){const T=I;s={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:ve(T.auth),p256dh:ve(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:ve(T.vapidKey)}}}else if(4===h){const T=I;s={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:ve(T.auth),p256dh:ve(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:ve(T.vapidKey)}}}}),function(h,f,y,S){return l.apply(this,arguments)})})).close(),yield(0,ae.Lj)(on),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),tr(s)?s:null;var l}),rn.apply(this,arguments)}function tr(o){if(!o||!o.subscriptionOptions)return!1;const{subscriptionOptions:s}=o;return"number"==typeof o.createTime&&o.createTime>0&&"string"==typeof o.token&&o.token.length>0&&"string"==typeof s.auth&&s.auth.length>0&&"string"==typeof s.p256dh&&s.p256dh.length>0&&"string"==typeof s.endpoint&&s.endpoint.length>0&&"string"==typeof s.swScope&&s.swScope.length>0&&"string"==typeof s.vapidKey&&s.vapidKey.length>0}const ke="firebase-messaging-store";let sn=null;function an(){return sn||(sn=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(o,s)=>{0===s&&o.createObjectStore(ke)}})),sn}function fi(o){return cn.apply(this,arguments)}function cn(){return(cn=(0,d.Z)(function*(o){const s=gn(o),l=yield(yield an()).transaction(ke).objectStore(ke).get(s);if(l)return l;{const p=yield er(o.appConfig.senderId);if(p)return yield un(o,p),p}})).apply(this,arguments)}function un(o,s){return ln.apply(this,arguments)}function ln(){return(ln=(0,d.Z)(function*(o,s){const c=gn(o),p=(yield an()).transaction(ke,"readwrite");return yield p.objectStore(ke).put(s,c),yield p.done,s})).apply(this,arguments)}function or(o){return dn.apply(this,arguments)}function dn(){return(dn=(0,d.Z)(function*(o){const s=gn(o),l=(yield an()).transaction(ke,"readwrite");yield l.objectStore(ke).delete(s),yield l.done})).apply(this,arguments)}function gn({appConfig:o}){return o.appId}const X=new O.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pn(o,s){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(o,s){var c;const l=yield fn(o),p=Ze(s),h={method:"POST",headers:l,body:JSON.stringify(p)};let f;try{f=yield(yield fetch(vt(o.appConfig),h)).json()}catch(y){throw X.create("token-subscribe-failed",{errorInfo:null===(c=y)||void 0===c?void 0:c.toString()})}if(f.error)throw X.create("token-subscribe-failed",{errorInfo:f.error.message});if(!f.token)throw X.create("token-subscribe-no-token");return f.token})).apply(this,arguments)}function rr(o,s){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.Z)(function*(o,s){var c;const l=yield fn(o),p=Ze(s.subscriptionOptions),h={method:"PATCH",headers:l,body:JSON.stringify(p)};let f;try{f=yield(yield fetch(`${vt(o.appConfig)}/${s.token}`,h)).json()}catch(y){throw X.create("token-update-failed",{errorInfo:null===(c=y)||void 0===c?void 0:c.toString()})}if(f.error)throw X.create("token-update-failed",{errorInfo:f.error.message});if(!f.token)throw X.create("token-update-no-token");return f.token})).apply(this,arguments)}function Xe(o,s){return _t.apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(o,s){var c;const p={method:"DELETE",headers:yield fn(o)};try{const f=yield(yield fetch(`${vt(o.appConfig)}/${s}`,p)).json();if(f.error)throw X.create("token-unsubscribe-failed",{errorInfo:f.error.message})}catch(h){throw X.create("token-unsubscribe-failed",{errorInfo:null===(c=h)||void 0===c?void 0:c.toString()})}})).apply(this,arguments)}function vt({projectId:o}){return`https://fcmregistrations.googleapis.com/v1/projects/${o}/registrations`}function fn(o){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,d.Z)(function*({appConfig:o,installations:s}){const c=yield s.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":o.apiKey,"x-goog-firebase-installations-auth":`FIS ${c}`})})).apply(this,arguments)}function Ze({p256dh:o,auth:s,endpoint:c,vapidKey:l}){const p={web:{endpoint:c,auth:s,p256dh:o}};return l!==pi&&(p.web.applicationPubKey=l),p}const _n=6048e5;function vi(o){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(o){const s=yield Wr(o.swRegistration,o.vapidKey),c={vapidKey:o.vapidKey,swScope:o.swRegistration.scope,endpoint:s.endpoint,auth:ve(s.getKey("auth")),p256dh:ve(s.getKey("p256dh"))},l=yield fi(o.firebaseDependencies);if(l){if(bn(l.subscriptionOptions,c))return Date.now()>=l.createTime+_n?sr(o,{token:l.token,createTime:Date.now(),subscriptionOptions:c}):l.token;try{yield Xe(o.firebaseDependencies,l.token)}catch(p){console.warn(p)}return tt(o.firebaseDependencies,c)}return tt(o.firebaseDependencies,c)})).apply(this,arguments)}function An(o){return et.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(o){const s=yield fi(o.firebaseDependencies);s&&(yield Xe(o.firebaseDependencies,s.token),yield or(o.firebaseDependencies));const c=yield o.swRegistration.pushManager.getSubscription();return!c||c.unsubscribe()})).apply(this,arguments)}function sr(o,s){return qe.apply(this,arguments)}function qe(){return(qe=(0,d.Z)(function*(o,s){try{const c=yield rr(o.firebaseDependencies,s),l=Object.assign(Object.assign({},s),{token:c,createTime:Date.now()});return yield un(o.firebaseDependencies,l),c}catch(c){throw yield An(o),c}})).apply(this,arguments)}function tt(o,s){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(o,s){const l={token:yield pn(o,s),createTime:Date.now(),subscriptionOptions:s};return yield un(o,l),l.token})).apply(this,arguments)}function Wr(o,s){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,d.Z)(function*(o,s){return(yield o.pushManager.getSubscription())||o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$o(s)})})).apply(this,arguments)}function bn(o,s){return s.vapidKey===o.vapidKey&&s.endpoint===o.endpoint&&s.auth===o.auth&&s.p256dh===o.p256dh}function ar(o){const s={from:o.from,collapseKey:o.collapse_key,messageId:o.fcmMessageId};return function $r(o,s){if(!s.notification)return;o.notification={};const c=s.notification.title;c&&(o.notification.title=c);const l=s.notification.body;l&&(o.notification.body=l);const p=s.notification.image;p&&(o.notification.image=p)}(s,o),function cr(o,s){!s.data||(o.data=s.data)}(s,o),function ur(o,s){var c,l,p,h,f;if(!(s.fcmOptions||null!==(c=s.notification)&&void 0!==c&&c.click_action))return;o.fcmOptions={};const y=null!==(p=null===(l=s.fcmOptions)||void 0===l?void 0:l.link)&&void 0!==p?p:null===(h=s.notification)||void 0===h?void 0:h.click_action;y&&(o.fcmOptions.link=y);const S=null===(f=s.fcmOptions)||void 0===f?void 0:f.analytics_label;S&&(o.fcmOptions.analyticsLabel=S)}(s,o),s}function Xr(o){return"object"==typeof o&&!!o&&hi in o}function lr(o,s){const c=[];for(let l=0;l<o.length;l++)c.push(o.charAt(l)),l<s.length&&c.push(s.charAt(l));return c.join("")}function Ai(o){return X.create("missing-app-config-values",{valueName:o})}lr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),lr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ts{constructor(s,c,l){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const p=function es(o){if(!o||!o.options)throw Ai("App Configuration Object");if(!o.name)throw Ai("App Name");const s=["projectId","apiKey","appId","messagingSenderId"],{options:c}=o;for(const l of s)if(!c[l])throw Ai(l);return{appName:o.name,projectId:c.projectId,apiKey:c.apiKey,appId:c.appId,senderId:c.messagingSenderId}}(s);this.firebaseDependencies={app:s,appConfig:p,installations:c,analyticsProvider:l}}_delete(){return Promise.resolve()}}function dr(o){return yi.apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(o){var s;try{o.swRegistration=yield navigator.serviceWorker.register(Yo,{scope:Ho}),o.swRegistration.update().catch(()=>{})}catch(c){throw X.create("failed-service-worker-registration",{browserErrorMessage:null===(s=c)||void 0===s?void 0:s.message})}})).apply(this,arguments)}function ns(o,s){return nt.apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(o,s){if(!s&&!o.swRegistration&&(yield dr(o)),s||!o.swRegistration){if(!(s instanceof ServiceWorkerRegistration))throw X.create("invalid-sw-registration");o.swRegistration=s}})).apply(this,arguments)}function Ci(o,s){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(o,s){s?o.vapidKey=s:o.vapidKey||(o.vapidKey=pi)})).apply(this,arguments)}function At(){return(At=(0,d.Z)(function*(o,s){if(!navigator)throw X.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw X.create("permission-blocked");return yield Ci(o,null==s?void 0:s.vapidKey),yield ns(o,null==s?void 0:s.serviceWorkerRegistration),vi(o)})).apply(this,arguments)}function gr(o,s,c){return En.apply(this,arguments)}function En(){return(En=(0,d.Z)(function*(o,s,c){const l=K(s);(yield o.firebaseDependencies.analyticsProvider.get()).logEvent(l,{message_id:c[hi],message_name:c[Ko],message_time:c[Go],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function K(o){switch(o){case Qe.NOTIFICATION_CLICKED:return"notification_open";case Qe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Be(){return(Be=(0,d.Z)(function*(o,s){const c=s.data;if(!c.isFirebaseMessaging)return;o.onMessageHandler&&c.messageType===Qe.PUSH_RECEIVED&&("function"==typeof o.onMessageHandler?o.onMessageHandler(ar(c)):o.onMessageHandler.next(ar(c)));const l=c.data;Xr(l)&&"1"===l[Wo]&&(yield gr(o,c.messageType,l))})).apply(this,arguments)}const yt="@firebase/messaging",pr=o=>{const s=new ts(o.getProvider("app").getImmediate(),o.getProvider("installations-internal").getImmediate(),o.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",c=>function he(o,s){return Be.apply(this,arguments)}(s,c)),s},hr=o=>{const s=o.getProvider("messaging").getImmediate();return{getToken:l=>function bi(o,s){return At.apply(this,arguments)}(s,l)}};function wi(){return xn.apply(this,arguments)}function xn(){return(xn=(0,d.Z)(function*(){try{yield(0,O.eu)()}catch(o){return!1}return"undefined"!=typeof window&&(0,O.hl)()&&(0,O.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xi(){(0,P._registerComponent)(new se.wA("messaging",pr,"PUBLIC")),(0,P._registerComponent)(new se.wA("messaging-internal",hr,"PRIVATE")),(0,P.registerVersion)(yt,"0.9.15"),(0,P.registerVersion)(yt,"0.9.15","esm2017")}();const je="analytics",_r="firebase_id",yr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Si="https://www.googletagmanager.com/gtag/js",H=new pe.Yd("@firebase/analytics");function kn(o){return Promise.all(o.map(s=>s.catch(c=>c)))}function Ct(o,s){const c=document.createElement("script");c.src=`${Si}?l=${o}&id=${s}`,c.async=!0,document.head.appendChild(c)}function Cr(o,s,c,l,p,h){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,d.Z)(function*(o,s,c,l,p,h){const f=l[p];try{if(f)yield s[f];else{const S=(yield kn(c)).find(Z=>Z.measurementId===p);S&&(yield s[S.appId])}}catch(y){H.error(y)}o("config",p,h)})).apply(this,arguments)}function br(o,s,c,l,p){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(o,s,c,l,p){try{let h=[];if(p&&p.send_to){let f=p.send_to;Array.isArray(f)||(f=[f]);const y=yield kn(c);for(const S of f){const Z=y.find(T=>T.measurementId===S),I=Z&&s[Z.appId];if(!I){h=[];break}h.push(I)}}0===h.length&&(h=Object.values(s)),yield Promise.all(h),o("event",l,p||{})}catch(h){H.error(h)}})).apply(this,arguments)}function Oi(){const o=window.document.getElementsByTagName("script");for(const s of Object.values(o))if(s.src&&s.src.includes(Si))return s;return null}const le=new O.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Dn=new class Mn{constructor(s={},c=1e3){this.throttleMetadata=s,this.intervalMillis=c}getThrottleMetadata(s){return this.throttleMetadata[s]}setThrottleMetadata(s,c){this.throttleMetadata[s]=c}deleteThrottleMetadata(s){delete this.throttleMetadata[s]}};function xr(o){return new Headers({Accept:"application/json","x-goog-api-key":o})}function Ln(o){return bt.apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(o){var s;const{appId:c,apiKey:l}=o,p={method:"GET",headers:xr(l)},h=yr.replace("{app-id}",c),f=yield fetch(h,p);if(200!==f.status&&304!==f.status){let y="";try{const S=yield f.json();null!==(s=S.error)&&void 0!==s&&s.message&&(y=S.error.message)}catch(S){}throw le.create("config-fetch-failed",{httpStatus:f.status,responseMessage:y})}return f.json()})).apply(this,arguments)}function Ii(o){return rt.apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(o,s=Dn,c){const{appId:l,apiKey:p,measurementId:h}=o.options;if(!l)throw le.create("no-app-id");if(!p){if(h)return{measurementId:h,appId:l};throw le.create("no-api-key")}const f=s.getThrottleMetadata(l)||{backoffCount:0,throttleEndTimeMillis:Date.now()},y=new Rn;return setTimeout((0,d.Z)(function*(){y.abort()}),void 0!==c?c:6e4),Pi({appId:l,apiKey:p,measurementId:h},f,y,s)})).apply(this,arguments)}function Pi(o,s,c){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(o,{throttleEndTimeMillis:s,backoffCount:c},l,p=Dn){var h,f;const{appId:y,measurementId:S}=o;try{yield wr(l,s)}catch(Z){if(S)return H.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${S} provided in the "measurementId" field in the local Firebase config. [${null===(h=Z)||void 0===h?void 0:h.message}]`),{appId:y,measurementId:S};throw Z}try{const Z=yield Ln(o);return p.deleteThrottleMetadata(y),Z}catch(Z){const I=Z;if(!Et(I)){if(p.deleteThrottleMetadata(y),S)return H.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${S} provided in the "measurementId" field in the local Firebase config. [${null==I?void 0:I.message}]`),{appId:y,measurementId:S};throw Z}const T=503===Number(null===(f=null==I?void 0:I.customData)||void 0===f?void 0:f.httpStatus)?(0,O.$s)(c,p.intervalMillis,30):(0,O.$s)(c,p.intervalMillis),ne={throttleEndTimeMillis:Date.now()+T,backoffCount:c+1};return p.setThrottleMetadata(y,ne),H.debug(`Calling attemptFetch again in ${T} millis`),Pi(o,ne,l,p)}})).apply(this,arguments)}function wr(o,s){return new Promise((c,l)=>{const p=Math.max(s-Date.now(),0),h=setTimeout(c,p);o.addEventListener(()=>{clearTimeout(h),l(le.create("fetch-throttle",{throttleEndTimeMillis:s}))})})}function Et(o){if(!(o instanceof O.ZR&&o.customData))return!1;const s=Number(o.customData.httpStatus);return 429===s||500===s||503===s||504===s}class Rn{constructor(){this.listeners=[]}addEventListener(s){this.listeners.push(s)}abort(){this.listeners.forEach(s=>s())}}function Un(){return st.apply(this,arguments)}function st(){return(st=(0,d.Z)(function*(){var o;if(!(0,O.hl)())return H.warn(le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,O.eu)()}catch(s){return H.warn(le.create("indexeddb-unavailable",{errorInfo:null===(o=s)||void 0===o?void 0:o.toString()}).message),!1}return!0})).apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(o,s,c,l,p,h,f){var y;const S=Ii(o);S.then(de=>{c[de.measurementId]=de.appId,o.options.measurementId&&de.measurementId!==o.options.measurementId&&H.warn(`The measurement ID in the local Firebase config (${o.options.measurementId}) does not match the measurement ID fetched from the server (${de.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(de=>H.error(de)),s.push(S);const Z=Un().then(de=>{if(de)return l.getId()}),[I,T]=yield Promise.all([S,Z]);Oi()||Ct(h,I.measurementId),p("js",new Date);const ne=null!==(y=null==f?void 0:f.config)&&void 0!==y?y:{};return ne.origin="firebase",ne.update=!0,null!=T&&(ne[_r]=T),p("config",I.measurementId,ne),I.measurementId})).apply(this,arguments)}class Di{constructor(s){this.app=s}_delete(){return delete ge[this.app.options.appId],Promise.resolve()}}let ge={},Li=[];const Fi={};let Ui,at,xt="dataLayer",Nn=!1;function Sr(o,s,c){!function Tr(){const o=[];if((0,O.ru)()&&o.push("This is a browser extension environment."),(0,O.zI)()||o.push("Cookies are not available."),o.length>0){const s=o.map((l,p)=>`(${p+1}) ${l}`).join(" "),c=le.create("invalid-analytics-context",{errorInfo:s});H.warn(c.message)}}();const l=o.options.appId;if(!l)throw le.create("no-app-id");if(!o.options.apiKey){if(!o.options.measurementId)throw le.create("no-api-key");H.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${o.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ge[l])throw le.create("already-exists",{id:l});if(!Nn){!function ki(o){let s=[];Array.isArray(window[o])?s=window[o]:window[o]=s}(xt);const{wrappedGtag:h,gtagCore:f}=function In(o,s,c,l,p){let h=function(...f){window[l].push(arguments)};return window[p]&&"function"==typeof window[p]&&(h=window[p]),window[p]=function Zi(o,s,c,l){function h(){return(h=(0,d.Z)(function*(f,y,S){try{"event"===f?yield br(o,s,c,y,S):"config"===f?yield Cr(o,s,c,l,y,S):o("set",y)}catch(Z){H.error(Z)}})).apply(this,arguments)}return function p(f,y,S){return h.apply(this,arguments)}}(h,o,s,c),{gtagCore:h,wrappedGtag:window[p]}}(ge,Li,Fi,xt,"gtag");at=h,Ui=f,Nn=!0}return ge[l]=function Mi(o,s,c,l,p,h,f){return Qn.apply(this,arguments)}(o,Li,Fi,s,Ui,xt,c),new Di(o)}function Tt(){return(Tt=(0,d.Z)(function*(o,s,c,l,p){if(p&&p.global)o("event",c,l);else{const h=yield s;o("event",c,Object.assign(Object.assign({},l),{send_to:h}))}})).apply(this,arguments)}function os(){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(){if((0,O.ru)()||!(0,O.zI)()||!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(o){return!1}})).apply(this,arguments)}const jn="@firebase/analytics";!function Ji(){(0,P._registerComponent)(new se.wA(je,(s,{options:c})=>Sr(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),c),"PUBLIC")),(0,P._registerComponent)(new se.wA("analytics-internal",function o(s){try{const c=s.getProvider(je).getImmediate();return{logEvent:(l,p,h)=>function Ir(o,s,c,l){o=(0,O.m9)(o),function wt(o,s,c,l,p){return Tt.apply(this,arguments)}(at,ge[o.app.options.appId],s,c,l).catch(p=>H.error(p))}(c,l,p,h)}}catch(c){throw le.create("interop-component-reg-failed",{reason:c})}},"PRIVATE")),(0,P.registerVersion)(jn,"0.7.11"),(0,P.registerVersion)(jn,"0.7.11","esm2017")}();var Jn=m(30341),zi=m(20353),rs=m(2994),zn=m(13334),ss=m(57770);const Pr=new E.GfV("7.4.1"),Yi="__angularfire_symbol__analyticsIsSupportedValue",Yn="__angularfire_symbol__analyticsIsSupported",Hn="__angularfire_symbol__remoteConfigIsSupportedValue",Hi="__angularfire_symbol__remoteConfigIsSupported",Vi="__angularfire_symbol__messagingIsSupportedValue",Vn="__angularfire_symbol__messagingIsSupported";function as(o,s,c){if(s){if(1===s.length)return s[0];const h=s.filter(f=>f.app===c);if(1===h.length)return h[0]}return c.container.getProvider(o).getImmediate({optional:!0})}globalThis[Yn]||(globalThis[Yn]=os().then(o=>globalThis[Yi]=o).catch(()=>globalThis[Yi]=!1)),globalThis[Vn]||(globalThis[Vn]=wi().then(o=>globalThis[Vi]=o).catch(()=>globalThis[Vi]=!1)),globalThis[Hi]||(globalThis[Hi]=zo().then(o=>globalThis[Hn]=o).catch(()=>globalThis[Hn]=!1));const cs=(o,s)=>{const c=s?[s]:(0,Y.C6)(),l=[];return c.forEach(p=>{p.container.getProvider(o).instances.forEach(f=>{l.includes(f)||l.push(f)})}),l};function Je(){}class Gi{constructor(s,c=Jn.N){this.zone=s,this.delegate=c}now(){return this.delegate.now()}schedule(s,c,l){const p=this.zone;return this.delegate.schedule(function(f){p.runGuarded(()=>{s.apply(this,[f])})},c,l)}}class Mr{constructor(s){this.zone=s,this.task=null}call(s,c){const l=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Je,{},Je,Je)),c.pipe((0,rs.b)({next:l,complete:l,error:l})).subscribe(s).add(l)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dr=(()=>{class o{constructor(c){this.ngZone=c,this.outsideAngular=c.runOutsideAngular(()=>new Gi(Zone.current)),this.insideAngular=c.run(()=>new Gi(Zone.current,zi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return o.\u0275fac=function(c){return new(c||o)(E.LFG(E.R0b))},o.\u0275prov=E.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Ie(){const o=globalThis.\u0275AngularFireScheduler;if(!o)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return o}function Fr(o){return Ie(),function Wi(o){return function(c){return(c=c.lift(new Mr(o.ngZone))).pipe((0,zn.R)(o.outsideAngular),(0,ss.QV)(o.insideAngular))}}(Ie())(o)}},78284:(xe,me,m)=>{m.r(me),m.d(me,{AuthModule:()=>Ys});var E=m(69808),Y=m(12011),d=m(93075),P=m(74202),O=m(51908),se=m(71410),pe=m(75658),ae=m(95880),oe=m(92340),Q=m(37389),e=m(5e3);let A=(()=>{class n{get windowRef(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var C=m(55330),U=m(16384),R=m(35018),L=m(7147),k=m(47423),b=m(25245),x=m(1033);function F(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," Vui l\xf2ng nh\u1eadp email "),e.qZA())}function j(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," Email ph\u1ea3i nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng! "),e.qZA())}function ce(n,a){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,F,2,0,"div",11),e.YNc(2,j,2,0,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.email.errors.email||t.form.controls.email.errors.pattern)}}function G(n,a){if(1&n&&(e.TgZ(0,"div",26)(1,"label",27),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function te(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function M(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form",14)(2,"div",2)(3,"div",15)(4,"div",16)(5,"div",17)(6,"span",18)(7,"mat-icon"),e._uU(8,"email_outlined"),e.qZA()()(),e._UZ(9,"input",19),e.qZA(),e.YNc(10,ce,3,2,"div",20),e.qZA()(),e.YNc(11,G,4,3,"div",21),e.TgZ(12,"div",2)(13,"div",15)(14,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmEmail())}),e.YNc(15,te,3,0,"span",11),e._uU(16," Ti\u1ebfp t\u1ee5c "),e.qZA(),e.TgZ(17,"div",23)(18,"a",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.backToRedirect())}),e._uU(19,"B\u1ecf qua"),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(9),e.Q6J("ngIf",t.form.controls.email.errors&&t.form.controls.email.dirty),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(3),e.Q6J("disabled",t.statusObj.loading||t.form.invalid),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading)}}function W(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",2)(2,"div",15)(3,"p",29),e._uU(4," H\u1ec7 th\u1ed1ng \u0111\xe3 g\u1eedi email t\u1edbi \u0111\u1ecba ch\u1ec9 "),e.TgZ(5,"b"),e._uU(6),e.qZA(),e._uU(7,". Vui l\xf2ng ki\u1ec3m tra email v\xe0 \u1ea5n v\xe0o \u0111\u01b0\u1eddng link x\xe1c nh\u1eadn \u0111\u1ec3 vi\u1ec7c \u0111\u1ed5i Email th\xe0nh c\xf4ng! "),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.oldEmail)}}let N=(()=>{class n extends C.Q{constructor(t,i,r,u){super(i),this.baseApiService=t,this.commonService=i,this.formBuilder=r,this.authService=u,this.form=new d.nJ({}),this.step=1,this.oldEmail=""}ignoreRequest(){this.baseApiService.redirectLoginByRole("")}confirmEmail(){this.form.valid&&(this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthChangeEmailPost({newEmail:this.form.controls.email.value}).subscribe(i=>{var r,u,g;1==i.success?(this.oldEmail=null!==(u=null===(r=i.data)||void 0===r?void 0:r.value)&&void 0!==u?u:"",this.successStatusObj(),this.step=2):this.errorStatusObj(null!==(g=i.message)&&void 0!==g?g:"")})))}handleClickDashboard(){this.baseApiService.redirectLoginByRole("")}backToRedirect(){let t=this.getMyQueryParam("return_url");t&&this.myNavigation(t)}ngOnInit(){this.form=this.formBuilder.group({email:new d.p4("",[d.kI.required,d.kI.email,d.kI.pattern(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)])}),this.commonService.translateMetaData({title:"lang_cms_auth_change_mail_title",description:"lang_cms_auth_change_mail_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U._),e.Y36(R.v),e.Y36(d.QS),e.Y36(L.e8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-account"]],features:[e._Bn([A]),e.qOj],decls:20,vars:5,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],[1,"text-center","mb-3"],[1,"text-normal","clickable",3,"click"],[3,"formGroup"],[1,"col-md-12"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","text","placeholder","Nh\u1eadp email m\u1edbi","name","email","formControlName","email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],["mat-raised-button","",1,"btn-azt-primary",2,"width","100%",3,"disabled","click"],[1,"mt-3","text-center"],[1,"clickable",3,"click"],[1,"alert","alert-danger"],[1,"form-group"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"text-center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._UZ(8,"img",8),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",9),e._uU(11," \u0110\u1ed5i email m\u1edbi "),e.qZA()(),e.TgZ(12,"div",10),e.YNc(13,M,20,5,"div",11),e.YNc(14,W,8,1,"div",11),e.qZA(),e._UZ(15,"hr"),e.TgZ(16,"div",12)(17,"a",13),e.NdJ("click",function(){return i.handleClickDashboard()}),e._uU(18,"Quay l\u1ea1i m\xe0n h\xecnh ch\xednh"),e.qZA()()()(),e._UZ(19,"div",3),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("src",e.lcZ(9,3,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Q6J("ngIf",1==i.step),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading&&2==i.step))},dependencies:[E.O5,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,d.sg,d.u,x.bT,x.BI],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}"]}),n})();var $=m(70024),_e=m(90508),be=m(67322),Ve=m(60703),Ee=m(41303),Ke=m(42873),Wn=m(88386),$n=m(81760),Ot=m(98833),Xn=m(79814);function Xi(n,a){1&n&&(e.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function De(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," Email ph\u1ea3i nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng! "),e.qZA())}function Le(n,a){if(1&n&&(e.TgZ(0,"div",42),e.YNc(1,De,2,0,"div",11),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorType("email","email")||t.getErrorType("email","pattern"))}}function ei(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"span",19)(5,"mat-icon"),e._uU(6,"email_outlined"),e.qZA()()(),e._UZ(7,"input",41),e.qZA(),e.YNc(8,Le,2,1,"div",23),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",t.form.controls.email.invalid&&t.form.controls.email.dirty)}}function eo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"div",43)(3,"div",18)(4,"span",19)(5,"mat-icon"),e._uU(6,"email_outlined"),e.qZA()()(),e._UZ(7,"input",41),e.qZA(),e.TgZ(8,"a",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goToConfirmEmail())}),e._uU(9,"Click v\xe0o \u0111\xe2y n\u1ebfu b\u1ea1n mu\u1ed1n \u0111\u1ed5i email!"),e.qZA()()()}2&n&&(e.xp6(7),e.uIk("disabled",!0))}function to(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1! "),e.qZA())}function ti(n,a){if(1&n&&(e.TgZ(0,"div",42),e.YNc(1,to,2,0,"div",11),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorType("phone","pattern")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength"))}}function no(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"div",43)(3,"div",18)(4,"span",19)(5,"mat-icon"),e._uU(6,"phone_enabled"),e.qZA()()(),e._UZ(7,"input",45),e.qZA(),e.YNc(8,ti,2,1,"div",23),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched))}}function we(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 g\u1ed3m c\xe1c ch\u1eef s\u1ed1 v\xe0 d\xe0i 10 k\xfd t\u1ef1! "),e.qZA())}function ni(n,a){if(1&n&&(e.TgZ(0,"div",42),e.YNc(1,we,2,0,"div",11),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorType("phone","pattern")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength"))}}function ii(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"div",43)(3,"div",18)(4,"span",19)(5,"mat-icon"),e._uU(6,"phone_enabled"),e.qZA()()(),e._UZ(7,"input",45),e.qZA(),e.TgZ(8,"a",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goToConfirm())}),e._uU(9,"Click v\xe0o \u0111\xe2y n\u1ebfu b\u1ea1n mu\u1ed1n \u0111\u1ed5i s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"),e.qZA(),e.YNc(10,ni,2,1,"div",23),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(7),e.uIk("disabled",!0),e.xp6(3),e.Q6J("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched))}}function io(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),e.qZA())}function oo(n,a){if(1&n&&(e.TgZ(0,"div",42),e.YNc(1,io,2,0,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Te(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"OK"),e.qZA())}function It(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"label",46),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function Pt(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",47),e._uU(2,"\xa0"),e.qZA())}function gt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"span",19)(6,"mat-icon"),e._uU(7,"person_outline"),e.qZA()()(),e._UZ(8,"input",20),e.qZA()()(),e.YNc(9,ei,9,1,"div",21),e.YNc(10,eo,10,1,"div",21),e.YNc(11,no,9,1,"div",21),e.YNc(12,ii,11,2,"div",21),e.TgZ(13,"div",15)(14,"div",16)(15,"div",17)(16,"div",18)(17,"span",19)(18,"mat-icon"),e._uU(19,"lock_outlined"),e.qZA()()(),e._UZ(20,"input",22),e.qZA(),e.YNc(21,oo,2,1,"div",23),e.qZA()(),e.TgZ(22,"div",15)(23,"div",16)(24,"div",24)(25,"mat-radio-group",25)(26,"div",26)(27,"div",27),e._uU(28," Gi\u1edbi t\xednh "),e.qZA(),e.TgZ(29,"div",28)(30,"mat-radio-button",29),e._uU(31,"Nam"),e.qZA(),e.TgZ(32,"mat-radio-button",30),e._uU(33,"N\u1eef"),e.qZA()()()()()()(),e.TgZ(34,"div",15)(35,"div",31)(36,"mat-form-field",32)(37,"input",33),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(42);return e.KtG(r.open())}),e.qZA(),e.TgZ(38,"button",34),e.NdJ("click",function(r){return e.CHM(t),e.MAs(42).open(),e.KtG(r.stopPropagation())}),e.TgZ(39,"mat-icon"),e._uU(40,"today"),e.qZA()(),e.TgZ(41,"ngx-mat-datetime-picker",35,36),e.YNc(43,Te,2,0,"ng-template"),e.qZA()()()(),e.YNc(44,It,4,3,"div",21),e.TgZ(45,"div",15)(46,"div",37)(47,"button",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changeInfo())}),e.YNc(48,Pt,3,0,"span",11),e._uU(49,"C\u1eadp nh\u1eadt "),e.qZA()()(),e.TgZ(50,"div",39)(51,"a",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.goBack())}),e._uU(52,"Quay l\u1ea1i trang ch\u1ee7"),e.qZA()()()}if(2&n){const t=e.MAs(42),i=e.oxw();e.xp6(9),e.Q6J("ngIf",i.checkEnableChangeEmailOrPhone(i.email,"email")),e.xp6(1),e.Q6J("ngIf",!i.checkEnableChangeEmailOrPhone(i.email,"email")),e.xp6(1),e.Q6J("ngIf",i.checkEnableChangeEmailOrPhone(i.phone,"phone")),e.xp6(1),e.Q6J("ngIf",!i.checkEnableChangeEmailOrPhone(i.phone,"phone")),e.xp6(9),e.Q6J("ngIf",i.form.controls.password.invalid&&(i.form.controls.password.dirty||i.form.controls.password.touched)),e.xp6(16),e.Q6J("ngxMatDatetimePicker",t),e.xp6(4),e.Q6J("hideTime",!0),e.xp6(3),e.Q6J("ngIf",i.statusObj.errorMessage),e.xp6(3),e.Q6J("disabled",i.form.invalid||i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)}}const Mt={parse:{dateInput:"l, LTS"},display:{dateInput:"DD-MM-YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let Dt=(()=>{class n extends C.Q{constructor(t,i,r,u,g,_,v,w){super(i),this.formBuilder=t,this.commonService=i,this.baseApiService=r,this.authService=u,this.redirectService=g,this.userService=_,this.datepipe=v,this.mobileWebviewService=w,this.form=new d.nJ({}),this.startDate=new Date(1990,1,1),this.gender=0,this.email="",this.phone="",this.prevData="",this.returnUrl=""}getErrorType(t,i){var r,u,g,_,v,w;return!(null===(g=null===(u=null===(r=this.form.controls)||void 0===r?void 0:r[t])||void 0===u?void 0:u.errors)||void 0===g||!g[i])&&(null===(w=null===(v=null===(_=this.form.controls)||void 0===_?void 0:_[t])||void 0===v?void 0:v.errors)||void 0===w?void 0:w[i])}goToConfirm(){this.returnUrl="/auth/change-info";var t="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=change_phone";this.commonService.myNavigationWithQueryString("/auth/checking_service",t)}goToConfirmEmail(){this.returnUrl="/auth/change-info";var t="?return_url="+encodeURIComponent(this.returnUrl);this.commonService.myNavigationWithQueryString("/auth/change-email",t)}allowChangePhone(){var t=this.baseApiService.getUserObj(),r=t.zaloId?t.zaloId:"";return""!=r&&r==(t.phone?t.phone:"")}changeInfo(){var t;if(this.form.valid){var i=this.commonService.getFormObj(this.form),r=i.birthday?new Date(Date.parse(i.birthday)):this.startDate,u={fullName:i.fullName,birthday:null!==(t=this.datepipe.transform(r,"yyyy-MM-ddTHH:mm:ss"))&&void 0!==t?t:"",email:i.email,gender:i.gender,password:i.password,phone:i.phone};this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthUpdateInfoPost(u).subscribe(g=>{var _,v,w;1==g.success?(this.email=null!==(_=u.email)&&void 0!==_?_:"",this.phone=null!==(v=u.phone)&&void 0!==v?v:"",this.successStatusObj("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!",!0)):this.errorStatusObj(null!==(w=g.message)&&void 0!==w?w:"C\u1eadp nh\u1eadt th\xf4ng tin kh\xf4ng th\xe0nh c\xf4ng!",!0)}))}}goBack(){this.baseApiService.redirectLoginByRole("")}getInfo(){var t,i,r,u=this.baseApiService.getUserObj(),g=u.birthday?new Date(u.birthday):new Date(1990,1,1);this.startDate=g,this.gender=null!==(t=u.gender)&&void 0!==t?t:0,this.email=null!==(i=u.email)&&void 0!==i?i:"",this.phone=null!==(r=u.phone)&&void 0!==r?r:"",this.form.patchValue({fullName:this.userService.isAnonymousName(u)?"":u.fullName,email:u.email?u.email:"",phone:u.phone?u.phone:"",gender:1!=this.gender?"0":"1"}),this.form.controls.birthday.setValue(g)}checkEnableChangeEmailOrPhone(t,i){if("email"==i){if(!t||!t.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/))return!0}else if("phone"==i&&(!t||t.length>15))return!0;return!1}ngOnInit(){this.form=this.formBuilder.group({fullName:new d.p4("",[d.kI.required,Ee._.noWhiteSpace]),email:new d.p4("",[d.kI.email,d.kI.pattern(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)]),phone:new d.p4("",[d.kI.pattern("^[0-9]{10}$")]),gender:new d.p4(""),birthday:new d.p4(""),password:new d.p4("",[d.kI.minLength(6)])}),this.baseApiService.isAnonymousRole()?this.redirectService.redirectSimpleRegister():(this.getInfo(),this.form.valueChanges.subscribe(t=>{let i=JSON.stringify(t);i!=this.prevData&&(this.prevData=i,this.form.patchValue(t))}),this.commonService.translateMetaData({title:"lang_cms_auth_change_info_title",description:"lang_cms_auth_change_info_description",image:"lang_cms_test_image"}),super.ngOnInit()),this.mobileWebviewService.sendComponentLoaded("offline_answer_list")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.QS),e.Y36(R.v),e.Y36(U._),e.Y36(L.e8),e.Y36(Ke.V),e.Y36(Wn.K),e.Y36(E.uU),e.Y36($n.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-change-info"]],features:[e._Bn([E.uU,{provide:$.fM,useClass:Ve.HF,deps:[_e.Ad,Ve.o8]},{provide:$.ab,useValue:Mt},{provide:be.o2,useValue:{floatLabel:"never"}}]),e.qOj],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","text","placeholder","H\u1ecd v\xe0 t\xean","formControlName","fullName",1,"form-control"],["class","form-group",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],[1,"input-group","input-custom"],["formControlName","gender","color","primary",2,"width","100%"],[1,"row","fsz-16"],[1,"col-5"],[1,"col-7"],["value","1",1,"col-6","p-0"],["value","0"],[1,"col-sm-12","studentBirthDay"],["id","birthday",1,"myTimePicker",2,"border","1px solid #ced4da","border-radius","3px","padding-top","2px"],["matInput","","placeholder","Ng\xe0y sinh","formControlName","birthday","readonly","",1,"form-birthday","bg-white",3,"ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",3,"click"],[3,"hideTime"],["birthDay",""],[1,"col-sm-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],["type","text","placeholder","Email","formControlName","email",1,"form-control"],[1,"alert","alert-danger"],[1,"input-group","mb-1"],[1,"clickable","text-info",2,"font-size","13px","padding-left","5px",3,"click"],["type","text","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._UZ(8,"img",8),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",9),e._uU(11,"S\u1eeda th\xf4ng tin t\xe0i kho\u1ea3n"),e.qZA()(),e.TgZ(12,"div",10),e.YNc(13,Xi,6,3,"div",11),e.YNc(14,gt,53,10,"div",11),e.qZA()()(),e._UZ(15,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("src",e.lcZ(9,4,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading))},dependencies:[E.O5,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,be.KE,be.R9,Ot.Nt,Xn.VQ,Xn.U0,$.AB,$.g2,d.sg,d.u,x.bT,x.BI],styles:[".mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em}  .mat-form-field-appearance-legacy .mat-form-field-label{font-weight:400;color:#0000008a;font-size:16px}.fsz-16[_ngcontent-%COMP%]{font-size:16px!important}.form-birthday[_ngcontent-%COMP%]{display:block;width:100%;height:calc(1.5em + .75rem - 10px);padding:.375rem .75rem;font-weight:400;font-size:16px;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}#birthday[_ngcontent-%COMP%]:focus, #birthday[_ngcontent-%COMP%]:active, #birthday[_ngcontent-%COMP%]:target, #birthday[_ngcontent-%COMP%]:visited, #birthday[_ngcontent-%COMP%]:focus-within, #birthday[_ngcontent-%COMP%]:focus-visible{background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.hover-cancel[_ngcontent-%COMP%]:hover{background-color:#ebe9e9}.form-control[_ngcontent-%COMP%]{font-size:16px;height:calc(1.5em + .75rem + 5px)}.input-custom[_ngcontent-%COMP%]{border:1px solid #e2e2e2;border-radius:3px;padding-left:12px;padding-top:10px;padding-bottom:8px}  label{margin-bottom:0!important}  .mat-form-field-flex{align-items:center!important}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}"]}),n})(),Lt=(()=>{class n extends C.Q{constructor(t,i){super(t),this.commonService=t,this.authService=i}get returnUrl(){var t;return null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""}get confirm_type(){var t;return null!==(t=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==t?t:""}ngOnInit(){this.authService.apiAuthGetFirebaseConfigGet().subscribe(t=>{var i;if(1==t.success){let r=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.app);window.location.href=r.toString()}else this.commonService.snackError("C\xf3 l\u1ed7i khi ki\u1ec3m tra d\u1ecbch v\u1ee5","")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v),e.Y36(L.e8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-checking-service"]],features:[e.qOj],decls:3,vars:0,consts:[[1,"mt-5","text-center"],["role","status",1,"spinner-border","spinner-border-md",2,"color","#2361ae"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._UZ(1,"span",1),e._uU(2,"\xa0 \u0110ang ki\u1ec3m tra d\u1ecbch v\u1ee5..."),e.qZA())},encapsulation:2}),n})();function Ge(n,a){1&n&&(e.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"span",18),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}let Ft=(()=>{class n extends C.Q{constructor(t,i,r){super(t),this.commonService=t,this.authService=i,this.baseApiService=r}ngOnInit(){super.ngOnInit()}chooseRegisterStudent(){this.baseApiService.redirectLoginByRole("")}chooseRegisterTeacher(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConvertToTeacherGet().subscribe(t=>{var i;1==t.success?this.baseApiService.redirectLoginByRole(""):this.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"",!0)}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v),e.Y36(L.e8),e.Y36(U._))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-download-answer-sheet"]],features:[e.qOj],decls:26,vars:7,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"row","py-5"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],[1,"row",2,"justify-content","space-around"],[1,"col-sm-4","border-card","mb-3",3,"click"],[1,"df-logo"],[1,"fas","fa-graduation-cap","pb-3",2,"font-size","36px"],["width","36px","height","45px",1,"mb-3",3,"src"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),e._UZ(7,"img",7),e.ALo(8,"convertCdn"),e.qZA(),e.TgZ(9,"h3",8),e._uU(10,"Ch\u1ecdn vai tr\xf2"),e.qZA()(),e.TgZ(11,"div",9),e.YNc(12,Ge,6,3,"div",10),e.TgZ(13,"div",11)(14,"div",12),e.NdJ("click",function(){return i.chooseRegisterStudent()}),e.TgZ(15,"div",13),e._UZ(16,"i",14),e.TgZ(17,"p"),e._uU(18,"T\xf4i l\xe0 h\u1ecdc sinh"),e.qZA()()(),e.TgZ(19,"div",12),e.NdJ("click",function(){return i.chooseRegisterTeacher()}),e.TgZ(20,"div",13),e._UZ(21,"img",15),e.ALo(22,"convertCdn"),e.TgZ(23,"p"),e._uU(24,"T\xf4i l\xe0 gi\xe1o vi\xean"),e.qZA()()()()()()(),e._UZ(25,"div",2),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("src",e.lcZ(8,3,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Q6J("ngIf",i.statusObj.loading),e.xp6(9),e.Q6J("src",e.lcZ(22,5,"azota_assets/images/teacher.png"),e.LSH))},dependencies:[E.O5,x.bT,x.BI],styles:[".select-style[_ngcontent-%COMP%]{color:#868686!important}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}.select-style[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.select-style[_ngcontent-%COMP%]:hover, .select-style-active[_ngcontent-%COMP%]{color:#2361ae!important}.df-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.register--login[_ngcontent-%COMP%]{width:88px;height:88px}.two-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%;height:100vh;margin:auto}.register-button[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center}.btn-max-width[_ngcontent-%COMP%]{width:100%;padding-top:1.25rem;padding-bottom:1.25rem;font-size:1.5rem}.responsive__text[_ngcontent-%COMP%]{width:90%;margin-left:auto;margin-right:auto}.btn-outline-primary[_ngcontent-%COMP%]{color:#2361ae!important;border-color:#2361ae!important}.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#2361ae!important;background-color:#2361ae!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b818e!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#2361ae!important;border-color:#2361ae!important;background-color:#0eacbe26}.btn-border-fix[_ngcontent-%COMP%]{border-radius:10px!important}.border-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid hsla(0deg,0%,86.3%,.8);border-radius:8px;cursor:pointer;padding:12px;align-items:center;text-align:center}.border-card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 20px #00000012,-10px -10px 20px #fffc}.button-color[_ngcontent-%COMP%]{background-color:#2361ae!important;color:#fff!important}"]}),n})();var Fe=m(3279);let Rt=(()=>{class n extends C.Q{constructor(t,i,r,u){super(t),this.commonService=t,this.authService=i,this.baseApiService=r,this.localStorageObject=u}getData(t){this.subscriptions.add(this.authService.apiAuthConfirmPassFromEmailPost({secret:t}).subscribe(r=>{var u;1==r.success?(this.showSuccessSnack("\u0110\u1ed5i email th\xe0nh c\xf4ng"),this.getInfo()):(this.errorStatusObj(null!==(u=r.message)&&void 0!==u?u:"",!0),this.myNavigation("/auth/login"))}))}getInfo(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthInfoGet().subscribe(t=>{var i,r;if(1==t.success){let u=null!==(i=t.data)&&void 0!==i?i:{};this.baseApiService.saveUserObj(u),this.successStatusObj(),this.localStorageObject.clearAllCache(),this.baseApiService.redirectLoginByRole("")}else this.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:"")}))}ignoreRequest(){this.baseApiService.redirectLoginByRole("")}confirmChangeEmail(){let t=this.commonService.getMyQueryParam("secret");t?this.getData(t):this.showErrorSnack("Vui l\xf2ng truy c\u1eadp link \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn email c\u1ee7a b\u1ea1n")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v),e.Y36(L.e8),e.Y36(U._),e.Y36(Fe.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-email"]],features:[e.qOj],decls:23,vars:9,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-around","mt-3"],["mat-stroked-button","",2,"width","45%",3,"click"],["mat-stroked-button","",1,"btn-azt-primary",2,"width","45%","margin-left","15px",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._UZ(8,"img",8),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",9),e._uU(11," X\xe1c nh\u1eadn \u0111\u1ed5i email m\u1edbi "),e.qZA()(),e.TgZ(12,"div",10)(13,"p",11),e._uU(14,' B\u1ea1n v\u1eeba y\xeau c\u1ea7u thay \u0111\u1ed5i email cho t\xe0i kho\u1ea3n tr\xean Azota. H\xe3y b\u1ea5m n\xfat "X\xe1c nh\u1eadn" b\xean d\u01b0\u1edbi n\u1ebfu \u0111\xf3 l\xe0 b\u1ea1n. N\u1ebfu kh\xf4ng, vui l\xf2ng b\u1ea5m n\xfat "H\u1ee7y" \u0111\u1ec3 h\u1ee7y b\u1ecf y\xeau c\u1ea7u n\xe0y. '),e.qZA(),e.TgZ(15,"div",12)(16,"button",13),e.NdJ("click",function(){return i.ignoreRequest()}),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"button",14),e.NdJ("click",function(){return i.confirmChangeEmail()}),e._uU(20),e.ALo(21,"mytranslate"),e.qZA()()()()(),e._UZ(22,"div",3),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("src",e.lcZ(9,3,"azota_assets/images/logo.svg"),e.LSH),e.xp6(9),e.hij(" ",e.lcZ(18,5,"lang_cms_common_close_btn")," "),e.xp6(3),e.hij(" ",e.lcZ(21,7,"lang_cms_common_confirm_btn")," "))},dependencies:[k.lW,x.bT,x.BI],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}"]}),n})();function ro(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14),e._uU(2,' B\u1ea1n v\u1eeba y\xeau c\u1ea7u thay \u0111\u1ed5i m\u1eadt kh\u1ea9u cho t\xe0i kho\u1ea3n tr\xean Azota. H\xe3y b\u1ea5m n\xfat "X\xe1c nh\u1eadn" b\xean d\u01b0\u1edbi n\u1ebfu \u0111\xf3 l\xe0 b\u1ea1n. N\u1ebfu kh\xf4ng, vui l\xf2ng b\u1ea5m n\xfat "H\u1ee7y" \u0111\u1ec3 h\u1ee7y b\u1ecf y\xeau c\u1ea7u n\xe0y. '),e.qZA(),e.TgZ(3,"div",15)(4,"button",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.ignoreRequest())}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"button",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmPassword())}),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,2,"lang_cms_common_close_btn")," "),e.xp6(3),e.hij(" ",e.lcZ(9,4,"lang_cms_common_confirm_btn")," "))}function so(n,a){1&n&&(e.TgZ(0,"div")(1,"div",18)(2,"div",19)(3,"span",20),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}const ao=function(n){return[n]},Ut=function(){return{user_click:"true"}};function co(n,a){1&n&&(e.TgZ(0,"div",23)(1,"div",24),e._uU(2," M\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t th\xe0nh c\xf4ng. "),e.qZA(),e.TgZ(3,"div",25)(4,"div",26)(5,"a",27),e.ALo(6,"localize"),e._uU(7,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("routerLink",e.VKq(4,ao,e.lcZ(6,2,"/auth/login")))("queryParams",e.DdM(6,Ut)))}function Qt(n,a){if(1&n&&(e.TgZ(0,"div",23)(1,"div",28),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" \u0110\xe3 c\xf3 l\u1ed7i trong qu\xe1 tr\xecnh \u0111\u1ed5i m\u1eadt kh\u1ea9u: ",e.lcZ(3,1,t.hasErrorMessage),". Vui l\xf2ng th\u1eed l\u1ea1i sau! ")}}function oi(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,co,8,7,"div",21),e.YNc(2,Qt,4,3,"ng-template",null,22,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",!i.hasErrorMessage)("ngIfElse",t)}}let ri=(()=>{class n extends C.Q{constructor(t,i,r){super(i),this.baseApiService=t,this.commonService=i,this.smsService=r,this.form=new d.nJ({}),this.is_mobile=/Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.is_mobile_ios=/webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),this.hasErrorMessage="",this.step=1}ignoreRequest(){this.baseApiService.redirectLoginByRole("")}confirmPassword(){var t;this.initStatusObj();var r={secret:null!==(t=this.commonService.getMyQueryParam("secret"))&&void 0!==t?t:""};this.step=2,this.smsService.apiSmsConfirmPassFromEmailPost(r).subscribe(u=>{var g;1==u.success?this.successStatusObj():(this.stopStatusObj(),this.hasErrorMessage=null!==(g=u.message)&&void 0!==g?g:"lang_core_invalid_data")})}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U._),e.Y36(R.v),e.Y36(L.tr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password-email"]],features:[e.qOj],decls:17,vars:4,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],["class","col-md-12",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],[1,"sms-info","alert","alert-warning","text-justify"],[1,"d-flex","justify-content-around","mt-3"],["mat-raised-button","",2,"width","45%","margin-right","15px",3,"click"],["mat-raised-button","","color","warn",2,"width","45%",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],["class","col-sm-12",4,"ngIf","ngIfElse"],["errorChangePass",""],[1,"col-sm-12"],[1,"sms-info","alert","alert-success"],[1,"text-center","mt-3"],[1,"mb-1"],[3,"routerLink","queryParams"],[1,"sms-info","alert","alert-danger"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"span",9),e._uU(10,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),e.qZA()(),e.TgZ(11,"div",10)(12,"div"),e.YNc(13,ro,10,6,"div",11),e.qZA(),e.YNc(14,so,6,3,"div",12),e.YNc(15,oi,4,2,"div",12),e.qZA()()(),e._UZ(16,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(12),e.Q6J("ngIf",1==i.step),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading&&2==i.step))},dependencies:[P.yS,E.O5,d._Y,d.JL,k.lW,d.sg,Q.lO,x.bT],styles:['#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),n})();var Nt=m(15867),We=m(98937),pt=m(24096),uo=m(34782);const qt=["verifyCode"];function Bt(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i l\xe0 s\u1ed1 v\xe0 10 ky\u0301 t\u01b0\u0323!"),e.qZA())}function lo(n,a){if(1&n&&(e.TgZ(0,"div",38),e.YNc(1,Bt,2,0,"div",35),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.getErrorType("phone","required")||t.getErrorType("phone","minlength")||t.getErrorType("phone","maxlength")||t.getErrorType("phone","pattern"))}}function jt(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"label",39),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function si(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",40),e._uU(1,"Kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c m\xe3 x\xe1c th\u1ef1c? "),e.TgZ(2,"b",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.resendCode())}),e._uU(3,"G\u1eedi l\u1ea1i!"),e.qZA()()}}function go(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",41),e._uU(2,"\xa0"),e.qZA())}const Jt=function(n){return{"margin-left":n}};let po=(()=>{class n extends C.Q{constructor(t,i,r,u,g,_,v){super(i),this.formBuilder=t,this.commonService=i,this.window=r,this.baseApiService=u,this.authService=g,this.redirectService=_,this.browserStorageService=v,this.subscriptions=new pt.w,this.form=new d.nJ({}),this.confirm_type="forgot_password",this.isVerifying=!1,this.smsSent=!1,this.timeOut=60,this.captchaWidgetId="",this.isLoading=!0,this.app=(0,Nt.ZF)(oe.N[`firebaseConfig_${this.firebaseApp}`],"confirm_account"),this.getAuthApp().useDeviceLanguage()}getInitApp(){return this.app}getAuthApp(){return(0,We.v0)(this.app)}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,i){var r,u;return!(null===(r=this.form.controls[t].errors)||void 0===r||!r[i])&&(null===(u=this.form.controls[t].errors)||void 0===u?void 0:u[i])}get firebaseApp(){var t;return null!==(t=this.commonService.getMyQueryParam("app_name"))&&void 0!==t?t:""}get returnUrl(){var t;return null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:""}getConfirmType(){var t;return null!==(t=this.commonService.getMyQueryParam("confirm_type"))&&void 0!==t?t:""}skipVerifyPhone(){var t,i=Math.round((new Date).getTime()/1e3);if(this.browserStorageService.saveSimpleStorage("skip_verify_phone",i.toString()),this.baseApiService.redirectLoginByRole(""),"confirm_phone_register"==this.getConfirmType())this.commonService.myNavigation("/admin/student/manage-class/0");else{let u=null!==(t=this.getMyQueryParam("return_url"))&&void 0!==t?t:"";this.commonService.myNavigation(u)}}handleConfirmUsage(){const t=this.form.value.phone;let i=this.getConfirmType();if(""!=t)switch(i){case"forgot_password":this.commonService.gaEvent("confirm_event_forgot_password"),this.authService.apiAuthCheckPhoneExistsGet(t).subscribe(r=>{1==r.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u01b0a t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())});break;case"change_phone":this.commonService.gaEvent("confirm_event_change_phone"),this.authService.apiAuthCheckPhoneExistsGet(t).subscribe(r=>{1!=r.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())});break;default:this.commonService.gaEvent("confirm_event_confirm_phone"),this.authService.apiAuthCheckUpdatePhoneExistsGet(t).subscribe(r=>{1!=r.success?this.sendLoginCode("+84"+t.slice(1)):(this.commonService.snackError("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i tr\xean h\u1ec7 th\u1ed1ng",""),this.reRenderCaptcha())})}else this.commonService.snackError("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i!",""),this.reRenderCaptcha()}sendLoginCode(t){const i=this.windowRef.recaptchaVerifier;(0,We.$g)(this.getAuthApp(),t,i).then(r=>{this.windowRef.confirmationResult=r,this.smsSent=!0,this.timeOut=60,this.countDownTime()}).catch(r=>{console.log(r),"auth/quota-exceeded"==r.code?this.authService.apiAuthFirebaseOverQuotaGet(this.firebaseApp).subscribe(u=>{1==u.success?this.authService.apiAuthGetFirebaseConfigGet().subscribe(g=>{var _,v,w,B,J;if(1==g.success)if((null===(_=null==g?void 0:g.data)||void 0===_?void 0:_.app)!==this.firebaseApp){var V=this.commonService.getMyQueryParam("interval_app");if(V&&V!=(null===(v=null==g?void 0:g.data)||void 0===v?void 0:v.app)){V=V||(null!==(B=null===(w=null==g?void 0:g.data)||void 0===w?void 0:w.app)&&void 0!==B?B:"");let D=this.commonService.getLocalRouter("/auth/confirm_account")+"?return_url="+this.returnUrl+"&confirm_type="+this.confirm_type+"&app_name="+(null===(J=null==g?void 0:g.data)||void 0===J?void 0:J.app)+"&interval_app="+V;window.location.href=D.toString()}else this.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","")}else this.commonService.snackError("OUT OF QUOTA FIREBASE, CONTACT ADMIN","");else this.commonService.snackError("Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c th\xf4ng tin FirebaseApp","")}):this.commonService.snackError("Kh\xf4ng \u0111\xe1nh d\u1ea5u \u0111\u01b0\u1ee3c firebase h\u1ebft quoata","")}):(this.commonService.gaEvent("confirm_event_error_send_code"),this.smsSent=!1,this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+r.code))})}verify_code(t){this.windowRef.confirmationResult?(this.isVerifying=!0,this.windowRef.confirmationResult.confirm(t).then(i=>{this.isVerifying=!1;const r=i.user;let u=this.getConfirmType();"forgot_password"===u?this.commonService.myNavigationWithQueryString("/auth/set_new_password","?app_name="+this.firebaseApp+"&token="+encodeURIComponent(r.accessToken)):this.authService.apiAuthUpdatePhoneOrPasswordByFirebasePost({firebaseToken:r.accessToken,password:"",appName:this.firebaseApp}).subscribe(_=>{1==_.success?(this.showSuccessSnack("C\u1eadp nh\u1eadt s\u1ed1 \u0111i\u1ec7n tho\u1ea1i th\xe0nh c\xf4ng!"),"confirm_phone_register"==u?this.commonService.myNavigation("/admin/student/manage-class/0"):this.baseApiService.redirectLoginByRole("")):this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+_.message)})}).catch(i=>{console.log(i),this.isVerifying=!1,this.commonService.gaEvent("confirm_event_error_verify_code"),this.showErrorSnack("C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+i.code)})):(this.isVerifying=!1,this.showErrorSnack("M\xe3 x\xe1c th\u1ef1c kh\xf4ng \u0111\xfang, vui l\xf2ng ki\u1ec3m tra l\u1ea1i"))}resendCode(){var t;this.reRenderCaptcha(),null===(t=document.getElementById("recaptcha-container"))||void 0===t||t.click()}countDownTime(){void 0!==this.myCountDown&&clearInterval(this.myCountDown),this.myCountDown=window.setInterval(()=>{this.timeOut>0&&this.timeOut--},1e3)}initForm(){this.form=this.formBuilder.group({phone:["",[d.kI.required,d.kI.minLength(10),d.kI.maxLength(10),d.kI.pattern(/^[0-9]*$/)]]})}handleClickLogout(){"forgot_password"==this.confirm_type||"change_phone"==this.confirm_type?this.baseApiService.redirectLoginByRole(""):(this.baseApiService.logout(),this.redirectService.redirectSimpleLogin())}reRenderCaptcha(){}handleEnterVerify(t,i){"Enter"==t.key&&(this.commonService.gaEvent("confirm_event_verify_code_by_press_enter"),this.verify_code(i))}ngOnInit(){this.initForm();let t=this.getConfirmType();switch(this.confirm_type=this.getConfirmType(),"forgot_password"!=t&&this.authService.apiAuthInfoGet().subscribe(i=>{var r,u,g;1==i.success?1==(null===(r=null==i?void 0:i.new_user)||void 0===r?void 0:r.isVerifyPhone)?"change_phone"!=t&&this.baseApiService.redirectLoginByRole(""):(null===(u=null==i?void 0:i.new_user)||void 0===u?void 0:u.phone)&&(null===(g=null==i?void 0:i.new_user)||void 0===g?void 0:g.phone.length)<=10?this.form.setValue({phone:""}):(this.form.setValue({phone:""}),console.log("enter phone plz")):this.showErrorSnack(i.message?"C\xf3 l\u1ed7i x\u1ea3y ra: [SPLIT_LANG]"+i.message:"")}),t){case"forgot_password":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"});break;case"change_phone":this.commonService.translateMetaData({title:"lang_cms_auth_confirm_change_phone_title",description:"lang_cms_auth_confirm_change_phone_description",image:"lang_cms_test_image"});break;default:this.commonService.translateMetaData({title:"lang_cms_auth_confirm_confirm_phone_title",description:"lang_cms_auth_confirm_confirm_phone_description",image:"lang_cms_test_image"})}super.ngOnInit()}ngAfterViewInit(){if(this.windowRef=this.window.windowRef,this.windowRef.recaptchaVerifier=new We.lI("recaptcha-container",{size:"invisible",callback:()=>{this.handleConfirmUsage()}},this.getAuthApp()),this.windowRef.recaptchaVerifier.render().then(t=>{this.windowRef.recaptchaWidgetId=t}),this.verifyCode&&""!=this.verifyCode.nativeElement.value){let t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.addEventListener("keyup",i=>this.handleEnterVerify(i,t))}}ngOnDestroy(){if(clearInterval(this.myCountDown),this.verifyCode){let t=this.verifyCode.nativeElement.value;this.verifyCode.nativeElement.removeEventListener("keyup",i=>this.handleEnterVerify(i,t))}super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.QS),e.Y36(R.v),e.Y36(A),e.Y36(U._),e.Y36(L.e8),e.Y36(Ke.V),e.Y36(uo.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-account"]],viewQuery:function(t,i){if(1&t&&e.Gf(qt,5),2&t){let r;e.iGM(r=e.CRH())&&(i.verifyCode=r.first)}},features:[e._Bn([A]),e.qOj],decls:56,vars:17,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],["id","verify_wrap"],["id","enter_phone_area",3,"ngStyle"],["id","enter_phone_wrap"],[1,"form-horizontal",3,"formGroup"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["id","phoneInput","type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i m\u1edbi","formControlName","phone","name","phone","autocomplete","off",1,"form-control"],["phoneInput",""],["class","alert alert-danger",4,"ngIf"],["id","recaptcha-container","color","primary","mat-raised-button","",3,"disabled"],[1,"mt-3","text-center"],[1,"clickable",3,"click"],["class","form-group",4,"ngIf"],["id","verify_area",1,"form-group"],[1,"sms-info"],[2,"text-align","right","font-size","12px","margin-bottom","3px"],["class","mb-2 mt-2 resend-code",4,"ngIf"],["type","string","placeholder","M\xe3 x\xe1c th\u1ef1c","autocomplete","off",1,"form-control"],["verifyCode",""],[1,"input-group-append","ml-1"],["id","buttonVerify","mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[1,"text-center","mt-3"],[1,"text-normal","clickable",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],[1,"mb-2","mt-2","resend-code"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),e._UZ(8,"img",8),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",9),e._uU(11),e.qZA()(),e.TgZ(12,"div",10)(13,"div")(14,"div",11)(15,"div",12)(16,"div",13)(17,"form",14)(18,"div",15)(19,"div",16)(20,"div",17)(21,"div",18)(22,"span",19)(23,"mat-icon"),e._uU(24,"phone_outlined"),e.qZA()()(),e._UZ(25,"input",20,21),e.qZA(),e.YNc(27,lo,2,1,"div",22),e.TgZ(28,"button",23),e._uU(29,"Ti\u1ebfp t\u1ee5c"),e.qZA(),e.TgZ(30,"div",24)(31,"a",25),e.NdJ("click",function(){return i.skipVerifyPhone()}),e._uU(32,"B\u1ecf qua"),e.qZA()()()()(),e.YNc(33,jt,4,3,"div",26),e.qZA()(),e.TgZ(34,"div",27)(35,"div",16)(36,"div",28),e._uU(37," M\u1ed9t tin nh\u1eafn ch\u1ee9a m\xe3 x\xe1c th\u1ef1c v\u1eeba \u0111\u01b0\u1ee3c g\u1eedi t\u1edbi s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.TgZ(38,"b"),e._uU(39),e.qZA(),e._uU(40,". Vui l\xf2ng nh\u1eadp m\xe3 n\xe0y v\xe0o \xf4 d\u01b0\u1edbi \u0111\xe2y r\u1ed3i \u1ea5n x\xe1c th\u1ef1c "),e.qZA(),e.TgZ(41,"div",29),e._uU(42),e.qZA(),e.YNc(43,si,4,0,"div",30),e.TgZ(44,"div",17),e._UZ(45,"input",31,32),e.TgZ(47,"div",33)(48,"button",34),e.NdJ("click",function(){e.CHM(r);const g=e.MAs(46);return e.KtG(i.verify_code(g.value))}),e.YNc(49,go,3,0,"span",35),e._uU(50,"X\xe1c th\u1ef1c "),e.qZA()()()()()(),e._UZ(51,"hr"),e.TgZ(52,"div",36)(53,"a",37),e.NdJ("click",function(){return i.handleClickLogout()}),e._uU(54),e.qZA()()()()()(),e._UZ(55,"div",3),e.qZA()()()}if(2&t){const r=e.MAs(46);e.xp6(8),e.Q6J("src",e.lcZ(9,13,"azota_assets/images/logo.svg"),e.LSH),e.xp6(3),e.hij(" ","change_phone"==i.confirm_type?"\u0110\u1ed5i s\u1ed1 \u0111i\u1ec7n tho\u1ea1i m\u1edbi":"X\xe1c th\u1ef1c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n"," "),e.xp6(4),e.Q6J("ngStyle",e.VKq(15,Jt,i.smsSent?"-100%":"0")),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(10),e.Q6J("ngIf",i.form.controls.phone.invalid&&(i.form.controls.phone.dirty||i.form.controls.phone.touched)),e.xp6(1),e.Q6J("disabled",i.form.invalid),e.xp6(5),e.Q6J("ngIf",i.statusObj.errorMessage),e.xp6(6),e.Oqu(i.form.value.phone),e.xp6(3),e.hij("",i.timeOut," s"),e.xp6(1),e.Q6J("ngIf",0==i.timeOut),e.xp6(5),e.Q6J("disabled",""==r.value||i.isVerifying),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(5),e.Oqu("forgot_password"==i.confirm_type?"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n":"change_phone"==i.confirm_type?"Quay l\u1ea1i m\xe0n h\xecnh ch\xednh":"\u0110\u0103ng xu\u1ea5t")}},dependencies:[E.O5,E.PC,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,d.sg,d.u,x.bT,x.BI],styles:["#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}"]}),n})();function ho(n,a){if(1&n&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15),e._UZ(3,"div",16)(4,"div",16)(5,"div",16),e.qZA()()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngClass",1==t.step_by_step?"active":t.step_by_step>1?"active pro":""),e.xp6(1),e.Q6J("ngClass",2==t.step_by_step?"active":t.step_by_step>2?"active pro":""),e.xp6(1),e.Q6J("ngClass",3==t.step_by_step?"active":t.step_by_step>3?"active pro":"")}}function mo(n,a){1&n&&(e.TgZ(0,"div")(1,"div",17)(2,"div",18)(3,"span",19),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function fo(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," Vui l\xf2ng nh\u1eadp email ho\u1eb7c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i! "),e.qZA())}function _o(n,a){if(1&n&&(e.TgZ(0,"div",43),e.YNc(1,fo,2,0,"div",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("emailOrPhone","required"))}}function Yt(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),e.qZA())}function vo(n,a){if(1&n&&(e.TgZ(0,"div",43),e.YNc(1,Yt,2,0,"div",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Ht(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),e.qZA())}function Ao(n,a){if(1&n&&(e.TgZ(0,"div",43),e.YNc(1,Ht,2,0,"div",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("repassword","confirm_pass"))}}function Vt(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",44),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function yo(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",45),e._uU(2,"\xa0"),e.qZA())}const Re=function(n){return[n]},Kt=function(){return{user_click:"true"}};function Qr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",20)(2,"div",21)(3,"div",22),e._UZ(4,"input",23),e.TgZ(5,"div",24)(6,"span",25)(7,"mat-icon",26),e._uU(8,"mail"),e.qZA(),e._uU(9,"/"),e.TgZ(10,"mat-icon",26),e._uU(11,"phone"),e.qZA()()()(),e.YNc(12,_o,2,1,"div",27),e.qZA()(),e.TgZ(13,"div",20)(14,"div",21)(15,"div",22),e._UZ(16,"input",28),e.TgZ(17,"div",24)(18,"span",29)(19,"mat-icon"),e._uU(20,"lock"),e.qZA()()()(),e.YNc(21,vo,2,1,"div",27),e.qZA()(),e.TgZ(22,"div",20)(23,"div",21)(24,"div",22),e._UZ(25,"input",30),e.TgZ(26,"div",24)(27,"span",29)(28,"mat-icon"),e._uU(29,"lock"),e.qZA()()()(),e.YNc(30,Ao,2,1,"div",27),e.qZA()(),e.YNc(31,Vt,4,3,"div",31),e.TgZ(32,"div",20)(33,"div",21)(34,"div",32)(35,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changePassword())}),e.YNc(36,yo,3,0,"span",12),e._uU(37,"Ti\u1ebfp t\u1ee5c "),e.qZA(),e.TgZ(38,"div",34)(39,"span",35),e._uU(40,"Ho\u1eb7c"),e.qZA()(),e.TgZ(41,"div",5)(42,"a",36),e.ALo(43,"localize"),e.TgZ(44,"span",37)(45,"mat-icon",38),e._uU(46,"center_focus_strong"),e.qZA(),e._uU(47," S\u1eed d\u1ee5ng m\xe3 QR qu\xean m\u1eadt kh\u1ea9u"),e.qZA()()()()()(),e._UZ(48,"hr"),e.TgZ(49,"div",39)(50,"div",40)(51,"a",41),e._uU(52,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),e.qZA()(),e.TgZ(53,"div")(54,"a",42),e.ALo(55,"localize"),e._uU(56,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(12),e.Q6J("ngIf",t.form.controls.emailOrPhone.invalid&&(t.form.controls.emailOrPhone.dirty||t.form.controls.emailOrPhone.touched)),e.xp6(9),e.Q6J("ngIf",t.form.controls.password.invalid&&t.form.controls.password.dirty),e.xp6(9),e.Q6J("ngIf",t.getErrorType("repassword","confirm_pass")&&t.form.controls.repassword.touched),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.form.invalid||t.statusObj.loading||0!=t.getErrorType("repassword","confirm_pass")),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(6),e.Q6J("routerLink",e.VKq(13,Re,e.lcZ(43,9,"/auth/confirm_forgot_password_qr"))),e.xp6(12),e.Q6J("routerLink",e.VKq(15,Re,e.lcZ(55,11,"/auth/login")))("queryParams",e.DdM(17,Kt))}}function Gt(n,a){if(1&n&&(e.TgZ(0,"div",49)(1,"a"),e._uU(2,"( Click v\xe0o \u0111\xe2y \u0111\u1ec3 g\u1eedi ngay )"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.uIk("href","sms:"+t.phone_send+"?body=MK "+t.response_change_pass.otp,e.LSH)}}function Nr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeStepByNext())}),e._uU(1," Ti\u1ebfp t\u1ee5c "),e.qZA()}}function qr(n,a){if(1&n&&(e.TgZ(0,"div",53)(1,"div",54),e._UZ(2,"span",45),e.qZA(),e.TgZ(3,"div",55),e._uU(4),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(t.currentMessage)}}function Co(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",21)(2,"div",46),e._uU(3," Th\xf4ng tin m\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c ghi nh\u1eadn. \u0110\u1ec3 k\xedch ho\u1ea1t m\u1eadt kh\u1ea9u v\u1eeba t\u1ea1o vui l\xf2ng s\u1eed d\u1ee5ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.TgZ(4,"strong"),e._uU(5),e.qZA(),e._uU(6," v\xe0 so\u1ea1n tin nh\u1eafn: "),e.qZA(),e.TgZ(7,"div",47)(8,"strong"),e._uU(9),e.qZA(),e._uU(10," g\u1eedi "),e.TgZ(11,"strong"),e._uU(12),e.qZA()(),e.YNc(13,Gt,3,1,"div",48),e.TgZ(14,"div",49),e._uU(15,' "C\u01b0\u1edbc ph\xed tin nh\u1eafn \u0111\u01b0\u1ee3c t\xednh theo gi\xe1 c\u01b0\u1edbc ph\xed th\xf4ng th\u01b0\u1eddng c\u1ee7a nh\xe0 m\u1ea1ng" '),e.qZA(),e.TgZ(16,"div",49),e._uU(17," Sau khi g\u1eedi tin nh\u1eafn vui l\xf2ng b\u1ea5m n\xfat b\xean d\u01b0\u1edbi \u0111\u1ec3 ti\u1ebfp t\u1ee5c "),e.qZA(),e.TgZ(18,"div",22),e.YNc(19,Nr,2,0,"button",50),e.YNc(20,qr,5,1,"div",51),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.data_change_pass.phone),e.xp6(4),e.hij("MK ",t.response_change_pass.otp,""),e.xp6(3),e.Oqu(t.phone_send),e.xp6(1),e.Q6J("ngIf",t.is_mobile),e.xp6(6),e.Q6J("ngIf",2==t.step_by_step),e.xp6(1),e.Q6J("ngIf",3==t.step_by_step)}}function Wt(n,a){1&n&&(e.TgZ(0,"div")(1,"div",21)(2,"div",46),e._uU(3," M\u1eadt kh\u1ea9u m\u1edbi c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t th\xe0nh c\xf4ng. "),e.qZA(),e.TgZ(4,"div",39)(5,"div",40)(6,"a",56),e.ALo(7,"localize"),e._uU(8,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e.qZA()(),e.TgZ(9,"div")(10,"a",57),e._uU(11,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),e.qZA()()()()()),2&n&&(e.xp6(6),e.Q6J("routerLink",e.VKq(4,Re,e.lcZ(7,2,"/auth/login")))("queryParams",e.DdM(6,Kt)))}function ai(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",21)(2,"div",46),e._uU(3," H\u1ec7 th\u1ed1ng \u0111\xe3 g\u1eedi email t\u1edbi \u0111\u1ecba ch\u1ec9 "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e._uU(6,". Vui l\xf2ng ki\u1ec3m tra email v\xe0 \u1ea5n v\xe0o \u0111\u01b0\u1eddng link x\xe1c nh\u1eadn \u0111\u1ec3 vi\u1ec7c thay \u0111\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng! "),e.qZA(),e.TgZ(7,"div",39)(8,"div",40)(9,"a",56),e.ALo(10,"localize"),e._uU(11,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e.qZA()(),e.TgZ(12,"div")(13,"a",57),e._uU(14,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.form.controls.emailOrPhone.value),e.xp6(4),e.Q6J("routerLink",e.VKq(5,Re,e.lcZ(10,3,"/auth/login")))("queryParams",e.DdM(7,Kt))}}let bo=(()=>{class n extends C.Q{constructor(t,i,r,u){super(i),this.formBuilder=t,this.commonService=i,this.smsService=r,this.mobileWebviewService=u,this.form=new d.nJ({}),this.step_by_step=1,this.currentMessage="",this.phone_send="",this.is_mobile=/Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.is_mobile_ios=/webOS|iPhone|iPad|iPod/i.test(navigator.userAgent),this.response_change_pass={},this.data_change_pass={}}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,i){var r,u;return"repassword"===t&&"confirm_pass"===i?this.form.controls.repassword.value!=this.form.controls.password.value:!(null===(r=this.form.controls[t].errors)||void 0===r||!r[i])&&(null===(u=this.form.controls[t].errors)||void 0===u?void 0:u[i])}randomPhone(t){if(t.includes(",")){let i=t.split(",");return i[this.commonService.getRandomNumber(0,i.length-1)]}return t}changePassword(){if(this.form.valid){this.initStatusObj();var t=this.commonService.getFormObj(this.form),i={phone:t.emailOrPhone,password:t.password};this.smsService.apiSmsChangePassPost(i).subscribe(r=>{var u,g;1==r.success?(this.successStatusObj(),t.emailOrPhone.includes("@")?this.step_by_step=5:(this.step_by_step=2,this.response_change_pass=null!==(u=r.data)&&void 0!==u?u:{},this.data_change_pass=i)):this.errorStatusObj(null!==(g=r.message)&&void 0!==g?g:"")})}}getPhone(){this.initStatusObj(),this.smsService.apiSmsGetPhoneGet().subscribe(t=>{var i,r,u;1==t.success?(this.successStatusObj(),this.phone_send=this.randomPhone(null!==(r=null===(i=t.data)||void 0===i?void 0:i.phone)&&void 0!==r?r:"")):this.errorStatusObj(null!==(u=t.message)&&void 0!==u?u:"",!0)})}changeStepByNext(){this.initStatusObj(),this.currentMessage="\u0110ang x\u1eed l\xfd d\u1eef li\u1ec7u",this.step_by_step=3,this.loop_check=window.setInterval(()=>{this.smsService.apiSmsCheckStatusGet(this.data_change_pass.phone).subscribe(t=>{var i,r;1==t.success?(this.successStatusObj(),1==(null===(i=t.data)||void 0===i?void 0:i.status)&&(this.step_by_step=4,clearInterval(this.loop_check))):(this.errorStatusObj(null!==(r=t.message)&&void 0!==r?r:""),this.currentMessage="H\u1ec7 th\u1ed1ng t\u1ea1m th\u1eddi kh\xf4ng th\u1ec3 x\u1eed l\xfd, vui l\xf2ng th\u1eed l\u1ea1i sau.",clearInterval(this.loop_check))})},1e3)}ngOnInit(){this.form=this.formBuilder.group({emailOrPhone:["",[d.kI.required]],password:["",[d.kI.required,d.kI.minLength(6)]],repassword:["",[d.kI.required,d.kI.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.getPhone(),super.ngOnInit(),this.mobileWebviewService.sendComponentLoaded("confirm_forgot_password")}ngOnDestroy(){this.loop_check&&clearInterval(this.loop_check),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.QS),e.Y36(R.v),e.Y36(L.tr),e.Y36($n.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password"]],features:[e.qOj],decls:19,vars:7,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],["class","row m-0",4,"ngIf"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"row","m-0"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","text","placeholder","Email ho\u1eb7c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","emailOrPhone","autocomplete","new-phone",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text",2,"padding-left","0.35rem","padding-right","0.35rem"],[2,"width","15px","height","15px","font-size","15px"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[1,"text-center","mt-2"],[1,"text-mute"],[1,"btn","btn-outline-primary","mt-2","w-100",3,"routerLink"],[1,"link-center"],[1,"mr-1"],[1,"text-center","mt-3"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sms-info"],[2,"text-align","right","font-size","15px","margin","10px 0","text-align","center"],["class","sms-info text-center mb-3",4,"ngIf"],[1,"sms-info","text-center","mb-3"],["class","btn btn-block","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"click"],[1,"loading"],[1,"icon"],[1,"text"],[3,"routerLink","queryParams"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank",1,"text-normal"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.qZA(),e.YNc(7,ho,6,3,"div",7),e.TgZ(8,"div",8)(9,"div",9)(10,"span",10),e._uU(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),e.qZA()(),e.TgZ(12,"div",11),e.YNc(13,mo,6,3,"div",12),e.YNc(14,Qr,57,18,"div",12),e.YNc(15,Co,21,6,"div",12),e.YNc(16,Wt,12,7,"div",12),e.YNc(17,ai,15,8,"div",12),e.qZA()()(),e._UZ(18,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("ngIf",!i.statusObj.loading),e.xp6(6),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading&&1==i.step_by_step),e.xp6(1),e.Q6J("ngIf",1!=i.statusObj.loading&&(2==i.step_by_step||3==i.step_by_step)),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading&&4==i.step_by_step),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading&&5==i.step_by_step))},dependencies:[P.yS,E.mk,E.O5,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,d.sg,d.u,Q.lO,x.bT],styles:['#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),n})();function Eo(n,a){1&n&&(e.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function xo(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),e.qZA())}function wo(n,a){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,xo,2,0,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function $t(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"label",28),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function ci(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",29),e._uU(2,"\xa0"),e.qZA())}const To=function(n){return[n]},ui=function(){return{user_click:"true"}};function So(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17),e._UZ(4,"input",18),e.TgZ(5,"div",19)(6,"span",20)(7,"mat-icon"),e._uU(8,"lock"),e.qZA()()()(),e.YNc(9,wo,2,1,"div",21),e.qZA()(),e.YNc(10,$t,4,3,"div",22),e.TgZ(11,"div",15)(12,"div",16)(13,"div",23)(14,"button",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changePassword())}),e.YNc(15,ci,3,0,"span",11),e._uU(16,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),e.qZA()()()(),e._UZ(17,"hr"),e.TgZ(18,"div",25)(19,"a",26),e.ALo(20,"localize"),e._uU(21,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.form.invalid||t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(4),e.Q6J("routerLink",e.VKq(8,To,e.lcZ(20,6,"/auth/login")))("queryParams",e.DdM(10,ui))}}let ue=(()=>{class n extends C.Q{constructor(t,i,r,u){super(i),this.formBuilder=t,this.commonService=i,this.baseApiService=r,this.authService=u,this.form=new d.nJ({})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,i){var r,u;return!(null===(r=this.form.controls[t].errors)||void 0===r||!r[i])&&(null===(u=this.form.controls[t].errors)||void 0===u?void 0:u[i])}changePassword(){if(this.form.valid){var t=this.commonService.getFormObj(this.form),i=this.commonService.getMyQueryParam("token");this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConfirmForgotPasswordGet(i,t.password).subscribe(r=>{var u;1==r.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(u=r.message)&&void 0!==u?u:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[d.kI.required,d.kI.minLength(6)]]}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.QS),e.Y36(R.v),e.Y36(U._),e.Y36(L.e8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password-admin"]],features:[e.qOj],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.ALo(7,"convertCdn"),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"span",9),e._uU(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),e.qZA()(),e.TgZ(12,"div",10),e.YNc(13,Eo,6,3,"div",11),e.YNc(14,So,22,11,"div",11),e.qZA()()(),e._UZ(15,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("src",e.lcZ(7,4,"azota_assets/images/logo.svg"),e.LSH),e.xp6(7),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading))},dependencies:[P.yS,E.O5,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,d.sg,d.u,Q.lO,x.bT,x.BI],encapsulation:2}),n})();var ht=m(39105),q=m(15861);const li=(()=>{class n{constructor(t,i,r,u,g){this._legacyCanvasSize=n.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),r&&"object"==typeof r?this._onDecode=i:(console.warn(r||u||g?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=i),this._onDecodeError=(i="object"==typeof r?r:{}).onDecodeError||("function"==typeof r?r:this._onDecodeError),this._calculateScanRegion=i.calculateScanRegion||("function"==typeof u?u:this._calculateScanRegion),this._preferredCamera=i.preferredCamera||g||this._preferredCamera,this._legacyCanvasSize="number"==typeof r?r:"number"==typeof u?u:this._legacyCanvasSize,this._maxScansPerSecond=i.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let _=!1;if(t.hidden&&(t.hidden=!1,_=!0),document.body.contains(t)||(document.body.appendChild(t),_=!0),r=t.parentElement,i.highlightScanRegion||i.highlightCodeOutline){if(u=!!i.overlay,this.$overlay=i.overlay||document.createElement("div"),(g=this.$overlay.style).position="absolute",g.display="none",g.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!u&&i.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(v){}r.insertBefore(this.$overlay,this.$video.nextSibling)}i.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let v=window.getComputedStyle(t);"none"===v.display&&(t.style.setProperty("display","block","important"),_=!0),"visible"!==v.visibility&&(t.style.setProperty("visibility","visible","important"),_=!0),_&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=n.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,q.Z)(function*(){try{return!!(yield n.listCameras(!1)).length}catch(t){return!1}})()}static listCameras(t=!1){return(0,q.Z)(function*(){if(!navigator.mediaDevices)return[];let r,i=function(){var u=(0,q.Z)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(g=>"videoinput"===g.kind)});return function(){return u.apply(this,arguments)}}();try{t&&(yield i()).every(u=>!u.label)&&(r=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(u){}try{return(yield i()).map((u,g)=>({id:u.deviceId,label:u.label||(0===g?"Default Camera":`Camera ${g+1}`)}))}finally{r&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),n._stopVideoStream(r))}})()}hasFlash(){var t=this;return(0,q.Z)(function*(){let i;try{if(t.$video.srcObject){if(!(t.$video.srcObject instanceof MediaStream))return!1;i=t.$video.srcObject}else i=(yield t._getCameraStream()).stream;return"torch"in i.getVideoTracks()[0].getSettings()}catch(r){return!1}finally{i&&i!==t.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),n._stopVideoStream(i))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var t=this;return(0,q.Z)(function*(){t._flashOn?yield t.turnFlashOff():yield t.turnFlashOn()})()}turnFlashOn(){var t=this;return(0,q.Z)(function*(){if(!t._flashOn&&!t._destroyed&&(t._flashOn=!0,t._active&&!t._paused))try{if(!(yield t.hasFlash()))throw"No flash available";yield t.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(i){throw t._flashOn=!1,i}})()}turnFlashOff(){var t=this;return(0,q.Z)(function*(){t._flashOn&&(t._flashOn=!1,yield t._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),n._postWorkerMessage(this._qrEnginePromise,"close")}start(){var t=this;return(0,q.Z)(function*(){if(t._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!t._active||t._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),t._active=!0,!document.hidden))if(t._paused=!1,t.$video.srcObject)yield t.$video.play();else try{let{stream:i,facingMode:r}=yield t._getCameraStream();!t._active||t._paused?n._stopVideoStream(i):(t._setVideoMirror(r),t.$video.srcObject=i,yield t.$video.play(),t._flashOn&&(t._flashOn=!1,t.turnFlashOn().catch(()=>{})))}catch(i){if(!t._paused)throw t._active=!1,i}})()}stop(){this.pause(),this._active=!1}pause(t=!1){var i=this;return(0,q.Z)(function*(){if(i._paused=!0,!i._active)return!0;i.$video.pause(),i.$overlay&&(i.$overlay.style.display="none");let r=()=>{i.$video.srcObject instanceof MediaStream&&(n._stopVideoStream(i.$video.srcObject),i.$video.srcObject=null)};return t?(r(),!0):(yield new Promise(u=>setTimeout(u,300)),!!i._paused&&(r(),!0))})()}setCamera(t){var i=this;return(0,q.Z)(function*(){t!==i._preferredCamera&&(i._preferredCamera=t,yield i._restartVideoStream())})()}static scanImage(t,i,r,u,g=!1,_=!1){return(0,q.Z)(function*(){let v,w=!1;i&&("scanRegion"in i||"qrEngine"in i||"canvas"in i||"disallowCanvasResizing"in i||"alsoTryWithoutScanRegion"in i||"returnDetailedScanResult"in i)?(v=i.scanRegion,r=i.qrEngine,u=i.canvas,g=i.disallowCanvasResizing||!1,_=i.alsoTryWithoutScanRegion||!1,w=!0):console.warn(i||r||u||g||_?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),i=!!r;try{let B,J,V;if([r,B]=yield Promise.all([r||n.createQrEngine(),n._loadImage(t)]),[u,J]=n._drawToCanvas(B,v,u,g),r instanceof Worker){let D=r;i||n._postWorkerMessageSync(D,"inversionMode","both"),V=yield new Promise((ee,Ae)=>{let ye,Ce,fe,He=-1;Ce=ie=>{ie.data.id===He&&(D.removeEventListener("message",Ce),D.removeEventListener("error",fe),clearTimeout(ye),null!==ie.data.data?ee({data:ie.data.data,cornerPoints:n._convertPoints(ie.data.cornerPoints,v)}):Ae(n.NO_QR_CODE_FOUND))},fe=ie=>{D.removeEventListener("message",Ce),D.removeEventListener("error",fe),clearTimeout(ye),Ae("Scanner error: "+(ie?ie.message||ie:"Unknown Error"))},D.addEventListener("message",Ce),D.addEventListener("error",fe),ye=setTimeout(()=>fe("timeout"),1e4);let z=J.getImageData(0,0,u.width,u.height);He=n._postWorkerMessageSync(D,"decode",z,[z.data.buffer])})}else V=yield Promise.race([new Promise((D,ee)=>window.setTimeout(()=>ee("Scanner error: timeout"),1e4)),(0,q.Z)(function*(){try{var[D]=yield r.detect(u);if(!D)throw n.NO_QR_CODE_FOUND;return{data:D.rawValue,cornerPoints:n._convertPoints(D.cornerPoints,v)}}catch(ee){if(/not implemented|service unavailable/.test(D=ee.message||ee))return n._disableBarcodeDetector=!0,n.scanImage(t,{scanRegion:v,canvas:u,disallowCanvasResizing:g,alsoTryWithoutScanRegion:_});throw`Scanner error: ${D}`}})()]);return w?V:V.data}catch(B){if(!v||!_)throw B;let J=yield n.scanImage(t,{qrEngine:r,canvas:u,disallowCanvasResizing:g});return w?J:J.data}finally{i||n._postWorkerMessage(r,"close")}})()}setGrayscaleWeights(t,i,r,u=!0){n._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:i,blue:r,useIntegerApproximation:u})}setInversionMode(t){n._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static createQrEngine(t){return(0,q.Z)(function*(){return t&&console.warn("Specifying a worker path is not required and not supported anymore."),!n._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(yield BarcodeDetector.getSupportedFormats()).includes("qr_code")?new BarcodeDetector({formats:["qr_code"]}):m.e(920).then(m.bind(m,36920)).then(i=>i.createWorker())})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let i=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-i)/2),y:Math.round((t.videoHeight-i)/2),width:i,height:i,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,i=t.videoWidth,r=t.videoHeight,u=t.offsetWidth,g=t.offsetHeight,_=t.offsetLeft,v=t.offsetTop,w=window.getComputedStyle(t),B=w.objectFit,J=i/r,V=u/g;switch(B){case"none":var D=i,ee=r;break;case"fill":D=u,ee=g;break;default:("cover"===B?J>V:J<V)?D=(ee=g)*J:ee=(D=u)/J,"scale-down"===B&&(D=Math.min(D,i),ee=Math.min(ee,r))}var[Ae,ye]=w.objectPosition.split(" ").map((fe,He)=>{const z=parseFloat(fe);return fe.endsWith("%")?(He?g-ee:u-D)*z/100:z});V=this._scanRegion.height||r,B=this._scanRegion.x||0;var Ce=this._scanRegion.y||0;(J=this.$overlay.style).width=(w=this._scanRegion.width||i)/i*D+"px",J.height=V/r*ee+"px",J.top=`${v+ye+Ce/r*ee}px`,r=/scaleX\(-1\)/.test(t.style.transform),J.left=`${_+(r?u-Ae-D:Ae)+(r?i-B-w:B)/i*D}px`,J.transform=t.style.transform}})}static _convertPoints(t,i){if(!i)return t;let r=i.x||0,u=i.y||0,g=i.width&&i.downScaledWidth?i.width/i.downScaledWidth:1;i=i.height&&i.downScaledHeight?i.height/i.downScaledHeight:1;for(let _ of t)_.x=_.x*g+r,_.y=_.y*i+u;return t}_scanFrame(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,q.Z)(function*(){if(!(1>=t.$video.readyState)){var i=Date.now()-t._lastScanTimestamp,r=1e3/t._maxScansPerSecond;i<r&&(yield new Promise(g=>setTimeout(g,r-i))),t._lastScanTimestamp=Date.now();try{var u=yield n.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas})}catch(g){if(!t._active)return;t._onDecodeError(g)}!n._disableBarcodeDetector||(yield t._qrEnginePromise)instanceof Worker||(t._qrEnginePromise=n.createQrEngine()),u?(t._onDecode?t._onDecode(u):t._legacyOnDecode&&t._legacyOnDecode(u.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox",`${t._scanRegion.x||0} ${t._scanRegion.y||0} ${t._scanRegion.width||t.$video.videoWidth} ${t._scanRegion.height||t.$video.videoHeight}`),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",u.cornerPoints.map(({x:g,y:_})=>`${g},${_}`).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(()=>t.$codeOutlineHighlight.style.display="none",100))}t._scanFrame()}))}_onDecodeError(t){t!==n.NO_QR_CODE_FOUND&&console.log(t)}_getCameraStream(){var t=this;return(0,q.Z)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let i=/^(environment|user)$/.test(t._preferredCamera)?"facingMode":"deviceId",r=[{width:{min:1024}},{width:{min:768}},{}],u=r.map(g=>Object.assign({},g,{[i]:{exact:t._preferredCamera}}));for(let g of[...u,...r])try{let _=yield navigator.mediaDevices.getUserMedia({video:g,audio:!1});return{stream:_,facingMode:t._getFacingMode(_)||(g.facingMode?t._preferredCamera:"environment"===t._preferredCamera?"user":"environment")}}catch(_){}throw"Camera not found."})()}_restartVideoStream(){var t=this;return(0,q.Z)(function*(){let i=t._paused;(yield t.pause(!0))&&!i&&t._active&&(yield t.start())})()}static _stopVideoStream(t){for(let i of t.getTracks())i.stop(),t.removeTrack(i)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,i,r,u=!1){r=r||document.createElement("canvas");let g=i&&i.x?i.x:0,_=i&&i.y?i.y:0,v=i&&i.width?i.width:t.videoWidth||t.width,w=i&&i.height?i.height:t.videoHeight||t.height;return u||(u=i&&i.downScaledWidth?i.downScaledWidth:v,i=i&&i.downScaledHeight?i.downScaledHeight:w,r.width!==u&&(r.width=u),r.height!==i&&(r.height=i)),(i=r.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,i.drawImage(t,g,_,v,w,0,0,r.width,r.height),[r,i]}static _loadImage(t){return(0,q.Z)(function*(){if(t instanceof Image)return yield n._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let i=new Image;i.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return yield n._awaitImageLoad(i),i}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(i.src)}}})()}static _awaitImageLoad(t){return(0,q.Z)(function*(){t.complete&&0!==t.naturalWidth||(yield new Promise((i,r)=>{let u=g=>{t.removeEventListener("load",u),t.removeEventListener("error",u),g instanceof ErrorEvent?r("Image load error"):i()};t.addEventListener("load",u),t.addEventListener("error",u)}))})()}static _postWorkerMessage(t,i,r,u){return(0,q.Z)(function*(){return n._postWorkerMessageSync(yield t,i,r,u)})()}static _postWorkerMessageSync(t,i,r,u){if(!(t instanceof Worker))return-1;let g=n._workerMessageId++;return t.postMessage({id:g,type:i,data:r},u),g}}return n.DEFAULT_CANVAS_SIZE=400,n.NO_QR_CODE_FOUND="No QR code found",n._disableBarcodeDetector=!1,n._workerMessageId=0,n})();var ko=m(591),Ue=m(10550),jr=m(35171);function Zo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"zxing-scanner",7),e.NdJ("deviceChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.currentDevice=r)})("scanSuccess",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.onCodeResult(r))})("permissionResponse",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.onHasPermission(r))})("camerasFound",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.onCamerasFound(r))})("torchCompatible",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.onTorchCompatible(r))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("torch",t.torchEnabled)("device",t.currentDevice)("tryHarder",t.tryHarder)("formats",t.formatsEnabled)}}function Xt(n,a){if(1&n&&(e.TgZ(0,"span",8),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("( ",t.contentResult," )")}}let di=(()=>{class n extends C.Q{constructor(t){super(t),this.commonService=t,this.outContentScan=new e.vpe,this.outNotCamAllow=new e.vpe,this.isShowDebugLog=!1,this.isShowScanner=!1,this.availableDevices=[],this.currentDevice=void 0,this.hasDevices=!1,this.hasPermission=!1,this.qrResultString="",this.torchEnabled=!1,this.torchAvailable$=new ko.X(!1),this.tryHarder=!1,this.formatsEnabled=[ht.BarcodeFormat.CODE_128,ht.BarcodeFormat.DATA_MATRIX,ht.BarcodeFormat.EAN_13,ht.BarcodeFormat.QR_CODE],this.deviceCamSelect=0,this.contentResult=null,this.isShowLog=!1,this.snd=new Audio,this.snd=new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=")}clearResult(){this.qrResultString=""}onCamerasFound(t){this.availableDevices=t,this.hasDevices=Boolean(t&&t.length)}onCodeResult(t){this.qrResultString=t,Ue.g.isEncode(t)?this.switchChangeContent(Ue.g.decode(t)):this.switchChangeContent(null)}onDeviceSelectChange(t){const i=this.availableDevices.find(r=>r.deviceId===t);this.currentDevice=i||void 0}onHasPermission(t){this.hasPermission=t}onTorchCompatible(t){this.torchAvailable$.next(t||!1)}toggleTorch(){this.torchEnabled=!this.torchEnabled}toggleTryHarder(){this.tryHarder=!this.tryHarder}switchVideoScan(){this.deviceCamSelect++,this.deviceCamSelect>=this.availableDevices.length&&(this.deviceCamSelect=0),this.currentDevice=this.availableDevices[this.deviceCamSelect]}unInitSscanCam(){this.isShowScanner=!1}initVideoScan(){this.isShowScanner=!0}initScanCam(){this.isShowScanner=!0}onFileSelected(t){let u=t.target.files;if(null!=u&&u.length){var g=u[0];if(!g)return;this.scanProcessSelectFile(t,g,0)}else console.log("jel"),this.switchChangeContent(null)}scanProcessSelectFile(t,i,r){li.scanImage(i,{returnDetailedScanResult:!0}).then(u=>{this.thatLog("onFileSelected: 0 "+JSON.stringify(u)),t.target.value="";var g=u.data;this.thatLog("onFileSelected: 1 "+g),Ue.g.isEncode(g)?this.switchChangeContent(Ue.g.decode(g)):this.switchChangeContent(null)}).catch(u=>{r>=2?(t.target.value="",this.thatLog("onFileSelected: 2 "+JSON.stringify(u)),this.switchChangeContent(null)):this.scanProcessSelectFile(t,i,r++)})}pauseScanQrcode(){this.isShowScanner=!1}switchChangeContent(t){this.contentResult=t,this.pauseScanQrcode(),this.beep(),navigator&&navigator.vibrate&&navigator.vibrate(200),this.thatLog("switchChangeContent: "+t),this.outContentScan.emit(this.contentResult)}thatLog(t){!0===this.isShowDebugLog&&console.log("__AZT SCAN__ :: "+t)}beep(){this.snd&&this.snd.play()}ngOnDestroy(){this.unInitSscanCam(),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-scan-qrcode"]],outputs:{outContentScan:"outContentScan",outNotCamAllow:"outNotCamAllow"},features:[e.qOj],decls:10,vars:2,consts:[[1,"scan__card-video"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible",4,"ngIf"],[1,"text-center","mt-3"],["class","text-center",4,"ngIf"],["type","file","name","fileQrcode",2,"display","none",3,"change"],["formChoseFile",""],[1,"link-center",3,"click"],[3,"torch","device","tryHarder","formats","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible"],[1,"text-center"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.YNc(1,Zo,1,4,"zxing-scanner",1),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,Xt,2,1,"span",3),e.TgZ(4,"input",4,5),e.NdJ("change",function(g){return i.onFileSelected(g)}),e.qZA(),e.TgZ(6,"a",6),e.NdJ("click",function(){e.CHM(r);const g=e.MAs(5);return e.KtG(g.click())}),e.TgZ(7,"mat-icon"),e._uU(8,"upload"),e.qZA(),e._uU(9," T\u1ea3i l\xean m\xe3 c\xf3 s\u1eb5n"),e.qZA()()}2&t&&(e.xp6(1),e.Q6J("ngIf",i.isShowScanner),e.xp6(2),e.Q6J("ngIf",i.isShowLog))},dependencies:[E.O5,b.Hw,jr.S],styles:[".scan__card-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.scan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}.scan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.scan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.431372549);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})();const Oo=["aztScanQrcode"];function en(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),e.qZA())}function Jr(n,a){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,en,2,0,"div",34),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function zr(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp! "),e.qZA())}function Yr(n,a){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,zr,2,0,"div",34),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("repassword","confirm_pass"))}}function Hr(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",37),e._uU(2,"\xa0"),e.qZA())}function mt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",38)(1,"p",39),e._uU(2,"Kh\xf4ng th\u1ec3 x\xe1c nh\u1eadn y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u. M\xe3 Qrcode v\xe0 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u0103ng nh\u1eadp kh\xf4ng tr\xf9ng kh\u1edbp. Vui l\xf2ng th\u1eed l\u1ea1i."),e.qZA(),e.TgZ(3,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.reloadProcessForgot())}),e._uU(4,"Th\u1eed l\u1ea1i"),e.qZA()()}}function Vr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",25),e._UZ(4,"input",26),e.TgZ(5,"div",27)(6,"span",28)(7,"mat-icon"),e._uU(8,"qr_code"),e.qZA()()()()()(),e.TgZ(9,"div",23)(10,"div",24)(11,"div",25),e._UZ(12,"input",29),e.TgZ(13,"div",27)(14,"span",28)(15,"mat-icon"),e._uU(16,"lock"),e.qZA()()()(),e.YNc(17,Jr,2,1,"div",30),e.qZA()(),e.TgZ(18,"div",23)(19,"div",24)(20,"div",25),e._UZ(21,"input",31),e.TgZ(22,"div",27)(23,"span",28)(24,"mat-icon"),e._uU(25,"lock"),e.qZA()()()(),e.YNc(26,Yr,2,1,"div",30),e.qZA()(),e.TgZ(27,"div",23)(28,"div",24)(29,"div",32)(30,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changePassword())}),e.YNc(31,Hr,3,0,"span",34),e._uU(32,"Ti\u1ebfp t\u1ee5c "),e.qZA()()(),e.YNc(33,mt,5,0,"div",35),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.uIk("disabled",!0),e.xp6(13),e.Q6J("ngIf",t.form.controls.password.invalid&&t.form.controls.password.dirty),e.xp6(9),e.Q6J("ngIf",0!=t.getErrorType("repassword","confirm_pass")&&t.form.controls.repassword.touched),e.xp6(4),e.Q6J("disabled",t.statusObj.errorMessage||t.form.invalid||t.statusObj.loading||0!=t.getErrorType("repassword","confirm_pass")),e.xp6(1),e.Q6J("ngIf",!0===t.statusObj.loading),e.xp6(2),e.Q6J("ngIf",t.statusObj.errorMessage)}}const Io=function(n){return{"d-none":n}},Po=function(n){return[n]},Mo=function(){return{user_click:"true"}};let Do=(()=>{class n extends C.Q{constructor(t,i,r,u){super(t),this.commonService=t,this.localStorageObjetct=i,this.formBuilder=r,this.qrCodeForgotPasswordService=u,this.subscriptions=new pt.w,this.form=new d.nJ({}),this.stepByStep=0,this.sussScanNextConf=!1}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,i){var r,u;return"repassword"===t&&"confirm_pass"===i?this.form.controls.repassword.value!=this.form.controls.password.value:!(null===(r=this.form.controls[t].errors)||void 0===r||!r[i])&&(null===(u=this.form.controls[t].errors)||void 0===u?void 0:u[i])}reloadProcessForgot(){this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam(),this.stepByStep=0,this.form.reset(),this.initStatusObj(),this.sussScanNextConf=!1}outContentScan(t){null!==t?this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordAnonymousCheckForgotPasswordQrCodePost({hash:t}).subscribe(r=>{var u;1==r.success&&1==(null===(u=null==r?void 0:r.data)||void 0===u?void 0:u.status)?(this.stepByStep=1,this.form.controls.hash.setValue(t),this.sussScanNextConf=!0):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}):(this.showErrorSnack("Ph\xe2n t\xedch m\xe3 qrcode th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i"),this.reloadProcessForgot())}changePassword(){this.initStatusObj();var t=this.commonService.getFormObj(this.form);this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordChangePasswordByQrcodePost({hash:t.hash,password:t.password}).subscribe(r=>{0!=r.success?(this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng.",!0),this.commonService.myNavigation("/auth/forgot_password_susscess")):(this.errorStatusObj("Y\xeau c\u1ea7u \u0111\u1ed5i m\u1eadt kh\u1ea9u th\u1ea5t b\u1ea1i.",!0),this.successStatusObj())})}ngAfterViewInit(){setTimeout(()=>{this.elementaztScanQrcode&&this.elementaztScanQrcode.initScanCam()},0)}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),this.form=this.formBuilder.group({hash:["",[d.kI.required]],password:["",[d.kI.required,d.kI.minLength(6)]],repassword:["",[d.kI.required,d.kI.minLength(6)]]}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v),e.Y36(Fe.L),e.Y36(d.QS),e.Y36(L.qY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password"]],viewQuery:function(t,i){if(1&t&&e.Gf(Oo,5),2&t){let r;e.iGM(r=e.CRH())&&(i.elementaztScanQrcode=r.first)}},features:[e.qOj],decls:33,vars:15,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"loginscan_scanmode_cam",3,"ngClass"],[1,"text-center","mb-3"],[3,"outContentScan"],["aztScanQrcode",""],["class","loginscan_scanmode_conf",4,"ngIf"],[1,"mb-1"],["href","https://docs.azota.vn/#quen-mat-khau","target","blank"],[1,"text-normal","mt-1",3,"routerLink","queryParams"],[1,"loginscan_scanmode_conf"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\xe3 x\xe1c th\u1ef1c","formControlName","hash",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","new-password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","formControlName","repassword","autocomplete","new-repassword",1,"form-control"],[1,"text-right"],["mat-raised-button","","color","primary",1,"btn","btn-block",3,"disabled","click"],[4,"ngIf"],["class","col-sm-12 mt-2",4,"ngIf"],[1,"alert","alert-danger"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-sm-12","mt-2"],[1,"text-danger"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8),e._UZ(9,"div",9)(10,"div",9)(11,"div",9),e.qZA()(),e.TgZ(12,"div",10)(13,"div",11)(14,"span",12),e._uU(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi b\u1eb1ng m\xe3 QRCode"),e.qZA()(),e.TgZ(16,"div",13)(17,"div",14)(18,"div",15),e._uU(19," Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode "),e.qZA(),e.TgZ(20,"azt-scan-qrcode",16,17),e.NdJ("outContentScan",function(u){return i.outContentScan(u)}),e.qZA()(),e.YNc(22,Vr,34,6,"div",18),e.qZA(),e._UZ(23,"hr"),e.TgZ(24,"div",15)(25,"div",19)(26,"a",20),e._uU(27,"H\u01b0\u1edbng d\u1eabn \u0111\u1ed5i m\u1eadt kh\u1ea9u tr\xean Azota"),e.qZA()(),e.TgZ(28,"div")(29,"a",21),e.ALo(30,"localize"),e._uU(31,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e.qZA()()()()(),e._UZ(32,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(8),e.Q6J("ngClass",i.stepByStep+2==1?"active":i.stepByStep+2>1?"active pro":""),e.xp6(1),e.Q6J("ngClass",i.stepByStep+2==2?"active":i.stepByStep+2>2?"active pro":""),e.xp6(1),e.Q6J("ngClass",i.stepByStep+2==3?"active":i.stepByStep+2>3?"active pro":""),e.xp6(6),e.Q6J("ngClass",e.VKq(10,Io,i.sussScanNextConf)),e.xp6(5),e.Q6J("ngIf",i.sussScanNextConf),e.xp6(7),e.Q6J("routerLink",e.VKq(12,Po,e.lcZ(30,8,"/auth/login")))("queryParams",e.DdM(14,Mo)))},dependencies:[P.yS,E.mk,E.O5,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,d.sg,d.u,di,Q.lO],styles:['#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}']}),n})();var $e=m(48966),Lo=m(17852),Fo=m(58496);function Ro(n,a){if(1&n&&(e.TgZ(0,"div",3)(1,"mat-icon",4),e._uU(2,"access_time"),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.stringDuration,"")}}let gi=(()=>{class n extends C.Q{constructor(){super(...arguments),this.content="",this.width=0,this.height=0,this.expired=0,this.expiredAction=new e.vpe,this.startDuration=0,this.isDuration=!1,this.stringDuration="__ : __"}ngAfterViewInit(){setTimeout(()=>{this.reInitComponent()},0)}reInitComponent(){this.bindUrlToQrCode(),0!=this.expired&&(this.isDuration=!0,this.startDuration=Math.floor(Date.now()/1e3),this.initLoopDuration())}initLoopDuration(){this.loopDuration=setInterval(()=>{var t=Math.floor(Date.now()/1e3),r=this.expired-(t-this.startDuration);if(r<0)this.clearLoopDuration(),this.qrcode.clear(),this.expiredAction.emit();else{var u=Math.floor(r/60),g=r-60*u;this.stringDuration=(u<10?"0"+u:""+u)+" : "+(g<10?"0"+g:""+g)}},1e3)}clearLoopDuration(){this.loopDuration&&clearInterval(this.loopDuration)}bindUrlToQrCode(){this.qrcode=this.commonService.createObjectQrcode(this.content,this.width,this.height,"text",!0,"image-qrcode-created"),this.qrcode._oDrawing._elCanvas.style.width="100%",this.qrcode._oDrawing._elCanvas.style.opacity=".9"}downloadQrcode(t){t||(t="azota-qr"),t=this.getTimeSaveQrcode()+"_"+t+".jpg";var i=this.createFrameQrcodeSaveLocal(this.qrcode._oDrawing._elCanvas),r=document.createElement("a");document.body.appendChild(r),r.setAttribute("href",i),r.setAttribute("download",t),r.click()}getTimeSaveQrcode(){var t=new Date,i=t.getMonth()+1,r=t.getDate();return[t.getFullYear(),(i>9?"":"0")+i,(r>9?"":"0")+r].join("_")}createFrameQrcodeSaveLocal(t){var i=document.createElement("canvas");const r=i.getContext("2d");return i.width=420,i.height=420,r&&(r.fillStyle="white",r.fillRect(0,0,i.width,i.height),r.drawImage(t,0,0,t.width,t.height,Math.floor((i.height-t.height)/2),(i.width-t.width)/2,t.width,t.height)),i.toDataURL("image/jpeg",1)}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-create-qr-image"]],inputs:{content:"content",width:"width",height:"height",expired:"expired"},outputs:{expiredAction:"expiredAction"},features:[e.qOj],decls:3,vars:1,consts:[[1,"qr-scan-box"],["class","duration",4,"ngIf"],["id","image-qrcode-created"],[1,"duration"],[2,"font-size","18px"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ro,4,1,"div",1),e._UZ(2,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.isDuration))},dependencies:[E.O5,b.Hw],styles:[".qr-scan-box[_ngcontent-%COMP%]{border:1px solid #e0e0e0}#image-qrcode-created[_ngcontent-%COMP%]{margin:20px}.duration[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px;font-weight:500}"]}),n})();const Uo=["elementCreateQr"];function ft(n,a){1&n&&e._UZ(0,"header-backend",13),2&n&&e.Q6J("headerTitle","")("headerBackToLink","/admin/dashboard")}function Se(n,a){1&n&&e._UZ(0,"header-frontend",14),2&n&&e.Q6J("headerTitle","")("headerBackToLink","/student/dashboard/0")}function Qo(n,a){if(1&n&&(e.TgZ(0,"div",15),e._UZ(1,"azt-create-qr-image",16,17),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("content",t.contentQrcodeHash)("width",350)("height",350)("expired",0)}}function No(n,a){if(1&n&&(e.TgZ(0,"div",18)(1,"div",19)(2,"mat-icon"),e._uU(3,"visibility_off"),e.qZA()(),e.TgZ(4,"div",20),e._uU(5),e.qZA()()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",t.notiContentString," ")}}function qo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadQrCode())}),e.TgZ(2,"mat-icon",22),e._uU(3,"download"),e.qZA(),e._uU(4," T\u1ea3i xu\u1ed1ng m\xe3"),e.qZA()()}}function Bo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.openDialog())}),e.TgZ(2,"mat-icon",22),e._uU(3,"add_photo_alternate"),e.qZA(),e._uU(4," T\u1ea1o m\xe3 qu\xean m\u1eadt kh\u1ea9u m\u1edbi"),e.qZA()()}}let jo=(()=>{class n extends C.Q{constructor(t,i,r,u){super(t),this.commonService=t,this.dialog=i,this.activeRoute=r,this.qrCodeForgotPasswordService=u,this.notiContentString="",this.contentQrcodeHash="",this.role=0}checkQrThisMe(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCheckForgotPasswordQrCodeGet().subscribe(t=>{var i;1==t.success?this.notiContentString=0!=(null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.status)?"M\xe3 Qrcode \u0111\xe3 t\u1ed3n t\u1ea1i. B\u1ea1n kh\xf4ng th\u1ec3 xem m\xe3 hi\u1ec7n t\u1ea1i. T\u1ea1o m\xe3 m\u1edbi trong tr\u01b0\u1eddng h\u1ee3p b\u1ea1n \u0111\xe3 m\u1ea5t m\xe3 Qrcode.":"B\u1ea1n ch\u01b0a t\u1ea1o m\xe3 Qrcode d\xf9ng trong tr\u01b0\u1eddng h\u1ee3p qu\xean m\u1eadt kh\u1ea9u. Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi.":this.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}createQrcodeForgot(){this.qrCodeForgotPasswordService.apiQrCodeForgotPasswordCreateForgotPasswordQrCodeGet().subscribe(t=>{var i,r;1==t.success?this.contentQrcodeHash=null!==(r=null===(i=t.data)||void 0===i?void 0:i.qrCode)&&void 0!==r?r:"":this.showErrorSnack("Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\u1ea3n h\u1ed3i.")})}openDialog(){this.dialog.open(Jo).afterClosed().subscribe(i=>{!0===i&&this.createQrcodeForgot()})}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-forgot")}ngOnInit(){var t,i=null!==(t=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==t?t:"0";this.role=parseInt(i,10),this.checkQrThisMe(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v),e.Y36($e.uw),e.Y36(P.gz),e.Y36(L.qY))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gzip-tool"]],viewQuery:function(t,i){if(1&t&&e.Gf(Uo,5),2&t){let r;e.iGM(r=e.CRH())&&(i.elementCreateQr=r.first)}},features:[e.qOj],decls:16,vars:6,consts:[["class","mb-3",3,"headerTitle","headerBackToLink",4,"ngIf"],[3,"headerTitle","headerBackToLink",4,"ngIf"],[1,"container","component-wrap","centerBoth","hasBg","mt-3"],[1,"card","mb-5"],[1,"card-body"],[1,"text-center"],[1,"card-content","mt-3","text-center"],[1,"card-center-row"],[1,"qrcode-block","card-center-row"],[1,"qrcode-block-fake","card-center-row"],["class","qrcode-block-real",4,"ngIf"],["class","qrcode-block-fake-content",4,"ngIf"],["class","card-center-row",4,"ngIf"],[1,"mb-3",3,"headerTitle","headerBackToLink"],[3,"headerTitle","headerBackToLink"],[1,"qrcode-block-real"],[3,"content","width","height","expired"],["elementCreateQr",""],[1,"qrcode-block-fake-content"],[1,"qrcode-block-icon"],[1,"qrcode-block-note"],[1,"card-center-row","btn","btn-outline-primary",3,"click"],[2,"margin-right","10px"]],template:function(t,i){1&t&&(e.YNc(0,ft,1,2,"header-backend",0),e.YNc(1,Se,1,2,"header-frontend",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5)(6,"b"),e._uU(7,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),e.qZA()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e.YNc(12,Qo,3,4,"div",10),e.YNc(13,No,6,1,"div",11),e.qZA()()(),e.YNc(14,qo,5,0,"div",12),e.YNc(15,Bo,5,0,"div",12),e.qZA()()()()),2&t&&(e.Q6J("ngIf",0==i.role),e.xp6(1),e.Q6J("ngIf",1==i.role),e.xp6(11),e.Q6J("ngIf",i.contentQrcodeHash),e.xp6(1),e.Q6J("ngIf",!i.contentQrcodeHash),e.xp6(1),e.Q6J("ngIf",i.contentQrcodeHash),e.xp6(1),e.Q6J("ngIf",!i.contentQrcodeHash))},dependencies:[E.O5,b.Hw,Lo.p,Fo.d,gi],styles:[".card-center-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.qrcode-block[_ngcontent-%COMP%]{padding:10px;border:1px solid #e0e0e0;margin-bottom:20px;max-width:400px;max-height:400px;min-width:300px;min-height:300px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.qrcode-block-fake[_ngcontent-%COMP%]{width:100%;height:100%}.qrcode-block-fake-content[_ngcontent-%COMP%]{padding:10px}.qrcode-block-note[_ngcontent-%COMP%]{line-height:30px}"]}),n})(),Jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["dialog-conf-content-qrcode-dialog"]],decls:16,vars:1,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-dialog-close","",1,"btn","btn-default","mr-3"],["cdkFocusInitial","",1,"btn","btn-outline-primary",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Tr\xecnh t\u1ea1o m\xe3 QRCode Qu\xean m\u1eadt kh\u1ea9u"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"h3"),e._uU(4,'B\u1ea5m "X\xe1c nh\u1eadn" \u0111\u1ed3ng ngh\u0129a v\u1edbi vi\u1ec7c b\u1ea1n \u0111\xe3 hi\u1ec3u v\u1ec1 c\xe1c \u0111i\u1ec1u sau'),e.qZA(),e.TgZ(5,"p"),e._uU(6,"1. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 duy nh\u1ea5t. Khi b\u1ea1n t\u1ea1o m\u1edbi m\xe3, m\xe3 c\u0169 s\u1ebd kh\xf4ng c\xf2n gi\xe1 tr\u1ecb s\u1eed d\u1ee5ng."),e.qZA(),e.TgZ(7,"p"),e._uU(8,"2. M\xe3 Qrcode qu\xean m\u1eadt kh\u1ea9u l\xe0 ch\xeca kho\xe1. Vui l\xf2ng kh\xf4ng chia s\u1ebb hay \u0111\u1ec3 ng\u01b0\u1eddi kh\xe1c c\xf3 \u0111\u01b0\u1ee3c m\xe3 qrcode c\u1ee7a b\u1ea1n."),e._UZ(9,"br"),e._uU(10,"Sau khi t\u1ea1o th\xe0nh c\xf4ng, vui l\xf2ng t\u1ea3i xu\u1ed1ng m\xe3 Qrcode \u0111\u1ec3 s\u1eed d\u1ee5ng cho m\u1ee5c \u0111\xedch qu\xean m\u1eadt kh\u1ea9u sau n\xe0y."),e.qZA()(),e.TgZ(11,"mat-dialog-actions",2)(12,"button",3),e._uU(13,"Hu\u1ef7"),e.qZA(),e.TgZ(14,"button",4),e._uU(15,"X\xe1c nh\u1eadn"),e.qZA()()),2&t&&(e.xp6(14),e.Q6J("mat-dialog-close",!0))},dependencies:[$e.ZT,$e.uh,$e.xY,$e.H8],encapsulation:2}),n})(),Kr=(()=>{class n extends C.Q{constructor(){super(...arguments),this.step_by_step=3}redirectToCreateQrCode(){this.commonService.myNavigation("/auth/create-qr-forgot-pass/0")}redirectToHome(){this.commonService.myNavigation("/admin/dashboard")}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password"]],features:[e.qOj],decls:25,vars:3,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["src","https://azotacdn.studybymusic.com/storage_public/azota_assets/images/logo.svg","alt","logo",2,"width","180px"],[1,"wrapper-progressBar"],[1,"progressBar"],[1,"progressBar-li",3,"ngClass"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[1,"btn-block-center"],[1,"btn","btn-outline-info","w-100","mr-3",3,"click"],[1,"btn","btn-outline-primary","w-100",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8),e._UZ(9,"div",9)(10,"div",9)(11,"div",9),e.qZA()(),e.TgZ(12,"div",10)(13,"div",11)(14,"span",12),e._uU(15,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng"),e.qZA()(),e.TgZ(16,"div",13)(17,"p"),e._uU(18,"B\u1ea1n \u0111\xe3 \u0111\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi th\xe0nh c\xf4ng. M\xe3 Qrcode \u0111\xe3 s\u1eed d\u1ee5ng c\xf3 th\u1ec3 s\u1eed d\u1ee5ng l\u1ea1i. \u0110\u1ec3 \u0111\u1ea3m b\u1ea3o an to\xe0n, b\u1ea1n n\xean t\u1ea1o l\u1ea1i m\xe3 Qrcode."),e.qZA(),e.TgZ(19,"div",14)(20,"a",15),e.NdJ("click",function(){return i.redirectToHome()}),e._uU(21,"B\u1ecf qua v\xe0 v\u1ec1 trang ch\u1ee7"),e.qZA(),e.TgZ(22,"a",16),e.NdJ("click",function(){return i.redirectToCreateQrCode()}),e._uU(23,"T\u1ea1o l\u1ea1i m\xe3 Qrcode"),e.qZA()()()()(),e._UZ(24,"div",3),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("ngClass",i.step_by_step+2==1?"active":i.step_by_step+2>1?"active pro":""),e.xp6(1),e.Q6J("ngClass",i.step_by_step+2==2?"active":i.step_by_step+2>2?"active pro":""),e.xp6(1),e.Q6J("ngClass",i.step_by_step+2==3?"active":i.step_by_step+2>3?"active pro":""))},dependencies:[E.mk],styles:['#authForm[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(0,0,0,.125);max-width:550px;margin:0 auto}#recaptcha-container[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{text-align:center}.sms-info[_ngcontent-%COMP%]{font-size:13px;color:#5a5a5a;white-space:pre-line}.form-group[_ngcontent-%COMP%]{margin-bottom:0}#verify_wrap[_ngcontent-%COMP%]{padding-top:3px;white-space:nowrap;overflow:hidden}#verify_wrap[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;width:100%}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_area[_ngcontent-%COMP%]{transition:margin ease .5s}#verify_wrap[_ngcontent-%COMP%]   div#enter_phone_wrap[_ngcontent-%COMP%]{width:100%}.resend-code[_ngcontent-%COMP%]{text-align:right;font-size:13px;color:#3c8dbc;white-space:pre-line}.loading[_ngcontent-%COMP%]{text-align:center;width:100%}.loading[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.wrapper-progressBar[_ngcontent-%COMP%]{width:100%}.progressBar[_ngcontent-%COMP%]{counter-reset:step}.progressBar-li[_ngcontent-%COMP%]{list-style-type:none;float:left;width:33.3%;position:relative;text-align:center}.progressBar-li[_ngcontent-%COMP%]:before{cursor:pointer;content:counter(step);counter-increment:step;line-height:30px;border-radius:50%;width:30px;height:30px;border:1px solid #ddd;display:block;text-align:center;margin:0 auto 10px;background-color:#fff}.pro[_ngcontent-%COMP%]:before{content:"\\f00c"!important;font-family:"Font Awesome 5 Free"!important;font-weight:900;background-color:green!important;color:#fff!important}.progressBar-li[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#ddd;top:15px;left:-50%;z-index:-1}.progressBar-li[_ngcontent-%COMP%]:first-child:after{content:none}.progressBar-li.active[_ngcontent-%COMP%]{color:green}.progressBar-li.active[_ngcontent-%COMP%]:before{border-color:green;background-color:#fff}.progressBar-li.active[_ngcontent-%COMP%] + .progressBar-li[_ngcontent-%COMP%]:after{background-color:green}.link-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.btn-block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}']}),n})();var tn=m(89892);const zo=["elementCreateQr"],nn=["aztScanQrcode"];function Yo(n,a){1&n&&(e.TgZ(0,"h2",25),e._UZ(1,"img",26),e.ALo(2,"convertCdn"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("src",e.lcZ(2,1,"azota_assets/images/logo.svg"),e.LSH))}function Ho(n,a){1&n&&(e.TgZ(0,"div",20),e._uU(1,"\u0110\u1ec3 \u0111\u0103ng nh\u1eadp l\xean thi\u1ebft b\u1ecb n\xe0y, vui l\xf2ng t\u1ea1o m\xe3 \u0111\u1ec3 thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp qu\xe9t."),e.qZA())}function pi(n,a){1&n&&(e.TgZ(0,"div",20),e._uU(1,"D\xf9ng thi\u1ebft b\u1ecb c\u1ea7n \u0111\u0103ng nh\u1eadp qu\xe9t m\xe3 b\xean d\u01b0\u1edbi"),e.qZA())}function Vo(n,a){if(1&n&&(e.TgZ(0,"div",27),e._UZ(1,"span",28),e._uU(2),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij("\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode: ",t.nameSessionConfirm,"")}}function hi(n,a){1&n&&(e.TgZ(0,"div",27),e._UZ(1,"span",28),e._uU(2,"\xa0 \u0110ang ch\u1edd qu\xe9t m\xe3 Qrcode"),e.qZA())}function Ko(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e._UZ(2,"br"),e._uU(3),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",t.nameSessionConfirm,"")}}function Go(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"span",28),e._uU(2,"\xa0 "),e.TgZ(3,"span",36),e._uU(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),e.qZA()())}function Wo(n,a){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.textResultErr)}}function Gr(n,a){if(1&n&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.textResultSuss)}}function Qe(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function ve(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function $o(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confContentPendingLogin(1))}),e.YNc(2,Qe,3,0,"span",32),e._uU(3," Ch\u1ea5p nh\u1eadn "),e.qZA(),e.TgZ(4,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confContentPendingLogin(2))}),e.YNc(5,ve,3,0,"span",32),e._uU(6," T\u1eeb ch\u1ed1i "),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.isLoadingBtn||t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(2),e.Q6J("disabled",t.isLoadingBtn||t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn)}}function on(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",42),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.backScanActionWithIsLogin())}),e._uU(2,"Quay l\u1ea1i"),e.qZA()()}}function Xo(n,a){if(1&n&&(e.TgZ(0,"div",29)(1,"div",30)(2,"div",31),e.YNc(3,Ko,4,1,"span",32),e.qZA(),e.YNc(4,Go,5,0,"div",32),e.YNc(5,Wo,2,1,"div",33),e.YNc(6,Gr,2,1,"div",34),e.YNc(7,$o,7,4,"div",35),e.YNc(8,on,3,0,"div",32),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.nameSessionConfirm),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.Q6J("ngIf",t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.textResultSuss),e.xp6(1),e.Q6J("ngIf",!t.textResultSuss||!t.isConfirmBtn),e.xp6(1),e.Q6J("ngIf",t.isLogin&&!1===t.isLoadingBtn&&!0===t.isConfirmBtn)}}function mi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.createRequestLoginHashCodeAction())}),e.TgZ(1,"div",47)(2,"div")(3,"mat-icon"),e._uU(4,"sync"),e.qZA()(),e.TgZ(5,"div"),e._uU(6,"T\u1ea1o m\u1edbi m\xe3"),e.qZA()()()}}function er(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"azt-create-qr-image",48,49),e.NdJ("expiredAction",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.expiredQrcodeAction())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("content",t.contentCreateQrcode)("width",350)("height",350)("expired",t.durationQrcodeExpire)}}function rn(n,a){if(1&n&&(e.TgZ(0,"div",43),e.YNc(1,mi,7,0,"div",44),e.YNc(2,er,2,4,"azt-create-qr-image",45),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!1===t.isLogin&&!t.contentCreateQrcode),e.xp6(1),e.Q6J("ngIf",t.contentCreateQrcode)}}function tr(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadQrCode())}),e.TgZ(1,"mat-icon"),e._uU(2,"download"),e.qZA(),e._uU(3," T\u1ea3i xu\u1ed1ng m\xe3"),e.qZA()}}function nr(n,a){1&n&&(e.TgZ(0,"div",16)(1,"span"),e._uU(2,"- HO\u1eb6C B\u1ea0N C\xd3 TH\u1ec2 -"),e.qZA()())}function ir(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"a",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.switchModeView())}),e.TgZ(2,"span",52)(3,"mat-icon",53),e._uU(4,"center_focus_strong"),e.qZA(),e._uU(5," Qu\xe9t m\xe3 QR c\xf3 s\u1eb5n"),e.qZA()()()}}function ke(n,a){if(1&n&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.textResultErr)}}function sn(n,a){if(1&n&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.textResultSuss)}}function an(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function fi(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confContentLogin())}),e.YNc(2,an,3,0,"span",32),e._uU(3," \u0110\u0103ng nh\u1eadp "),e.qZA(),e.TgZ(4,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.reopenScanCamInit())}),e._uU(5,"Th\u1eed l\u1ea1i"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.isLoadingBtn||t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(2),e.Q6J("disabled",t.isLoadingBtn)}}function cn(n,a){if(1&n&&(e.TgZ(0,"div",29)(1,"div",30)(2,"div",31),e._uU(3,"X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e._UZ(4,"br"),e._uU(5,"v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n"),e.qZA(),e.YNc(6,ke,2,1,"div",33),e.YNc(7,sn,2,1,"div",34),e.YNc(8,fi,6,3,"div",35),e.qZA()()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.textResultErr),e.xp6(1),e.Q6J("ngIf",t.textResultSuss),e.xp6(1),e.Q6J("ngIf",!t.textResultSuss)}}function un(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"span",28),e._uU(2,"\xa0 "),e.TgZ(3,"span",36),e._uU(4,"\u0110ang ch\u1edd x\u1eed l\xfd"),e.qZA()())}function ln(n,a){if(1&n&&e._UZ(0,"div",56),2&n){const t=e.oxw(2);e.Q6J("innerHTML",t.textResultErr,e.oJD)}}function or(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",28),e._uU(2,"\xa0"),e.qZA())}function dn(n,a){if(1&n&&(e.TgZ(0,"button",57),e.YNc(1,or,3,0,"span",32),e._uU(2),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("disabled",!t.textResultSuss),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.hij(" ",t.textResultSuss," ")}}function gn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"span"),e._uU(4,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e._UZ(5,"br"),e._uU(6),e.qZA()(),e.YNc(7,un,5,0,"div",32),e.YNc(8,ln,1,1,"div",54),e.TgZ(9,"div",39),e.YNc(10,dn,3,3,"button",55),e.TgZ(11,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.reopenScanCamInit())}),e._uU(12,"Th\u1eed l\u1ea1i"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.hij("v\u1edbi m\xe3 QR \u0111\xe3 ph\xe1t hi\u1ec7n: ",t.nameSessionConfirm,""),e.xp6(1),e.Q6J("ngIf",t.isLoadingBtn),e.xp6(1),e.Q6J("ngIf",t.textResultErr),e.xp6(2),e.Q6J("ngIf",!t.textResultSuss&&t.isLoadingBtn),e.xp6(1),e.Q6J("disabled",t.isLoadingBtn)}}const _i=function(n){return[n]},X=function(n){return{return_url:n,user_click:"true"}},pn=function(n){return{"d-none":n}},hn=function(n){return{return_url:n}};let rr=(()=>{class n extends C.Q{constructor(t,i,r,u,g,_){super(t),this.commonService=t,this.baseApiService=i,this.localStorageObjetct=r,this.activeRoute=u,this.qrCodeLoginService=g,this.redirectService=_,this.returnUrl="",this.isLogin=!1,this.modeShowInit="create",this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.pendingDuration=!1,this.role=0,this.backToLink=""}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}reloadLogin(){this.isLogin&&this.redirectService.redirectToDashboard()}downloadQrCode(){this.elementCreateQr&&this.elementCreateQr.downloadQrcode("azota-login")}switchModeView(){this.modeShowInit="create"===this.modeShowInit?"scan":"create",this.elementaztScanQrcode&&("scan"===this.modeShowInit?(this.elementaztScanQrcode.initScanCam(),this.clearLoopRefLogin(),this.clearLoopPendingLogin()):(this.elementaztScanQrcode.unInitSscanCam(),this.initLoopRefLogin(),this.initPendingLoadingConfirm()))}clearLoopPendingLogin(){this.loopPendingLogin&&clearInterval(this.loopPendingLogin)}clearLoopRefLogin(){this.loopRefCheckQrcodeLogin&&clearInterval(this.loopRefCheckQrcodeLogin)}reopenScanCamInit(){this.textResultErr="",this.textResultSuss="",this.elementaztScanQrcode&&(this.elementaztScanQrcode.initScanCam(),this.sussScanNextConf=!1)}backScanActionWithIsLogin(){this.isLogin&&(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.createQrCodeWithUser())}expiredQrcodeAction(){this.pendingDuration||(this.clearLoopRefLogin(),this.clearLoopPendingLogin(),this.initStatusObj(),this.contentCreateQrcode="",this.sussScanNextConf=!1,this.scanQrContent=void 0,this.scanQrContentConfirm="",this.isLoadingBtn=!1,this.isConfirmBtn=!1,this.textResultSuss="",this.textResultErr="",this.nameSessionConfirm="",this.durationQrcodeExpire=0,this.isLogin?(this.createQrCodeWithUser(),this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, \u0111\xe3 t\u1ea1o m\xe3 qrcode m\u1edbi. Vui l\xf2ng thao t\xe1c l\u1ea1i.")):this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n, vui l\xf2ng t\u1ea1o m\u1edbi v\xe0 thao t\xe1c l\u1ea1i."))}createQrCodeWithUser(){this.initStatusObj(),this.subscriptions.add(this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeGet().subscribe(t=>{var i,r,u,g;1==t.success?(this.successStatusObj(),this.contentCreateQrcode=null!==(r=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.qrCode)&&void 0!==r?r:"",this.durationQrcodeExpire=null!==(g=null===(u=null==t?void 0:t.data)||void 0===u?void 0:u.duration)&&void 0!==g?g:0,this.initPendingLoadingConfirm()):this.errorStatusObj("Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u",!0)}))}outContentScan(t){var i;null!==t?(this.scanQrContent=t,this.sussScanNextConf=!0,this.isLogin||(null===(i=this.elementaztScanQrcode)||void 0===i||i.pauseScanQrcode(),this.isLoadingBtn=!0,this.textResultSuss="",this.qrCodeLoginService.apiQrCodeLoginCreateLoginQrCodeRequestPost({qrCode:this.scanQrContent}).subscribe(u=>{var g,_,v,w;this.isLoadingBtn=!1,console.log(u),1==u.success?(this.isLoadingBtn=!0,this.scanQrContentConfirm=null!==(_=null===(g=null==u?void 0:u.data)||void 0===g?void 0:g.qrCode)&&void 0!==_?_:"",this.nameSessionConfirm=null!==(w=null===(v=null==u?void 0:u.data)||void 0===v?void 0:v.name)&&void 0!==w?w:"",this.textResultSuss="",this.initLoopPendingLogin()):(this.textResultSuss="",this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.")}))):(this.sussScanNextConf=!0,this.textResultErr="M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c m\xe3 Qrcode kh\xf4ng \u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u0103ng nh\u1eadp. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",this.commonService.snackError("M\xe3 Qrcode \u0111\xe3 h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng \u0111\xfang. Vui l\xf2ng t\u1ea1o l\u1ea1i m\xe3 m\u1edbi v\xe0 th\u1eed l\u1ea1i.",""))}initLoopPendingLogin(){this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginCheckLoginQrCodeRequestConfirmedPost({qrCode:this.scanQrContentConfirm}).subscribe(i=>{var r,u;1==i.success&&(1==(null===(r=i.data)||void 0===r?void 0:r.status)?(this.clearLoopPendingLogin(),this.commonService.gaEvent("sign_in_login_in"),this.isLoadingBtn=!1,this.textResultSuss="",this.localStorageObjetct.clearAllCache(),this.successStatusObj("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng.",!0),this.baseApiService.redirectLoginByRole(null!==(u=this.commonService.getMyQueryParam("return_url"))&&void 0!==u?u:"")):i.data&&2===i.data.status&&(this.clearLoopPendingLogin(),this.isLoadingBtn=!1,this.errorStatusObj("X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",!0),this.textResultErr="X\xe1c nh\u1eadn \u0111\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i.<br/> M\xe3 Qr kh\xf4ng c\xf2n ho\u1ea1t \u0111\u1ed9ng.<br/> Vui l\xf2ng t\u1ea1o m\xe3 Qrcode m\u1edbi \u0111\u1ec3 \u0111\u0103ng nh\u1eadp l\u1ea1i.",this.textResultSuss=""))})},3e3)}initPendingLoadingConfirm(){this.isLogin&&(this.loopPendingLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginGetFirstQrCodeLoginRequestGet().subscribe(t=>{var i,r,u,g;1==t.success&&t.data&&""!==t.data.qrCode&&(this.pendingDuration=!0,this.scanQrContentConfirm=null!==(r=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.qrCode)&&void 0!==r?r:"",this.nameSessionConfirm=null!==(g=null===(u=null==t?void 0:t.data)||void 0===u?void 0:u.name)&&void 0!==g?g:"",this.clearLoopPendingLogin())})},3e3))}confContentPendingLogin(t){this.isLogin&&(this.isLoadingBtn=!0,this.qrCodeLoginService.apiQrCodeLoginConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContentConfirm,status:t}).subscribe(r=>{1==r.success?this.textResultSuss=1==t?"X\xe1c nh\u1eadn th\xe0nh c\xf4ng":"T\u1eeb ch\u1ed1i th\xe0nh c\xf4ng":this.textResultErr="H\u1ec7 th\u1ed1ng kh\xf4ng ph\u1ea3n h\u1ed3i. Vui l\xf2ng t\u1ea3i l\u1ea1i trang \u0111\u1ec3 th\u1eed l\u1ea1i.",this.isConfirmBtn=!0,this.isLoadingBtn=!1}))}createRequestLoginHashCodeAction(){this.isLogin||this.qrCodeLoginService.apiQrCodeLoginAnonymousCreateLoginQrCodePost().subscribe(t=>{var i,r,u,g,_,v;1==t.success&&(this.contentCreateQrcode=null!==(r=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.qrCode)&&void 0!==r?r:"",this.nameSessionConfirm=null!==(g=null===(u=null==t?void 0:t.data)||void 0===u?void 0:u.name)&&void 0!==g?g:"",this.durationQrcodeExpire=null!==(v=null===(_=null==t?void 0:t.data)||void 0===_?void 0:_.duration)&&void 0!==v?v:0,this.initLoopRefLogin())})}initLoopRefLogin(){0==this.isLogin&&(this.loopRefCheckQrcodeLogin=window.setInterval(()=>{this.qrCodeLoginService.apiQrCodeLoginAnonymousCheckLoginQrCodeRequestConfimedPost({qrCode:this.contentCreateQrcode,status:0}).subscribe(i=>{var r,u;1===i.success&&404!=(null===(r=null==i?void 0:i.data)||void 0===r?void 0:r.status)&&(this.commonService.gaEvent("sign_in_login_in"),this.commonService.snackSuccess("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng."),this.baseApiService.redirectLoginByRole(null!==(u=this.commonService.getMyQueryParam("return_url"))&&void 0!==u?u:""))})},3e3))}confContentLogin(){this.isLoadingBtn=!0,this.isLogin&&this.qrCodeLoginService.apiQrCodeLoginAnonymousConfirmLoginQrCodeRequestPost({qrCode:this.scanQrContent,status:1}).subscribe(i=>{this.isLoadingBtn=!1,1===i.success?this.textResultSuss="X\xe1c nh\u1eadn th\xe0nh c\xf4ng. Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c ph\xea duy\u1ec7t":this.textResultErr="Thi\u1ebft b\u1ecb \u0111\xe3 \u0111\u0103ng nh\u1eadp ho\u1eb7c m\xe3 \u0111\u0103ng nh\u1eadp kh\xf4ng h\u1ee3p l\u1ec7. Vui l\xf2ng ki\u1ec3m tra v\xe0 thao t\xe1c l\u1ea1i"})}ngOnInit(){var t,i=null!==(t=this.commonService.getMyParam(this.activeRoute,"role"))&&void 0!==t?t:"0";switch(this.role=parseInt(i,10),this.role){case 0:this.backToLink="/admin/dashboard";break;case 1:this.backToLink="/student/dashboard/0";break;case 2:this.backToLink="/auth/login"}this.isLogin=this.baseApiService.isLogin(),this.isLogin&&this.createQrCodeWithUser(),this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.clearLoopRefLogin(),this.clearLoopPendingLogin(),super.ngDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v),e.Y36(U._),e.Y36(Fe.L),e.Y36(P.gz),e.Y36(tn.A),e.Y36(Ke.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],viewQuery:function(t,i){if(1&t&&(e.Gf(zo,5),e.Gf(nn,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.elementCreateQr=r.first),e.iGM(r=e.CRH())&&(i.elementaztScanQrcode=r.first)}},features:[e.qOj],decls:39,vars:37,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6","mb-5"],["class","text-center",4,"ngIf"],[1,"card"],[1,"text-center","loginscan__card-header"],[1,"back-btn",2,"font-size","16px","color","#6d6d6d",3,"routerLink","queryParams"],[2,"font-size","16px","color","#6d6d6d","font-weight","500"],[1,"loginscan__card-body"],[1,"loginscan_createmode",3,"ngClass"],["class","text-center mb-3",4,"ngIf"],["class","text-center mb-3 block-inline-center",4,"ngIf"],["class","loginscan_scanmode_conf",4,"ngIf"],["class","loginscan__card-img",4,"ngIf"],[1,"text-center","mt-3"],["class","link-center",3,"click",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[1,"loginscan_scanmode",3,"ngClass"],[1,"text-center","mb-3"],[3,"routerLink","queryParams"],[1,"loginscan_scanmode_cam",3,"ngClass"],[3,"outContentScan"],["aztScanQrcode",""],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],[1,"text-center","mb-3","block-inline-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"loginscan_scanmode_conf"],[1,"loginscan_scanmode_conf--box"],[1,"boxtext"],[4,"ngIf"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336",4,"ngIf"],["class","boxtext-suss","style","font-size: 20px; margin-bottom: 20px; color: #009688",4,"ngIf"],["class","mt-3",4,"ngIf"],[2,"font-size","18px"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336"],[1,"boxtext-suss",2,"font-size","20px","margin-bottom","20px","color","#009688"],[1,"mt-3"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled","click"],["type","button",1,"btn","btn-warning",3,"disabled","click"],["type","button",1,"btn","btn-primary","mr-3",3,"click"],[1,"loginscan__card-img"],["class","box-create-login-img",3,"click",4,"ngIf"],[3,"content","width","height","expired","expiredAction",4,"ngIf"],[1,"box-create-login-img",3,"click"],[1,"box-create-login-content"],[3,"content","width","height","expired","expiredAction"],["elementCreateQr",""],[1,"link-center",3,"click"],[1,"btn","btn-outline-primary","mt-2",3,"click"],[1,"link-center"],[1,"mr-1"],["class","boxtext-err","style","font-size: 20px; margin-bottom: 20px; color: #f44336; line-height: 30px",3,"innerHTML",4,"ngIf"],["type","button","class","btn btn-primary mr-3",3,"disabled",4,"ngIf"],[1,"boxtext-err",2,"font-size","20px","margin-bottom","20px","color","#f44336","line-height","30px",3,"innerHTML"],["type","button",1,"btn","btn-primary","mr-3",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4),e.YNc(5,Yo,3,3,"h2",5),e.TgZ(6,"div",6)(7,"div",7)(8,"a",8),e.ALo(9,"localize"),e.TgZ(10,"mat-icon"),e._uU(11,"arrow_back"),e.qZA()(),e.TgZ(12,"span",9),e._uU(13,"\u0110\u0103ng nh\u1eadp v\u1edbi m\xe3 qr code"),e.qZA()(),e.TgZ(14,"div",10)(15,"div",11),e.YNc(16,Ho,2,0,"div",12),e.YNc(17,pi,2,0,"div",12),e.YNc(18,Vo,3,1,"div",13),e.YNc(19,hi,3,0,"div",13),e.YNc(20,Xo,9,6,"div",14),e.YNc(21,rn,3,2,"div",15),e.TgZ(22,"div",16),e.YNc(23,tr,4,0,"a",17),e.qZA(),e.YNc(24,nr,3,0,"div",18),e.YNc(25,ir,6,0,"div",18),e.qZA(),e.TgZ(26,"div",19)(27,"div",20),e._uU(28,"Di chuy\u1ec3n camera t\u1edbi m\xe3 qrcode \u0111\u0103ng nh\u1eadp ( "),e.TgZ(29,"a",21),e.ALo(30,"localize"),e._uU(31,"H\u01b0\u1edbng d\u1eabn"),e.qZA(),e._uU(32," )"),e.qZA(),e.TgZ(33,"div",22)(34,"azt-scan-qrcode",23,24),e.NdJ("outContentScan",function(u){return i.outContentScan(u)}),e.qZA()(),e.YNc(36,cn,9,3,"div",14),e.YNc(37,gn,13,5,"div",14),e.qZA()()()(),e._UZ(38,"div",3),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",!i.isLogin),e.xp6(3),e.Q6J("routerLink",e.VKq(23,_i,e.lcZ(9,19,i.backToLink)))("queryParams",e.VKq(25,X,i.returnUrl)),e.xp6(7),e.Q6J("ngClass",e.VKq(27,pn,"create"!==i.modeShowInit)),e.xp6(1),e.Q6J("ngIf",!i.isLogin),e.xp6(1),e.Q6J("ngIf",i.isLogin),e.xp6(1),e.Q6J("ngIf",!i.isLogin&&i.contentCreateQrcode),e.xp6(1),e.Q6J("ngIf",i.isLogin&&i.contentCreateQrcode&&!i.scanQrContentConfirm),e.xp6(1),e.Q6J("ngIf",i.scanQrContentConfirm&&i.isLogin),e.xp6(1),e.Q6J("ngIf",!i.scanQrContentConfirm),e.xp6(2),e.Q6J("ngIf",i.contentCreateQrcode&&!i.scanQrContentConfirm),e.xp6(1),e.Q6J("ngIf",!i.scanQrContentConfirm),e.xp6(1),e.Q6J("ngIf",!i.scanQrContentConfirm),e.xp6(1),e.Q6J("ngClass",e.VKq(29,pn,"scan"!==i.modeShowInit)),e.xp6(3),e.Q6J("routerLink",e.VKq(31,_i,e.lcZ(30,21,"/auth/register")))("queryParams",e.VKq(33,hn,i.returnUrl)),e.xp6(4),e.Q6J("ngClass",e.VKq(35,pn,!1!==i.sussScanNextConf)),e.xp6(3),e.Q6J("ngIf",!0===i.sussScanNextConf&&i.isLogin),e.xp6(1),e.Q6J("ngIf",!0===i.sussScanNextConf&&!i.isLogin))},dependencies:[P.yS,E.mk,E.O5,b.Hw,gi,di,Q.lO,x.BI],styles:[".loginscan__card-header[_ngcontent-%COMP%]{padding:15px;text-transform:uppercase;display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-body[_ngcontent-%COMP%]{padding:15px}.loginscan__card-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.loginscan__card-video[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}.loginscan__card-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}.loginscan__card-control--switch[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:rgba(36,98,174,.431372549);color:#fff;padding:5px;border-right:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0;cursor:pointer}.link-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.box-create-login-img[_ngcontent-%COMP%]{display:flex;height:100px;background:#f5f5f5;justify-content:center;align-items:center;border:1px solid #e0e0e0;padding:10px;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.box-create-login-img[_ngcontent-%COMP%]:hover{background:#eceff1}.box-create-login-content[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf[_ngcontent-%COMP%]{width:100%;background:#e0f2f1;padding:10px;display:flex;align-items:center;justify-content:center;height:300px}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]{text-align:center}.loginscan_scanmode_conf--box[_ngcontent-%COMP%]   .boxtext[_ngcontent-%COMP%]{font-size:20px;line-height:30px;margin-bottom:20px}.block-inline-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.back-btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:14px}.back-btn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})();var mn=m(8929),Xe=m(21086),_t=m(34202),vt=m(63527),fn=m(36787),Ne=m(57770),Ze=m(87545),_n=m(24850),vi=m(5154),vn=m(87224),An=m(2313),et=m(13334),sr=m(92198),qe=m(26351),nt=m(49681),Ci=m(34859),Oe=m(42090),bi=m(41877);const At=new Map,gr={activated:!1,tokenObservers:[]},En={initialized:!1,enabled:!1};function K(n){return At.get(n)||gr}function he(n,a){At.set(n,a)}function Be(){return En}class xn{constructor(a,t,i,r,u){if(this.operation=a,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=r,r>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(a){var t=this;return(0,q.Z)(function*(){t.stop();try{t.pending=new Oe.BH,yield function mr(n){return new Promise(a=>{setTimeout(a,n)})}(t.getNextRun(a)),t.pending.resolve(),yield t.pending.promise,t.pending=new Oe.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(a){if(a)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const re=new Oe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fr(n){if(!K(n).activated)throw re.create("use-before-activation",{appName:n.name})}function Ti(n,a){return je.apply(this,arguments)}function je(){return(je=(0,q.Z)(function*({url:n,body:a},t){var i,r;const u={"Content-Type":"application/json"},g=t.getImmediate({optional:!0});if(g){const D=yield g.getHeartbeatsHeader();D&&(u["X-Firebase-Client"]=D)}const _={method:"POST",body:JSON.stringify(a),headers:u};let v,w;try{v=yield fetch(n,_)}catch(D){throw re.create("fetch-network-error",{originalErrorMessage:null===(i=D)||void 0===i?void 0:i.message})}if(200!==v.status)throw re.create("fetch-status-error",{httpStatus:v.status});try{w=yield v.json()}catch(D){throw re.create("fetch-parse-error",{originalErrorMessage:null===(r=D)||void 0===r?void 0:r.message})}const B=w.ttl.match(/^([\d.]+)(s)$/);if(!B||!B[2]||isNaN(Number(B[1])))throw re.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const J=1e3*Number(B[1]),V=Date.now();return{token:w.token,expireTimeMillis:V+J,issuedAtTimeMillis:V}})).apply(this,arguments)}function Ar(n,a){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:a}}}const H="firebase-app-check-store";let Ct=null;function ki(){return Ct||(Ct=new Promise((n,a)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var u;a(re.create("storage-open",{originalErrorMessage:null===(u=r.target.error)||void 0===u?void 0:u.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(H,{keyPath:"compositeKey"})}}catch(i){a(re.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),Ct)}function In(){return(In=(0,q.Z)(function*(n,a){const i=(yield ki()).transaction(H,"readwrite"),u=i.objectStore(H).put({compositeKey:n,value:a});return new Promise((g,_)=>{u.onsuccess=v=>{g()},i.onerror=v=>{var w;_(re.create("storage-set",{originalErrorMessage:null===(w=v.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const ot=new bi.Yd("@firebase/app-check");function Dn(n,a){return(0,Oe.hl)()?function Zn(n,a){return function Zi(n,a){return In.apply(this,arguments)}(function le(n){return`${n.options.appId}-${n.name}`}(n),a)}(n,a).catch(t=>{ot.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bt(){return Be().enabled}function Ii(){return rt.apply(this,arguments)}function rt(){return(rt=(0,q.Z)(function*(){const n=Be();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Fn={error:"UNKNOWN_ERROR"};function wr(n){return Oe.US.encodeString(JSON.stringify(n),!1)}function Et(n){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,q.Z)(function*(n,a=!1){const t=n.app;fr(t);const i=K(t);let u,r=i.token;if(!r){const v=yield i.cachedTokenPromise;v&&ge(v)&&(r=v)}if(!a&&r&&ge(r))return{token:r.token};let _,g=!1;if(bt()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Ti(Ar(t,yield Ii()),n.heartbeatServiceProvider).then(w=>(i.exchangeTokenPromise=void 0,w)),g=!0);const v=yield i.exchangeTokenPromise;return yield Dn(t,v),he(t,Object.assign(Object.assign({},i),{token:v})),{token:v.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(v=>(i.exchangeTokenPromise=void 0,v)),g=!0),r=yield i.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?ot.warn(v.message):ot.error(v),u=v}return r?(_={token:r.token},he(t,Object.assign(Object.assign({},i),{token:r})),yield Dn(t,r)):_=Li(u),g&&Di(t,_),_})).apply(this,arguments)}function st(n,a){const t=K(n),i=t.tokenObservers.filter(r=>r.next!==a);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),he(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function Mi(n){const{app:a}=n,t=K(a);let i=t.tokenRefresher;i||(i=function Qn(n){const{app:a}=n;return new xn((0,q.Z)(function*(){let i;if(i=K(a).token?yield Et(n,!0):yield Et(n),i.error)throw i.error}),()=>!0,()=>{const t=K(a);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),he(a,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Di(n,a){const t=K(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=a.error?i.error(a.error):i.next(a)}catch(r){}}function ge(n){return n.expireTimeMillis-Date.now()>0}function Li(n){return{token:wr(Fn),error:n}}class Fi{constructor(a,t){this.app=a,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:a}=K(this.app);for(const t of a)st(this.app,t.next);return Promise.resolve()}}const jn="app-check-internal";!function ji(){(0,nt._registerComponent)(new Ci.wA("app-check",n=>function xt(n,a){return new Fi(n,a)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,a,t)=>{n.getProvider(jn).initialize()})),(0,nt._registerComponent)(new Ci.wA(jn,n=>function Ri(n){return{getToken:a=>Et(n,a),addTokenListener:a=>function Un(n,a,t,i){const{app:r}=n,u=K(r),g={next:t,error:i,type:a};if(he(r,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,g]})),u.token&&ge(u.token)){const _=u.token;Promise.resolve().then(()=>{t({token:_.token}),Mi(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Mi(n))}(n,"INTERNAL",a),removeTokenListener:a=>st(n.app,a)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,nt.registerVersion)("@firebase/app-check","0.5.10")}();class zi{constructor(){return(0,qe.vb)("app-check")}}"undefined"!=typeof window&&window,m(70127);const Gi=new e.OlP("angularfire2.auth.use-emulator"),Mr=new e.OlP("angularfire2.auth.settings"),Dr=new e.OlP("angularfire2.auth.tenant-id"),Ie=new e.OlP("angularfire2.auth.langugage-code"),Lr=new e.OlP("angularfire2.auth.use-device-language"),Pe=new e.OlP("angularfire.auth.persistence");let Kn=(()=>{class n{constructor(t,i,r,u,g,_,v,w,B,J,V,D){const ee=new mn.xQ,Ae=(0,Xe.of)(void 0).pipe((0,Ne.QV)(g.outsideAngular),(0,Ze.w)(()=>u.runOutsideAngular(()=>m.e(881).then(m.bind(m,65881)))),(0,_n.U)(()=>(0,Y.on)(t,u,i)),(0,_n.U)(ye=>((n,a,t,i,r,u,g,_)=>(0,Y.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=a.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),i&&(v.tenantId=i),v.languageCode=r,u&&v.useDeviceLanguage(),g)for(const[w,B]of Object.entries(g))v.settings[w]=B;return _&&v.setPersistence(_),v},[t,i,r,u,g,_]))(ye,u,_,w,B,J,v,V)),(0,vi.d)({bufferSize:1,refCount:!1}));if((0,E.PM)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Xe.of)(null);else{Ae.pipe((0,vn.P)()).subscribe();const Ce=Ae.pipe((0,Ze.w)(z=>z.getRedirectResult().then(ie=>ie,()=>null)),qe.iC,(0,vi.d)({bufferSize:1,refCount:!1})),fe=Ae.pipe((0,Ze.w)(z=>new _t.y(ie=>({unsubscribe:u.runOutsideAngular(()=>z.onAuthStateChanged(dt=>ie.next(dt),dt=>ie.error(dt),()=>ie.complete()))})))),He=Ae.pipe((0,Ze.w)(z=>new _t.y(ie=>({unsubscribe:u.runOutsideAngular(()=>z.onIdTokenChanged(dt=>ie.next(dt),dt=>ie.error(dt),()=>ie.complete()))}))));this.authState=Ce.pipe((0,An.c)(fe),(0,et.R)(g.outsideAngular),(0,Ne.QV)(g.insideAngular)),this.user=Ce.pipe((0,An.c)(He),(0,et.R)(g.outsideAngular),(0,Ne.QV)(g.insideAngular)),this.idToken=this.user.pipe((0,Ze.w)(z=>z?(0,vt.D)(z.getIdToken()):(0,Xe.of)(null))),this.idTokenResult=this.user.pipe((0,Ze.w)(z=>z?(0,vt.D)(z.getIdTokenResult()):(0,Xe.of)(null))),this.credential=(0,fn.T)(Ce,ee,this.authState.pipe((0,sr.h)(z=>!z))).pipe((0,_n.U)(z=>null!=z&&z.user?z:null),(0,et.R)(g.outsideAngular),(0,Ne.QV)(g.insideAngular))}return(0,Y.pX)(this,Ae,u,{spy:{apply:(ye,Ce,fe)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&fe.then(He=>ee.next(He))}}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Y.Dh),e.LFG(Y.xv,8),e.LFG(e.Lbi),e.LFG(e.R0b),e.LFG(qe.HU),e.LFG(Gi,8),e.LFG(Mr,8),e.LFG(Dr,8),e.LFG(Ie,8),e.LFG(Lr,8),e.LFG(Pe,8),e.LFG(zi,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Wi=m(73396);function Rr(n,a){1&n&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function ls(n,a){1&n&&(e.TgZ(0,"div",42)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp \u0111\xfang S\u0110T ho\u1eb7c email."),e.qZA()())}function o(n,a){if(1&n&&(e.TgZ(0,"div",42),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.msgError," ")}}function s(n,a){1&n&&(e.TgZ(0,"div",42)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u."),e.qZA()())}function c(n,a){if(1&n&&(e.TgZ(0,"div",16)(1,"label",43),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function l(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",44),e._uU(2,"\xa0"),e.qZA())}const p=function(n){return[n]},h=function(n){return{return_url:n,user_click:"true"}};function f(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",16)(2,"div",3)(3,"div",17)(4,"div",18)(5,"div",19)(6,"span",20)(7,"mat-icon",21),e._uU(8,"mail_outlined"),e.qZA(),e._uU(9,"/"),e.TgZ(10,"mat-icon",21),e._uU(11,"phone_outlined"),e.qZA()()(),e.TgZ(12,"input",22),e.NdJ("keydown.enter",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.login())})("input",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkValidateUser(r.form.controls.phone.value))}),e.qZA()(),e.YNc(13,ls,3,0,"div",23),e.YNc(14,o,2,1,"div",23),e.qZA()()(),e.TgZ(15,"div",16)(16,"div",3)(17,"div",17)(18,"div",18)(19,"div",19)(20,"span",24)(21,"mat-icon"),e._uU(22,"lock_outlined"),e.qZA()()(),e.TgZ(23,"input",25),e.NdJ("keydown.enter",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.login())}),e.qZA(),e.TgZ(24,"button",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.togglePassword())}),e.TgZ(25,"mat-icon"),e._uU(26),e.qZA()()(),e.YNc(27,s,3,0,"div",23),e.qZA()()(),e.YNc(28,c,4,3,"div",27),e.TgZ(29,"div",16)(30,"div",3)(31,"div",28)(32,"button",29),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.login())}),e.YNc(33,l,3,0,"span",12),e._uU(34,"\u0110\u0103ng nh\u1eadp "),e.qZA()()()(),e.TgZ(35,"div",30)(36,"span",31),e._uU(37,"- HO\u1eb6C -"),e.qZA()(),e.TgZ(38,"div",3)(39,"div",32)(40,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.loginZalo())})("keydown.enter",function(r){return r.preventDefault()}),e._UZ(41,"img",34),e.ALo(42,"convertCdn"),e.TgZ(43,"span",35),e._uU(44,"Zalo"),e.qZA()()(),e.TgZ(45,"div",32)(46,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.googleSignIn())})("keydown.enter",function(r){return r.preventDefault()}),e._UZ(47,"img",36),e.ALo(48,"convertCdn"),e.TgZ(49,"span",35),e._uU(50,"Google"),e.qZA()()(),e.TgZ(51,"div",32)(52,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.loginByQrCode())})("keydown.enter",function(r){return r.preventDefault()}),e.TgZ(53,"mat-icon",37),e._uU(54,"center_focus_strong"),e.qZA(),e.TgZ(55,"span",35),e._uU(56,"Qrcode"),e.qZA()()()(),e.TgZ(57,"div",38)(58,"a",39),e.ALo(59,"localize"),e._uU(60,"\u0110\u0103ng k\xfd th\xe0nh vi\xean m\u1edbi"),e.qZA()(),e.TgZ(61,"div",40)(62,"a",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.forgotPassword())}),e._uU(63,"Qu\xean m\u1eadt kh\u1ea9u?"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(13),e.Q6J("ngIf",t.form.controls.phone.invalid&&(t.form.controls.phone.dirty||t.form.controls.phone.touched)&&!t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.checkValidateUsername),e.xp6(9),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(3),e.Oqu(t.showPassword?"visibility_outlined":"visibility_off_outlined"),e.xp6(1),e.Q6J("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading||t.checkLoadingLogin),e.xp6(8),e.Q6J("src",e.lcZ(42,12,"azota_assets/images/zalo-icon.svg"),e.LSH),e.xp6(6),e.Q6J("src",e.lcZ(48,14,"azota_assets/images/google-icon.svg"),e.LSH),e.xp6(11),e.Q6J("routerLink",e.VKq(18,p,e.lcZ(59,16,"/auth/register")))("queryParams",e.VKq(20,h,t.returnUrl))}}function y(n,a){if(1&n&&(e.TgZ(0,"div",1)(1,"form",2)(2,"div",3),e._UZ(3,"div",4),e.TgZ(4,"div",5)(5,"div",6)(6,"div",7)(7,"h2",8),e._UZ(8,"img",9),e.ALo(9,"convertCdn"),e.qZA(),e.TgZ(10,"h3",10),e._uU(11,"\u0110\u0103ng nh\u1eadp"),e.qZA()(),e.TgZ(12,"div",11),e.YNc(13,Rr,6,3,"div",12),e.YNc(14,f,64,22,"div",12),e.qZA()()(),e._UZ(15,"div",4),e.qZA()()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("src",e.lcZ(9,4,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!t.statusObj.loading)}}let S=(()=>{class n extends C.Q{constructor(t,i,r,u,g,_,v,w){super(i),this.formBuilder=t,this.commonService=i,this.baseApiService=r,this.localStorageObject=u,this.authService=g,this.fireAuth=_,this.userService=v,this.recaptchaV3Service=w,this.form=new d.nJ({}),this.zaloAccessTkn="",this.mAccessTkn="",this.returnUrl="",this.zaloLoginUrl="",this.loginByToken=!0,this.msgError="",this.checkValidateUsername=!1,this.checkLoadingLogin=!0,this.showPassword=!1,this.initStatusObj(),_.authState.subscribe(B=>{B?this.signInWithTokenGoogle(B):this.checkLoadingLogin=!1})}executeImportantAction(){return new Promise(t=>{this.recaptchaV3Service.execute("importantAction").subscribe(i=>{t(i)})})}getError(t){return!(!this.form.controls[t]||!this.form.controls[t].errors)&&this.form.controls[t].errors}loginZalo(){this.commonService.gaEvent("sign_in_click_sign_in_by_zalo"),window.location.href=this.zaloLoginUrl}forgotPassword(){this.commonService.gaEvent("sign_in_forgot_password"),this.commonService.myNavigation("/auth/confirm_forgot_password")}login(){this.form.valid?(this.initStatusObj(),this.commonService.gaEvent("sign_in_login_in"),this.executeImportantAction().then(t=>{var i=this.commonService.getFormObj(this.form);this.subscriptions.add(this.authService.apiAuthLoginWebPost({phone:i.phone,password:i.password,tokenCaptcha:t}).subscribe(u=>{var g,_;1==u.success?(this.localStorageObject.clearAllCache(),this.baseApiService.redirectLoginByRole(null!==(g=this.commonService.getMyQueryParam("return_url"))&&void 0!==g?g:""),this.successStatusObj()):this.errorStatusObj(null!==(_=u.message)&&void 0!==_?_:"")}))})):this.showErrorSnack("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin")}loginAnonymous(){this.initStatusObj(),this.commonService.gaEvent("sign_in_login_anonymous"),this.executeImportantAction().then(t=>{this.subscriptions.add(this.authService.apiAuthLoginAnonymousFromWebV2Post({tokenCaptcha:t}).subscribe(r=>{var u,g;1==r.success?(this.baseApiService.redirectLoginByRole(null!==(u=this.commonService.getMyQueryParam("return_url"))&&void 0!==u?u:""),this.successStatusObj()):this.errorStatusObj(null!==(g=r.message)&&void 0!==g?g:"")}))})}loginWithZaloAccessToken(t){var i,r=this.userService.getUserObjFromJwtToken(t);null!=r?(this.baseApiService.saveUserObj(r),this.baseApiService.redirectLoginByRole(null!==(i=this.commonService.getMyQueryParam("return_url"))&&void 0!==i?i:"")):(this.errorStatusObj("lang_core_invalid_login_token"),this.loginByToken=!1)}parseJwt(t){var r=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),u=decodeURIComponent(atob(r).split("").map(g=>"%"+("00"+g.charCodeAt(0).toString(16)).slice(-2)).join(""));return this.commonService.parseJson(u)}googleSignIn(){this.fireAuth.signInWithRedirect(new We.hJ).then(()=>this.fireAuth.getRedirectResult().then(t=>{})).catch(t=>{console.log(t)})}validateEmail(t){return t.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}checkValidateUser(t){this.msgError="",isNaN(Number(t))?this.validateEmail(t)?(this.checkValidateUsername=!1,this.msgError=""):(this.msgError="Vui l\xf2ng nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng email.",this.checkValidateUsername=!0):10==t.length?(this.msgError="",this.checkValidateUsername=!1):(this.msgError="S\xf4\u0301 \u0111i\xea\u0323n thoa\u0323i pha\u0309i la\u0300 s\xf4\u0301 va\u0300 10 ky\u0301 t\u01b0\u0323.",this.checkValidateUsername=!0)}signInWithTokenGoogle(t){this.checkLoadingLogin=!0,this.subscriptions.add(this.authService.apiAuthAuthByFirebasePost({isRegisterForTeacher:0,firebaseToken:t._delegate.accessToken}).subscribe(u=>{var g,_,v;1==u.success?(1==(null===(g=u.data)||void 0===g?void 0:g.isNewRegister)?this.myNavigation("/auth/choose-role"):this.baseApiService.redirectLoginByRole(null!==(_=this.commonService.getMyQueryParam("return_url"))&&void 0!==_?_:""),this.checkLoadingLogin=!1):(this.checkLoadingLogin=!1,this.errorStatusObj(null!==(v=u.message)&&void 0!==v?v:"",!0))}))}togglePassword(){this.showPassword=!this.showPassword}loginByQrCode(){this.myNavigation("/auth/login-scan/2")}ngOnInit(){var t,i,r,u;if(this.zaloAccessTkn=null!==(t=this.commonService.getMyQueryParam("zaccess_token"))&&void 0!==t?t:"",this.mAccessTkn=null!==(i=this.commonService.getMyQueryParam("access_token"))&&void 0!==i?i:"",!this.commonService.getMyQueryParam("not_register")&&this.zaloAccessTkn)this.loginByToken=!0,this.loginWithZaloAccessToken(this.zaloAccessTkn);else if(!this.commonService.getMyQueryParam("not_register")&&this.mAccessTkn)this.loginByToken=!0,this.loginWithZaloAccessToken(this.mAccessTkn);else{this.loginByToken=!1,this.initStatusObj();var g=!1;this.form=this.formBuilder.group({phone:["",[d.kI.required,Ee._.noWhiteSpace]],password:["",d.kI.required]}),this.commonService.getMyQueryParam("not_register")?this.commonService.myNavigation("/auth/register"):this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole()?this.baseApiService.redirectLoginByRole(null!==(r=this.commonService.getMyQueryParam("return_url"))&&void 0!==r?r:""):(this.returnUrl=this.commonService.getMyQueryParam("return_url")||"",-1===this.returnUrl.indexOf("/test/")&&-1===this.returnUrl.indexOf("/de-thi/")&&-1===this.returnUrl.indexOf("/bai-tap/")||"register"==this.commonService.getMyQueryParam("from")?(this.zaloLoginUrl=oe.N.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_login=1"),g=!0):this.baseApiService.isLogin()?this.baseApiService.redirectLoginByRole(null!==(u=this.commonService.getMyQueryParam("return_url"))&&void 0!==u?u:""):this.loginAnonymous()),g&&(!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()?this.myNavigation("/student/dashboard/0"):(this.commonService.translateMetaData({title:"lang_cms_auth_login_title",description:"lang_cms_auth_login_description",image:"lang_cms_test_image"}),this.stopStatusObj(),super.ngOnInit()))}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.QS),e.Y36(R.v),e.Y36(U._),e.Y36(Fe.L),e.Y36(L.e8),e.Y36(Kn),e.Y36(Wn.K),e.Y36(Wi.YC))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],features:[e.qOj],decls:1,vars:1,consts:[["class","container-fluid component-wrap centerBoth hasBg",4,"ngIf"],[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","6vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text",2,"padding-left","0.35rem","padding-right","0.35rem"],[2,"width","15px","height","15px","font-size","15px"],["type","tel","placeholder","Nh\u1eadp S\u0110T ho\u1eb7c email","formControlName","phone",1,"form-control",3,"keydown.enter","input"],["class","alert alert-danger",4,"ngIf"],["id","basic-addon2",1,"input-group-text"],["placeholder","M\u1eadt kh\u1ea9u","formControlName","password",1,"form-control","pr-40",3,"type","keydown.enter"],[1,"btn-toggle-password",3,"click"],["class","form-group",4,"ngIf"],[1,"col-md-12"],["mat-raised-button","",1,"btn-azt-primary",2,"width","100%",3,"disabled","click"],[1,"text-center","my-3"],[1,"h6","mute-text"],[1,"col-4"],["mat-stroked-button","",2,"width","100%","padding","3px",3,"click","keydown.enter"],["alt","Zalo icon",1,"img-responsive","zalo-icon",3,"src"],[1,"d-none","d-lg-inline-block"],["alt","Google icon",1,"img-responsive","zalo-icon",3,"src"],[1,"zalo-icon","icon-v2"],[1,"text-center","mt-3"],[3,"routerLink","queryParams"],[1,"text-center","mt-1"],[2,"color","rgb(216, 2, 2)",3,"click"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,i){1&t&&e.YNc(0,y,16,6,"div",0),2&t&&e.Q6J("ngIf",!i.loginByToken)},dependencies:[P.yS,E.O5,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,d.sg,d.u,Q.lO,x.bT,x.BI],styles:[".checkboxInput[_ngcontent-%COMP%]{padding:5px 15px;font-size:1rem;font-weight:400;line-height:2}.zalo-icon[_ngcontent-%COMP%]{height:30px;margin-right:10px}.btn-icon[_ngcontent-%COMP%]{transition:all .5s;margin:0 10px}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}.input-group[_ngcontent-%COMP%]{position:relative}.btn-toggle-password[_ngcontent-%COMP%]{position:absolute;top:6px;right:0;border:none;background:transparent;z-index:99}.btn-toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#757575;transition:all .5s}.btn-toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#434242}.pr-40[_ngcontent-%COMP%]{padding-right:40px}.icon-v2[_ngcontent-%COMP%]{height:auto}@media (max-width: 992px){.zalo-icon[_ngcontent-%COMP%]{margin-right:0}}"]}),n})(),Z=(()=>{class n extends C.Q{constructor(t,i,r,u){super(t),this.commonService=t,this.baseApiService=i,this.fireAuth=r,this.redirectService=u,this.fireAuth.signOut()}ngOnInit(){this.baseApiService.logout(),this.fireAuth.signOut();var t=this.commonService.getMyQueryParam("return_url")||null;t?this.redirectService.redirectSimpleLoginWithReturnUrl(t):this.redirectService.redirectSimpleLogin(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v),e.Y36(U._),e.Y36(Kn),e.Y36(Ke.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],features:[e.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),I=(()=>{class n extends C.Q{constructor(t){super(t),this.commonService=t}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["auth-master-page"]],features:[e.qOj],decls:2,vars:0,consts:[["id","homework-layout"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[P.lC],encapsulation:2}),n})();function T(n,a){1&n&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeRegisterType(0))}),e.TgZ(2,"div",18),e._UZ(3,"i",19),e.TgZ(4,"p"),e._uU(5,"T\xf4i l\xe0 h\u1ecdc sinh"),e.qZA()()(),e.TgZ(6,"div",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeRegisterType(1))}),e.TgZ(7,"div",18),e._UZ(8,"img",20),e.ALo(9,"convertCdn"),e.TgZ(10,"p"),e._uU(11,"T\xf4i l\xe0 gi\xe1o vi\xean"),e.qZA()()()()}2&n&&(e.xp6(8),e.Q6J("src",e.lcZ(9,1,"azota_assets/images/teacher.png"),e.LSH))}function de(n,a){1&n&&(e.TgZ(0,"div",58)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean."),e.qZA()())}function Zt(n,a){1&n&&(e.TgZ(0,"div",58)(1,"div"),e._uU(2,"Vui lo\u0300ng nh\xe2\u0323p s\xf4\u0301 \u0111i\xea\u0323n thoa\u0323i ho\u0103\u0323c email."),e.qZA()())}function ut(n,a){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.msgError," ")}}function ze(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"M\xe2\u0323t kh\xe2\u0309u da\u0300i t\xf4\u0301i thi\xea\u0309u 6 ky\u0301 t\u01b0\u0323."),e.qZA())}function Ur(n,a){if(1&n&&(e.TgZ(0,"div",58),e.YNc(1,ze,2,0,"div",10),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Gn(n,a){if(1&n&&(e.TgZ(0,"div",39)(1,"label",59),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function lt(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",60),e._uU(2,"\xa0"),e.qZA())}function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",36)(1,"form",37)(2,"div",27)(3,"div",38)(4,"div",39)(5,"div",40)(6,"div",41)(7,"div",42)(8,"span",43)(9,"mat-icon"),e._uU(10,"person_outline"),e.qZA()()(),e._UZ(11,"input",44),e.qZA(),e.YNc(12,de,3,0,"div",45),e.qZA()()()(),e.TgZ(13,"div",27)(14,"div",38)(15,"div",39)(16,"div",40)(17,"div",41)(18,"div",42)(19,"span",46)(20,"mat-icon",47),e._uU(21,"mail_outlined"),e.qZA(),e._uU(22,"/"),e.TgZ(23,"mat-icon",47),e._uU(24,"phone_outlined"),e.qZA()()(),e.TgZ(25,"input",48),e.NdJ("input",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkValidateUser(r.form.controls.username.value))}),e.qZA()(),e.YNc(26,Zt,3,0,"div",45),e.YNc(27,ut,2,1,"div",45),e.qZA()()()(),e.TgZ(28,"div",27)(29,"div",38)(30,"div",39)(31,"div",40)(32,"div",41)(33,"div",42)(34,"span",49)(35,"mat-icon"),e._uU(36,"lock_outlined"),e.qZA()()(),e._UZ(37,"input",50),e.TgZ(38,"button",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.togglePassword())}),e.TgZ(39,"mat-icon"),e._uU(40),e.qZA()()(),e.YNc(41,Ur,2,1,"div",45),e.qZA()()()(),e.YNc(42,Gn,4,3,"div",52),e.TgZ(43,"div",39)(44,"div",27)(45,"div",38)(46,"button",53),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.registerForTeacher())}),e.YNc(47,lt,3,0,"span",10),e._uU(48,"\u0110\u0103ng k\xfd "),e.qZA()()()()(),e.TgZ(49,"div",54)(50,"span",55),e._uU(51,"- HO\u1eb6C -"),e.qZA()(),e.TgZ(52,"div",27)(53,"div",28)(54,"button",56),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.googleSignIn())}),e._UZ(55,"img",57),e.ALo(56,"convertCdn"),e.TgZ(57,"span"),e._uU(58,"Google"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("ngIf",t.form.controls.fullName.invalid&&(t.form.controls.fullName.dirty||t.form.controls.fullName.touched)),e.xp6(14),e.Q6J("ngIf",t.form.controls.username.invalid&&(t.form.controls.username.dirty||t.form.controls.username.touched)&&!t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.checkValidateUsername),e.xp6(10),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(3),e.Oqu(t.showPassword?"visibility_outlined":"visibility_off_outlined"),e.xp6(1),e.Q6J("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.form.invalid||t.statusObj.loading||t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading||t.checkLoadingLogin),e.xp6(8),e.Q6J("src",e.lcZ(56,11,"azota_assets/images/google-icon.svg"),e.LSH)}}function Ye(n,a){1&n&&(e.TgZ(0,"div",58)(1,"div"),e._uU(2,"Vui l\xf2ng nh\u1eadp h\u1ecd v\xe0 t\xean."),e.qZA()())}function $i(n,a){1&n&&(e.TgZ(0,"div",58)(1,"div"),e._uU(2,"Vui lo\u0300ng nh\xe2\u0323p s\xf4\u0301 \u0111i\xea\u0323n thoa\u0323i ho\u0103\u0323c email."),e.qZA()())}function vs(n,a){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.msgError," ")}}function As(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"M\xe2\u0323t kh\xe2\u0309u da\u0300i t\xf4\u0301i thi\xea\u0309u 6 ky\u0301 t\u01b0\u0323."),e.qZA())}function ys(n,a){if(1&n&&(e.TgZ(0,"div",58),e.YNc(1,As,2,0,"div",10),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.getErrorForm("studentPassword","required")||t.getErrorForm("studentPassword","minlength"))}}function Cs(n,a){if(1&n&&(e.TgZ(0,"div",39)(1,"label",59),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function bs(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",60),e._uU(2,"\xa0"),e.qZA())}function Es(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",61)(1,"form",62)(2,"div",27)(3,"div",38)(4,"div",39)(5,"div",40)(6,"div",41)(7,"div",42)(8,"span",43)(9,"mat-icon"),e._uU(10,"person_outline"),e.qZA()()(),e._UZ(11,"input",63),e.qZA(),e.YNc(12,Ye,3,0,"div",45),e.qZA()()()(),e.TgZ(13,"div",27)(14,"div",38)(15,"div",39)(16,"div",40)(17,"div",41)(18,"div",42)(19,"span",46)(20,"mat-icon",47),e._uU(21,"mail_outlined"),e.qZA(),e._uU(22,"/"),e.TgZ(23,"mat-icon",47),e._uU(24,"phone_outlined"),e.qZA()()(),e.TgZ(25,"input",64),e.NdJ("input",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkValidateUser(r.formRegister.controls.studentUsername.value))}),e.qZA()(),e.YNc(26,$i,3,0,"div",45),e.YNc(27,vs,2,1,"div",45),e.qZA()()()(),e.TgZ(28,"div",27)(29,"div",38)(30,"div",39)(31,"div",40)(32,"div",41)(33,"div",42)(34,"span",49)(35,"mat-icon"),e._uU(36,"lock_outlined"),e.qZA()()(),e._UZ(37,"input",65),e.TgZ(38,"button",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.togglePassword())}),e.TgZ(39,"mat-icon"),e._uU(40),e.qZA()()(),e.YNc(41,ys,2,1,"div",45),e.qZA()()()()(),e.YNc(42,Cs,4,3,"div",52),e.TgZ(43,"button",53),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.registerForStudent())}),e.YNc(44,bs,3,0,"span",10),e._uU(45," \u0110\u0103ng K\xfd "),e.qZA(),e.TgZ(46,"div",54)(47,"span",55),e._uU(48,"- HO\u1eb6C -"),e.qZA()(),e.TgZ(49,"div",27)(50,"div",28)(51,"button",56),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.googleSignIn())}),e._UZ(52,"img",57),e.ALo(53,"convertCdn"),e.TgZ(54,"span"),e._uU(55,"Google"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.formRegister),e.xp6(11),e.Q6J("ngIf",t.formRegister.controls.studentFullName.invalid&&(t.formRegister.controls.studentFullName.dirty||t.formRegister.controls.studentFullName.touched)),e.xp6(14),e.Q6J("ngIf",t.formRegister.controls.studentUsername.invalid&&(t.formRegister.controls.studentUsername.dirty||t.formRegister.controls.studentUsername.touched)&&!t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.checkValidateUsername),e.xp6(10),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(3),e.Oqu(t.showPassword?"visibility_outlined":"visibility_off_outlined"),e.xp6(1),e.Q6J("ngIf",t.formRegister.controls.studentPassword.invalid&&(t.formRegister.controls.studentPassword.dirty||t.formRegister.controls.studentPassword.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(1),e.Q6J("disabled",t.formRegister.invalid||t.statusObj.loading||t.checkValidateUsername),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading||t.checkLoadingLogin),e.xp6(8),e.Q6J("src",e.lcZ(53,11,"azota_assets/images/google-icon.svg"),e.LSH)}}const xs=function(n){return[n]},ws=function(n){return{return_url:n,from:"register",user_click:"true"}};function Ts(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"a",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeRegisterType(0))}),e._UZ(4,"i",25),e._uU(5,"\xa0 T\xf4i l\xe0 h\u1ecdc sinh"),e.qZA()(),e.TgZ(6,"div",23)(7,"a",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeRegisterType(1))}),e._UZ(8,"i",26),e._uU(9,"\xa0 T\xf4i l\xe0 gi\xe1o vi\xean"),e.qZA()()(),e.TgZ(10,"div",27)(11,"div",28),e._UZ(12,"hr"),e.qZA()(),e.YNc(13,Me,59,13,"div",29),e.YNc(14,Es,56,13,"div",30),e.TgZ(15,"div",31),e._uU(16,'B\u1eb1ng c\xe1ch \u1ea5n v\xe0o n\xfat "\u0110\u0102NG K\xdd", t\xf4i \u0111\u1ed3ng \xfd v\u1edbi '),e.TgZ(17,"a",32),e._uU(18," \u0110i\u1ec1u Kho\u1ea3n S\u1eed D\u1ee5ng "),e.qZA(),e._uU(19," v\xe0 "),e.TgZ(20,"a",32),e._uU(21," Ch\xednh S\xe1ch B\u1ea3o M\u1eadt c\u1ee7a AZOTA."),e.qZA()(),e.TgZ(22,"div",33)(23,"p",34),e._uU(24,"B\u1ea1n \u0111\xe3 c\xf3 t\xe0i kho\u1ea3n?"),e.qZA(),e.TgZ(25,"p")(26,"a",35),e.ALo(27,"localize"),e._uU(28,"\u0110\u0103ng nh\u1eadp"),e.qZA()()()()}if(2&n){const t=e.oxw();e.Q6J("hidden",t.isShowOption),e.xp6(3),e.ekj("select-style-active",t.isStudent),e.xp6(4),e.ekj("select-style-active",t.isTeacher),e.xp6(6),e.Q6J("ngIf",1==t.isTeacher),e.xp6(1),e.Q6J("ngIf",1==t.isStudent),e.xp6(12),e.Q6J("routerLink",e.VKq(11,xs,e.lcZ(27,9,"/auth/login")))("queryParams",e.VKq(13,ws,t.returnUrl))}}let ds=(()=>{class n extends C.Q{constructor(t,i,r,u,g,_,v){super(r),this.formBuilder=t,this.activeRoute=i,this.commonService=r,this.baseApiService=u,this.recaptchaV3Service=g,this.fireAuth=_,this.authService=v,this.form=new d.nJ({}),this.formRegister=new d.nJ({}),this.returnUrl="",this.zaloLoginUrl="",this.isHiddenFormRegister=!0,this.isTeacher=!1,this.isStudent=!1,this.yesterday=new Date,this.isShowOption=!0,this.isShowRegisterForStudent=!1,this.isShowRegisterForTeacher=!1,this.checkValidateUsername=!1,this.msgError="",this.checkLoadingLogin=!0,this.showPassword=!1,this.initStatusObj(),_.authState.subscribe(w=>{w?this.signInWithTokenGoogle(w):this.checkLoadingLogin=!1})}executeImportantAction(){return new Promise(t=>{this.recaptchaV3Service.execute("importantAction").subscribe(i=>{t(i)})})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,i){var r,u;return!(null===(r=this.form.controls[t].errors)||void 0===r||!r[i])&&(null===(u=this.form.controls[t].errors)||void 0===u?void 0:u[i])}getErrorForm(t,i){var r,u;return!(null===(r=this.formRegister.controls[t].errors)||void 0===r||!r[i])&&(null===(u=this.formRegister.controls[t].errors)||void 0===u?void 0:u[i])}goToConfirm(){var t;this.returnUrl=null!==(t=this.commonService.getMyQueryParam("return_url"))&&void 0!==t?t:"";var i="?return_url="+encodeURIComponent(this.returnUrl)+"&confirm_type=confirm_phone_register";this.commonService.myNavigationWithQueryString("/auth/checking_service",i)}changeRegisterType(t){this.isShowOption=!1,this.myNavigationWithQueryString(`/auth/register/${t}`,this.returnUrl?`?return_url=${encodeURIComponent(this.returnUrl)}&user_click=true`:"?user_click=true"),0==t?(this.commonService.gaEvent("sign_up_switch_to_student"),this.isTeacher=!1,this.isStudent=!0,this.checkValidateUsername=!1):(this.commonService.gaEvent("sign_up_switch_to_teacher"),this.isTeacher=!0,this.isStudent=!1,this.checkValidateUsername=!1)}loginZalo(){this.commonService.gaEvent("sign_up_teacher_by_zalo"),window.location.href=this.zaloLoginUrl}registerForTeacher(){this.form.valid&&!this.checkValidateUsername&&this.executeImportantAction().then(t=>{var i=this.commonService.getFormObj(this.form),r={fullName:i.fullName,password:i.password,tokenCaptcha:t};this.validateEmail(i.username)?r.email=i.username:r.phone=i.username,this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRegisterPost(r).subscribe(u=>{var g,_;1==u.success?(this.commonService.gaEvent("sign_up_teacher"),this.successStatusObj(),this.baseApiService.redirectLoginByRoleForRegister(null!==(g=this.commonService.getMyQueryParam("return_url"))&&void 0!==g?g:"")):this.errorStatusObj(null!==(_=u.message)&&void 0!==_?_:"")}))})}registerForStudent(){this.formRegister.valid&&!this.checkValidateUsername&&this.executeImportantAction().then(t=>{this.commonService.gaEvent("sign_up_student");var i=this.commonService.getFormObj(this.formRegister);this.initStatusObj();var r={fullName:i.studentFullName,password:i.studentPassword,tokenCaptcha:t};this.validateEmail(i.studentUsername)?r.email=i.studentUsername:r.phone=i.studentUsername,this.subscriptions.add(this.authService.apiAuthRegisterForStudentPost(r).subscribe(u=>{var g,_;1==u.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole(null!==(g=this.commonService.getMyQueryParam("return_url"))&&void 0!==g?g:"")):this.errorStatusObj(null!==(_=u.message)&&void 0!==_?_:"")}))})}validateEmail(t){return t.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}checkValidateUser(t){this.msgError="",isNaN(Number(t))?this.validateEmail(t)?(this.checkValidateUsername=!1,this.msgError=""):(this.msgError="Vui l\xf2ng nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng email.",this.checkValidateUsername=!0):10==t.length?(this.msgError="",this.checkValidateUsername=!1):(this.msgError="S\xf4\u0301 \u0111i\xea\u0323n thoa\u0323i pha\u0309i la\u0300 s\xf4\u0301 va\u0300 10 ky\u0301 t\u01b0\u0323.",this.checkValidateUsername=!0)}googleSignIn(){this.fireAuth.signInWithRedirect(new We.hJ).then(()=>this.fireAuth.getRedirectResult().then(t=>{})).catch(t=>{console.log(t)})}signInWithTokenGoogle(t){this.checkLoadingLogin=!0;let i=this.commonService.getMyParam(this.activeRoute,"type"),r=parseInt(null!=i?i:"0",10);this.subscriptions.add(this.authService.apiAuthAuthByFirebasePost({isRegisterForTeacher:r,firebaseToken:t._delegate.accessToken}).subscribe(_=>{var v,w;1==_.success?(this.baseApiService.redirectLoginByRole(null!==(v=this.commonService.getMyQueryParam("return_url"))&&void 0!==v?v:""),this.successStatusObj(),this.checkLoadingLogin=!1):(this.errorStatusObj(null!==(w=_.message)&&void 0!==w?w:"",!0),this.checkLoadingLogin=!1)}))}togglePassword(){this.showPassword=!this.showPassword}ngOnInit(){if(this.baseApiService.isLogin()&&!this.baseApiService.isAnonymousRole())this.baseApiService.redirectLoginByRole("");else{var t=this.commonService.getMyParam(this.activeRoute,"type");if(null!=t){var i=parseInt(null==t?void 0:t.toString(),10);this.changeRegisterType(0==i?0:1)}this.yesterday.setDate(this.yesterday.getDate()-1),this.form=this.formBuilder.group({fullName:["",[d.kI.required,Ee._.noWhiteSpace]],username:["",[d.kI.required,Ee._.noWhiteSpace]],password:["",[d.kI.required,d.kI.minLength(6)]]}),this.formRegister=this.formBuilder.group({studentFullName:["",[d.kI.required,Ee._.noWhiteSpace]],studentUsername:["",[d.kI.required,Ee._.noWhiteSpace]],studentPassword:["",[d.kI.required,d.kI.minLength(6)]]}),this.returnUrl=this.commonService.getMyQueryParam("return_url")||this.commonService.getLocalRouter("/admin/testbank/dashboard"),this.zaloLoginUrl=oe.N.main_api+"Auth/LoginZalo?callback_uri="+encodeURIComponent(this.commonService.getLocalRouter("/auth/login")+"?return_url="+this.returnUrl+"&is_register=1"),!this.commonService.getMyQueryParam("user_click")&&this.baseApiService.isAnonymousRole()&&this.myNavigation("/student/dashboard/0"),this.commonService.translateMetaData({title:"lang_cms_auth_register_title",description:"lang_cms_auth_register_description",image:"lang_cms_test_image"}),this.stopStatusObj()}super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.QS),e.Y36(P.gz),e.Y36(R.v),e.Y36(U._),e.Y36(Wi.YC),e.Y36(Kn),e.Y36(L.e8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],features:[e.qOj],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"row","py-5"],[1,"col-sm-3"],[1,"col-sm-6"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"text-center","p-0"],["alt","logo",2,"width","180px",3,"src"],[1,"p-0","m-0"],[1,"card-body"],[4,"ngIf"],["class","row","style","justify-content: space-around",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"row",2,"justify-content","space-around"],[1,"col-sm-4","border-card","mb-3",3,"click"],[1,"df-logo"],[1,"fas","fa-graduation-cap","pb-3",2,"font-size","36px"],["width","36px","height","45px",1,"mb-3",3,"src"],[3,"hidden"],[1,"row","justify-content-center","pt-3"],[1,"col-sm-6","text-center","mb-3"],[1,"clickable","select-style",3,"click"],[1,"fas","fa-graduation-cap"],[1,"fas","fa-user-alt"],[1,"row"],[1,"col-12"],["id","teacher",4,"ngIf"],["id","chilren",4,"ngIf"],[1,"mt-2",2,"text-align","justify","font-size","13px"],["href","/privacy/index.html","target","_blank"],[1,"text-center","mt-3"],[1,"text-normal"],[3,"routerLink","queryParams"],["id","teacher"],[1,"form-horizontal",3,"formGroup"],[1,"col-sm-12"],[1,"form-group"],[1,"col-sm-12","p-0"],[1,"input-group","mb-3"],[1,"input-group-append"],["id","basic-addon1",1,"input-group-text"],["type","text","placeholder","H\u1ecd t\xean","formControlName","fullName","autocomplete","new-password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["id","basic-addon3",1,"input-group-text",2,"padding-left","0.35rem","padding-right","0.35rem"],[2,"width","15px","height","15px","font-size","15px"],["type","phone","placeholder","Nh\u1eadp S\u0110T ho\u1eb7c email","formControlName","username","autocomplete","new-password",1,"form-control",3,"input"],["id","basic-addon3",1,"input-group-text"],["placeholder","M\u1eadt kh\u1ea9u","formControlName","password",1,"form-control","pr-40",3,"type"],[1,"btn-toggle-password",3,"click"],["class","form-group",4,"ngIf"],["mat-raised-button","",1,"btn-azt-primary",2,"width","100%",3,"disabled","click"],[1,"text-center","my-3"],[1,"h6","mute-text"],["mat-stroked-button","",2,"width","100%","padding","1px",3,"click"],["alt","Zalo Icon",1,"img-responsive","zalo-icon",3,"src"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"],["id","chilren"],[1,"form-horinzal",3,"formGroup"],["type","text","placeholder","H\u1ecd t\xean","formControlName","studentFullName","autocomplete","new-password",1,"form-control"],["type","phone","placeholder","Nh\u1eadp S\u0110T ho\u1eb7c email","formControlName","studentUsername","autocomplete","new-password",1,"form-control",3,"input"],["placeholder","M\u1eadt kh\u1ea9u","formControlName","studentPassword",1,"form-control","pr-40",3,"type"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),e._UZ(7,"img",7),e.ALo(8,"convertCdn"),e.qZA(),e.TgZ(9,"h3",8),e._uU(10,"\u0110\u0103ng k\xfd t\xe0i kho\u1ea3n"),e.qZA()(),e.TgZ(11,"div",9),e.YNc(12,T,6,3,"div",10),e.YNc(13,ne,12,3,"div",11),e.YNc(14,Ts,29,15,"div",12),e.qZA()()(),e._UZ(15,"div",2),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("src",e.lcZ(8,4,"azota_assets/images/logo.svg"),e.LSH),e.xp6(5),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",1==i.isShowOption),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading))},dependencies:[P.yS,E.O5,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,d.sg,d.u,Q.lO,x.bT,x.BI],styles:['.zalo-icon[_ngcontent-%COMP%]{height:30px;margin-right:10px}.select-style[_ngcontent-%COMP%]{color:#868686!important}.input-group-text[_ngcontent-%COMP%]{border-right:0;border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important;background-color:#f3f4f524!important}.select-style[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.select-style[_ngcontent-%COMP%]:hover, .select-style-active[_ngcontent-%COMP%]{color:#2361ae!important}.df-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.register--login[_ngcontent-%COMP%]{width:88px;height:88px}.two-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%;height:100vh;margin:auto}.register-button[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center}.btn-max-width[_ngcontent-%COMP%]{width:100%;padding-top:1.25rem;padding-bottom:1.25rem;font-size:1.5rem}.responsive__text[_ngcontent-%COMP%]{width:90%;margin-left:auto;margin-right:auto}.btn-outline-primary[_ngcontent-%COMP%]{color:#2361ae!important;border-color:#2361ae!important}.btn-primary[_ngcontent-%COMP%]{color:#fff!important;border-color:#2361ae!important;background-color:#2361ae!important}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b818e!important}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#2361ae!important;border-color:#2361ae!important;background-color:#0eacbe26}.btn-border-fix[_ngcontent-%COMP%]{border-radius:10px!important}.border-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid hsla(0deg,0%,86.3%,.8);border-radius:8px;cursor:pointer;padding:12px;align-items:center;text-align:center}.border-card[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 20px #00000012,-10px -10px 20px #fffc}.button-color[_ngcontent-%COMP%]{background-color:#2361ae!important;color:#fff!important}.text-line[_ngcontent-%COMP%]{position:relative;text-align:center}.text-line[_ngcontent-%COMP%]:before{content:"";display:block;width:45%;height:.5px;position:absolute;right:0;background-color:#868686;top:50%}.text-line[_ngcontent-%COMP%]:after{content:"";display:block;width:45%;height:.5px;position:absolute;left:0;background-color:#868686;top:50%}.border-select-box[_ngcontent-%COMP%]{border:1px solid #ccd0d5;border-radius:4px;padding:8px 16px}  .mat-radio-label{margin-bottom:0!important}  .mat-radio-label-content{padding-left:16px!important}  .mat-radio-button.mat-accent .mat-radio-inner-circle, .mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-ripple[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]:not(.mat-radio-persistent-ripple), .mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-persistent-ripple[_ngcontent-%COMP%], .mat-radio-button.mat-accent[_ngcontent-%COMP%]:active   .mat-radio-persistent-ripple[_ngcontent-%COMP%]{background-color:#2361ae!important}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#2361ae!important}  .mat-input-element{font-size:18px!important;caret-color:#2361ae!important}  .mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon, .mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-datepicker-toggle-default-icon[_ngcontent-%COMP%]{width:1.5em!important}button[_ngcontent-%COMP%]:disabled{background-color:#0000001f!important}.btn-toggle-password[_ngcontent-%COMP%]{position:absolute;top:6px;right:0;border:none;background:transparent;z-index:99}.btn-toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#757575;transition:all .5s}.btn-toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#434242}.pr-40[_ngcontent-%COMP%]{padding-right:40px}@media only screen and (max-width: 424px){.btn-max-width[_ngcontent-%COMP%]{font-size:1rem}}@media only screen and (max-width: 364px){.text-line[_ngcontent-%COMP%]:after, .text-line[_ngcontent-%COMP%]:before{width:40%}}']}),n})();function Ss(n,a){1&n&&(e.TgZ(0,"div")(1,"div",12)(2,"div",13)(3,"span",14),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function ks(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i d\xe0i t\u1ed1i thi\u1ec3u l\xe0 6! "),e.qZA())}function Zs(n,a){if(1&n&&(e.TgZ(0,"div",28),e.YNc(1,ks,2,0,"div",11),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.getErrorType("password","required")||t.getErrorType("password","minlength"))}}function Os(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"label",29),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("*** ",e.lcZ(3,1,t.statusObj.errorMessage),"")}}function Is(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",30),e._uU(2,"\xa0"),e.qZA())}const Ps=function(n){return[n]},Ms=function(){return{user_click:"true"}};function Ds(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17),e._UZ(4,"input",18),e.TgZ(5,"div",19)(6,"span",20)(7,"mat-icon"),e._uU(8,"lock"),e.qZA()()()(),e.TgZ(9,"div",17),e._UZ(10,"input",21),e.TgZ(11,"div",19)(12,"span",20)(13,"mat-icon"),e._uU(14,"lock"),e.qZA()()()(),e.YNc(15,Zs,2,1,"div",22),e.qZA()(),e.YNc(16,Os,4,3,"div",23),e.TgZ(17,"div",15)(18,"div",16)(19,"div",24)(20,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.form.invalid||r.statusObj.loading||r.changePassword())}),e.YNc(21,Is,3,0,"span",11),e._uU(22,"\u0110\u1ed5i m\u1eadt kh\u1ea9u "),e.qZA()()()(),e._UZ(23,"hr"),e.TgZ(24,"div",26)(25,"a",27),e.ALo(26,"localize"),e._uU(27,"\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(15),e.Q6J("ngIf",t.form.controls.password.invalid&&(t.form.controls.password.dirty||t.form.controls.password.touched)),e.xp6(1),e.Q6J("ngIf",t.statusObj.errorMessage),e.xp6(4),e.Q6J("disabled",t.form.invalid||t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(4),e.Q6J("routerLink",e.VKq(8,Ps,e.lcZ(26,6,"/auth/login")))("queryParams",e.DdM(10,Ms))}}function Fs(n,a){1&n&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function Rs(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",21),e._uU(2,"\xa0"),e.qZA())}function Us(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.statusObj.loading||r.becomeTeacher())}),e.YNc(4,Rs,3,0,"span",12),e._uU(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 tr\u1edf th\xe0nh gi\xe1o vi\xean "),e.qZA()()(),e.TgZ(6,"div",19)(7,"a",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goBack())}),e._uU(8,"Quay l\u1ea1i trang ch\u1ee7"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading)}}function Qs(n,a){if(1&n&&(e.TgZ(0,"div",5)(1,"h2",6),e._UZ(2,"img",7),e.ALo(3,"convertCdn"),e.qZA(),e.TgZ(4,"div",8)(5,"div",9)(6,"span",10),e._uU(7,"T\xf4i mu\u1ed1n th\xe0nh gi\xe1o vi\xean"),e.qZA()(),e.TgZ(8,"div",11),e.YNc(9,Fs,6,3,"div",12),e.YNc(10,Us,9,2,"div",12),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("src",e.lcZ(3,3,"azota_assets/images/logo.svg"),e.LSH),e.xp6(7),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!t.statusObj.loading)}}function Ns(n,a){1&n&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"span",15),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function qs(n,a){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",21),e._uU(2,"\xa0"),e.qZA())}function Bs(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.statusObj.loading||r.becomeStudent())}),e.YNc(4,qs,3,0,"span",12),e._uU(5,"Click v\xe0o \u0111\xe2y \u0111\u1ec3 b\u1ecf quy\u1ec1n gi\xe1o vi\xean "),e.qZA()()(),e.TgZ(6,"div",19)(7,"a",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goBack())}),e._uU(8,"Quay l\u1ea1i trang ch\u1ee7"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading)}}function js(n,a){if(1&n&&(e.TgZ(0,"div",5)(1,"h2",6),e._UZ(2,"img",7),e.ALo(3,"convertCdn"),e.qZA(),e.TgZ(4,"div",8)(5,"div",9)(6,"span",10),e._uU(7,"T\xf4i mu\u1ed1n b\u1ecf quy\u1ec1n gi\xe1o vi\xean"),e.qZA()(),e.TgZ(8,"div",11),e.YNc(9,Ns,6,3,"div",12),e.YNc(10,Bs,9,2,"div",12),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("src",e.lcZ(3,3,"azota_assets/images/logo.svg"),e.LSH),e.xp6(7),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!t.statusObj.loading)}}const Js=[{path:"",component:I,children:[{path:"login",component:S},{path:"login-scan/:role",component:rr},{path:"register",component:ds},{path:"register/:type",component:ds},{path:"logout",component:Z},{path:"confirm_forgot_password",component:bo},{path:"confirm-forgot-password-email",component:ri},{path:"forgot_password_susscess",component:Kr},{path:"confirm_forgot_password_qr",component:Do},{path:"confirm_forgot_password_old",component:ue},{path:"confirm_account",component:po},{path:"checking_service",component:Lt},{path:"set_new_password",component:(()=>{class n extends C.Q{constructor(t,i,r,u){super(i),this.formBuilder=t,this.commonService=i,this.baseApiService=r,this.authService=u,this.form=new d.nJ({})}getError(t){return!!this.form.controls[t].errors&&this.form.controls[t].errors}getErrorType(t,i){var r,u;return!(null===(r=this.form.controls[t].errors)||void 0===r||!r[i])&&(null===(u=this.form.controls[t].errors)||void 0===u?void 0:u[i])}changePassword(){if(this.form.valid)if(this.form.value.password!=this.form.value.confirm_password)this.showErrorSnack("X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp");else{this.initStatusObj();var t=this.commonService.getFormObj(this.form),i=this.commonService.getMyQueryParam("token"),r=this.commonService.getMyQueryParam("app_name");this.subscriptions.add(this.authService.apiAuthChangePasswordByFirebasePost({firebaseToken:i,newPassword:t.password,appName:r}).subscribe(g=>{var _;1==g.success?(this.successStatusObj(),this.baseApiService.redirectLoginByRole("")):this.errorStatusObj(null!==(_=g.message)&&void 0!==_?_:"")}))}}ngOnInit(){this.form=this.formBuilder.group({password:["",[d.kI.required,d.kI.minLength(6)]],confirm_password:""}),this.commonService.translateMetaData({title:"lang_cms_auth_confirm_forgot_password_title",description:"lang_cms_auth_confirm_forgot_password_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.QS),e.Y36(R.v),e.Y36(U._),e.Y36(L.e8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-forgot-password"]],features:[e.qOj],decls:16,vars:6,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"form-horizontal",2,"margin-top","4vh",3,"formGroup"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-sm-12"],[1,"input-group","mb-3"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi","formControlName","password","autocomplete","off",1,"form-control"],[1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],["type","password","placeholder","X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u","formControlName","confirm_password","autocomplete","off",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-right"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"text-normal",3,"routerLink","queryParams"],[1,"alert","alert-danger"],[1,"col-sm-12","control-label","text-danger"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"h2",5),e._UZ(6,"img",6),e.ALo(7,"convertCdn"),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"span",9),e._uU(11,"\u0110\u1ed5i m\u1eadt kh\u1ea9u m\u1edbi"),e.qZA()(),e.TgZ(12,"div",10),e.YNc(13,Ss,6,3,"div",11),e.YNc(14,Ds,28,11,"div",11),e.qZA()()(),e._UZ(15,"div",3),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("src",e.lcZ(7,4,"azota_assets/images/logo.svg"),e.LSH),e.xp6(7),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!i.statusObj.loading))},dependencies:[P.yS,E.O5,d._Y,d.Fj,d.JJ,d.JL,k.lW,b.Hw,d.sg,d.u,Q.lO,x.bT,x.BI],encapsulation:2}),n})()},{path:"change-info",component:Dt},{path:"switch-teacher-student",component:(()=>{class n extends C.Q{constructor(t,i,r){super(r),this.baseApiService=t,this.authService=i,this.commonService=r,this.isTeacher=!1,this.isStudent=!1}goBack(){this.baseApiService.redirectLoginByRole("")}becomeTeacher(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthConvertToTeacherGet().subscribe(t=>{var i;1==t.success?this.baseApiService.redirectLoginByRole(""):this.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"",!0)}))}becomeStudent(){this.initStatusObj(),this.subscriptions.add(this.authService.apiAuthRemoveTeacherRoleGet().subscribe(t=>{var i;1==t.success?this.baseApiService.redirectLoginByRole(this.commonService.getLocalRouter("/student/dashboard/0")):this.errorStatusObj(null!==(i=t.message)&&void 0!==i?i:"",!0)}))}ngOnInit(){this.commonService.translateMetaData({title:"\u0110\u1ed5i Vai Tr\xf2",description:"\u0110\u1ed5i Vai Tr\xf2",image:"lang_cms_test_image"}),this.isTeacher=this.baseApiService.isTeacherRole(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U._),e.Y36(L.e8),e.Y36(R.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-switch-teacher-student"]],features:[e.qOj],decls:7,vars:2,consts:[[1,"container-fluid","component-wrap","centerBoth","hasBg"],[2,"margin-top","6vh"],[1,"row"],[1,"col-sm-3"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[1,"text-center"],["alt","logo",2,"width","180px",3,"src"],["id","authForm",1,"card"],[1,"text-center","mt-4"],[1,"h5"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"form-group"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"text-center","mt-3"],[1,"clickable",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.YNc(4,Qs,11,5,"div",4),e.YNc(5,js,11,5,"div",4),e._UZ(6,"div",3),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",0==i.isTeacher),e.xp6(1),e.Q6J("ngIf",1==i.isTeacher))},dependencies:[E.O5,k.lW,x.bT,x.BI]}),n})()},{path:"create-qr-forgot-pass/:role",component:jo},{path:"change-email",component:N},{path:"confirm-change-email",component:Rt},{path:"choose-role",component:Ft}]}];let zs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[P.Bz.forChild(Js),P.Bz,Q.fQ]}),n})(),Ys=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[P.Bz,E.ez,d.u5,O.Z_,ae.j,d.UX,zs,se.W,pe.Z,Y.hO.initializeApp(oe.N.firebaseConfig_app1,"auth")]}),n})()},60703:(xe,me,m)=>{m.d(me,{HF:()=>oe,o8:()=>se});var E=m(70024),Y=m(5e3),d=m(15439);const O=m.n(d)()||d,se=new Y.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function pe(){return{useUtc:!1}}});function ae(Q,e){const A=Array(Q);for(let C=0;C<Q;C++)A[C]=e(C);return A}let oe=(()=>{class Q extends E.fM{constructor(A){super(),this._options=A,this._localeData={firstDayOfWeek:0,longMonths:"",shortMonths:"",dates:"",longDaysOfWeek:"",shortDaysOfWeek:"",narrowDaysOfWeek:""};let R="vi";-1===window.location.href.indexOf("en")&&(R="vi"),O.locale(),this.setLocale(R||O.locale())}setLocale(A){super.setLocale(A);const C=O.localeData(A);this._localeData={firstDayOfWeek:C.firstDayOfWeek(),longMonths:C.months(),shortMonths:C.monthsShort(),dates:ae(31,U=>this.createDate(2017,0,U+1).format("D")),longDaysOfWeek:C.weekdays(),shortDaysOfWeek:C.weekdaysShort(),narrowDaysOfWeek:C.weekdaysMin()}}getYear(A){return this.clone(A).year()}getMonth(A){return this.clone(A).month()}getDate(A){return this.clone(A).date()}getDayOfWeek(A){return this.clone(A).day()}getMonthNames(A){return"long"===A?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(A){return"long"===A?this._localeData.longDaysOfWeek:"short"===A?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(A){return this.clone(A).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(A){return this.clone(A).daysInMonth()}clone(A){return A.clone().locale(this.locale)}createDate(A,C,U){if(C<0||C>11)throw Error(`Invalid month index "${C}". Month index has to be between 0 and 11.`);if(U<1)throw Error(`Invalid date "${U}". Date has to be greater than 0.`);const R=this._createMoment({year:A,month:C,date:U}).locale(this.locale);if(!R.isValid())throw Error(`Invalid date "${U}" for month with index "${C}".`);return R}today(){return this._createMoment().locale(this.locale)}parse(A,C){return A&&"string"==typeof A?this._createMoment(A,C,this.locale):A?this._createMoment(A).locale(this.locale):null}format(A,C){if(A=this.clone(A),!this.isValid(A))throw Error("MomentDateAdapter: Cannot format invalid date.");return A.format(C)}addCalendarYears(A,C){return this.clone(A).add({years:C})}addCalendarMonths(A,C){return this.clone(A).add({months:C})}addCalendarDays(A,C){return this.clone(A).add({days:C})}toIso8601(A){return this.clone(A).format()}deserialize(A){let C;if(A instanceof Date)C=this._createMoment(A).locale(this.locale);else if(this.isDateInstance(A))return this.clone(A);if("string"==typeof A){if(!A)return null;C=this._createMoment(A,O.ISO_8601).locale(this.locale)}return C&&this.isValid(C)?this._createMoment(C).locale(this.locale):super.deserialize(A)}isDateInstance(A){return O.isMoment(A)}isValid(A){return this.clone(A).isValid()}invalid(){return O.invalid()}getHour(A){return A.hours()}getMinute(A){return A.minutes()}getSecond(A){return A.seconds()}setHour(A,C){A.hours(C)}setMinute(A,C){A.minutes(C)}setSecond(A,C){A.seconds(C)}_createMoment(A,C,U){const{strict:R,useUtc:L}=this._options||{};return L?O.utc(A,C,U,R):O(A,C,U,R)}}return Q.\u0275fac=function(A){return new(A||Q)(Y.LFG(se,8))},Q.\u0275prov=Y.Yz7({token:Q,factory:Q.\u0275fac}),Q})()},70127:(xe,me,m)=>{m.d(me,{Z:()=>E.Z});var E=m(63942);E.Z.registerVersion("firebase","9.8.4","app-compat")},63942:(xe,me,m)=>{m.d(me,{Z:()=>R});var E=m(42090),Y=m(34859),d=m(49681),P=m(41877);class O{constructor(k,b){this._delegate=k,this.firebase=b,(0,d._addComponent)(k,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=k.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(k){this._delegate.automaticDataCollectionEnabled=k}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(k=>{this._delegate.checkDestroyed(),k()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,d.deleteApp)(this._delegate)))}_getService(k,b=d._DEFAULT_ENTRY_NAME){var x;this._delegate.checkDestroyed();const F=this._delegate.container.getProvider(k);return!F.isInitialized()&&"EXPLICIT"===(null===(x=F.getComponent())||void 0===x?void 0:x.instantiationMode)&&F.initialize(),F.getImmediate({identifier:b})}_removeServiceInstance(k,b=d._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(k).clearInstance(b)}_addComponent(k){(0,d._addComponent)(this._delegate,k)}_addOrOverwriteComponent(k){(0,d._addOrOverwriteComponent)(this._delegate,k)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function oe(){const L=function ae(L){const k={},b={__esModule:!0,initializeApp:function j(M,W={}){const N=d.initializeApp(M,W);if((0,E.r3)(k,N.name))return k[N.name];const $=new L(N,b);return k[N.name]=$,$},app:F,registerVersion:d.registerVersion,setLogLevel:d.setLogLevel,onLog:d.onLog,apps:null,SDK_VERSION:d.SDK_VERSION,INTERNAL:{registerComponent:function G(M){const W=M.name,N=W.replace("-compat","");if(d._registerComponent(M)&&"PUBLIC"===M.type){const $=(_e=F())=>{if("function"!=typeof _e[N])throw pe.create("invalid-app-argument",{appName:W});return _e[N]()};void 0!==M.serviceProps&&(0,E.ZB)($,M.serviceProps),b[N]=$,L.prototype[N]=function(..._e){return this._getService.bind(this,W).apply(this,M.multipleInstances?_e:[])}}return"PUBLIC"===M.type?b[N]:null},removeApp:function x(M){delete k[M]},useAsService:function te(M,W){return"serverAuth"===W?null:W},modularAPIs:d}};function F(M){if(!(0,E.r3)(k,M=M||d._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:M});return k[M]}return b.default=b,Object.defineProperty(b,"apps",{get:function ce(){return Object.keys(k).map(M=>k[M])}}),F.App=L,b}(O);return L.INTERNAL=Object.assign(Object.assign({},L.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function k(b){(0,E.ZB)(L,b)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),L}(),e=new P.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){e.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const L=self.firebase.SDK_VERSION;L&&L.indexOf("LITE")>=0&&e.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const R=Q;!function U(L){(0,d.registerVersion)("@firebase/app-compat","0.1.28",L)}()}}]);