(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[391],{73727:(lt,k,S)=>{"use strict";S.d(k,{g:()=>p});var t=S(5e3),i=S(55330),f=S(35018),a=S(79001),c=S(39453);let p=(()=>{class C extends i.Q{constructor(v,o){super(v),this.commonService=v,this.sEAztClassroomCheckboxService=o,this.changeCheckboxEvent=new t.vpe,this.formArrayName="",this.objs=[],this.isCheckAll=!1}clearAllCheckBox(){var v=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.objs,this.permissionName);if(this.formArray)for(var o=0;o<this.formArray.controls.length;o++)this.objs[o]&&null!=this.objs[o].permissionObj&&!this.commonService.filterArray(v,this.objs[o].id)&&this.formArray.controls[o].setValue(!1);this.calculateIsCheckAll(),this.changeCheckboxEvent.emit(void 0)}checkAllCheckBox(){var v=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.objs,this.permissionName);if(this.formArray)for(var o=0;o<this.formArray.controls.length;o++)this.objs[o]&&null!=this.objs[o].permissionObj&&!this.commonService.filterArray(v,this.objs[o].id)&&this.formArray.controls[o].setValue(!0);this.calculateIsCheckAll(),this.changeCheckboxEvent.emit(void 0)}calculateIsCheckAll(){var v=!0,o=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.objs,this.permissionName);if(this.formArray)for(var l=0;l<this.formArray.controls.length;l++)this.objs[l]&&null!=this.objs[l].permissionObj&&!this.commonService.filterArray(o,this.objs[l].id)&&(this.formArray.controls[l].value||(v=!1));this.isCheckAll=v}ngOnInit(){var v;super.ngOnInit(),this.formArray=null===(v=this.form)||void 0===v?void 0:v.get(this.formArrayName),this.formArray&&(this.formArray.valueChanges.subscribe(o=>{this.calculateIsCheckAll()}),this.calculateIsCheckAll())}}return C.\u0275fac=function(v){return new(v||C)(t.Y36(f.v),t.Y36(a.L))},C.\u0275cmp=t.Xpm({type:C,selectors:[["azt-list-classroom-checkall"]],inputs:{form:"form",formArrayName:"formArrayName",objs:"objs",permissionName:"permissionName"},outputs:{changeCheckboxEvent:"changeCheckboxEvent"},features:[t.qOj],decls:7,vars:8,consts:[[1,"d-flex","my-2"],[1,"clickable",3,"hidden","click"]],template:function(v,o){1&v&&(t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return o.checkAllCheckBox()}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"a",1),t.NdJ("click",function(){return o.clearAllCheckBox()}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&v&&(t.xp6(1),t.Q6J("hidden",o.isCheckAll),t.xp6(1),t.hij(" ",t.lcZ(3,4,"lang_select_all_classroom")," "),t.xp6(2),t.Q6J("hidden",!o.isCheckAll),t.xp6(1),t.hij(" ",t.lcZ(6,6,"lang_remove_all_classroom")," "))},dependencies:[c.bT],encapsulation:2}),C})()},10768:(lt,k,S)=>{"use strict";S.d(k,{o:()=>y});var t=S(5e3),i=S(93075),f=S(85053),a=S(55330),c=S(38720),p=S(48966),C=S(35018),g=S(79001),v=S(69808),o=S(77446),l=S(87238),s=S(39453);function h(I,e){if(1&I){const x=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"p",4),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"a",5),t.NdJ("click",function(){t.CHM(x);const O=t.oxw();return t.KtG(O.openDialogCreateClassroom())}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()}2&I&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_thayco_chua_tao_lop_vui_long_click")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"lang_testbank_test_config_come_in")," "),t.xp6(2),t.hij(" ",t.lcZ(9,7,"lang_testbank_test_config_create_class"),". "))}function u(I,e){if(1&I&&(t.TgZ(0,"span",16),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&I){const x=t.oxw(3).index,T=t.oxw(2);t.s9C("matTooltip",T.objs[x].name),t.xp6(1),t.hij(" ",t.Dn7(2,2,T.objs[x].name,0,25)+"..."," ")}}function d(I,e){if(1&I&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&I){const x=t.oxw(3).index,T=t.oxw(2);t.xp6(1),t.hij(" ",T.objs[x].name," ")}}function w(I,e){1&I&&(t.TgZ(0,"span",17),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&I&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_share")," "))}function r(I,e){if(1&I){const x=t.EpF();t.TgZ(0,"mat-checkbox",13),t.NdJ("change",function(){t.CHM(x);const O=t.oxw(2).index,J=t.oxw(2);return t.KtG(J.changeCheckboxEventLocal(J.objs[O]))}),t.YNc(1,u,3,6,"span",14),t.YNc(2,d,2,1,"span",1),t.YNc(3,w,3,3,"span",15),t.ALo(4,"fullPermission"),t.qZA()}if(2&I){const x=t.oxw(2).index,T=t.oxw(2);let O,J;t.s9C("value",T.objs[x].id),t.Q6J("formControlName",x),t.xp6(1),t.Q6J("ngIf",(null!==(O=null==T.objs[x].name?null:T.objs[x].name.length)&&void 0!==O?O:0)>25),t.xp6(1),t.Q6J("ngIf",(null!==(J=null==T.objs[x].name?null:T.objs[x].name.length)&&void 0!==J?J:0)<=25),t.xp6(1),t.Q6J("ngIf",!t.xi3(4,5,T.objs[x].permissionObj,"classroom"))}}function _(I,e){if(1&I&&(t.TgZ(0,"span",16),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&I){const x=t.oxw(3).index,T=t.oxw(2);t.s9C("matTooltip",T.objs[x].name),t.xp6(1),t.hij(" ",t.Dn7(2,2,T.objs[x].name,0,25)+"..."," ")}}function E(I,e){if(1&I&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&I){const x=t.oxw(3).index,T=t.oxw(2);t.xp6(1),t.hij(" ",T.objs[x].name," ")}}function A(I,e){1&I&&(t.TgZ(0,"span",17),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&I&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_share")," "))}function z(I,e){if(1&I){const x=t.EpF();t.TgZ(0,"mat-checkbox",18),t.NdJ("change",function(){t.CHM(x);const O=t.oxw(2).index,J=t.oxw(2);return t.KtG(J.changeCheckboxEventLocal(J.objs[O]))}),t.YNc(1,_,3,6,"span",14),t.YNc(2,E,2,1,"span",1),t.YNc(3,A,3,3,"span",15),t.ALo(4,"fullPermission"),t.qZA()}if(2&I){const x=t.oxw(2).index,T=t.oxw(2);let O,J;t.s9C("value",T.objs[x].id),t.Q6J("disabled",!0)("formControlName",x),t.xp6(1),t.Q6J("ngIf",(null!==(O=null==T.objs[x].name?null:T.objs[x].name.length)&&void 0!==O?O:0)>25),t.xp6(1),t.Q6J("ngIf",(null!==(J=null==T.objs[x].name?null:T.objs[x].name.length)&&void 0!==J?J:0)<=25),t.xp6(1),t.Q6J("ngIf",!t.xi3(4,6,T.objs[x].permissionObj,"classroom"))}}function P(I,e){if(1&I&&(t.TgZ(0,"div",10),t.YNc(1,r,5,8,"mat-checkbox",11),t.ALo(2,"createPermission"),t.YNc(3,z,5,9,"mat-checkbox",12),t.ALo(4,"createPermission"),t.qZA()),2&I){const x=t.oxw().index,T=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null!=T.objs[x].permissionObj&&t.xi3(2,2,T.objs[x].permissionObj,T.listPermissionTypes[T.permissionName])),t.xp6(2),t.Q6J("ngIf",!(null!=T.objs[x].permissionObj&&t.xi3(4,5,T.objs[x].permissionObj,T.listPermissionTypes[T.permissionName])))}}function N(I,e){if(1&I&&(t.ynx(0),t.YNc(1,P,5,8,"div",9),t.BQk()),2&I){const x=e.index,T=t.oxw(2);t.xp6(1),t.Q6J("ngIf",T.objs[x])}}function K(I,e){if(1&I&&(t.TgZ(0,"div")(1,"form",6)(2,"div",7),t.YNc(3,N,2,1,"ng-container",8),t.qZA()()()),2&I){const x=t.oxw();t.xp6(1),t.Q6J("formGroup",x.form),t.xp6(2),t.Q6J("ngForOf",x.formArray.controls)}}let y=(()=>{class I extends a.Q{constructor(x,T,O){super(T),this.dialog=x,this.commonService=T,this.sEAztClassroomCheckboxService=O,this.changeCheckboxEvent=new t.vpe,this.formArrayName="",this.objs=[],this.permissionName=f.$.homework,this.homeworkObj=void 0,this.examClassroomObjs=void 0,this.shareClassroomIds=void 0,this.listPermissionTypes=f.$,this.showCreateNewClassroom=!1}changeCheckboxEventLocal(x){this.changeCheckboxEvent.emit(x)}initClassroomCheckbox(){var x;this.formArray.clear();var T=[];if(!(null===(x=this.homeworkObj)||void 0===x)&&x.classroomId&&T.push(this.homeworkObj.classroomId),this.examClassroomObjs)for(var O=0;O<this.examClassroomObjs.length;O++)(J=this.examClassroomObjs[O].classroomId)&&T.push(J);for(this.shareClassroomIds&&(T=this.shareClassroomIds),O=0;O<this.objs.length;O++){var J,F=!1;(J=this.objs[O].id)&&T.includes(J)&&(F=!0),this.addNewCheckBox(this.formArray,F)}}addNewCheckBox(x,T){const O=new i.p4(T);x.push(O)}openDialogCreateClassroom(){this.dialog.open(c.s,{data:{}})}ngOnInit(){var x;super.ngOnInit(),this.sEAztClassroomCheckboxService.findClassroomWithFullPermission(this.objs,this.permissionName).length===this.objs.length&&(this.showCreateNewClassroom=!0);for(var O=0;O<this.objs.length;O++)this.objs[O].name=this.commonService.myTranslateIntance(this.objs[O].name);this.formArray=null===(x=this.form)||void 0===x?void 0:x.get(this.formArrayName),this.formArray&&this.initClassroomCheckbox()}}return I.\u0275fac=function(x){return new(x||I)(t.Y36(p.uw),t.Y36(C.v),t.Y36(g.L))},I.\u0275cmp=t.Xpm({type:I,selectors:[["azt-list-classroom-checkbox"]],inputs:{form:"form",formArrayName:"formArrayName",objs:"objs",permissionName:"permissionName",homeworkObj:"homeworkObj",examClassroomObjs:"examClassroomObjs",shareClassroomIds:"shareClassroomIds"},outputs:{changeCheckboxEvent:"changeCheckboxEvent"},features:[t.qOj],decls:2,vars:2,consts:[["class","row mt-2",4,"ngIf"],[4,"ngIf"],[1,"row","mt-2"],[1,"col-12"],[1,"text-create"],[1,"clickable",3,"click"],[3,"formGroup"],["formArrayName","classroomIds",1,"row","ml-0"],[4,"ngFor","ngForOf"],["class","col-12 col-md-6 text-left pl-0 mt-2","style","flex: auto;",4,"ngIf"],[1,"col-12","col-md-6","text-left","pl-0","mt-2",2,"flex","auto"],["color","primary",3,"value","formControlName","change",4,"ngIf"],["color","primary",3,"value","disabled","formControlName","change",4,"ngIf"],["color","primary",3,"value","formControlName","change"],[3,"matTooltip",4,"ngIf"],["class","badge badge-info","style","vertical-align: middle; margin-bottom: 2px;",4,"ngIf"],[3,"matTooltip"],[1,"badge","badge-info",2,"vertical-align","middle","margin-bottom","2px"],["color","primary",3,"value","disabled","formControlName","change"]],template:function(x,T){1&x&&(t.YNc(0,h,10,9,"div",0),t.YNc(1,K,4,2,"div",1)),2&x&&(t.Q6J("ngIf",T.showCreateNewClassroom),t.xp6(1),t.Q6J("ngIf",T.form))},dependencies:[v.sg,v.O5,o.oG,l.gM,i._Y,i.JJ,i.JL,i.sg,i.u,i.CE,v.OU,s.bT,s.Gf,s.rm],encapsulation:2}),I})()},79001:(lt,k,S)=>{"use strict";S.d(k,{L:()=>c});var t=S(85053),i=S(5e3),f=S(35018),a=S(15431);let c=(()=>{class p{constructor(g,v){this.commonService=g,this.permissionService=v}findClassroomWithNoPermission(g,v){var o=[];return g.forEach(l=>{(null==l.permissionObj||!this.permissionService.hasCreatePermission(t.$[v],l.permissionObj))&&(this.commonService.filterArray(o,l.id)||void 0!==l.id&&o.push(l.id))}),o}findClassroomWithFullPermission(g,v){let o=[];return g.forEach(l=>{(null==l.permissionObj||!this.permissionService.hasFullPermission(t.$[v],l.permissionObj))&&o.push(l)}),o}getClassroomIdsChecked(g,v,o){for(var l=[],s=0;s<o.length;s++)if(o[s]&&g[s]){var h=g[s].id;h&&!this.commonService.filterArray(v,h)&&l.push(h)}return l}}return p.\u0275fac=function(g){return new(g||p)(i.LFG(f.v),i.LFG(a.$))},p.\u0275prov=i.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},1643:(lt,k,S)=>{"use strict";S.d(k,{p:()=>I});var t=S(55330),i=S(5e3),f=S(63382),a=S(35018),c=S(69808),p=S(39453);const C=function(e){return{"rotated-img":e}},g=function(e,x,T,O){return{"width.px":e,"height.px":x,"aspect-ratio":T,transform:O}};function v(e,x){if(1&e&&(i._UZ(0,"img",8),i.ALo(1,"mycdn")),2&e){const T=i.oxw(2).$implicit,O=i.oxw(2);i.s9C("src",i.lcZ(1,4,T.backgroundImage),i.LSH),i.Q6J("ngClass",i.VKq(6,C,O.isRightRotation(T.rotation||0)))("ngStyle",i.l5B(8,g,(T.width||0)<(T.height||0)?"auto":O.isRightRotation(T.rotation||0)?T.height:T.width,(T.width||0)>(T.height||0)?"auto":O.isRightRotation(T.rotation||0)?T.width:T.height,(T.width||0)/(T.height||1),"rotate("+T.rotation+"deg)")),i.uIk("data-ratio",(T.width||0)/(T.height||1))}}function o(e,x){1&e&&(i.TgZ(0,"div",9),i._uU(1),i.ALo(2,"mytranslate"),i.qZA()),2&e&&(i.xp6(1),i.Oqu(i.lcZ(2,1,"lang_auto_dinh_dang_file_khong_ho_tro_xuat_ra_pdf_he_thong_chi_xuat_duoc_file_pdf_doi_voi_file_tai_len_dang_anh_va_pdf")))}function l(e,x){if(1&e&&(i._UZ(0,"img",10),i.ALo(1,"mycdn")),2&e){const T=i.oxw(2).$implicit;i.s9C("src",i.lcZ(1,1,T.draw),i.LSH)}}function s(e,x){if(1&e&&(i.ynx(0),i._uU(1),i.BQk()),2&e){const T=i.oxw(6);i.xp6(1),i.hij(" ",null==T.result.staticTextConfigParse?null:T.result.staticTextConfigParse.textCorrect," ")}}function h(e,x){if(1&e&&(i.ynx(0),i._uU(1),i.BQk()),2&e){const T=i.oxw(6);i.xp6(1),i.hij(" ",null==T.result.staticTextConfigParse?null:T.result.staticTextConfigParse.textWrong," ")}}function u(e,x){if(1&e&&i._UZ(0,"img",13),2&e){const T=i.oxw(6);i.s9C("src","assets/images/classlive/"+(null==T.result.staticTextConfigParse?null:T.result.staticTextConfigParse.urlImgCorrect),i.LSH)}}function d(e,x){if(1&e&&i._UZ(0,"img",13),2&e){const T=i.oxw(6);i.s9C("src","assets/images/classlive/"+(null==T.result.staticTextConfigParse?null:T.result.staticTextConfigParse.urlImgWrong),i.LSH)}}const w=function(e,x,T,O,J){return{"font-family":e,color:x,"font-size":T,position:"absolute","z-index":2,"top.px":O,"left.px":J}};function r(e,x){if(1&e&&(i.ynx(0),i.TgZ(1,"span",11),i.YNc(2,s,2,1,"ng-container",0),i.YNc(3,h,2,1,"ng-container",0),i.YNc(4,u,1,1,"img",12),i.YNc(5,d,1,1,"img",12),i.qZA(),i.BQk()),2&e){const T=x.$implicit,O=i.oxw(5);i.xp6(1),i.Q6J("ngStyle",i.qbA(5,w,null==O.result.staticTextConfigParse?null:O.result.staticTextConfigParse.fontText,null==O.result.staticTextConfigParse?null:O.result.staticTextConfigParse.fontColor,(null==O.result.staticTextConfigParse?null:O.result.staticTextConfigParse.fontSize)+"px",T.y,T.x)),i.xp6(1),i.Q6J("ngIf",(null==O.result.staticTextConfigParse?null:O.result.staticTextConfigParse.useCorrectText)&&"correct"==T.value),i.xp6(1),i.Q6J("ngIf",(null==O.result.staticTextConfigParse?null:O.result.staticTextConfigParse.useCorrectText)&&"wrong"==T.value),i.xp6(1),i.Q6J("ngIf",!(null!=O.result.staticTextConfigParse&&O.result.staticTextConfigParse.useCorrectText)&&"correct"==T.value),i.xp6(1),i.Q6J("ngIf",!(null!=O.result.staticTextConfigParse&&O.result.staticTextConfigParse.useWrongText)&&"wrong"==T.value)}}function _(e,x){if(1&e&&i.YNc(0,r,6,11,"ng-container",2),2&e){const T=i.oxw(2).$implicit;i.Q6J("ngForOf",T.staticText)}}const E=function(e,x,T,O,J,F){return{"font-family":e,color:x,"font-size":T,display:"block","line-height":1.5,position:"absolute",letterSpacing:"3px",fontWeight:"bold","z-index":3,"text-align":O,"top.px":J,"left.px":F}};function A(e,x){if(1&e&&(i.ynx(0),i._UZ(1,"span",14),i.ALo(2,"formatNoteBreak"),i.BQk()),2&e){const T=x.$implicit;i.xp6(1),i.Q6J("ngStyle",i.HTZ(4,E,T.textStyle.font,T.textStyle.color,T.textStyle.size+"px",T.textStyle.align,T.y,T.x))("innerHtml",i.lcZ(2,2,T.value),i.oJD)}}function z(e,x){if(1&e&&i.YNc(0,A,3,11,"ng-container",2),2&e){const T=i.oxw(2).$implicit;i.Q6J("ngForOf",T.objText)}}function P(e,x){if(1&e&&(i.YNc(0,v,2,13,"img",5),i.ALo(1,"isImageExtension"),i.YNc(2,o,3,3,"ng-template",null,6,i.W1O),i.YNc(4,l,2,3,"img",7),i.YNc(5,_,1,1,"ng-template",4),i.YNc(6,z,1,1,"ng-template",4)),2&e){const T=i.MAs(3),O=i.oxw().$implicit;i.Q6J("ngIf",i.lcZ(1,5,(null==O?null:O.backgroundImage)||""))("ngIfElse",T),i.xp6(4),i.Q6J("ngIf",O.draw),i.xp6(1),i.Q6J("ngIf",O.staticText&&O.staticText.length>0),i.xp6(1),i.Q6J("ngIf",O.objText&&O.objText.length>0)}}const N=function(e,x){return{position:"relative","width.px":e,"height.px":x,display:"flex","justify-content":"center","align-items":"center",margin:"0 auto"}};function K(e,x){if(1&e&&(i.ynx(0),i.TgZ(1,"div",3),i.YNc(2,P,7,7,"ng-template",4),i.qZA(),i.BQk()),2&e){const T=x.$implicit;i.xp6(1),i.Q6J("ngStyle",i.WLB(2,N,T.width,T.height)),i.xp6(1),i.Q6J("ngIf",null==T?null:T.backgroundImage)}}function y(e,x){if(1&e&&(i.ynx(0),i.TgZ(1,"h3",1)(2,"span"),i._uU(3),i.qZA()(),i.YNc(4,K,3,5,"ng-container",2),i.BQk()),2&e){const T=i.oxw();i.xp6(3),i.Oqu(T.title),i.xp6(1),i.Q6J("ngForOf",T.result.pages)}}let I=(()=>{class e extends t.Q{constructor(T,O){super(O),this.iframeService=T,this.commonService=O,this.title="\u1ea2nh b\xe0i l\xe0m t\u1ef1 lu\u1eadn",this.result={}}isRightRotation(T){return 1==Math.abs(T/90%2)}ngOnInit(){this.result.staticTextConfig&&(this.result.staticTextConfigParse=this.commonService.myParseJson(this.result.staticTextConfig)),super.ngOnInit()}ngOnChanges(){this.result.staticTextConfig&&(this.result.staticTextConfigParse=this.commonService.myParseJson(this.result.staticTextConfig))}}return e.\u0275fac=function(T){return new(T||e)(i.Y36(f.X),i.Y36(a.v))},e.\u0275cmp=i.Xpm({type:e,selectors:[["azt-export-essay-template"]],inputs:{title:"title",result:"result"},features:[i.qOj,i.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["id","essayPdfTitle",1,"text-center","mt-2"],[4,"ngFor","ngForOf"],[1,"mb-2","essayPdfImage",3,"ngStyle"],[3,"ngIf"],["class","user-img img_respon","alt","",3,"ngClass","ngStyle","src",4,"ngIf","ngIfElse"],["noSupportExtension",""],["style","position: absolute; z-index: 1; top: 0; left: 0","class","user-img img_respon","alt","",3,"src",4,"ngIf"],["alt","",1,"user-img","img_respon",3,"ngClass","ngStyle","src"],[1,"p-2","text-center",2,"border","2px solid red"],["alt","",1,"user-img","img_respon",2,"position","absolute","z-index","1","top","0","left","0",3,"src"],[2,"min-height","50px","min-width","50px","font-weight","bold","display","flex","line-height","1.5","font-weight","bold","align-items","center","justify-content","center","text-shadow","rgb(130 126 126) 1px 1px 1px",3,"ngStyle"],["width","30","height","30","class","","alt","",3,"src",4,"ngIf"],["width","30","height","30","alt","",1,"",3,"src"],[3,"ngStyle","innerHtml"]],template:function(T,O){1&T&&i.YNc(0,y,5,2,"ng-container",0),2&T&&i.Q6J("ngIf",O.result)},dependencies:[c.mk,c.sg,c.O5,c.PC,p.bT,p.GT,p.AL,p.kJ],encapsulation:2}),e})()},83467:(lt,k,S)=>{"use strict";S.d(k,{O:()=>L});var t=S(5e3),i=S(55330),f=S(35018),a=S(72491),c=S(74202),p=S(69808),C=S(69287),g=S(25245),v=S(44841),o=S(64123),l=S(37104),s=S(39453);function h(j,Q){if(1&j){const B=t.EpF();t.TgZ(0,"div")(1,"div",4)(2,"p",5),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"p",6),t._uU(6),t.ALo(7,"mytranslate"),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"a",7),t.NdJ("click",function(){t.CHM(B);const nt=t.oxw();return t.KtG(nt.showCopySuccess())}),t.TgZ(11,"mat-icon",8),t._uU(12,"share"),t.qZA(),t.TgZ(13,"span",8),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()()}if(2&j){const B=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_auto_chua_co_du_lieu_nop_bai")),t.xp6(3),t.lnq("",t.lcZ(7,8,"lang_auto_neu_chua_gui_link_nop_bai_cho_hoc_sinh_vui_long_bam"),' "',t.lcZ(8,10,"lang_auto_copy_link_bai_tap"),'" ',t.lcZ(9,12,"lang_auto_ben_duoi_va_gui_cho_hoc_sinh_de_nop_bai"),""),t.xp6(4),t.Q6J("cdkCopyToClipboard",B.copyLinkHomeWorkToClipboard()),t.xp6(4),t.hij("\xa0",t.lcZ(15,14,"lang_auto_copy_link_bai_tap"),"")}}function u(j,Q){1&j&&(t.TgZ(0,"p",29),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&j&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_cham")," "))}function d(j,Q){1&j&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&j&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_nop")," "))}function w(j,Q){1&j&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&j&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai")," "))}function r(j,Q){if(1&j&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._UZ(4,"azt-check-mark",32),t.qZA()()),2&j){const B=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_diem"),": "),t.xp6(3),t.Q6J("mark",B.point)}}function _(j,Q){if(1&j&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&j){const B=t.oxw(2).$implicit,$=t.oxw(2);t.xp6(1),t.AsE(" ",$.calculationTime(B.createdAt)," ",t.lcZ(2,2,"lang_auto_truoc")," ")}}function E(j,Q){if(1&j&&(t.TgZ(0,"div",23)(1,"p",33),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",33),t._uU(5),t.qZA()()),2&j){const B=t.oxw(2).$implicit;let $;t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_so_tep_tin_da_nop"),": "),t.xp6(3),t.hij(" ",null!==($=null==B.answerFileObjs?null:B.answerFileObjs.length)&&void 0!==$?$:0," ")}}const A=function(j){return[j]},z=function(j){return{backto:j}},P=function(j){return{disableClick:j}};function N(j,Q){if(1&j&&(t.TgZ(0,"div")(1,"a",15),t.ALo(2,"mylocalize"),t.TgZ(3,"div",16)(4,"div",17)(5,"span",18),t._UZ(6,"azt-create-avatar",19),t.qZA(),t.TgZ(7,"div",20)(8,"div",21)(9,"span",8)(10,"span",22),t._uU(11),t.qZA()()(),t.TgZ(12,"div",23),t.YNc(13,u,3,3,"p",24),t.YNc(14,d,3,3,"p",25),t.YNc(15,w,3,3,"p",25),t.YNc(16,r,5,4,"p",26),t.YNc(17,_,3,4,"p",27),t.qZA(),t.YNc(18,E,6,4,"div",28),t.qZA()()()()()),2&j){const B=t.oxw().$implicit,$=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(15,A,t.lcZ(2,13,"/admin/homework/mark-exercise/"+B.answer.id+"/"+$.obj.hashId)))("queryParams",t.VKq(17,z,$.backToLink)),t.xp6(2),t.Q6J("ngClass",t.VKq(19,P,B.isNotSubmit||B.mustReSubmit)),t.xp6(3),t.Q6J("linkAvatar",B.avatar)("nameCreateAvatar",B.fullName)("size",30),t.xp6(5),t.Oqu(B.fullName),t.xp6(2),t.Q6J("ngIf",B.isSubmitted),t.xp6(1),t.Q6J("ngIf",B.isNotSubmit),t.xp6(1),t.Q6J("ngIf",B.mustReSubmit),t.xp6(1),t.Q6J("ngIf",B.isMarked),t.xp6(1),t.Q6J("ngIf",null!=B.createdAt),t.xp6(1),t.Q6J("ngIf",B.isMarked||B.isSubmitted)}}function K(j,Q){1&j&&(t.TgZ(0,"p",29),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&j&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_cham")," "))}function y(j,Q){1&j&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&j&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_nop")," "))}function I(j,Q){1&j&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&j&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai")," "))}function e(j,Q){if(1&j&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.qZA()()),2&j){const B=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_diem"),": "),t.xp6(3),t.Oqu(B.point)}}function x(j,Q){if(1&j&&(t.TgZ(0,"p",33),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&j){const B=t.oxw(2).$implicit,$=t.oxw(2);t.xp6(1),t.AsE(" ",$.calculationTime(B.createdAt)," ",t.lcZ(2,2,"lang_auto_truoc")," ")}}function T(j,Q){1&j&&(t.TgZ(0,"div",23)(1,"p",33),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",33),t._uU(5," 0 "),t.qZA()()),2&j&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_so_tep_tin_da_nop"),": "))}function O(j,Q){if(1&j){const B=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"span",18),t._UZ(3,"azt-create-avatar",19),t.qZA(),t.TgZ(4,"div",34),t.NdJ("click",function(){t.CHM(B);const nt=t.oxw().$implicit,tt=t.oxw(2);return t.KtG(tt.goToResultReview(nt))}),t.TgZ(5,"div",21)(6,"span",8)(7,"span",22),t._uU(8),t.qZA()()(),t.TgZ(9,"div",23),t.YNc(10,K,3,3,"p",24),t.YNc(11,y,3,3,"p",25),t.YNc(12,I,3,3,"p",25),t.YNc(13,e,5,4,"p",26),t.YNc(14,x,3,4,"p",27),t.qZA(),t.YNc(15,T,6,3,"div",28),t.qZA()()()}if(2&j){const B=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(11,P,B.isNotSubmit||B.mustReSubmit)),t.xp6(3),t.Q6J("linkAvatar",B.avatar)("nameCreateAvatar",B.fullName)("size",30),t.xp6(5),t.Oqu(B.fullName),t.xp6(2),t.Q6J("ngIf",B.isSubmitted),t.xp6(1),t.Q6J("ngIf",B.isNotSubmit),t.xp6(1),t.Q6J("ngIf",B.mustReSubmit),t.xp6(1),t.Q6J("ngIf",B.isMarked),t.xp6(1),t.Q6J("ngIf",null!=B.createdAt),t.xp6(1),t.Q6J("ngIf",B.isMarked||B.isSubmitted)}}const J=function(j){return{"col-lg-4":j}};function F(j,Q){if(1&j&&(t.TgZ(0,"div",12),t.YNc(1,N,19,21,"div",13),t.YNc(2,O,16,13,"ng-template",null,14,t.W1O),t.qZA()),2&j){const B=Q.$implicit,$=t.MAs(3),nt=t.oxw(2);t.Q6J("ngClass",t.VKq(3,J,nt.isOpenSideNav)),t.xp6(1),t.Q6J("ngIf",B.answer)("ngIfElse",$)}}function V(j,Q){if(1&j&&(t.TgZ(0,"div",9)(1,"div",10),t.YNc(2,F,4,5,"div",11),t.qZA()()),2&j){const B=t.oxw();t.xp6(2),t.Q6J("ngForOf",B.studentLists)}}const M=function(j){return{suppressScrollX:!0,suppressScrollY:j}};let L=(()=>{class j extends i.Q{constructor(B,$){super(B),this.commonService=B,this.timeService=$,this.isSortByTime=!1,this.backToLink="",this.searchKey="",this.studentLists=[],this.isNotTestedYet=!1,this.isOpenSideNav=!0,this.obj={},this.goToResult=new t.vpe}goToResultReview(B){B.isNotSubmit||B.mustReSubmit||this.goToResult.emit(B)}copyLinkHomeWorkToClipboard(){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p th\xe0nh c\xf4ng","")}calculationTime(B,$){return this.timeService.calculationTime(B,$)}}return j.\u0275fac=function(B){return new(B||j)(t.Y36(f.v),t.Y36(a.O))},j.\u0275cmp=t.Xpm({type:j,selectors:[["app-student-homework-result"]],inputs:{isSortByTime:"isSortByTime",backToLink:"backToLink",searchKey:"searchKey",studentLists:"studentLists",isNotTestedYet:"isNotTestedYet",isOpenSideNav:"isOpenSideNav",obj:"obj"},outputs:{goToResult:"goToResult"},features:[t.qOj],decls:5,vars:8,consts:[[1,"box-content","py-2","scrollable-content"],[3,"config","scrollIndicators"],[4,"ngIf"],["class","pt-0 pb-2 px-3 ",4,"ngIf"],[1,"text-center","mt-5"],[1,"h5",2,"color","#333333","font-size","18px!important"],[1,"mt-2","ml-auto","mr-auto","w-60",2,"color","#333333"],[1,"clickable","mt-2","link__color","link__hover",2,"user-select","none",3,"cdkCopyToClipboard","click"],[2,"vertical-align","middle"],[1,"pt-0","pb-2","px-3"],[1,"row","ml-0","mr-0","pl-0","pr-0","mt-2"],["class","col-12 col-sm-12 col-md-4 col-lg-3 mb-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-2",3,"ngClass"],[4,"ngIf","ngIfElse"],["answerIdNull",""],[3,"routerLink","queryParams"],[1,"box-item",3,"ngClass"],[1,"student-item"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"stdinfo"],[1,"stdinfo-fullname"],[2,"vertical-align","middle","color","#333333","font-weight","400","font-size","15px","word-break","break-word"],[1,"d-flex","justify-content-between"],["style","color: #F39C12; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","color: #9F0000; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px; color: #9C9C9C",4,"ngIf"],["class","d-flex justify-content-between",4,"ngIf"],[2,"color","#F39C12","font-size","13px","margin-bottom","2px"],[2,"color","#9F0000","font-size","13px","margin-bottom","2px"],[2,"font-size","13px","margin-bottom","2px"],[3,"mark"],[2,"font-size","13px","margin-bottom","2px","color","#9C9C9C"],[1,"stdinfo",3,"click"]],template:function(B,$){1&B&&(t.TgZ(0,"div",0)(1,"perfect-scrollbar",1),t.ALo(2,"customScrollConfig"),t.YNc(3,h,16,16,"div",2),t.YNc(4,V,3,1,"div",3),t.qZA()()),2&B&&(t.xp6(1),t.Q6J("config",t.VKq(6,M,t.lcZ(2,4,"")))("scrollIndicators",!0),t.xp6(2),t.Q6J("ngIf",$.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",!$.isNotTestedYet))},dependencies:[c.yS,p.mk,p.sg,p.O5,C.i3,g.Hw,v.Vv,o.t,l.B,s.mp,s.bT,s.SJ],styles:[".box-content[_ngcontent-%COMP%]{background:inherit;background-color:#f9f9f9;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e9e9e9;border-radius:5px;box-shadow:none}a[_ngcontent-%COMP%]{color:#000}.disableClick[_ngcontent-%COMP%]{cursor:default!important}.scrollable-content[_ngcontent-%COMP%]{height:calc(100vh - 166px);overflow:hidden}.box-item[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px;cursor:pointer;position:relative}.badge-testing[_ngcontent-%COMP%]{position:absolute;top:0;right:6px;border-radius:4px;padding:0 3px}.student-item[_ngcontent-%COMP%]{display:flex;position:relative}.student-item[_ngcontent-%COMP%]   .enterClsWrap[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .deleteBtn[_ngcontent-%COMP%]{display:flex}.link-stu[_ngcontent-%COMP%]{display:flex;align-items:center}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.stdimg[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:10px}.stdinfo[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto}.menu-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#828282}.create-avatar[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;margin-top:2px;border-radius:50%;width:30px;text-transform:uppercase;height:30px;background:#ddd;text-align:center;padding-top:5px}.link__color[_ngcontent-%COMP%]{color:#2262ae!important}.link__hover[_ngcontent-%COMP%]:hover{color:#0a8f9e!important}@media screen and (max-width: 750px){.scrollable-content[_ngcontent-%COMP%]{min-height:calc(100vh - 170px);height:auto;overflow-y:inherit}.tested_list_container[_ngcontent-%COMP%]{height:auto}}"]}),j})()},85053:(lt,k,S)=>{"use strict";S.d(k,{$:()=>t});var t=(()=>{return(i=t||(t={}))[i.homework=0]="homework",i[i.exam=1]="exam",i[i.classroom=2]="classroom",i[i.student=3]="student",t;var i})()},10731:(lt,k,S)=>{"use strict";S.d(k,{x:()=>t});class t{constructor(){this.answerConfigParse=[],this.questionContentParse=[],this.answerLabelsMockup={}}}},296:(lt,k,S)=>{"use strict";S.d(k,{S:()=>g});var t=S(70655),i=S(10731),f=S(5e3),a=S(35018),c=S(15043),p=S(90893),C=S(20814);let g=(()=>{class v{constructor(l,s,h,u){this.commonService=l,this.cdnService=s,this.customQuestionAnswerConfig=h,this.exportPdfUtilsService=u}processEssayResultToBase64(l){var s,h,u,d,w;return(0,t.mG)(this,void 0,void 0,function*(){for(const r of null!==(s=l.pages)&&void 0!==s?s:[]){if(r.draw){this.cdnService.isViettelCDN(null!==(u=null===(h=l.pages)||void 0===h?void 0:h[0].backgroundImage)&&void 0!==u?u:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500));const _=yield this.exportPdfUtilsService.convertAndRetryToBase64(r.draw);r.draw=_}if(this.cdnService.isViettelCDN(null!==(w=null===(d=l.pages)||void 0===d?void 0:d[0].backgroundImage)&&void 0!==w?w:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500)),r.backgroundImage){const _=yield this.exportPdfUtilsService.convertAndRetryToBase64(r.backgroundImage);r.backgroundImage=_}}if(l.commentEmoji&&l.commentEmoji.length){let r="https://azota889.github.io/storage_public/mnote/",_=l.commentEmoji.length;for(let E=0;E<_;E++){let A=r+l.commentEmoji[E];const z=yield this.exportPdfUtilsService.convertAndRetryToBase64(A);l.commentEmoji[E]=z}}return l})}processGroupImagesToBase64(l,s){var h,u,d;return(0,t.mG)(this,void 0,void 0,function*(){if(l&&(null===(h=null==l?void 0:l[0].name)||void 0===h?void 0:h.startsWith("[PDFv2]")))for(const w of l)if(l[0].questionContentParse&&this.cdnService.isViettelCDN(null!==(u=l[0].questionContentParse[0].groupUrl)&&void 0!==u?u:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500)),w.questionContentParse&&w.questionContentParse[0].groupUrl&&s.includes(null!==(d=w.indexLabel)&&void 0!==d?d:-1)){const r=yield this.exportPdfUtilsService.convertAndRetryToBase64(w.questionContentParse[0].groupUrl);w.questionContentParse[0].groupUrl=r}})}processQuestionImagesToBase64(l){var s,h,u,d;return(0,t.mG)(this,void 0,void 0,function*(){if(1==l[0].isImage)for(const w of l){this.cdnService.isViettelCDN(null!==(h=null===(s=l[0].questionContentParse)||void 0===s?void 0:s[0].url)&&void 0!==h?h:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500));const r=yield this.exportPdfUtilsService.convertAndRetryToBase64(null!==(d=null===(u=w.questionContentParse)||void 0===u?void 0:u[0].url)&&void 0!==d?d:"");w.questionContentParse&&(w.questionContentParse[0].url=r)}})}processQuestionDocxContentToBase64(l){var s,h,u,d;return(0,t.mG)(this,void 0,void 0,function*(){if(0==l[0].isImage)for(const r of l){var w=this.exportPdfUtilsService.findImageSrcInContent(null!==(h=null===(s=r.questionContentParse)||void 0===s?void 0:s[0].content)&&void 0!==h?h:"");if(this.cdnService.isViettelCDN(w)&&(yield this.exportPdfUtilsService.asyncTimeout(500)),w&&!w.includes(";base64")){const _=yield this.exportPdfUtilsService.convertAndRetryToBase64(w);(null===(d=null===(u=r.questionContentParse)||void 0===u?void 0:u[0].content)||void 0===d?void 0:d.includes("img"))&&_&&(r.questionContentParse[0].content=r.questionContentParse[0].content.replace(w,_))}}})}convertAnswersArr(l,s){0!=l.length&&l.forEach(h=>{h.QuestionId&&h.AnswerContent&&h.AnswerContent[0]&&h.AnswerContent[0].Content&&(s[`id_${h.QuestionId}`]=h.AnswerContent[0].Content)})}parseQuestionsFor_PDFv2(l,s){var h,u;let d=this.commonService.castJsonToClassObjs(i.x,JSON.stringify(null===(h=s.data)||void 0===h?void 0:h.questionObjs));l=this.customQuestionAnswerConfig.changeQuestionContent(null!=d?d:[],!0);for(let w=0;w<l.length;w++)l[w].indexLabel=w,l[w].correctAnswer=this.commonService.filterArray(null===(u=s.data)||void 0===u?void 0:u.correctQuestionIds,l[w].id);return l}findScaleDirection(l,s){return l/s>=.7070707070707071?"w":"h"}}return v.\u0275fac=function(l){return new(l||v)(f.LFG(a.v),f.LFG(c.U),f.LFG(p.U),f.LFG(C.V))},v.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},16031:(lt,k,S)=>{"use strict";S.d(k,{I:()=>u});var t=S(70655),i=S(4159),a=S(53583),c=S(17489),C=S(5e3),g=S(296),v=S(20814),o=S(88161);let u=(()=>{class d{constructor(r,_,E){this.exportPdfConvertDataService=r,this.exportPdfUtilsService=_,this.answerTypeService=E,this.totalDraw=1,this.countDraw=0,this.currentPos={top:10,left:10,right:10,bottom:10},this.pdfDoc=new a.jsPDF}get loadPercent(){return Math.floor(this.countDraw/this.totalDraw*100)}resetPosition(r){r&&(this.currentPos={left:parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-left").split("p")[0],10),top:parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-top").split("p")[0],10),right:parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-right").split("p")[0],10),bottom:parseInt(window.getComputedStyle(r,null).getPropertyValue("padding-bottom").split("p")[0],10)})}drawHomeworkNoteBoxOfTeacher(r){return(0,t.mG)(this,void 0,void 0,function*(){let _=document.querySelector(".box-point.display .text-mark");if(r){r.font="25px font_chu_dep",r.fillStyle="#000",_&&r.fillText("\u0110i\u1ec3m",90,this.currentPos.top+20),r.fillText("L\u1eddi ph\xea c\u1ee7a gi\xe1o vi\xean",420,this.currentPos.top+20),this.currentPos.top+=30;let E=document.querySelector(".box-msg .note p");if(E){r.lineWidth=2,r.fillStyle="#000",r.fillRect(this.currentPos.left,this.currentPos.top,r.canvas.width-this.currentPos.left-this.currentPos.right,1);const A=this.currentPos.top;let z=window.getComputedStyle(E,null).getPropertyValue("font"),P=window.getComputedStyle(E,null).getPropertyValue("color"),N=parseInt(z.split(" ")[0].split("p")[0],10);r.font=z;let y=this.exportPdfUtilsService.essayText2LinesArr(E.innerHTML,r,r.canvas.width-60-30-(_?200:0),16,z);this.currentPos.top+=35;const I=Math.round(1.5*N),e=this.currentPos.left+(_?200:0)+15;let x=0,T=200;for(let B=0;B<y.length;B++)for(let $=0;$<y[B].length;$++){const nt=y[B][$];r.font=z,r.fillStyle=P,r.fillText(nt,e,this.currentPos.top),this.currentPos.top+=I,x+=I}let O=document.querySelectorAll(".box-emoji> img"),J=this.currentPos.left+(_?100:0)+15,F=this.currentPos.top,V=78,M=78,L=15;O.forEach(B=>{var $;let nt=new Image;nt.src=null!==($=B.getAttribute("src"))&&void 0!==$?$:"",nt.onload=()=>{J=J+V+L,r.drawImage(nt,J,F,V,M)}});let Q=30+M;if(x>T-Q&&(T=x+Q),r.lineWidth=2,r.fillStyle="#000",r.fillRect(this.currentPos.left,A,1,T),_&&r.fillRect(this.currentPos.left+200,A,1,T),r.fillRect(r.canvas.width-this.currentPos.right,A,1,T),r.fillRect(this.currentPos.left,A+T,r.canvas.width-this.currentPos.right-this.currentPos.left,1),_){let B=_.getBoundingClientRect().width,$=_.getBoundingClientRect().height,nt=window.getComputedStyle(_,null).getPropertyValue("font"),tt=window.getComputedStyle(_,null).getPropertyValue("color");r.font=nt,r.fillStyle=tt,r.fillText(_.textContent?_.textContent:"",this.currentPos.left+100-B/2,A+T/2+$/4)}this.currentPos.top=A+T+20}else{if(r.lineWidth=2,r.rect(this.currentPos.left,this.currentPos.top,r.canvas.width-this.currentPos.left-this.currentPos.right,200),r.stroke(),_&&r.fillRect(this.currentPos.left+200,this.currentPos.top,1,200),_){let A=_.getBoundingClientRect().width,z=_.getBoundingClientRect().height,P=window.getComputedStyle(_,null).getPropertyValue("font"),N=window.getComputedStyle(_,null).getPropertyValue("color");r.font=P,r.fillStyle=N,r.fillText(_.textContent?_.textContent:"",this.currentPos.left+100-A/2,this.currentPos.top+150-z/2)}this.currentPos.top+=220}}})}drawExamTitle(r){if(r){let x=document.querySelector("#mainTitle span"),T=x?window.getComputedStyle(x,null).getPropertyValue("font"):"",O=null==x?void 0:x.getBoundingClientRect().width,J=null==x?void 0:x.getBoundingClientRect().height;var _=null==x?void 0:x.querySelector("img"),E=null==_?void 0:_.getBoundingClientRect().width,A=null==_?void 0:_.getBoundingClientRect().height,z=0;if(x&&x.textContent&&O&&J&&!(_&&E&&A)){var P=(r.canvas.width-O)/2,N=this.currentPos.top+15;r.font=T,r.fillStyle="#000",r.fillText(x.textContent,P,N),z=J+20}else x&&x.textContent&&O&&J&&_&&E&&A&&(P=(r.canvas.width-O)/2,N=this.currentPos.top+20,r.font=T,r.fillStyle="#000",r.fillText(x.textContent,P,N),z=J+40,r.drawImage(_,0,0,E,A,P+(O-E)+5,this.currentPos.top-10,E,A));z>0&&(this.currentPos.top+=z,this.countDraw++)}}drawExamSubTitle(r,_){if(r){let E=document.querySelector(_),A=E?window.getComputedStyle(E,null).getPropertyValue("font"):"",z=parseInt(A.split(" ")[0].split("p")[0],10),P=null==E?void 0:E.getBoundingClientRect().width,N=null==E?void 0:E.getBoundingClientRect().height;if(E&&E.textContent&&P&&N){let K=this.exportPdfUtilsService.drawTextWrap(E.textContent,r,P,16);for(let y=0;y<K.length;y++){const I=K[y];r.font=A,r.fillStyle="#000",r.fillText(I,this.currentPos.left,this.currentPos.top),this.currentPos.top+=1.3*z}this.currentPos.top+="#examName"==_?15:30}}}drawColLeftRightInHeaderOfExam(r){var _;let E=document.getElementById("colLeftInfo"),A=document.getElementById("colRightInfo"),z=E?E.querySelectorAll("h3"):void 0,P=A?A.querySelectorAll("h3"):void 0,N={top:0,left:0,right:0,bottom:0};if(r){if(r.font="16px Arial",z)for(let K=0;K<z.length;K++){0==K&&(N=c.cloneDeep(this.currentPos));const y=z[K];y.textContent&&(r.fillText(null!==(_=y.textContent)&&void 0!==_?_:"",this.currentPos.left,this.currentPos.top),this.currentPos.top+=y.getBoundingClientRect().height+5)}if(P)for(let K=0;K<P.length;K++){const y=P[K];y.textContent&&(r.fillText(y.textContent,r.canvas.width-this.currentPos.right-y.getBoundingClientRect().width,N.top),N.top+=y.getBoundingClientRect().height+5)}}}drawHorizonLineOfExam(r){this.currentPos.top=this.currentPos.top+10,r&&(r.fillStyle="#999",r.fillRect(this.currentPos.left,this.currentPos.top,r.canvas.width-this.currentPos.left-this.currentPos.right,2),this.currentPos.top+=10,this.countDraw++)}drawHeaderImageOfExam(r){let _=document.querySelector("#examHeader img");if(_&&r){let E=_.naturalWidth,A=_.naturalHeight,z=r.canvas.width-this.currentPos.left-this.currentPos.right,P=z*A/E;r.drawImage(_,0,0,E,A,this.currentPos.left,this.currentPos.top,z,P),this.currentPos.top+=P+20,this.countDraw++}}drawQuestionObjsInPdf(r,_,E){var A;if(r){let z=_.filter(P=>1==P.isImage);for(let P=0;P<z.length;P++){let N=z[P],K=null===(A=document.getElementById("question_item_box_"+N.id))||void 0===A?void 0:A.getBoundingClientRect().height;K&&K<r.canvas.height-this.currentPos.bottom-this.currentPos.top||(this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,r.canvas.toDataURL("image/jpeg",.8)),this.pdfDoc.addPage(),this.exportPdfUtilsService.eraseCanvas(r),this.resetPosition(E)),this.drawSinglePdfQuestion(r,E,N)}}}drawEssayOrDocxQuestionInCanvas(r,_){return(0,t.mG)(this,void 0,void 0,function*(){if(r){let E=document.querySelectorAll(".__canvas_render_item");if(E.length>0){let A=[];for(let z=0;z<E.length;z++)A.push(z);for(const z of A){const P=yield i(E[z]),N=r.canvas.width-this.currentPos.left-this.currentPos.right,K=N*P.height/P.width;if(K<=r.canvas.height-this.currentPos.bottom-this.currentPos.top)this.drawSingleDocxQuestionInCanvas(r,P,N,K);else if(this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,r.canvas.toDataURL("image/jpeg",.8)),this.pdfDoc.addPage(),this.exportPdfUtilsService.eraseCanvas(r),this.resetPosition(_),"h"==this.exportPdfConvertDataService.findScaleDirection(P.width,P.height)){const y=r.canvas.height-10-10,I=y*P.width/P.height;this.drawSingleDocxQuestionInCanvas(r,P,N,K,(r.canvas.width-I)/2,10,I,y)}else this.drawSingleDocxQuestionInCanvas(r,P,N,K)}this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,r.canvas.toDataURL("image/jpeg",.8))}else this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,r.canvas.toDataURL("image/jpeg",.8))}})}convertEssayBoxes2Canvas(r,_,E,A){return(0,t.mG)(this,void 0,void 0,function*(){let z=[];for(let P=0;P<r.length;P++)z.push(P);for(const P of z){const N=yield i(r[P]);if(0==P&&_){const I=(_.canvas.width-50-50)*N.height/N.width;A&&I>_.canvas.height-50-this.currentPos.top&&(this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,_.canvas.toDataURL("image/jpeg",1)),this.exportPdfUtilsService.eraseCanvas(_),this.resetPosition(E),this.pdfDoc.addPage()),this.addEssayImage(_,r,N,P)}else this.exportPdfUtilsService.eraseCanvas(_),this.resetPosition(E),this.addEssayImage(_,r,N,P)}})}drawEssayIframeContent(r,_,E){return(0,t.mG)(this,void 0,void 0,function*(){let A=document.querySelectorAll(".essayPdfImage");if(A.length>0&&r){E||(this.exportPdfUtilsService.eraseCanvas(r),this.resetPosition(_),this.pdfDoc.addPage());let z=document.querySelector("#essayPdfTitle span");r&&z&&z.textContent&&(r.font="18px Georgia",r.fillStyle="#333",r.fillText(z.textContent,(r.canvas.width-z.getBoundingClientRect().width)/2,this.currentPos.top+20),this.currentPos.top+=z.getBoundingClientRect().height+20),yield this.convertEssayBoxes2Canvas(A,r,_,E)}})}addEssayImage(r,_,E,A){if(r){if("w"==this.exportPdfConvertDataService.findScaleDirection(E.width,E.height))r.drawImage(E,0,0,E.width,E.height,50,this.currentPos.top+50,r.canvas.width-100,(r.canvas.width-100)*E.height/E.width);else{let z=r.canvas.height-this.currentPos.top-this.currentPos.bottom,P=z*E.width/E.height;r.drawImage(E,0,0,E.width,E.height,(r.canvas.width-P)/2,this.currentPos.top,P,z)}console.log(`[_Essay_image_] V\u1ebd \u1ea3nh t\u1ef1 lu\u1eadn s\u1ed1 ${A+1}`),this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,r.canvas.toDataURL("image/jpeg",1)),this.countDraw++,A!=_.length-1&&this.pdfDoc.addPage()}}drawSinglePdfQuestion(r,_,E){let A=document.getElementById("question_item_box_"+E.id);if(1==E.isImage&&A&&r){let e=A.querySelector(".image_group img");if(e){let T=e.naturalWidth,O=e.naturalHeight,J=r.canvas.width-this.currentPos.left-this.currentPos.right,F=J*O/T;this.currentPos.top+F<r.canvas.height-this.currentPos.bottom&&(r.drawImage(e,0,0,T,O,this.currentPos.left,this.currentPos.top,J,F),this.currentPos.top+=F+15)}let x=A.querySelector(".questionId_"+E.id);if(x){let T=x.naturalWidth,O=x.naturalHeight,J=r.canvas.width-this.currentPos.left-this.currentPos.right,F=J*O/T;r.drawImage(x,0,0,T,O,this.currentPos.left,this.currentPos.top,J,F),this.currentPos.top+=F+15}}A&&this.drawOfflineQuestionContent(r,A);let z,P=null==A?void 0:A.querySelectorAll(".answer-box");z=P?P[P.length-1]:z;let N="red",K=300;if(z&&(N=window.getComputedStyle(z,null).getPropertyValue("border-color"),K=z.getBoundingClientRect().width),r&&this.answerTypeService.isOneChoiceAnswer(E.answerType)){let e=r.canvas.width-this.currentPos.right-K;r.beginPath(),r.lineWidth=1,r.strokeStyle=N,r.rect(e,this.currentPos.top,K,46),r.stroke(),this.currentPos.top+=56}r&&!this.answerTypeService.isOneChoiceAnswer(E.answerType)&&(this.currentPos.top+=40,this.currentPos.left=30,this.drawRightAnswerForPdfQuestion(r,A,K,this.currentPos.left));let y=null==z?void 0:z.querySelectorAll(".label-item");if(r&&y&&y.length>0){let e=r.canvas.width-this.currentPos.right-30;for(let x=y.length-1;x>=0;x--){const T=y[x],O=T.querySelector("span"),J=T.querySelector(".rightIcon"),F=T.querySelector(".wrongIcon");O&&O.textContent&&(r.font="18px Arial",r.fillStyle="#000",r.fillText(O.textContent,e,this.currentPos.top-28)),J&&r.fillText("\u2705",e-20,this.currentPos.top-28),F&&r.fillText("\u274c",e-20,this.currentPos.top-28),O&&(e-=65+O.getBoundingClientRect().width)}}else{let e=null==A?void 0:A.querySelector(".answer-box");if(r){const x=Math.round(22.4),T=30,O=r.canvas.width-2*T;let J=document.createElement("TEXTAREA"),F=e?"":"Th\xed sinh kh\xf4ng nh\u1eadp th\xf4ng tin";J&&e&&(J.innerHTML=filterXSS(e.innerHTML),F=J.value),F=F.replace(/<\/?[^>]+(>|$)/g,"");let V=this.exportPdfUtilsService.essayText2LinesArr(F,r,O,16);this.currentPos.top+=10;for(let M=0;M<V.length;M++){V[M].length*x>r.canvas.height-this.currentPos.bottom-this.currentPos.top&&(this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,r.canvas.toDataURL("image/jpeg")),this.pdfDoc.addPage(),this.exportPdfUtilsService.eraseCanvas(r),this.resetPosition(_));for(let j=0;j<V[M].length;j++){const Q=V[M][j];r.fillStyle="#333",r.fillText(Q,T,this.currentPos.top),this.currentPos.top+=x}this.currentPos.top+=20}}}this.answerTypeService.isOneChoiceAnswer(E.answerType)&&this.drawRightAnswerForPdfQuestion(r,A,K);let I=null==A?void 0:A.querySelector("._essayMarkInfo");r&&I&&I.textContent&&(r.fillStyle="#000",r.fillText(I.textContent,30,this.currentPos.top),this.currentPos.top+=50),this.countDraw++}drawRightAnswerForPdfQuestion(r,_,E,A){if(_){let z=_.querySelector(".keyText");if(r&&z&&z.textContent){let P=window.getComputedStyle(z,null).getPropertyValue("color");r.font="18px Arial",r.fillStyle=P,r.fillText(z.textContent,A||r.canvas.width-this.currentPos.right-E-z.getBoundingClientRect().width-30,this.currentPos.top-28)}}}drawSingleDocxQuestionInCanvas(r,_,E,A,z,P,N,K){r.drawImage(_,0,0,_.width,_.height,z||this.currentPos.left,P||this.currentPos.top,N||E,K||A),this.currentPos.top+=A+10,this.countDraw++}drawOfflineQuestionContent(r,_){var E;let A=_.querySelector(".question-offline-title");if(A){let P=A.getBoundingClientRect().width,N=A.getBoundingClientRect().height,K=window.getComputedStyle(A,null).getPropertyValue("font");r&&A&&A.textContent&&P&&N&&(r.font=K,r.fillStyle="#000",r.fillText(A.textContent,(r.canvas.width-P)/2,this.currentPos.top+15),this.currentPos.top+=N+30,this.countDraw++)}var z=_.querySelector(".question-offline-answer");if(z){let P=null!==(E=null==A?void 0:A.getBoundingClientRect().width)&&void 0!==E?E:0,N=z.getBoundingClientRect().width,K=z.getBoundingClientRect().height,y=window.getComputedStyle(z,null).getPropertyValue("font");if(r&&z&&z.textContent&&N&&K){r.font=y,r.fillStyle="#000";let I=0;z.textContent.split(".").forEach(e=>{r.fillText(e+=".",(r.canvas.width-P)/2+I,this.currentPos.top+5),I+=90}),this.currentPos.top+=K+10,this.countDraw++}}}examToPdf(r,_,E){return(0,t.mG)(this,void 0,void 0,function*(){this.countDraw=0,this.totalDraw=3+document.querySelectorAll("#examHeader").length+document.querySelectorAll("azt-question-item").length+document.querySelectorAll(".essayPdfImage").length,this.pdfDoc=new a.jsPDF;let A=document.createElement("canvas"),z=document.getElementById("multipleChoiceWrap");if(z){let K=z.getBoundingClientRect().width;A.width=K,A.height=297*K/210}let P=A.getContext("2d");return this.exportPdfUtilsService.eraseCanvas(P),z&&this.resetPosition(z),this.drawExamTitle(P),this.drawExamSubTitle(P,"#examName"),this.drawExamSubTitle(P,"#className"),this.drawColLeftRightInHeaderOfExam(P),this.drawHorizonLineOfExam(P),this.drawHeaderImageOfExam(P),z&&(this.drawQuestionObjsInPdf(P,r,z),yield this.drawEssayOrDocxQuestionInCanvas(P,z),yield this.drawEssayIframeContent(P,z)),this.countDraw=this.totalDraw,yield this.exportPdfUtilsService.asyncTimeout(1e3),"class"==_?this.pdfDoc.output("blob"):(this.pdfDoc.save(E||"test_result.pdf"),!0)})}homeworkToPdf(){return(0,t.mG)(this,void 0,void 0,function*(){this.pdfDoc=new a.jsPDF;let r=document.createElement("canvas"),_=document.getElementById("multipleChoiceWrap");if(_){let z=_.getBoundingClientRect().width;r.width=z,r.height=297*z/210}let E=r.getContext("2d");return this.exportPdfUtilsService.eraseCanvas(E),_&&this.resetPosition(_),this.drawExamTitle(E),this.drawColLeftRightInHeaderOfExam(E),yield this.drawHomeworkNoteBoxOfTeacher(E),_&&(yield this.drawEssayIframeContent(E,_,!0)),this.pdfDoc.output("blob")})}}return d.\u0275fac=function(r){return new(r||d)(C.LFG(g.S),C.LFG(v.V),C.LFG(o.T))},d.\u0275prov=C.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},20814:(lt,k,S)=>{"use strict";S.d(k,{V:()=>C});var t=S(70655),i=S(5e3),f=S(35018),a=S(15043),c=S(88161),p=(()=>{return(g=p||(p={}))[g.Cdn=0]="Cdn",g[g.CdnTimestamp=1]="CdnTimestamp",g[g.Rawlink=2]="Rawlink",g[g.RawlinkTimestamp=3]="RawlinkTimestamp",p;var g})();let C=(()=>{class g{constructor(o,l,s){this.commonService=o,this.cdnService=l,this.answerTypeService=s}isSupportedBrowswer(){var u,h,d;let l=(h=navigator.userAgent,d=h.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(d[1])?"IE "+((u=/\brv[ :]+(\d+)/g.exec(h)||[])[1]||""):"Chrome"===d[1]&&null!=(u=h.match(/\b(OPR|Edge)\/(\d+)/))?u.slice(1).join(" ").replace("OPR","Opera"):(d=d[2]?[d[1],d[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(u=h.match(/version\/(\d+)/i))&&d.splice(1,1,u[1]),d.join(" "))).toString();return!(!["chrome"].includes(l.split(" ")[0].toLowerCase())||parseInt(l.split(" ")[1],10)<80)}getExtensionFile(o){if(!o)return"";var l=o.split(".");return l.length<=1?"":l[l.length-1].toLocaleLowerCase().split("_")[0]}translateMetaTitle(o){var l,s,h,u;let d="Export PDF: ";this.commonService.translateMetaData({title:d+(null===(s=null===(l=o.data)||void 0===l?void 0:l.examObj)||void 0===s?void 0:s.name),description:d+(null===(u=null===(h=o.data)||void 0===h?void 0:h.examObj)||void 0===u?void 0:u.name),image:"lang_cms_test_image"})}findImageSrcInContent(o){var l="";if(o.includes("img")){var s=o.indexOf("img"),h=o.indexOf("src=",s),u=o.indexOf('"',Number(h)+5);l=o.substring(Number(h)+5,Number(u))}return l}asyncTimeout(o){return(0,t.mG)(this,void 0,void 0,function*(){return`Waited ${yield new Promise(s=>{setTimeout(()=>s(o),o)})} miliseconds`})}parseEssayMarkResult(o,l,s){var h;let u=o.filter(r=>this.answerTypeService.isEssayAnswer(r.answerType));if(0!=u.length){if(l&&l.essayResult){var d=this.commonService.willDeleteParseJson(l.essayResult);if(d){var w=Object.entries(d);for(let r=0;r<u.length;r++)u[r].essayMarkParsed=w[r][1]}}for(let r=0;r<u.length;r++){let _=u[r].id,E=s.filter(z=>z.questionId==_)[0],A=this.commonService.willDeleteParseJson(null!==(h=E.config)&&void 0!==h?h:"");u[r].scorePerQuestion=A?Number(A.ScorePerQuestion):0}}}convertToBase64(o,l){return(0,t.mG)(this,void 0,void 0,function*(){let s=o;switch(l){case p.Cdn:s=this.cdnService.getMyCdn(o);break;case p.CdnTimestamp:s=this.cdnService.getMyCdn(o)+"?t="+Date.now();break;case p.RawlinkTimestamp:s=o+"?t="+Date.now()}const u=yield(yield fetch(s)).blob(),d=yield new Promise(w=>{const r=new FileReader;r.readAsDataURL(u),r.onloadend=()=>{w(r.result)}});return d&&"string"==typeof d?d:(console.log("kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh chu\u1ed7i base64: "+o),o)})}convertAndRetryToBase64(o){return(0,t.mG)(this,void 0,void 0,function*(){let l=this.getExtensionFile(o);if(["pdf","jpg","jpeg","png","gif"].includes(l)){let s;const h=[p.Cdn,p.CdnTimestamp,p.Rawlink,p.RawlinkTimestamp];if(this.cdnService.isViettelCDN(o)){console.log(">>>> YAAAAAA, \u0111\xe2y l\xe0 link Viettel, qu\xe1 tr\xecnh convert c\xf3 th\u1ec3 l\xe2u h\u01a1n b\xecnh th\u01b0\u1eddng, v\xec ph\u1ea3i convert tu\u1ea7n t\u1ef1 sau m\u1ed7i 0.5 gi\xe2y");try{s=yield this.convertToBase64(o,h[0])}catch(u){try{yield this.asyncTimeout(500),s=yield this.convertToBase64(o,h[1])}catch(d){console.log("Kh\xf4ng th\u1ec3 convert url VIETTEL n\xe0y th\xe0nh base64 sau 2 l\u1ea7n th\u1eed: "+o),s=o}}}else try{s=yield this.convertToBase64(o,h[0])}catch(u){try{s=yield this.convertToBase64(o,h[1])}catch(d){try{s=yield this.convertToBase64(o,h[2])}catch(w){try{s=yield this.convertToBase64(o,h[3])}catch(r){console.log("Kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh base64 sau v\xe0i l\u1ea7n retry: "+o),s=o}}}}return s}return console.log("\u0110\u1ecbnh d\u1ea1ng file kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3: "+o),o})}eraseCanvas(o){o&&(o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.fillStyle="white",o.fill())}addContentToPdf(o,l){o.addImage(l,"JPEG",0,0,o.internal.pageSize.getWidth(),o.internal.pageSize.getHeight())}drawTextWrap(o,l,s,h,u){let d=o.split(" "),w=[],r=d[0];if(l){l.font=u||`${h}px Arial`;for(let _=1;_<d.length;_++){let E=d[_];l.measureText(r+" "+E).width<s?r+=" "+E:(w.push(r),r=E)}w.push(r)}return w}essayText2LinesArr(o,l,s,h,u){var d;let w=new RegExp("(<br>|<br/>)+","igm"),_=(null!==(d=this.commonService.replaceAllByRegExp(o,w,"<br>"))&&void 0!==d?d:"").split("<br>"),E=[];for(let A=0;A<_.length;A++)E.push(this.drawTextWrap(_[A],l,s,h,u));return E}}return g.\u0275fac=function(o){return new(o||g)(i.LFG(f.v),i.LFG(a.U),i.LFG(c.T))},g.\u0275prov=i.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},91153:(lt,k,S)=>{"use strict";S.d(k,{Y:()=>f});var t=S(5e3),i=S(34782);let f=(()=>{class a{constructor(p){this.browserStorageService=p,this.global_data_filter={}}getCustomFilter(p,C){let g="";switch(p){case"exam":g="saveFilterExam_"+C;break;case"homework":g="saveFilterHomework_"+C}return this.global_data_filter[g]}setCustomFilter(p,C,g){let v="";switch(C){case"exam":v="saveFilterExam_"+g,this.global_data_filter[v]="",p.isMarked&&(this.global_data_filter[v]+="isMarked "),p.isNotMarked&&(this.global_data_filter[v]+="isNotMarked "),p.isOnTest&&(this.global_data_filter[v]+="isOnTest "),p.isNotTested&&(this.global_data_filter[v]+="isNotTested ");break;case"homework":v="saveFilterHomework_"+g,this.global_data_filter[v]="",p.isMarked&&(this.global_data_filter[v]+="isMarked "),p.isSubmitted&&(this.global_data_filter[v]+="isSubmitted "),p.isNotSubmit&&(this.global_data_filter[v]+="isNotSubmit "),p.mustReSubmit&&(this.global_data_filter[v]+="mustReSubmit ")}}removeCustomFilter(p,C){let g="";switch(p){case"exam":g="saveFilterExam_"+C,this.global_data_filter[g]="";break;case"homework":g="saveFilterHomework_"+C,this.global_data_filter[g]=""}}getStatusSideNav(p){var C;return null!==(C=this.browserStorageService.getSimpleStorage("statusSideNav_"+p))&&void 0!==C?C:""}removeStatusSideNav(p){this.browserStorageService.removeSimpleStorage("statusSideNav_"+p)}saveStatusSideNav(p,C){this.browserStorageService.saveSimpleStorage("statusSideNav_"+p,C?"open":"close")}}return a.\u0275fac=function(p){return new(p||a)(t.LFG(i.z))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},61447:(lt,k,S)=>{"use strict";S.d(k,{c:()=>t});let t=(()=>{class i{static checkboxValidator(a){const c=a.get("whoAllow"),p=a.get("classroomIds");return c&&p?2==(null==c?void 0:c.value)&&i.countTrueValue(p.value)<1?(null==p||p.setErrors({checkboxValidator:!0}),{identityRevealed:!0}):(null==p||p.setErrors(null),null):(console.log("not found control"),null)}static countTrueValue(a){for(var c=0,p=0;p<a.length;p++)a[p]&&(c+=1);return c}}return i.checkboxValidatorWithoutWhoAllow=f=>{const a=f.get("classroomIds");return a?i.countTrueValue(a.value)<1?(null==a||a.setErrors({checkboxValidatorWithoutWhoAllow:!0}),{identityRevealed:!0}):(null==a||a.setErrors(null),null):null},i})()},38720:(lt,k,S)=>{"use strict";S.d(k,{s:()=>s});var t=S(93075),i=S(48966),f=S(55330),a=S(41303),c=S(5e3),p=S(51930),C=S(35018),g=S(69808),v=S(47423),o=S(39453);function l(h,u){1&h&&(c.TgZ(0,"div",17)(1,"small",18),c._uU(2),c.ALo(3,"mytranslate"),c.qZA()()),2&h&&(c.xp6(2),c.hij(" *** ",c.lcZ(3,1,"lang_student_classroom_list_utils_create_class_request_enter_class")," "))}let s=(()=>{class h extends f.Q{constructor(d,w,r,_,E){super(r),this.fb=d,this.classGroupService=w,this.commonService=r,this.dialogRef=_,this.data=E,this.form=new t.cw({})}btnCloseDialog(){this.dialogRef.close()}saveClass(){if(this.form.invalid||this.statusObj.loading)this.showErrorSnack("lang_auto_vui_long_dien_day_du_thong_tin");else{this.initStatusObj();let d=(new Date).getFullYear(),r={className:this.commonService.getFormObj(this.form).className,year:`${d} - ${d+1}`};this.classGroupService.apiClassGroupCreateClassWithGroupPost(r).subscribe(_=>{1==_.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_tao_thanh_cong_lop_hoc"),this.data.noReload||window.location.reload(),this.dialogRef.close()):(this.stopStatusObj(),this.showErrorSnack("lang_auto_tao_lop_hoc_khong_thanh_cong_vui_long_kiem_tra_lai_du_lieu"))})}}ngOnInit(){this.form=this.fb.group({className:new t.NI("",[t.kI.required,a._.noWhiteSpace])}),super.ngOnInit()}}return h.\u0275fac=function(d){return new(d||h)(c.Y36(t.qu),c.Y36(p.VZ),c.Y36(C.v),c.Y36(i.so,8),c.Y36(i.WI))},h.\u0275cmp=c.Xpm({type:h,selectors:[["create-classroom"]],features:[c.qOj],decls:25,vars:15,consts:[[1,"app"],[1,"app-head"],[1,"app-title"],[1,"app-body"],[3,"formGroup"],[1,"container-fluid"],[1,"row","setting-item"],[1,"col-5","setting-label"],[1,"p-0","m-0"],[1,"col-7","pl-0","pr-0"],["type","text","formControlName","className",1,"form-control","setting-input"],["class","col-12 pl-0 mt-1 text-left",4,"ngIf"],[1,"d-flex","float-right","mt-3"],[1,"azt-block-button"],["mat-raised-button","",1,"btn-close","btn-width",3,"click"],[1,"azt-block-button","ml-3"],["mat-raised-button","",1,"btn-azt-primary","btn-width",3,"disabled","click"],[1,"col-12","pl-0","mt-1","text-left"],[1,"text-left","text-danger"]],template:function(d,w){1&d&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),c._uU(3),c.ALo(4,"mytranslate"),c.qZA()(),c.TgZ(5,"div",3)(6,"form",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"p",8),c._uU(11),c.ALo(12,"mytranslate"),c.qZA()(),c.TgZ(13,"div",9),c._UZ(14,"input",10),c.qZA(),c.YNc(15,l,4,3,"div",11),c.qZA()()()(),c.TgZ(16,"div",12)(17,"div",13)(18,"button",14),c.NdJ("click",function(){return w.btnCloseDialog()}),c._uU(19),c.ALo(20,"mytranslate"),c.qZA()(),c.TgZ(21,"div",15)(22,"button",16),c.NdJ("click",function(){return w.saveClass()}),c._uU(23),c.ALo(24,"mytranslate"),c.qZA()()()()),2&d&&(c.xp6(3),c.hij(" ",c.lcZ(4,7,"lang_auto_tao_lop")," "),c.xp6(3),c.Q6J("formGroup",w.form),c.xp6(5),c.hij(" ",c.lcZ(12,9,"lang_auto_ten_lop")," "),c.xp6(4),c.Q6J("ngIf",w.form.controls.className.dirty&&w.form.controls.className.errors),c.xp6(4),c.Oqu(c.lcZ(20,11,"lang_auto_dong")),c.xp6(3),c.Q6J("disabled",w.form.invalid),c.xp6(1),c.Oqu(c.lcZ(24,13,"lang_auto_luu")))},dependencies:[g.O5,v.lW,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,o.bT],styles:[".app[_ngcontent-%COMP%]{max-width:500px;width:500px}.app-title[_ngcontent-%COMP%]{font-weight:500}.setting-input[_ngcontent-%COMP%]{height:100%;border-left:0px;border-top-left-radius:0;border-bottom-left-radius:0}.setting-label[_ngcontent-%COMP%]{padding:16px;align-self:center;line-height:1.5;color:#495057;background-color:#e9ecef;border:1px solid #ced4da;border-bottom-left-radius:5px;border-top-left-radius:5px;text-align:right}  .mat-checkbox-layout .mat-checkbox-label{font-weight:500}.custom-mix-question-height[_ngcontent-%COMP%]{height:160px}.custom-invalid-mix-form[_ngcontent-%COMP%]{border-color:#dc3545}.custom-mix-group-question[_ngcontent-%COMP%]{background-color:#e9ecef;padding-left:0!important;padding-right:0!important;margin-left:0!important;margin-right:0!important;padding-bottom:0!important;border:1px solid #ced4da;border-radius:.25rem}.test-config__formMixQuestion[_ngcontent-%COMP%]{border:none;border-left:1px solid #ced4da}.no-border[_ngcontent-%COMP%]{border:none}.btn-offline[_ngcontent-%COMP%]{background:#ec9b00;color:#fff;transition:all .5s}.btn-offline[_ngcontent-%COMP%]:hover{background:#c8860b}.custom-select[_ngcontent-%COMP%]{height:100%;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.custom-select-md[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.25rem}.btn-width[_ngcontent-%COMP%]{width:140px}.paddingCustom[_ngcontent-%COMP%]{padding:143px .75rem}.classroom_list[_ngcontent-%COMP%]{height:220px;white-space:nowrap;padding-left:2px;overflow:hidden}.badge-info[_ngcontent-%COMP%]{color:#fff;background-color:#2361ae}.setting-block-mix[_ngcontent-%COMP%]{height:125px;overflow:hidden}.btn-width[_ngcontent-%COMP%]{width:80px}@media screen and (max-width: 768px){.app[_ngcontent-%COMP%]{width:auto}}"]}),h})()},25650:lt=>{lt.exports=function k(S,t,i){function f(p,C){if(!t[p]){if(!S[p]){if(a)return a(p,!0);var v=new Error("Cannot find module '"+p+"'");throw v.code="MODULE_NOT_FOUND",v}var o=t[p]={exports:{}};S[p][0].call(o.exports,function(l){return f(S[p][1][l]||l)},o,o.exports,k,S,t,i)}return t[p].exports}for(var a=void 0,c=0;c<i.length;c++)f(i[c]);return f}({1:[function(k,S,t){"use strict";var i=k("./utils"),f=k("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(c){for(var p,C,g,o,l,s,h=[],u=0,d=c.length,w=d,r="string"!==i.getTypeOf(c);u<c.length;)w=d-u,g=r?(p=c[u++],C=u<d?c[u++]:0,u<d?c[u++]:0):(p=c.charCodeAt(u++),C=u<d?c.charCodeAt(u++):0,u<d?c.charCodeAt(u++):0),o=(3&p)<<4|C>>4,l=1<w?(15&C)<<2|g>>6:64,s=2<w?63&g:64,h.push(a.charAt(p>>2)+a.charAt(o)+a.charAt(l)+a.charAt(s));return h.join("")},t.decode=function(c){var p,C,g,v,o,l,s=0,h=0,u="data:";if(c.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var d,w=3*(c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&w--,c.charAt(c.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=f.uint8array?new Uint8Array(0|w):new Array(0|w);s<c.length;)p=a.indexOf(c.charAt(s++))<<2|(v=a.indexOf(c.charAt(s++)))>>4,C=(15&v)<<4|(o=a.indexOf(c.charAt(s++)))>>2,g=(3&o)<<6|(l=a.indexOf(c.charAt(s++))),d[h++]=p,64!==o&&(d[h++]=C),64!==l&&(d[h++]=g);return d}},{"./support":30,"./utils":32}],2:[function(k,S,t){"use strict";var i=k("./external"),f=k("./stream/DataWorker"),a=k("./stream/Crc32Probe"),c=k("./stream/DataLengthProbe");function p(C,g,v,o,l){this.compressedSize=C,this.uncompressedSize=g,this.crc32=v,this.compression=o,this.compressedContent=l}p.prototype={getContentWorker:function(){var C=new f(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),g=this;return C.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),C},getCompressedWorker:function(){return new f(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(C,g,v){return C.pipe(new a).pipe(new c("uncompressedSize")).pipe(g.compressWorker(v)).pipe(new c("compressedSize")).withStreamInfo("compression",g)},S.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(k,S,t){"use strict";var i=k("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(f){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},t.DEFLATE=k("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(k,S,t){"use strict";var i=k("./utils"),f=function(){for(var a,c=[],p=0;p<256;p++){a=p;for(var C=0;C<8;C++)a=1&a?3988292384^a>>>1:a>>>1;c[p]=a}return c}();S.exports=function(a,c){return void 0!==a&&a.length?"string"!==i.getTypeOf(a)?function(p,C,g,v){var o=f,l=0+g;p^=-1;for(var s=0;s<l;s++)p=p>>>8^o[255&(p^C[s])];return-1^p}(0|c,a,a.length):function(p,C,g,v){var o=f,l=0+g;p^=-1;for(var s=0;s<l;s++)p=p>>>8^o[255&(p^C.charCodeAt(s))];return-1^p}(0|c,a,a.length):0}},{"./utils":32}],5:[function(k,S,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(k,S,t){"use strict";var i;i="undefined"!=typeof Promise?Promise:k("lie"),S.exports={Promise:i}},{lie:37}],7:[function(k,S,t){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,f=k("pako"),a=k("./utils"),c=k("./stream/GenericWorker"),p=i?"uint8array":"array";function C(g,v){c.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=v,this.meta={}}t.magic="\b\0",a.inherits(C,c),C.prototype.processChunk=function(g){this.meta=g.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(p,g.data),!1)},C.prototype.flush=function(){c.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},C.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},C.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(v){g.push({data:v,meta:g.meta})}},t.compressWorker=function(g){return new C("Deflate",g)},t.uncompressWorker=function(){return new C("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(k,S,t){"use strict";function i(o,l){var s,h="";for(s=0;s<l;s++)h+=String.fromCharCode(255&o),o>>>=8;return h}function f(o,l,s,h,u,d){var w,r,_=o.file,E=o.compression,A=d!==p.utf8encode,z=a.transformTo("string",d(_.name)),P=a.transformTo("string",p.utf8encode(_.name)),N=_.comment,K=a.transformTo("string",d(N)),y=a.transformTo("string",p.utf8encode(N)),I=P.length!==_.name.length,e=y.length!==N.length,x="",T="",O="",J=_.dir,F=_.date,V={crc32:0,compressedSize:0,uncompressedSize:0};l&&!s||(V.crc32=o.crc32,V.compressedSize=o.compressedSize,V.uncompressedSize=o.uncompressedSize);var M=0;l&&(M|=8),A||!I&&!e||(M|=2048);var B,nt,L=0,j=0;J&&(L|=16),"UNIX"===u?(j=798,L|=(nt=B=_.unixPermissions,B||(nt=J?16893:33204),(65535&nt)<<16)):(j=20,L|=function(B){return 63&(B||0)}(_.dosPermissions)),w=F.getUTCHours(),w<<=6,w|=F.getUTCMinutes(),w<<=5,w|=F.getUTCSeconds()/2,r=F.getUTCFullYear()-1980,r<<=4,r|=F.getUTCMonth()+1,r<<=5,r|=F.getUTCDate(),I&&(T=i(1,1)+i(C(z),4)+P,x+="up"+i(T.length,2)+T),e&&(O=i(1,1)+i(C(K),4)+y,x+="uc"+i(O.length,2)+O);var Q="";return Q+="\n\0",Q+=i(M,2),Q+=E.magic,Q+=i(w,2),Q+=i(r,2),Q+=i(V.crc32,4),Q+=i(V.compressedSize,4),Q+=i(V.uncompressedSize,4),Q+=i(z.length,2),Q+=i(x.length,2),{fileRecord:g.LOCAL_FILE_HEADER+Q+z+x,dirRecord:g.CENTRAL_FILE_HEADER+i(j,2)+Q+i(K.length,2)+"\0\0\0\0"+i(L,4)+i(h,4)+z+x+K}}var a=k("../utils"),c=k("../stream/GenericWorker"),p=k("../utf8"),C=k("../crc32"),g=k("../signature");function v(o,l,s,h){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=l,this.zipPlatform=s,this.encodeFileName=h,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(v,c),v.prototype.push=function(o){var l=o.meta.percent||0,s=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,c.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:s?(l+100*(s-h-1))/s:100}}))},v.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var l=this.streamFiles&&!o.file.dir;if(l){var s=f(o,l,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:s.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(o){this.accumulate=!1;var h,l=this.streamFiles&&!o.file.dir,s=f(o,l,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),l)this.push({data:(h=o,g.DATA_DESCRIPTOR+i(h.crc32,4)+i(h.compressedSize,4)+i(h.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var o=this.bytesWritten,l=0;l<this.dirRecords.length;l++)this.push({data:this.dirRecords[l],meta:{percent:100}});var u,d,w,E,h=(u=this.dirRecords.length,d=this.bytesWritten-o,w=o,E=a.transformTo("string",(0,this.encodeFileName)(this.zipComment)),g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(u,2)+i(u,2)+i(d,4)+i(w,4)+i(E.length,2)+E);this.push({data:h,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(o){this._sources.push(o);var l=this;return o.on("data",function(s){l.processChunk(s)}),o.on("end",function(){l.closedSource(l.previous.streamInfo),l._sources.length?l.prepareNextSource():l.end()}),o.on("error",function(s){l.error(s)}),this},v.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(o){var l=this._sources;if(!c.prototype.error.call(this,o))return!1;for(var s=0;s<l.length;s++)try{l[s].error(o)}catch(h){}return!0},v.prototype.lock=function(){c.prototype.lock.call(this);for(var o=this._sources,l=0;l<o.length;l++)o[l].lock()},S.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(k,S,t){"use strict";var i=k("../compressions"),f=k("./ZipFileWorker");t.generateWorker=function(a,c,p){var C=new f(c.streamFiles,p,c.platform,c.encodeFileName),g=0;try{a.forEach(function(v,o){g++;var l=function(d,w){var r=d||w,_=i[r];if(!_)throw new Error(r+" is not a valid compression method !");return _}(o.options.compression,c.compression),h=o.dir,u=o.date;o._compressWorker(l,o.options.compressionOptions||c.compressionOptions||{}).withStreamInfo("file",{name:v,dir:h,date:u,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(C)}),C.entriesCount=g}catch(v){C.error(v)}return C}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(k,S,t){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new i;for(var a in this)"function"!=typeof this[a]&&(f[a]=this[a]);return f}}(i.prototype=k("./object")).loadAsync=k("./load"),i.support=k("./support"),i.defaults=k("./defaults"),i.version="3.10.0",i.loadAsync=function(f,a){return(new i).loadAsync(f,a)},i.external=k("./external"),S.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(k,S,t){"use strict";var i=k("./utils"),f=k("./external"),a=k("./utf8"),c=k("./zipEntries"),p=k("./stream/Crc32Probe"),C=k("./nodejsUtils");function g(v){return new f.Promise(function(o,l){var s=v.decompressed.getContentWorker().pipe(new p);s.on("error",function(h){l(h)}).on("end",function(){s.streamInfo.crc32!==v.decompressed.crc32?l(new Error("Corrupted zip : CRC32 mismatch")):o()}).resume()})}S.exports=function(v,o){var l=this;return o=i.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),C.isNode&&C.isStream(v)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",v,!0,o.optimizedBinaryString,o.base64).then(function(s){var h=new c(o);return h.load(s),h}).then(function(s){var h=[f.Promise.resolve(s)],u=s.files;if(o.checkCRC32)for(var d=0;d<u.length;d++)h.push(g(u[d]));return f.Promise.all(h)}).then(function(s){for(var h=s.shift(),u=h.files,d=0;d<u.length;d++){var w=u[d],r=w.fileNameStr,_=i.resolve(w.fileNameStr);l.file(_,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:o.createFolders}),w.dir||(l.file(_).unsafeOriginalName=r)}return h.zipComment.length&&(l.comment=h.zipComment),l})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(k,S,t){"use strict";var i=k("../utils"),f=k("../stream/GenericWorker");function a(c,p){f.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(p)}i.inherits(a,f),a.prototype._bindStream=function(c){var p=this;(this._stream=c).pause(),c.on("data",function(C){p.push({data:C,meta:{percent:0}})}).on("error",function(C){p.isPaused?this.generatedError=C:p.error(C)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},a.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},S.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(k,S,t){"use strict";var i=k("readable-stream").Readable;function f(a,c,p){i.call(this,c),this._helper=a;var C=this;a.on("data",function(g,v){C.push(g)||C._helper.pause(),p&&p(v)}).on("error",function(g){C.emit("error",g)}).on("end",function(){C.push(null)})}k("../utils").inherits(f,i),f.prototype._read=function(){this._helper.resume()},S.exports=f},{"../utils":32,"readable-stream":16}],14:[function(k,S,t){"use strict";S.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(i,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,f);if("number"==typeof i)throw new Error('The "data" argument must not be a number');return new Buffer(i,f)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var f=new Buffer(i);return f.fill(0),f},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&"function"==typeof i.on&&"function"==typeof i.pause&&"function"==typeof i.resume}}},{}],15:[function(k,S,t){"use strict";function i(_,E,A){var z,P=a.getTypeOf(E),N=a.extend(A||{},C);N.date=N.date||new Date,null!==N.compression&&(N.compression=N.compression.toUpperCase()),"string"==typeof N.unixPermissions&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(_=u(_)),N.createFolders&&(z=h(_))&&d.call(this,z,!0),A&&void 0!==A.binary||(N.binary=!("string"===P&&!1===N.binary&&!1===N.base64)),(E instanceof g&&0===E.uncompressedSize||N.dir||!E||0===E.length)&&(N.base64=!1,N.binary=!0,E="",N.compression="STORE",P="string");var y;y=E instanceof g||E instanceof c?E:l.isNode&&l.isStream(E)?new s(_,E):a.prepareContent(_,E,N.binary,N.optimizedBinaryString,N.base64);var I=new v(_,y,N);this.files[_]=I}var f=k("./utf8"),a=k("./utils"),c=k("./stream/GenericWorker"),p=k("./stream/StreamHelper"),C=k("./defaults"),g=k("./compressedObject"),v=k("./zipObject"),o=k("./generate"),l=k("./nodejsUtils"),s=k("./nodejs/NodejsStreamInputAdapter"),h=function(_){"/"===_.slice(-1)&&(_=_.substring(0,_.length-1));var E=_.lastIndexOf("/");return 0<E?_.substring(0,E):""},u=function(_){return"/"!==_.slice(-1)&&(_+="/"),_},d=function(_,E){return E=void 0!==E?E:C.createFolders,_=u(_),this.files[_]||i.call(this,_,null,{dir:!0,createFolders:E}),this.files[_]};function w(_){return"[object RegExp]"===Object.prototype.toString.call(_)}var r={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var E,A,z;for(E in this.files)z=this.files[E],(A=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&_(A,z)},filter:function(_){var E=[];return this.forEach(function(A,z){_(A,z)&&E.push(z)}),E},file:function(_,E,A){if(1!==arguments.length)return i.call(this,_=this.root+_,E,A),this;if(w(_)){var z=_;return this.filter(function(N,K){return!K.dir&&z.test(N)})}var P=this.files[this.root+_];return P&&!P.dir?P:null},folder:function(_){if(!_)return this;if(w(_))return this.filter(function(P,N){return N.dir&&_.test(P)});var A=d.call(this,this.root+_),z=this.clone();return z.root=A.name,z},remove:function(_){var E=this.files[_=this.root+_];if(E||("/"!==_.slice(-1)&&(_+="/"),E=this.files[_]),E&&!E.dir)delete this.files[_];else for(var A=this.filter(function(P,N){return N.name.slice(0,_.length)===_}),z=0;z<A.length;z++)delete this.files[A[z].name];return this},generate:function(_){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var E,A={};try{if((A=a.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),"binarystring"===A.type&&(A.type="string"),!A.type)throw new Error("No output type specified.");a.checkSupport(A.type),"darwin"!==A.platform&&"freebsd"!==A.platform&&"linux"!==A.platform&&"sunos"!==A.platform||(A.platform="UNIX"),"win32"===A.platform&&(A.platform="DOS"),E=o.generateWorker(this,A,A.comment||this.comment||"")}catch(P){(E=new c("error")).error(P)}return new p(E,A.type||"string",A.mimeType)},generateAsync:function(_,E){return this.generateInternalStream(_).accumulate(E)},generateNodeStream:function(_,E){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(E)}};S.exports=r},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(k,S,t){S.exports=k("stream")},{stream:void 0}],17:[function(k,S,t){"use strict";var i=k("./DataReader");function f(a){i.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}k("../utils").inherits(f,i),f.prototype.byteAt=function(a){return this.data[this.zero+a]},f.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),p=a.charCodeAt(1),C=a.charCodeAt(2),g=a.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===c&&this.data[v+1]===p&&this.data[v+2]===C&&this.data[v+3]===g)return v-this.zero;return-1},f.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),p=a.charCodeAt(1),C=a.charCodeAt(2),g=a.charCodeAt(3),v=this.readData(4);return c===v[0]&&p===v[1]&&C===v[2]&&g===v[3]},f.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},S.exports=f},{"../utils":32,"./DataReader":18}],18:[function(k,S,t){"use strict";var i=k("../utils");function f(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var c,p=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)p=(p<<8)+this.byteAt(c);return this.index+=a,p},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},S.exports=f},{"../utils":32}],19:[function(k,S,t){"use strict";var i=k("./Uint8ArrayReader");function f(a){i.call(this,a)}k("../utils").inherits(f,i),f.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},S.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(k,S,t){"use strict";var i=k("./DataReader");function f(a){i.call(this,a)}k("../utils").inherits(f,i),f.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},f.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},f.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},f.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},S.exports=f},{"../utils":32,"./DataReader":18}],21:[function(k,S,t){"use strict";var i=k("./ArrayReader");function f(a){i.call(this,a)}k("../utils").inherits(f,i),f.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},S.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(k,S,t){"use strict";var i=k("../utils"),f=k("../support"),a=k("./ArrayReader"),c=k("./StringReader"),p=k("./NodeBufferReader"),C=k("./Uint8ArrayReader");S.exports=function(g){var v=i.getTypeOf(g);return i.checkSupport(v),"string"!==v||f.uint8array?"nodebuffer"===v?new p(g):f.uint8array?new C(i.transformTo("uint8array",g)):new a(i.transformTo("array",g)):new c(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(k,S,t){"use strict";t.LOCAL_FILE_HEADER="PK\x03\x04",t.CENTRAL_FILE_HEADER="PK\x01\x02",t.CENTRAL_DIRECTORY_END="PK\x05\x06",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(k,S,t){"use strict";var i=k("./GenericWorker"),f=k("../utils");function a(c){i.call(this,"ConvertWorker to "+c),this.destType=c}f.inherits(a,i),a.prototype.processChunk=function(c){this.push({data:f.transformTo(this.destType,c.data),meta:c.meta})},S.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(k,S,t){"use strict";var i=k("./GenericWorker"),f=k("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}k("../utils").inherits(a,i),a.prototype.processChunk=function(c){this.streamInfo.crc32=f(c.data,this.streamInfo.crc32||0),this.push(c)},S.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(k,S,t){"use strict";var i=k("../utils"),f=k("./GenericWorker");function a(c){f.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(a,f),a.prototype.processChunk=function(c){c&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+c.data.length),f.prototype.processChunk.call(this,c)},S.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(k,S,t){"use strict";var i=k("../utils"),f=k("./GenericWorker");function a(c){f.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(C){p.dataIsReady=!0,p.data=C,p.max=C&&C.length||0,p.type=i.getTypeOf(C),p.isPaused||p._tickAndRepeat()},function(C){p.error(C)})}i.inherits(a,f),a.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,p);break;case"uint8array":c=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":c=this.data.slice(this.index,p)}return this.index=p,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},S.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(k,S,t){"use strict";function i(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,a){return this._listeners[f].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,a){if(this._listeners[f])for(var c=0;c<this._listeners[f].length;c++)this._listeners[f][c].call(this,a)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var a=this;return f.on("data",function(c){a.processChunk(c)}),f.on("end",function(){a.end()}),f.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,a){return this.extraStreamInfo[f]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},S.exports=i},{}],29:[function(k,S,t){"use strict";var i=k("../utils"),f=k("./ConvertWorker"),a=k("./GenericWorker"),c=k("../base64"),p=k("../support"),C=k("../external"),g=null;if(p.nodestream)try{g=k("../nodejs/NodejsStreamOutputAdapter")}catch(l){}function o(l,s,h){var u=s;switch(s){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=s,this._mimeType=h,i.checkSupport(u),this._worker=l.pipe(new f(u)),l.lock()}catch(d){this._worker=new a("error"),this._worker.error(d)}}o.prototype={accumulate:function(l){return function v(l,s){return new C.Promise(function(h,u){var d=[],w=l._internalType,r=l._outputType,_=l._mimeType;l.on("data",function(E,A){d.push(E),s&&s(A)}).on("error",function(E){d=[],u(E)}).on("end",function(){try{var E=function(A,z,P){switch(A){case"blob":return i.newBlob(i.transformTo("arraybuffer",z),P);case"base64":return c.encode(z);default:return i.transformTo(A,z)}}(r,function(A,z){var P,N=0,K=null,y=0;for(P=0;P<z.length;P++)y+=z[P].length;switch(A){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(K=new Uint8Array(y),P=0;P<z.length;P++)K.set(z[P],N),N+=z[P].length;return K;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+A+"'")}}(w,d),_);h(E)}catch(A){u(A)}d=[]}).resume()})}(this,l)},on:function(l,s){var h=this;return this._worker.on(l,"data"===l?function(u){s.call(h,u.data,u.meta)}:function(){i.delay(s,arguments,h)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(l){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:"nodebuffer"!==this._outputType},l)}},S.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(k,S,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer="undefined"!=typeof Buffer,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var i=new ArrayBuffer(0);try{t.blob=0===new Blob([i],{type:"application/zip"}).size}catch(a){try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(i),t.blob=0===f.getBlob("application/zip").size}catch(c){t.blob=!1}}}try{t.nodestream=!!k("readable-stream").Readable}catch(a){t.nodestream=!1}},{"readable-stream":16}],31:[function(k,S,t){"use strict";for(var i=k("./utils"),f=k("./support"),a=k("./nodejsUtils"),c=k("./stream/GenericWorker"),p=new Array(256),C=0;C<256;C++)p[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function g(){c.call(this,"utf-8 decode"),this.leftOver=null}function v(){c.call(this,"utf-8 encode")}p[254]=p[254]=1,t.utf8encode=function(o){return f.nodebuffer?a.newBufferFrom(o,"utf-8"):function(l){var s,h,u,d,w,r=l.length,_=0;for(d=0;d<r;d++)55296==(64512&(h=l.charCodeAt(d)))&&d+1<r&&56320==(64512&(u=l.charCodeAt(d+1)))&&(h=65536+(h-55296<<10)+(u-56320),d++),_+=h<128?1:h<2048?2:h<65536?3:4;for(s=f.uint8array?new Uint8Array(_):new Array(_),d=w=0;w<_;d++)55296==(64512&(h=l.charCodeAt(d)))&&d+1<r&&56320==(64512&(u=l.charCodeAt(d+1)))&&(h=65536+(h-55296<<10)+(u-56320),d++),h<128?s[w++]=h:(h<2048?s[w++]=192|h>>>6:(h<65536?s[w++]=224|h>>>12:(s[w++]=240|h>>>18,s[w++]=128|h>>>12&63),s[w++]=128|h>>>6&63),s[w++]=128|63&h);return s}(o)},t.utf8decode=function(o){return f.nodebuffer?i.transformTo("nodebuffer",o).toString("utf-8"):function(l){var s,h,u,d,w=l.length,r=new Array(2*w);for(s=h=0;s<w;)if((u=l[s++])<128)r[h++]=u;else if(4<(d=p[u]))r[h++]=65533,s+=d-1;else{for(u&=2===d?31:3===d?15:7;1<d&&s<w;)u=u<<6|63&l[s++],d--;1<d?r[h++]=65533:u<65536?r[h++]=u:(r[h++]=55296|(u-=65536)>>10&1023,r[h++]=56320|1023&u)}return r.length!==h&&(r.subarray?r=r.subarray(0,h):r.length=h),i.applyFromCharCode(r)}(o=i.transformTo(f.uint8array?"uint8array":"array",o))},i.inherits(g,c),g.prototype.processChunk=function(o){var l=i.transformTo(f.uint8array?"uint8array":"array",o.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var s=l;(l=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),l.set(s,this.leftOver.length)}else l=this.leftOver.concat(l);this.leftOver=null}var h=function(d,w){var r;for((w=w||d.length)>d.length&&(w=d.length),r=w-1;0<=r&&128==(192&d[r]);)r--;return r<0||0===r?w:r+p[d[r]]>w?r:w}(l),u=l;h!==l.length&&(f.uint8array?(u=l.subarray(0,h),this.leftOver=l.subarray(h,l.length)):(u=l.slice(0,h),this.leftOver=l.slice(h,l.length))),this.push({data:t.utf8decode(u),meta:o.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=g,i.inherits(v,c),v.prototype.processChunk=function(o){this.push({data:t.utf8encode(o.data),meta:o.meta})},t.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(k,S,t){"use strict";var i=k("./support"),f=k("./base64"),a=k("./nodejsUtils"),c=k("./external");function p(s){return s}function C(s,h){for(var u=0;u<s.length;++u)h[u]=255&s.charCodeAt(u);return h}k("setimmediate"),t.newBlob=function(s,h){t.checkSupport("blob");try{return new Blob([s],{type:h})}catch(d){try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(s),u.getBlob(h)}catch(w){throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(s,h,u){var d=[],w=0,r=s.length;if(r<=u)return String.fromCharCode.apply(null,s);for(;w<r;)d.push(String.fromCharCode.apply(null,"array"===h||"nodebuffer"===h?s.slice(w,Math.min(w+u,r)):s.subarray(w,Math.min(w+u,r)))),w+=u;return d.join("")},stringifyByChar:function(s){for(var h="",u=0;u<s.length;u++)h+=String.fromCharCode(s[u]);return h},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(s){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(s){return!1}}()}};function v(s){var h=65536,u=t.getTypeOf(s),d=!0;if("uint8array"===u?d=g.applyCanBeUsed.uint8array:"nodebuffer"===u&&(d=g.applyCanBeUsed.nodebuffer),d)for(;1<h;)try{return g.stringifyByChunk(s,u,h)}catch(w){h=Math.floor(h/2)}return g.stringifyByChar(s)}function o(s,h){for(var u=0;u<s.length;u++)h[u]=s[u];return h}t.applyFromCharCode=v;var l={};l.string={string:p,array:function(s){return C(s,new Array(s.length))},arraybuffer:function(s){return l.string.uint8array(s).buffer},uint8array:function(s){return C(s,new Uint8Array(s.length))},nodebuffer:function(s){return C(s,a.allocBuffer(s.length))}},l.array={string:v,array:p,arraybuffer:function(s){return new Uint8Array(s).buffer},uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return a.newBufferFrom(s)}},l.arraybuffer={string:function(s){return v(new Uint8Array(s))},array:function(s){return o(new Uint8Array(s),new Array(s.byteLength))},arraybuffer:p,uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return a.newBufferFrom(new Uint8Array(s))}},l.uint8array={string:v,array:function(s){return o(s,new Array(s.length))},arraybuffer:function(s){return s.buffer},uint8array:p,nodebuffer:function(s){return a.newBufferFrom(s)}},l.nodebuffer={string:v,array:function(s){return o(s,new Array(s.length))},arraybuffer:function(s){return l.nodebuffer.uint8array(s).buffer},uint8array:function(s){return o(s,new Uint8Array(s.length))},nodebuffer:p},t.transformTo=function(s,h){if(h=h||"",!s)return h;t.checkSupport(s);var u=t.getTypeOf(h);return l[u][s](h)},t.resolve=function(s){for(var h=s.split("/"),u=[],d=0;d<h.length;d++){var w=h[d];"."===w||""===w&&0!==d&&d!==h.length-1||(".."===w?u.pop():u.push(w))}return u.join("/")},t.getTypeOf=function(s){return"string"==typeof s?"string":"[object Array]"===Object.prototype.toString.call(s)?"array":i.nodebuffer&&a.isBuffer(s)?"nodebuffer":i.uint8array&&s instanceof Uint8Array?"uint8array":i.arraybuffer&&s instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(s){if(!i[s.toLowerCase()])throw new Error(s+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(s){var h,u,d="";for(u=0;u<(s||"").length;u++)d+="\\x"+((h=s.charCodeAt(u))<16?"0":"")+h.toString(16).toUpperCase();return d},t.delay=function(s,h,u){setImmediate(function(){s.apply(u||null,h||[])})},t.inherits=function(s,h){function u(){}u.prototype=h.prototype,s.prototype=new u},t.extend=function(){var s,h,u={};for(s=0;s<arguments.length;s++)for(h in arguments[s])arguments[s].hasOwnProperty(h)&&void 0===u[h]&&(u[h]=arguments[s][h]);return u},t.prepareContent=function(s,h,u,d,w){return c.Promise.resolve(h).then(function(r){return i.blob&&(r instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(r)))&&"undefined"!=typeof FileReader?new c.Promise(function(_,E){var A=new FileReader;A.onload=function(z){_(z.target.result)},A.onerror=function(z){E(z.target.error)},A.readAsArrayBuffer(r)}):r}).then(function(r){var E,_=t.getTypeOf(r);return _?("arraybuffer"===_?r=t.transformTo("uint8array",r):"string"===_&&(w?r=f.decode(r):u&&!0!==d&&(r=C(E=r,i.uint8array?new Uint8Array(E.length):new Array(E.length)))),r):c.Promise.reject(new Error("Can't read the data of '"+s+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(k,S,t){"use strict";var i=k("./reader/readerFor"),f=k("./utils"),a=k("./signature"),c=k("./zipEntry"),p=(k("./utf8"),k("./support"));function C(g){this.files=[],this.loadOptions=g}C.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(v)+", expected "+f.pretty(g)+")")}},isSignature:function(g,v){var o=this.reader.index;this.reader.setIndex(g);var l=this.reader.readString(4)===v;return this.reader.setIndex(o),l},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),o=f.transformTo(p.uint8array?"uint8array":"array",g);this.zipComment=this.loadOptions.decodeFileName(o)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,v,o,l=this.zip64EndOfCentralSize-44;0<l;)g=this.reader.readInt(2),v=this.reader.readInt(4),o=this.reader.readData(v),this.zip64ExtensibleData[g]={id:g,length:v,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,v;for(g=0;g<this.files.length;g++)this.reader.setIndex((v=this.files[g]).localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(g=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var v=g;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var o=this.centralDirOffset+this.centralDirSize;this.zip64&&(o+=20,o+=12+this.zip64EndOfCentralSize);var l=v-o;if(0<l)this.isSignature(v,a.CENTRAL_FILE_HEADER)||(this.reader.zero=l);else if(l<0)throw new Error("Corrupted zip: missing "+Math.abs(l)+" bytes.")},prepareReader:function(g){this.reader=i(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},S.exports=C},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(k,S,t){"use strict";var i=k("./reader/readerFor"),f=k("./utils"),a=k("./compressedObject"),c=k("./crc32"),p=k("./utf8"),C=k("./compressions"),g=k("./support");function v(o,l){this.options=o,this.loadOptions=l}v.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(o){var l,s;if(o.skip(22),this.fileNameLength=o.readInt(2),s=o.readInt(2),this.fileName=o.readData(this.fileNameLength),o.skip(s),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(l=function(h){for(var u in C)if(C.hasOwnProperty(u)&&C[u].magic===h)return C[u];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,l,o.readData(this.compressedSize))},readCentralPart:function(o){this.versionMadeBy=o.readInt(2),o.skip(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4);var l=o.readInt(2);if(this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");o.skip(l),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==o&&(this.dosPermissions=63&this.externalFileAttributes),3==o&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(o){if(this.extraFields[1]){var l=i(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(o){var l,s,h,u=o.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});o.index+4<u;)l=o.readInt(2),s=o.readInt(2),h=o.readData(s),this.extraFields[l]={id:l,length:s,value:h};o.setIndex(u)},handleUTF8:function(){var o=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var l=this.findExtraFieldUnicodePath();if(null!==l)this.fileNameStr=l;else{var s=f.transformTo(o,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(s)}var h=this.findExtraFieldUnicodeComment();if(null!==h)this.fileCommentStr=h;else{var u=f.transformTo(o,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var l=i(o.value);return 1!==l.readInt(1)||c(this.fileName)!==l.readInt(4)?null:p.utf8decode(l.readData(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var l=i(o.value);return 1!==l.readInt(1)||c(this.fileComment)!==l.readInt(4)?null:p.utf8decode(l.readData(o.length-5))}return null}},S.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(k,S,t){"use strict";function i(l,s,h){this.name=l,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=s,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var f=k("./stream/StreamHelper"),a=k("./stream/DataWorker"),c=k("./utf8"),p=k("./compressedObject"),C=k("./stream/GenericWorker");i.prototype={internalStream:function(l){var s=null,h="string";try{if(!l)throw new Error("No output type specified.");var u="string"===(h=l.toLowerCase())||"text"===h;"binarystring"!==h&&"text"!==h||(h="string"),s=this._decompressWorker();var d=!this._dataBinary;d&&!u&&(s=s.pipe(new c.Utf8EncodeWorker)),!d&&u&&(s=s.pipe(new c.Utf8DecodeWorker))}catch(w){(s=new C("error")).error(w)}return new f(s,h,"")},async:function(l,s){return this.internalStream(l).accumulate(s)},nodeStream:function(l,s){return this.internalStream(l||"nodebuffer").toNodejsStream(s)},_compressWorker:function(l,s){if(this._data instanceof p&&this._data.compression.magic===l.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new c.Utf8EncodeWorker)),p.createWorkerFrom(h,l,s)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof C?this._data:new a(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},o=0;o<g.length;o++)i.prototype[g[o]]=v;S.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(k,S,t){(function(i){"use strict";var f,a,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var p=0,C=new c(l),g=i.document.createTextNode("");C.observe(g,{characterData:!0}),f=function(){g.data=p=++p%2}}else if(i.setImmediate||void 0===i.MessageChannel)f="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var s=i.document.createElement("script");s.onreadystatechange=function(){l(),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},i.document.documentElement.appendChild(s)}:function(){setTimeout(l,0)};else{var v=new i.MessageChannel;v.port1.onmessage=l,f=function(){v.port2.postMessage(0)}}var o=[];function l(){var s,h;a=!0;for(var u=o.length;u;){for(h=o,o=[],s=-1;++s<u;)h[s]();u=o.length}a=!1}S.exports=function(s){1!==o.push(s)||a||f()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(k,S,t){"use strict";var i=k("immediate");function f(){}var a={},c=["REJECTED"],p=["FULFILLED"],C=["PENDING"];function g(u){if("function"!=typeof u)throw new TypeError("resolver must be a function");this.state=C,this.queue=[],this.outcome=void 0,u!==f&&s(this,u)}function v(u,d,w){this.promise=u,"function"==typeof d&&(this.onFulfilled=d,this.callFulfilled=this.otherCallFulfilled),"function"==typeof w&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function o(u,d,w){i(function(){var r;try{r=d(w)}catch(_){return a.reject(u,_)}r===u?a.reject(u,new TypeError("Cannot resolve promise with itself")):a.resolve(u,r)})}function l(u){var d=u&&u.then;if(u&&("object"==typeof u||"function"==typeof u)&&"function"==typeof d)return function(){d.apply(u,arguments)}}function s(u,d){var w=!1;function r(A){w||(w=!0,a.reject(u,A))}function _(A){w||(w=!0,a.resolve(u,A))}var E=h(function(){d(_,r)});"error"===E.status&&r(E.value)}function h(u,d){var w={};try{w.value=u(d),w.status="success"}catch(r){w.status="error",w.value=r}return w}(S.exports=g).prototype.finally=function(u){if("function"!=typeof u)return this;var d=this.constructor;return this.then(function(w){return d.resolve(u()).then(function(){return w})},function(w){return d.resolve(u()).then(function(){throw w})})},g.prototype.catch=function(u){return this.then(null,u)},g.prototype.then=function(u,d){if("function"!=typeof u&&this.state===p||"function"!=typeof d&&this.state===c)return this;var w=new this.constructor(f);return this.state!==C?o(w,this.state===p?u:d,this.outcome):this.queue.push(new v(w,u,d)),w},v.prototype.callFulfilled=function(u){a.resolve(this.promise,u)},v.prototype.otherCallFulfilled=function(u){o(this.promise,this.onFulfilled,u)},v.prototype.callRejected=function(u){a.reject(this.promise,u)},v.prototype.otherCallRejected=function(u){o(this.promise,this.onRejected,u)},a.resolve=function(u,d){var w=h(l,d);if("error"===w.status)return a.reject(u,w.value);var r=w.value;if(r)s(u,r);else{u.state=p,u.outcome=d;for(var _=-1,E=u.queue.length;++_<E;)u.queue[_].callFulfilled(d)}return u},a.reject=function(u,d){u.state=c,u.outcome=d;for(var w=-1,r=u.queue.length;++w<r;)u.queue[w].callRejected(d);return u},g.resolve=function(u){return u instanceof this?u:a.resolve(new this(f),u)},g.reject=function(u){var d=new this(f);return a.reject(d,u)},g.all=function(u){var d=this;if("[object Array]"!==Object.prototype.toString.call(u))return this.reject(new TypeError("must be an array"));var w=u.length,r=!1;if(!w)return this.resolve([]);for(var _=new Array(w),E=0,A=-1,z=new this(f);++A<w;)P(u[A],A);return z;function P(N,K){d.resolve(N).then(function(y){_[K]=y,++E!==w||r||(r=!0,a.resolve(z,_))},function(y){r||(r=!0,a.reject(z,y))})}},g.race=function(u){if("[object Array]"!==Object.prototype.toString.call(u))return this.reject(new TypeError("must be an array"));var w=u.length,r=!1;if(!w)return this.resolve([]);for(var _=-1,E=new this(f);++_<w;)this.resolve(u[_]).then(function(z){r||(r=!0,a.resolve(E,z))},function(z){r||(r=!0,a.reject(E,z))});return E}},{immediate:36}],38:[function(k,S,t){"use strict";var i={};(0,k("./lib/utils/common").assign)(i,k("./lib/deflate"),k("./lib/inflate"),k("./lib/zlib/constants")),S.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(k,S,t){"use strict";var i=k("./zlib/deflate"),f=k("./utils/common"),a=k("./utils/strings"),c=k("./zlib/messages"),p=k("./zlib/zstream"),C=Object.prototype.toString;function s(u){if(!(this instanceof s))return new s(u);this.options=f.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},u||{});var d=this.options;d.raw&&0<d.windowBits?d.windowBits=-d.windowBits:d.gzip&&0<d.windowBits&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var w=i.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(0!==w)throw new Error(c[w]);if(d.header&&i.deflateSetHeader(this.strm,d.header),d.dictionary){var r;if(r="string"==typeof d.dictionary?a.string2buf(d.dictionary):"[object ArrayBuffer]"===C.call(d.dictionary)?new Uint8Array(d.dictionary):d.dictionary,0!==(w=i.deflateSetDictionary(this.strm,r)))throw new Error(c[w]);this._dict_set=!0}}function h(u,d){var w=new s(d);if(w.push(u,!0),w.err)throw w.msg||c[w.err];return w.result}s.prototype.push=function(u,d){var w,r,_=this.strm,E=this.options.chunkSize;if(this.ended)return!1;r=d===~~d?d:!0===d?4:0,_.input="string"==typeof u?a.string2buf(u):"[object ArrayBuffer]"===C.call(u)?new Uint8Array(u):u,_.next_in=0,_.avail_in=_.input.length;do{if(0===_.avail_out&&(_.output=new f.Buf8(E),_.next_out=0,_.avail_out=E),1!==(w=i.deflate(_,r))&&0!==w)return this.onEnd(w),!(this.ended=!0);0!==_.avail_out&&(0!==_.avail_in||4!==r&&2!==r)||this.onData("string"===this.options.to?a.buf2binstring(f.shrinkBuf(_.output,_.next_out)):f.shrinkBuf(_.output,_.next_out))}while((0<_.avail_in||0===_.avail_out)&&1!==w);return 4===r?(w=i.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,0===w):2!==r||(this.onEnd(0),!(_.avail_out=0))},s.prototype.onData=function(u){this.chunks.push(u)},s.prototype.onEnd=function(u){0===u&&(this.result="string"===this.options.to?this.chunks.join(""):f.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},t.Deflate=s,t.deflate=h,t.deflateRaw=function(u,d){return(d=d||{}).raw=!0,h(u,d)},t.gzip=function(u,d){return(d=d||{}).gzip=!0,h(u,d)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(k,S,t){"use strict";var i=k("./zlib/inflate"),f=k("./utils/common"),a=k("./utils/strings"),c=k("./zlib/constants"),p=k("./zlib/messages"),C=k("./zlib/zstream"),g=k("./zlib/gzheader"),v=Object.prototype.toString;function o(s){if(!(this instanceof o))return new o(s);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},s||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,0===h.windowBits&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||s&&s.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&0==(15&h.windowBits)&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var u=i.inflateInit2(this.strm,h.windowBits);if(u!==c.Z_OK)throw new Error(p[u]);this.header=new g,i.inflateGetHeader(this.strm,this.header)}function l(s,h){var u=new o(h);if(u.push(s,!0),u.err)throw u.msg||p[u.err];return u.result}o.prototype.push=function(s,h){var u,d,w,r,_,E,A=this.strm,z=this.options.chunkSize,P=this.options.dictionary,N=!1;if(this.ended)return!1;d=h===~~h?h:!0===h?c.Z_FINISH:c.Z_NO_FLUSH,A.input="string"==typeof s?a.binstring2buf(s):"[object ArrayBuffer]"===v.call(s)?new Uint8Array(s):s,A.next_in=0,A.avail_in=A.input.length;do{if(0===A.avail_out&&(A.output=new f.Buf8(z),A.next_out=0,A.avail_out=z),(u=i.inflate(A,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&P&&(E="string"==typeof P?a.string2buf(P):"[object ArrayBuffer]"===v.call(P)?new Uint8Array(P):P,u=i.inflateSetDictionary(this.strm,E)),u===c.Z_BUF_ERROR&&!0===N&&(u=c.Z_OK,N=!1),u!==c.Z_STREAM_END&&u!==c.Z_OK)return this.onEnd(u),!(this.ended=!0);A.next_out&&(0!==A.avail_out&&u!==c.Z_STREAM_END&&(0!==A.avail_in||d!==c.Z_FINISH&&d!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(w=a.utf8border(A.output,A.next_out),r=A.next_out-w,_=a.buf2string(A.output,w),A.next_out=r,A.avail_out=z-r,r&&f.arraySet(A.output,A.output,w,r,0),this.onData(_)):this.onData(f.shrinkBuf(A.output,A.next_out)))),0===A.avail_in&&0===A.avail_out&&(N=!0)}while((0<A.avail_in||0===A.avail_out)&&u!==c.Z_STREAM_END);return u===c.Z_STREAM_END&&(d=c.Z_FINISH),d===c.Z_FINISH?(u=i.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===c.Z_OK):d!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(A.avail_out=0))},o.prototype.onData=function(s){this.chunks.push(s)},o.prototype.onEnd=function(s){s===c.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):f.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},t.Inflate=o,t.inflate=l,t.inflateRaw=function(s,h){return(h=h||{}).raw=!0,l(s,h)},t.ungzip=l},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(k,S,t){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(c){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var C=p.shift();if(C){if("object"!=typeof C)throw new TypeError(C+"must be non-object");for(var g in C)C.hasOwnProperty(g)&&(c[g]=C[g])}}return c},t.shrinkBuf=function(c,p){return c.length===p?c:c.subarray?c.subarray(0,p):(c.length=p,c)};var f={arraySet:function(c,p,C,g,v){if(p.subarray&&c.subarray)c.set(p.subarray(C,C+g),v);else for(var o=0;o<g;o++)c[v+o]=p[C+o]},flattenChunks:function(c){var p,C,g,v,o,l;for(p=g=0,C=c.length;p<C;p++)g+=c[p].length;for(l=new Uint8Array(g),p=v=0,C=c.length;p<C;p++)l.set(o=c[p],v),v+=o.length;return l}},a={arraySet:function(c,p,C,g,v){for(var o=0;o<g;o++)c[v+o]=p[C+o]},flattenChunks:function(c){return[].concat.apply([],c)}};t.setTyped=function(c){c?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,f)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(i)},{}],42:[function(k,S,t){"use strict";var i=k("./common"),f=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(g){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(g){a=!1}for(var c=new i.Buf8(256),p=0;p<256;p++)c[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function C(g,v){if(v<65537&&(g.subarray&&a||!g.subarray&&f))return String.fromCharCode.apply(null,i.shrinkBuf(g,v));for(var o="",l=0;l<v;l++)o+=String.fromCharCode(g[l]);return o}c[254]=c[254]=1,t.string2buf=function(g){var v,o,l,s,h,u=g.length,d=0;for(s=0;s<u;s++)55296==(64512&(o=g.charCodeAt(s)))&&s+1<u&&56320==(64512&(l=g.charCodeAt(s+1)))&&(o=65536+(o-55296<<10)+(l-56320),s++),d+=o<128?1:o<2048?2:o<65536?3:4;for(v=new i.Buf8(d),s=h=0;h<d;s++)55296==(64512&(o=g.charCodeAt(s)))&&s+1<u&&56320==(64512&(l=g.charCodeAt(s+1)))&&(o=65536+(o-55296<<10)+(l-56320),s++),o<128?v[h++]=o:(o<2048?v[h++]=192|o>>>6:(o<65536?v[h++]=224|o>>>12:(v[h++]=240|o>>>18,v[h++]=128|o>>>12&63),v[h++]=128|o>>>6&63),v[h++]=128|63&o);return v},t.buf2binstring=function(g){return C(g,g.length)},t.binstring2buf=function(g){for(var v=new i.Buf8(g.length),o=0,l=v.length;o<l;o++)v[o]=g.charCodeAt(o);return v},t.buf2string=function(g,v){var o,l,s,h,u=v||g.length,d=new Array(2*u);for(o=l=0;o<u;)if((s=g[o++])<128)d[l++]=s;else if(4<(h=c[s]))d[l++]=65533,o+=h-1;else{for(s&=2===h?31:3===h?15:7;1<h&&o<u;)s=s<<6|63&g[o++],h--;1<h?d[l++]=65533:s<65536?d[l++]=s:(d[l++]=55296|(s-=65536)>>10&1023,d[l++]=56320|1023&s)}return C(d,l)},t.utf8border=function(g,v){var o;for((v=v||g.length)>g.length&&(v=g.length),o=v-1;0<=o&&128==(192&g[o]);)o--;return o<0||0===o?v:o+c[g[o]]>v?o:v}},{"./common":41}],43:[function(k,S,t){"use strict";S.exports=function(i,f,a,c){for(var p=65535&i|0,C=i>>>16&65535|0,g=0;0!==a;){for(a-=g=2e3<a?2e3:a;C=C+(p=p+f[c++]|0)|0,--g;);p%=65521,C%=65521}return p|C<<16|0}},{}],44:[function(k,S,t){"use strict";S.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(k,S,t){"use strict";var i=function(){for(var f,a=[],c=0;c<256;c++){f=c;for(var p=0;p<8;p++)f=1&f?3988292384^f>>>1:f>>>1;a[c]=f}return a}();S.exports=function(f,a,c,p){var C=i,g=p+c;f^=-1;for(var v=p;v<g;v++)f=f>>>8^C[255&(f^a[v])];return-1^f}},{}],46:[function(k,S,t){"use strict";var i,f=k("../utils/common"),a=k("./trees"),c=k("./adler32"),p=k("./crc32"),C=k("./messages"),l=-2,N=258,K=262,I=113;function J(n,Z){return n.msg=C[Z],Z}function F(n){return(n<<1)-(4<n?9:0)}function V(n){for(var Z=n.length;0<=--Z;)n[Z]=0}function M(n){var Z=n.state,U=Z.pending;U>n.avail_out&&(U=n.avail_out),0!==U&&(f.arraySet(n.output,Z.pending_buf,Z.pending_out,U,n.next_out),n.next_out+=U,Z.pending_out+=U,n.total_out+=U,n.avail_out-=U,Z.pending-=U,0===Z.pending&&(Z.pending_out=0))}function L(n,Z){a._tr_flush_block(n,0<=n.block_start?n.block_start:-1,n.strstart-n.block_start,Z),n.block_start=n.strstart,M(n.strm)}function j(n,Z){n.pending_buf[n.pending++]=Z}function Q(n,Z){n.pending_buf[n.pending++]=Z>>>8&255,n.pending_buf[n.pending++]=255&Z}function B(n,Z){var U,b,m=n.max_chain_length,D=n.strstart,W=n.prev_length,H=n.nice_match,R=n.strstart>n.w_size-K?n.strstart-(n.w_size-K):0,Y=n.window,q=n.w_mask,G=n.prev,X=n.strstart+N,rt=Y[D+W-1],et=Y[D+W];n.prev_length>=n.good_match&&(m>>=2),H>n.lookahead&&(H=n.lookahead);do{if(Y[(U=Z)+W]===et&&Y[U+W-1]===rt&&Y[U]===Y[D]&&Y[++U]===Y[D+1]){D+=2,U++;do{}while(Y[++D]===Y[++U]&&Y[++D]===Y[++U]&&Y[++D]===Y[++U]&&Y[++D]===Y[++U]&&Y[++D]===Y[++U]&&Y[++D]===Y[++U]&&Y[++D]===Y[++U]&&Y[++D]===Y[++U]&&D<X);if(b=N-(X-D),D=X-N,W<b){if(n.match_start=Z,H<=(W=b))break;rt=Y[D+W-1],et=Y[D+W]}}}while((Z=G[Z&q])>R&&0!=--m);return W<=n.lookahead?W:n.lookahead}function $(n){var Z,U,b,m,D,W,H,R,Y,q,G=n.w_size;do{if(m=n.window_size-n.lookahead-n.strstart,n.strstart>=G+(G-K)){for(f.arraySet(n.window,n.window,G,G,0),n.match_start-=G,n.strstart-=G,n.block_start-=G,Z=U=n.hash_size;b=n.head[--Z],n.head[Z]=G<=b?b-G:0,--U;);for(Z=U=G;b=n.prev[--Z],n.prev[Z]=G<=b?b-G:0,--U;);m+=G}if(0===n.strm.avail_in)break;if(H=n.window,R=n.strstart+n.lookahead,q=void 0,(Y=m)<(q=(W=n.strm).avail_in)&&(q=Y),U=0===q?0:(W.avail_in-=q,f.arraySet(H,W.input,W.next_in,q,R),1===W.state.wrap?W.adler=c(W.adler,H,q,R):2===W.state.wrap&&(W.adler=p(W.adler,H,q,R)),W.next_in+=q,W.total_in+=q,q),n.lookahead+=U,n.lookahead+n.insert>=3)for(n.ins_h=n.window[D=n.strstart-n.insert],n.ins_h=(n.ins_h<<n.hash_shift^n.window[D+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[D+3-1])&n.hash_mask,n.prev[D&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=D,D++,n.insert--,!(n.lookahead+n.insert<3)););}while(n.lookahead<K&&0!==n.strm.avail_in)}function nt(n,Z){for(var U,b;;){if(n.lookahead<K){if($(n),n.lookahead<K&&0===Z)return 1;if(0===n.lookahead)break}if(U=0,n.lookahead>=3&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+3-1])&n.hash_mask,U=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),0!==U&&n.strstart-U<=n.w_size-K&&(n.match_length=B(n,U)),n.match_length>=3)if(b=a._tr_tally(n,n.strstart-n.match_start,n.match_length-3),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=3){for(n.match_length--;n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+3-1])&n.hash_mask,U=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart,0!=--n.match_length;);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else b=a._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(b&&(L(n,!1),0===n.strm.avail_out))return 1}return n.insert=n.strstart<2?n.strstart:2,4===Z?(L(n,!0),0===n.strm.avail_out?3:4):n.last_lit&&(L(n,!1),0===n.strm.avail_out)?1:2}function tt(n,Z){for(var U,b,m;;){if(n.lookahead<K){if($(n),n.lookahead<K&&0===Z)return 1;if(0===n.lookahead)break}if(U=0,n.lookahead>=3&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+3-1])&n.hash_mask,U=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=2,0!==U&&n.prev_length<n.max_lazy_match&&n.strstart-U<=n.w_size-K&&(n.match_length=B(n,U),n.match_length<=5&&(1===n.strategy||3===n.match_length&&4096<n.strstart-n.match_start)&&(n.match_length=2)),n.prev_length>=3&&n.match_length<=n.prev_length){for(m=n.strstart+n.lookahead-3,b=a._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-3),n.lookahead-=n.prev_length-1,n.prev_length-=2;++n.strstart<=m&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+3-1])&n.hash_mask,U=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),0!=--n.prev_length;);if(n.match_available=0,n.match_length=2,n.strstart++,b&&(L(n,!1),0===n.strm.avail_out))return 1}else if(n.match_available){if((b=a._tr_tally(n,0,n.window[n.strstart-1]))&&L(n,!1),n.strstart++,n.lookahead--,0===n.strm.avail_out)return 1}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(b=a._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<2?n.strstart:2,4===Z?(L(n,!0),0===n.strm.avail_out?3:4):n.last_lit&&(L(n,!1),0===n.strm.avail_out)?1:2}function it(n,Z,U,b,m){this.good_length=n,this.max_lazy=Z,this.nice_length=U,this.max_chain=b,this.func=m}function at(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(1146),this.dyn_dtree=new f.Buf16(122),this.bl_tree=new f.Buf16(78),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(16),this.heap=new f.Buf16(573),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(573),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ot(n){var Z;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=2,(Z=n.state).pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?42:I,n.adler=2===Z.wrap?0:1,Z.last_flush=0,a._tr_init(Z),0):J(n,l)}function ht(n){var U,Z=ot(n);return 0===Z&&((U=n.state).window_size=2*U.w_size,V(U.head),U.max_lazy_match=i[U.level].max_lazy,U.good_match=i[U.level].good_length,U.nice_match=i[U.level].nice_length,U.max_chain_length=i[U.level].max_chain,U.strstart=0,U.block_start=0,U.lookahead=0,U.insert=0,U.match_length=U.prev_length=2,U.match_available=0,U.ins_h=0),Z}function ut(n,Z,U,b,m,D){if(!n)return l;var W=1;if(-1===Z&&(Z=6),b<0?(W=0,b=-b):15<b&&(W=2,b-=16),m<1||9<m||8!==U||b<8||15<b||Z<0||9<Z||D<0||4<D)return J(n,l);8===b&&(b=9);var H=new at;return(n.state=H).strm=n,H.wrap=W,H.gzhead=null,H.w_bits=b,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=m+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+3-1)/3),H.window=new f.Buf8(2*H.w_size),H.head=new f.Buf16(H.hash_size),H.prev=new f.Buf16(H.w_size),H.lit_bufsize=1<<m+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new f.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=Z,H.strategy=D,H.method=U,ht(n)}i=[new it(0,0,0,0,function(n,Z){var U=65535;for(U>n.pending_buf_size-5&&(U=n.pending_buf_size-5);;){if(n.lookahead<=1){if($(n),0===n.lookahead&&0===Z)return 1;if(0===n.lookahead)break}n.strstart+=n.lookahead,n.lookahead=0;var b=n.block_start+U;if((0===n.strstart||n.strstart>=b)&&(n.lookahead=n.strstart-b,n.strstart=b,L(n,!1),0===n.strm.avail_out)||n.strstart-n.block_start>=n.w_size-K&&(L(n,!1),0===n.strm.avail_out))return 1}return n.insert=0,4===Z?(L(n,!0),0===n.strm.avail_out?3:4):(n.strstart>n.block_start&&L(n,!1),1)}),new it(4,4,8,4,nt),new it(4,5,16,8,nt),new it(4,6,32,32,nt),new it(4,4,16,16,tt),new it(8,16,32,32,tt),new it(8,16,128,128,tt),new it(8,32,128,256,tt),new it(32,128,258,1024,tt),new it(32,258,258,4096,tt)],t.deflateInit=function(n,Z){return ut(n,Z,8,15,8,0)},t.deflateInit2=ut,t.deflateReset=ht,t.deflateResetKeep=ot,t.deflateSetHeader=function(n,Z){return n&&n.state?2!==n.state.wrap?l:(n.state.gzhead=Z,0):l},t.deflate=function(n,Z){var U,b,m,D;if(!n||!n.state||5<Z||Z<0)return n?J(n,l):l;if(b=n.state,!n.output||!n.input&&0!==n.avail_in||666===b.status&&4!==Z)return J(n,0===n.avail_out?-5:l);if(b.strm=n,U=b.last_flush,b.last_flush=Z,42===b.status)if(2===b.wrap)n.adler=0,j(b,31),j(b,139),j(b,8),b.gzhead?(j(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),j(b,255&b.gzhead.time),j(b,b.gzhead.time>>8&255),j(b,b.gzhead.time>>16&255),j(b,b.gzhead.time>>24&255),j(b,9===b.level?2:2<=b.strategy||b.level<2?4:0),j(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(j(b,255&b.gzhead.extra.length),j(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(n.adler=p(n.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(j(b,0),j(b,0),j(b,0),j(b,0),j(b,0),j(b,9===b.level?2:2<=b.strategy||b.level<2?4:0),j(b,3),b.status=I);else{var W=8+(b.w_bits-8<<4)<<8;W|=(2<=b.strategy||b.level<2?0:b.level<6?1:6===b.level?2:3)<<6,0!==b.strstart&&(W|=32),W+=31-W%31,b.status=I,Q(b,W),0!==b.strstart&&(Q(b,n.adler>>>16),Q(b,65535&n.adler)),n.adler=1}if(69===b.status)if(b.gzhead.extra){for(m=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>m&&(n.adler=p(n.adler,b.pending_buf,b.pending-m,m)),M(n),m=b.pending,b.pending!==b.pending_buf_size));)j(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>m&&(n.adler=p(n.adler,b.pending_buf,b.pending-m,m)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(73===b.status)if(b.gzhead.name){m=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>m&&(n.adler=p(n.adler,b.pending_buf,b.pending-m,m)),M(n),m=b.pending,b.pending===b.pending_buf_size)){D=1;break}D=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,j(b,D)}while(0!==D);b.gzhead.hcrc&&b.pending>m&&(n.adler=p(n.adler,b.pending_buf,b.pending-m,m)),0===D&&(b.gzindex=0,b.status=91)}else b.status=91;if(91===b.status)if(b.gzhead.comment){m=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>m&&(n.adler=p(n.adler,b.pending_buf,b.pending-m,m)),M(n),m=b.pending,b.pending===b.pending_buf_size)){D=1;break}D=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,j(b,D)}while(0!==D);b.gzhead.hcrc&&b.pending>m&&(n.adler=p(n.adler,b.pending_buf,b.pending-m,m)),0===D&&(b.status=103)}else b.status=103;if(103===b.status&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&M(n),b.pending+2<=b.pending_buf_size&&(j(b,255&n.adler),j(b,n.adler>>8&255),n.adler=0,b.status=I)):b.status=I),0!==b.pending){if(M(n),0===n.avail_out)return b.last_flush=-1,0}else if(0===n.avail_in&&F(Z)<=F(U)&&4!==Z)return J(n,-5);if(666===b.status&&0!==n.avail_in)return J(n,-5);if(0!==n.avail_in||0!==b.lookahead||0!==Z&&666!==b.status){var H=2===b.strategy?function(R,Y){for(var q;;){if(0===R.lookahead&&($(R),0===R.lookahead)){if(0===Y)return 1;break}if(R.match_length=0,q=a._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,q&&(L(R,!1),0===R.strm.avail_out))return 1}return R.insert=0,4===Y?(L(R,!0),0===R.strm.avail_out?3:4):R.last_lit&&(L(R,!1),0===R.strm.avail_out)?1:2}(b,Z):3===b.strategy?function(R,Y){for(var q,G,X,rt,et=R.window;;){if(R.lookahead<=N){if($(R),R.lookahead<=N&&0===Y)return 1;if(0===R.lookahead)break}if(R.match_length=0,R.lookahead>=3&&0<R.strstart&&(G=et[X=R.strstart-1])===et[++X]&&G===et[++X]&&G===et[++X]){rt=R.strstart+N;do{}while(G===et[++X]&&G===et[++X]&&G===et[++X]&&G===et[++X]&&G===et[++X]&&G===et[++X]&&G===et[++X]&&G===et[++X]&&X<rt);R.match_length=N-(rt-X),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=3?(q=a._tr_tally(R,1,R.match_length-3),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(q=a._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),q&&(L(R,!1),0===R.strm.avail_out))return 1}return R.insert=0,4===Y?(L(R,!0),0===R.strm.avail_out?3:4):R.last_lit&&(L(R,!1),0===R.strm.avail_out)?1:2}(b,Z):i[b.level].func(b,Z);if(3!==H&&4!==H||(b.status=666),1===H||3===H)return 0===n.avail_out&&(b.last_flush=-1),0;if(2===H&&(1===Z?a._tr_align(b):5!==Z&&(a._tr_stored_block(b,0,0,!1),3===Z&&(V(b.head),0===b.lookahead&&(b.strstart=0,b.block_start=0,b.insert=0))),M(n),0===n.avail_out))return b.last_flush=-1,0}return 4!==Z?0:b.wrap<=0?1:(2===b.wrap?(j(b,255&n.adler),j(b,n.adler>>8&255),j(b,n.adler>>16&255),j(b,n.adler>>24&255),j(b,255&n.total_in),j(b,n.total_in>>8&255),j(b,n.total_in>>16&255),j(b,n.total_in>>24&255)):(Q(b,n.adler>>>16),Q(b,65535&n.adler)),M(n),0<b.wrap&&(b.wrap=-b.wrap),0!==b.pending?0:1)},t.deflateEnd=function(n){var Z;return n&&n.state?42!==(Z=n.state.status)&&69!==Z&&73!==Z&&91!==Z&&103!==Z&&Z!==I&&666!==Z?J(n,l):(n.state=null,Z===I?J(n,-3):0):l},t.deflateSetDictionary=function(n,Z){var U,b,m,D,W,H,R,Y,q=Z.length;if(!n||!n.state||2===(D=(U=n.state).wrap)||1===D&&42!==U.status||U.lookahead)return l;for(1===D&&(n.adler=c(n.adler,Z,q,0)),U.wrap=0,q>=U.w_size&&(0===D&&(V(U.head),U.strstart=0,U.block_start=0,U.insert=0),Y=new f.Buf8(U.w_size),f.arraySet(Y,Z,q-U.w_size,U.w_size,0),Z=Y,q=U.w_size),W=n.avail_in,H=n.next_in,R=n.input,n.avail_in=q,n.next_in=0,n.input=Z,$(U);U.lookahead>=3;){for(b=U.strstart,m=U.lookahead-2;U.ins_h=(U.ins_h<<U.hash_shift^U.window[b+3-1])&U.hash_mask,U.prev[b&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=b,b++,--m;);U.strstart=b,U.lookahead=2,$(U)}return U.strstart+=U.lookahead,U.block_start=U.strstart,U.insert=U.lookahead,U.lookahead=0,U.match_length=U.prev_length=2,U.match_available=0,n.next_in=H,n.input=R,n.avail_in=W,U.wrap=D,0},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(k,S,t){"use strict";S.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(k,S,t){"use strict";S.exports=function(i,f){var a,c,p,C,g,v,o,l,s,h,u,d,w,r,_,E,A,z,P,N,K,y,I,e,x;e=i.input,p=(c=i.next_in)+(i.avail_in-5),x=i.output,g=(C=i.next_out)-(f-i.avail_out),v=C+(i.avail_out-257),o=(a=i.state).dmax,l=a.wsize,s=a.whave,h=a.wnext,u=a.window,d=a.hold,w=a.bits,r=a.lencode,_=a.distcode,E=(1<<a.lenbits)-1,A=(1<<a.distbits)-1;t:do{w<15&&(d+=e[c++]<<w,d+=e[c++]<<(w+=8),w+=8),z=r[d&E];e:for(;;){if(d>>>=P=z>>>24,w-=P,0==(P=z>>>16&255))x[C++]=65535&z;else{if(!(16&P)){if(0==(64&P)){z=r[(65535&z)+(d&(1<<P)-1)];continue e}if(32&P){a.mode=12;break t}i.msg="invalid literal/length code",a.mode=30;break t}N=65535&z,(P&=15)&&(w<P&&(d+=e[c++]<<w,w+=8),N+=d&(1<<P)-1,d>>>=P,w-=P),w<15&&(d+=e[c++]<<w,d+=e[c++]<<(w+=8),w+=8),z=_[d&A];n:for(;;){if(d>>>=P=z>>>24,w-=P,!(16&(P=z>>>16&255))){if(0==(64&P)){z=_[(65535&z)+(d&(1<<P)-1)];continue n}i.msg="invalid distance code",a.mode=30;break t}if(K=65535&z,w<(P&=15)&&(d+=e[c++]<<w,(w+=8)<P&&(d+=e[c++]<<w,w+=8)),o<(K+=d&(1<<P)-1)){i.msg="invalid distance too far back",a.mode=30;break t}if(d>>>=P,w-=P,(P=C-g)<K){if(s<(P=K-P)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break t}if(I=u,(y=0)===h){if(y+=l-P,P<N){for(N-=P;x[C++]=u[y++],--P;);y=C-K,I=x}}else if(h<P){if(y+=l+h-P,(P-=h)<N){for(N-=P;x[C++]=u[y++],--P;);if(y=0,h<N){for(N-=P=h;x[C++]=u[y++],--P;);y=C-K,I=x}}}else if(y+=h-P,P<N){for(N-=P;x[C++]=u[y++],--P;);y=C-K,I=x}for(;2<N;)x[C++]=I[y++],x[C++]=I[y++],x[C++]=I[y++],N-=3;N&&(x[C++]=I[y++],1<N&&(x[C++]=I[y++]))}else{for(y=C-K;x[C++]=x[y++],x[C++]=x[y++],x[C++]=x[y++],2<(N-=3););N&&(x[C++]=x[y++],1<N&&(x[C++]=x[y++]))}break}}break}}while(c<p&&C<v);c-=N=w>>3,d&=(1<<(w-=N<<3))-1,i.next_in=c,i.next_out=C,i.avail_in=c<p?p-c+5:5-(c-p),i.avail_out=C<v?v-C+257:257-(C-v),a.hold=d,a.bits=w}},{}],49:[function(k,S,t){"use strict";var i=k("../utils/common"),f=k("./adler32"),a=k("./crc32"),c=k("./inffast"),p=k("./inftrees"),o=-2;function u(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(y){var I;return y&&y.state?(y.total_in=y.total_out=(I=y.state).total=0,y.msg="",I.wrap&&(y.adler=1&I.wrap),I.mode=1,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new i.Buf32(852),I.distcode=I.distdyn=new i.Buf32(592),I.sane=1,I.back=-1,0):o}function r(y){var I;return y&&y.state?((I=y.state).wsize=0,I.whave=0,I.wnext=0,w(y)):o}function _(y,I){var e,x;return y&&y.state?(x=y.state,I<0?(e=0,I=-I):(e=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?o:(null!==x.window&&x.wbits!==I&&(x.window=null),x.wrap=e,x.wbits=I,r(y))):o}function E(y,I){var e,x;return y?(x=new d,(y.state=x).window=null,0!==(e=_(y,I))&&(y.state=null),e):o}var A,z,P=!0;function N(y){if(P){var I;for(A=new i.Buf32(512),z=new i.Buf32(32),I=0;I<144;)y.lens[I++]=8;for(;I<256;)y.lens[I++]=9;for(;I<280;)y.lens[I++]=7;for(;I<288;)y.lens[I++]=8;for(p(1,y.lens,0,288,A,0,y.work,{bits:9}),I=0;I<32;)y.lens[I++]=5;p(2,y.lens,0,32,z,0,y.work,{bits:5}),P=!1}y.lencode=A,y.lenbits=9,y.distcode=z,y.distbits=5}function K(y,I,e,x){var T,O=y.state;return null===O.window&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new i.Buf8(O.wsize)),x>=O.wsize?(i.arraySet(O.window,I,e-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(x<(T=O.wsize-O.wnext)&&(T=x),i.arraySet(O.window,I,e-x,T,O.wnext),(x-=T)?(i.arraySet(O.window,I,e-x,x,0),O.wnext=x,O.whave=O.wsize):(O.wnext+=T,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=T))),0}t.inflateReset=r,t.inflateReset2=_,t.inflateResetKeep=w,t.inflateInit=function(y){return E(y,15)},t.inflateInit2=E,t.inflate=function(y,I){var e,x,T,O,J,F,V,M,L,j,Q,B,$,nt,tt,it,at,ot,ht,ut,n,Z,U,b,m=0,D=new i.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&0!==y.avail_in)return o;12===(e=y.state).mode&&(e.mode=13),J=y.next_out,T=y.output,O=y.next_in,x=y.input,M=e.hold,L=e.bits,j=F=y.avail_in,Q=V=y.avail_out,Z=0;t:for(;;)switch(e.mode){case 1:if(0===e.wrap){e.mode=13;break}for(;L<16;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(2&e.wrap&&35615===M){D[e.check=0]=255&M,D[1]=M>>>8&255,e.check=a(e.check,D,2,0),L=M=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&M)<<8)+(M>>8))%31){y.msg="incorrect header check",e.mode=30;break}if(8!=(15&M)){y.msg="unknown compression method",e.mode=30;break}if(L-=4,n=8+(15&(M>>>=4)),0===e.wbits)e.wbits=n;else if(n>e.wbits){y.msg="invalid window size",e.mode=30;break}e.dmax=1<<n,y.adler=e.check=1,e.mode=512&M?10:12,L=M=0;break;case 2:for(;L<16;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(e.flags=M,8!=(255&e.flags)){y.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){y.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=M>>8&1),512&e.flags&&(D[0]=255&M,D[1]=M>>>8&255,e.check=a(e.check,D,2,0)),L=M=0,e.mode=3;case 3:for(;L<32;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}e.head&&(e.head.time=M),512&e.flags&&(D[0]=255&M,D[1]=M>>>8&255,D[2]=M>>>16&255,D[3]=M>>>24&255,e.check=a(e.check,D,4,0)),L=M=0,e.mode=4;case 4:for(;L<16;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}e.head&&(e.head.xflags=255&M,e.head.os=M>>8),512&e.flags&&(D[0]=255&M,D[1]=M>>>8&255,e.check=a(e.check,D,2,0)),L=M=0,e.mode=5;case 5:if(1024&e.flags){for(;L<16;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}e.length=M,e.head&&(e.head.extra_len=M),512&e.flags&&(D[0]=255&M,D[1]=M>>>8&255,e.check=a(e.check,D,2,0)),L=M=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(F<(B=e.length)&&(B=F),B&&(e.head&&(n=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),i.arraySet(e.head.extra,x,O,B,n)),512&e.flags&&(e.check=a(e.check,x,B,O)),F-=B,O+=B,e.length-=B),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(0===F)break t;for(B=0;n=x[O+B++],e.head&&n&&e.length<65536&&(e.head.name+=String.fromCharCode(n)),n&&B<F;);if(512&e.flags&&(e.check=a(e.check,x,B,O)),F-=B,O+=B,n)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(0===F)break t;for(B=0;n=x[O+B++],e.head&&n&&e.length<65536&&(e.head.comment+=String.fromCharCode(n)),n&&B<F;);if(512&e.flags&&(e.check=a(e.check,x,B,O)),F-=B,O+=B,n)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;L<16;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(M!==(65535&e.check)){y.msg="header crc mismatch",e.mode=30;break}L=M=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),y.adler=e.check=0,e.mode=12;break;case 10:for(;L<32;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}y.adler=e.check=u(M),L=M=0,e.mode=11;case 11:if(0===e.havedict)return y.next_out=J,y.avail_out=V,y.next_in=O,y.avail_in=F,e.hold=M,e.bits=L,2;y.adler=e.check=1,e.mode=12;case 12:if(5===I||6===I)break t;case 13:if(e.last){M>>>=7&L,L-=7&L,e.mode=27;break}for(;L<3;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}switch(e.last=1&M,L-=1,3&(M>>>=1)){case 0:e.mode=14;break;case 1:if(N(e),e.mode=20,6!==I)break;M>>>=2,L-=2;break t;case 2:e.mode=17;break;case 3:y.msg="invalid block type",e.mode=30}M>>>=2,L-=2;break;case 14:for(M>>>=7&L,L-=7&L;L<32;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if((65535&M)!=(M>>>16^65535)){y.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&M,L=M=0,e.mode=15,6===I)break t;case 15:e.mode=16;case 16:if(B=e.length){if(F<B&&(B=F),V<B&&(B=V),0===B)break t;i.arraySet(T,x,O,B,J),F-=B,O+=B,V-=B,J+=B,e.length-=B;break}e.mode=12;break;case 17:for(;L<14;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(e.nlen=257+(31&M),L-=5,e.ndist=1+(31&(M>>>=5)),L-=5,e.ncode=4+(15&(M>>>=5)),M>>>=4,L-=4,286<e.nlen||30<e.ndist){y.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;L<3;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}e.lens[W[e.have++]]=7&M,M>>>=3,L-=3}for(;e.have<19;)e.lens[W[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,Z=p(0,e.lens,0,19,e.lencode,0,e.work,U={bits:e.lenbits}),e.lenbits=U.bits,Z){y.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;it=(m=e.lencode[M&(1<<e.lenbits)-1])>>>16&255,at=65535&m,!((tt=m>>>24)<=L);){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(at<16)M>>>=tt,L-=tt,e.lens[e.have++]=at;else{if(16===at){for(b=tt+2;L<b;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(M>>>=tt,L-=tt,0===e.have){y.msg="invalid bit length repeat",e.mode=30;break}n=e.lens[e.have-1],B=3+(3&M),M>>>=2,L-=2}else if(17===at){for(b=tt+3;L<b;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}L-=tt,n=0,B=3+(7&(M>>>=tt)),M>>>=3,L-=3}else{for(b=tt+7;L<b;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}L-=tt,n=0,B=11+(127&(M>>>=tt)),M>>>=7,L-=7}if(e.have+B>e.nlen+e.ndist){y.msg="invalid bit length repeat",e.mode=30;break}for(;B--;)e.lens[e.have++]=n}}if(30===e.mode)break;if(0===e.lens[256]){y.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,Z=p(1,e.lens,0,e.nlen,e.lencode,0,e.work,U={bits:e.lenbits}),e.lenbits=U.bits,Z){y.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,Z=p(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,U={bits:e.distbits}),e.distbits=U.bits,Z){y.msg="invalid distances set",e.mode=30;break}if(e.mode=20,6===I)break t;case 20:e.mode=21;case 21:if(6<=F&&258<=V){y.next_out=J,y.avail_out=V,y.next_in=O,y.avail_in=F,e.hold=M,e.bits=L,c(y,Q),J=y.next_out,T=y.output,V=y.avail_out,O=y.next_in,x=y.input,F=y.avail_in,M=e.hold,L=e.bits,12===e.mode&&(e.back=-1);break}for(e.back=0;it=(m=e.lencode[M&(1<<e.lenbits)-1])>>>16&255,at=65535&m,!((tt=m>>>24)<=L);){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(it&&0==(240&it)){for(ot=tt,ht=it,ut=at;it=(m=e.lencode[ut+((M&(1<<ot+ht)-1)>>ot)])>>>16&255,at=65535&m,!(ot+(tt=m>>>24)<=L);){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}M>>>=ot,L-=ot,e.back+=ot}if(M>>>=tt,L-=tt,e.back+=tt,e.length=at,0===it){e.mode=26;break}if(32&it){e.back=-1,e.mode=12;break}if(64&it){y.msg="invalid literal/length code",e.mode=30;break}e.extra=15&it,e.mode=22;case 22:if(e.extra){for(b=e.extra;L<b;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}e.length+=M&(1<<e.extra)-1,M>>>=e.extra,L-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;it=(m=e.distcode[M&(1<<e.distbits)-1])>>>16&255,at=65535&m,!((tt=m>>>24)<=L);){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(0==(240&it)){for(ot=tt,ht=it,ut=at;it=(m=e.distcode[ut+((M&(1<<ot+ht)-1)>>ot)])>>>16&255,at=65535&m,!(ot+(tt=m>>>24)<=L);){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}M>>>=ot,L-=ot,e.back+=ot}if(M>>>=tt,L-=tt,e.back+=tt,64&it){y.msg="invalid distance code",e.mode=30;break}e.offset=at,e.extra=15&it,e.mode=24;case 24:if(e.extra){for(b=e.extra;L<b;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}e.offset+=M&(1<<e.extra)-1,M>>>=e.extra,L-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){y.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(0===V)break t;if(e.offset>(B=Q-V)){if((B=e.offset-B)>e.whave&&e.sane){y.msg="invalid distance too far back",e.mode=30;break}$=B>e.wnext?e.wsize-(B-=e.wnext):e.wnext-B,B>e.length&&(B=e.length),nt=e.window}else nt=T,$=J-e.offset,B=e.length;for(V<B&&(B=V),V-=B,e.length-=B;T[J++]=nt[$++],--B;);0===e.length&&(e.mode=21);break;case 26:if(0===V)break t;T[J++]=e.length,V--,e.mode=21;break;case 27:if(e.wrap){for(;L<32;){if(0===F)break t;F--,M|=x[O++]<<L,L+=8}if(y.total_out+=Q-=V,e.total+=Q,Q&&(y.adler=e.check=e.flags?a(e.check,T,Q,J-Q):f(e.check,T,Q,J-Q)),Q=V,(e.flags?M:u(M))!==e.check){y.msg="incorrect data check",e.mode=30;break}L=M=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;L<32;){if(0===F)break t;F--,M+=x[O++]<<L,L+=8}if(M!==(4294967295&e.total)){y.msg="incorrect length check",e.mode=30;break}L=M=0}e.mode=29;case 29:Z=1;break t;case 30:Z=-3;break t;case 31:return-4;default:return o}return y.next_out=J,y.avail_out=V,y.next_in=O,y.avail_in=F,e.hold=M,e.bits=L,(e.wsize||Q!==y.avail_out&&e.mode<30&&(e.mode<27||4!==I))&&K(y,y.output,y.next_out,Q-y.avail_out)?(e.mode=31,-4):(Q-=y.avail_out,y.total_in+=j-=y.avail_in,y.total_out+=Q,e.total+=Q,e.wrap&&Q&&(y.adler=e.check=e.flags?a(e.check,T,Q,y.next_out-Q):f(e.check,T,Q,y.next_out-Q)),y.data_type=e.bits+(e.last?64:0)+(12===e.mode?128:0)+(20===e.mode||15===e.mode?256:0),(0==j&&0===Q||4===I)&&0===Z&&(Z=-5),Z)},t.inflateEnd=function(y){if(!y||!y.state)return o;var I=y.state;return I.window&&(I.window=null),y.state=null,0},t.inflateGetHeader=function(y,I){var e;return y&&y.state?0==(2&(e=y.state).wrap)?o:((e.head=I).done=!1,0):o},t.inflateSetDictionary=function(y,I){var e,x=I.length;return y&&y.state?0!==(e=y.state).wrap&&11!==e.mode?o:11===e.mode&&f(1,I,x,0)!==e.check?-3:K(y,I,x,x)?(e.mode=31,-4):(e.havedict=1,0):o},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(k,S,t){"use strict";var i=k("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];S.exports=function(C,g,v,o,l,s,h,u){var d,w,r,_,E,A,z,P,N,K=u.bits,y=0,I=0,e=0,x=0,T=0,O=0,J=0,F=0,V=0,M=0,L=null,j=0,Q=new i.Buf16(16),B=new i.Buf16(16),$=null,nt=0;for(y=0;y<=15;y++)Q[y]=0;for(I=0;I<o;I++)Q[g[v+I]]++;for(T=K,x=15;1<=x&&0===Q[x];x--);if(x<T&&(T=x),0===x)return l[s++]=20971520,l[s++]=20971520,u.bits=1,0;for(e=1;e<x&&0===Q[e];e++);for(T<e&&(T=e),y=F=1;y<=15;y++)if(F<<=1,(F-=Q[y])<0)return-1;if(0<F&&(0===C||1!==x))return-1;for(B[1]=0,y=1;y<15;y++)B[y+1]=B[y]+Q[y];for(I=0;I<o;I++)0!==g[v+I]&&(h[B[g[v+I]]++]=I);if(A=0===C?(L=$=h,19):1===C?(L=f,j-=257,$=a,nt-=257,256):(L=c,$=p,-1),y=e,E=s,J=I=M=0,r=-1,_=(V=1<<(O=T))-1,1===C&&852<V||2===C&&592<V)return 1;for(;;){for(z=y-J,N=h[I]<A?(P=0,h[I]):h[I]>A?(P=$[nt+h[I]],L[j+h[I]]):(P=96,0),d=1<<y-J,e=w=1<<O;l[E+(M>>J)+(w-=d)]=z<<24|P<<16|N|0,0!==w;);for(d=1<<y-1;M&d;)d>>=1;if(0!==d?(M&=d-1,M+=d):M=0,I++,0==--Q[y]){if(y===x)break;y=g[v+h[I]]}if(T<y&&(M&_)!==r){for(0===J&&(J=T),E+=e,F=1<<(O=y-J);O+J<x&&!((F-=Q[O+J])<=0);)O++,F<<=1;if(V+=1<<O,1===C&&852<V||2===C&&592<V)return 1;l[r=M&_]=T<<24|O<<16|E-s|0}}return 0!==M&&(l[E+M]=y-J<<24|64<<16|0),u.bits=T,0}},{"../utils/common":41}],51:[function(k,S,t){"use strict";S.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(k,S,t){"use strict";var i=k("../utils/common");function c(m){for(var D=m.length;0<=--D;)m[D]=0}var g=256,v=286,o=30,h=15,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(576);c(K);var y=new Array(60);c(y);var I=new Array(512);c(I);var e=new Array(256);c(e);var x=new Array(29);c(x);var T,O,J,F=new Array(o);function V(m,D,W,H,R){this.static_tree=m,this.extra_bits=D,this.extra_base=W,this.elems=H,this.max_length=R,this.has_stree=m&&m.length}function M(m,D){this.dyn_tree=m,this.max_code=0,this.stat_desc=D}function L(m){return m<256?I[m]:I[256+(m>>>7)]}function j(m,D){m.pending_buf[m.pending++]=255&D,m.pending_buf[m.pending++]=D>>>8&255}function Q(m,D,W){m.bi_valid>16-W?(m.bi_buf|=D<<m.bi_valid&65535,j(m,m.bi_buf),m.bi_buf=D>>16-m.bi_valid,m.bi_valid+=W-16):(m.bi_buf|=D<<m.bi_valid&65535,m.bi_valid+=W)}function B(m,D,W){Q(m,W[2*D],W[2*D+1])}function $(m,D){for(var W=0;W|=1&m,m>>>=1,W<<=1,0<--D;);return W>>>1}function nt(m,D,W){var H,R,Y=new Array(16),q=0;for(H=1;H<=h;H++)Y[H]=q=q+W[H-1]<<1;for(R=0;R<=D;R++){var G=m[2*R+1];0!==G&&(m[2*R]=$(Y[G]++,G))}}function tt(m){var D;for(D=0;D<v;D++)m.dyn_ltree[2*D]=0;for(D=0;D<o;D++)m.dyn_dtree[2*D]=0;for(D=0;D<19;D++)m.bl_tree[2*D]=0;m.dyn_ltree[512]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function it(m){8<m.bi_valid?j(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function at(m,D,W,H){var R=2*D,Y=2*W;return m[R]<m[Y]||m[R]===m[Y]&&H[D]<=H[W]}function ot(m,D,W){for(var H=m.heap[W],R=W<<1;R<=m.heap_len&&(R<m.heap_len&&at(D,m.heap[R+1],m.heap[R],m.depth)&&R++,!at(D,H,m.heap[R],m.depth));)m.heap[W]=m.heap[R],W=R,R<<=1;m.heap[W]=H}function ht(m,D,W){var H,R,Y,q,G=0;if(0!==m.last_lit)for(;H=m.pending_buf[m.d_buf+2*G]<<8|m.pending_buf[m.d_buf+2*G+1],R=m.pending_buf[m.l_buf+G],G++,0===H?B(m,R,D):(B(m,(Y=e[R])+g+1,D),0!==(q=A[Y])&&Q(m,R-=x[Y],q),B(m,Y=L(--H),W),0!==(q=z[Y])&&Q(m,H-=F[Y],q)),G<m.last_lit;);B(m,256,D)}function ut(m,D){var W,H,R,Y=D.dyn_tree,q=D.stat_desc.static_tree,G=D.stat_desc.has_stree,X=D.stat_desc.elems,rt=-1;for(m.heap_len=0,m.heap_max=573,W=0;W<X;W++)0!==Y[2*W]?(m.heap[++m.heap_len]=rt=W,m.depth[W]=0):Y[2*W+1]=0;for(;m.heap_len<2;)Y[2*(R=m.heap[++m.heap_len]=rt<2?++rt:0)]=1,m.depth[R]=0,m.opt_len--,G&&(m.static_len-=q[2*R+1]);for(D.max_code=rt,W=m.heap_len>>1;1<=W;W--)ot(m,Y,W);for(R=X;W=m.heap[1],m.heap[1]=m.heap[m.heap_len--],ot(m,Y,1),H=m.heap[1],m.heap[--m.heap_max]=W,m.heap[--m.heap_max]=H,Y[2*R]=Y[2*W]+Y[2*H],m.depth[R]=(m.depth[W]>=m.depth[H]?m.depth[W]:m.depth[H])+1,Y[2*W+1]=Y[2*H+1]=R,m.heap[1]=R++,ot(m,Y,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(et,ct){var _t,dt,pt,st,gt,bt,ft=ct.dyn_tree,yt=ct.max_code,xt=ct.stat_desc.static_tree,Ct=ct.stat_desc.has_stree,kt=ct.stat_desc.extra_bits,wt=ct.stat_desc.extra_base,mt=ct.stat_desc.max_length,vt=0;for(st=0;st<=h;st++)et.bl_count[st]=0;for(ft[2*et.heap[et.heap_max]+1]=0,_t=et.heap_max+1;_t<573;_t++)mt<(st=ft[2*ft[2*(dt=et.heap[_t])+1]+1]+1)&&(st=mt,vt++),ft[2*dt+1]=st,yt<dt||(et.bl_count[st]++,gt=0,wt<=dt&&(gt=kt[dt-wt]),et.opt_len+=(bt=ft[2*dt])*(st+gt),Ct&&(et.static_len+=bt*(xt[2*dt+1]+gt)));if(0!==vt){do{for(st=mt-1;0===et.bl_count[st];)st--;et.bl_count[st]--,et.bl_count[st+1]+=2,et.bl_count[mt]--,vt-=2}while(0<vt);for(st=mt;0!==st;st--)for(dt=et.bl_count[st];0!==dt;)yt<(pt=et.heap[--_t])||(ft[2*pt+1]!==st&&(et.opt_len+=(st-ft[2*pt+1])*ft[2*pt],ft[2*pt+1]=st),dt--)}}(m,D),nt(Y,rt,m.bl_count)}function n(m,D,W){var H,R,Y=-1,q=D[1],G=0,X=7,rt=4;for(0===q&&(X=138,rt=3),D[2*(W+1)+1]=65535,H=0;H<=W;H++)R=q,q=D[2*(H+1)+1],++G<X&&R===q||(G<rt?m.bl_tree[2*R]+=G:0!==R?(R!==Y&&m.bl_tree[2*R]++,m.bl_tree[32]++):G<=10?m.bl_tree[34]++:m.bl_tree[36]++,Y=R,rt=(G=0)===q?(X=138,3):R===q?(X=6,3):(X=7,4))}function Z(m,D,W){var H,R,Y=-1,q=D[1],G=0,X=7,rt=4;for(0===q&&(X=138,rt=3),H=0;H<=W;H++)if(R=q,q=D[2*(H+1)+1],!(++G<X&&R===q)){if(G<rt)for(;B(m,R,m.bl_tree),0!=--G;);else 0!==R?(R!==Y&&(B(m,R,m.bl_tree),G--),B(m,16,m.bl_tree),Q(m,G-3,2)):G<=10?(B(m,17,m.bl_tree),Q(m,G-3,3)):(B(m,18,m.bl_tree),Q(m,G-11,7));Y=R,rt=(G=0)===q?(X=138,3):R===q?(X=6,3):(X=7,4)}}c(F);var U=!1;function b(m,D,W,H){var R,Y,q;Q(m,0+(H?1:0),3),Y=D,q=W,it(R=m),j(R,q),j(R,~q),i.arraySet(R.pending_buf,R.window,Y,q,R.pending),R.pending+=q}t._tr_init=function(m){U||(function(){var D,W,H,R,Y,q=new Array(16);for(R=H=0;R<28;R++)for(x[R]=H,D=0;D<1<<A[R];D++)e[H++]=R;for(e[H-1]=R,R=Y=0;R<16;R++)for(F[R]=Y,D=0;D<1<<z[R];D++)I[Y++]=R;for(Y>>=7;R<o;R++)for(F[R]=Y<<7,D=0;D<1<<z[R]-7;D++)I[256+Y++]=R;for(W=0;W<=h;W++)q[W]=0;for(D=0;D<=143;)K[2*D+1]=8,D++,q[8]++;for(;D<=255;)K[2*D+1]=9,D++,q[9]++;for(;D<=279;)K[2*D+1]=7,D++,q[7]++;for(;D<=287;)K[2*D+1]=8,D++,q[8]++;for(nt(K,287,q),D=0;D<o;D++)y[2*D+1]=5,y[2*D]=$(D,5);T=new V(K,A,257,v,h),O=new V(y,z,0,o,h),J=new V(new Array(0),P,0,19,7)}(),U=!0),m.l_desc=new M(m.dyn_ltree,T),m.d_desc=new M(m.dyn_dtree,O),m.bl_desc=new M(m.bl_tree,J),m.bi_buf=0,m.bi_valid=0,tt(m)},t._tr_stored_block=b,t._tr_flush_block=function(m,D,W,H){var R,Y,q=0;0<m.level?(2===m.strm.data_type&&(m.strm.data_type=function(G){var X,rt=4093624447;for(X=0;X<=31;X++,rt>>>=1)if(1&rt&&0!==G.dyn_ltree[2*X])return 0;if(0!==G.dyn_ltree[18]||0!==G.dyn_ltree[20]||0!==G.dyn_ltree[26])return 1;for(X=32;X<g;X++)if(0!==G.dyn_ltree[2*X])return 1;return 0}(m)),ut(m,m.l_desc),ut(m,m.d_desc),q=function(G){var X;for(n(G,G.dyn_ltree,G.l_desc.max_code),n(G,G.dyn_dtree,G.d_desc.max_code),ut(G,G.bl_desc),X=18;3<=X&&0===G.bl_tree[2*N[X]+1];X--);return G.opt_len+=3*(X+1)+5+5+4,X}(m),(Y=m.static_len+3+7>>>3)<=(R=m.opt_len+3+7>>>3)&&(R=Y)):R=Y=W+5,W+4<=R&&-1!==D?b(m,D,W,H):4===m.strategy||Y===R?(Q(m,2+(H?1:0),3),ht(m,K,y)):(Q(m,4+(H?1:0),3),function(G,X,rt,et){var ct;for(Q(G,X-257,5),Q(G,rt-1,5),Q(G,et-4,4),ct=0;ct<et;ct++)Q(G,G.bl_tree[2*N[ct]+1],3);Z(G,G.dyn_ltree,X-1),Z(G,G.dyn_dtree,rt-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,q+1),ht(m,m.dyn_ltree,m.dyn_dtree)),tt(m),H&&it(m)},t._tr_tally=function(m,D,W){return m.pending_buf[m.d_buf+2*m.last_lit]=D>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&D,m.pending_buf[m.l_buf+m.last_lit]=255&W,m.last_lit++,0===D?m.dyn_ltree[2*W]++:(m.matches++,D--,m.dyn_ltree[2*(e[W]+g+1)]++,m.dyn_dtree[2*L(D)]++),m.last_lit===m.lit_bufsize-1},t._tr_align=function(m){var D;Q(m,2,3),B(m,256,K),16===(D=m).bi_valid?(j(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):8<=D.bi_valid&&(D.pending_buf[D.pending++]=255&D.bi_buf,D.bi_buf>>=8,D.bi_valid-=8)}},{"../utils/common":41}],53:[function(k,S,t){"use strict";S.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(k,S,t){(function(i){!function(f,a){"use strict";if(!f.setImmediate){var c,p,C,g,v=1,o={},l=!1,s=f.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(f);h=h&&h.setTimeout?h:f,c="[object process]"==={}.toString.call(f.process)?function(r){process.nextTick(function(){d(r)})}:function(){if(f.postMessage&&!f.importScripts){var r=!0,_=f.onmessage;return f.onmessage=function(){r=!1},f.postMessage("","*"),f.onmessage=_,r}}()?(g="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",w,!1):f.attachEvent("onmessage",w),function(r){f.postMessage(g+r,"*")}):f.MessageChannel?((C=new MessageChannel).port1.onmessage=function(r){d(r.data)},function(r){C.port2.postMessage(r)}):s&&"onreadystatechange"in s.createElement("script")?(p=s.documentElement,function(r){var _=s.createElement("script");_.onreadystatechange=function(){d(r),_.onreadystatechange=null,p.removeChild(_),_=null},p.appendChild(_)}):function(r){setTimeout(d,0,r)},h.setImmediate=function(r){"function"!=typeof r&&(r=new Function(""+r));for(var _=new Array(arguments.length-1),E=0;E<_.length;E++)_[E]=arguments[E+1];return o[v]={callback:r,args:_},c(v),v++},h.clearImmediate=u}function u(r){delete o[r]}function d(r){if(l)setTimeout(d,0,r);else{var _=o[r];if(_){l=!0;try{!function(E){var A=E.callback,z=E.args;switch(z.length){case 0:A();break;case 1:A(z[0]);break;case 2:A(z[0],z[1]);break;case 3:A(z[0],z[1],z[2]);break;default:A.apply(undefined,z)}}(_)}finally{u(r),l=!1}}}}function w(r){r.source===f&&"string"==typeof r.data&&0===r.data.indexOf(g)&&d(+r.data.slice(g.length))}}("undefined"==typeof self?void 0===i?this:i:self)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}}]);